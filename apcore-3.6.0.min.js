if(!function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).dragula=e()}(function(){return function n(o,a,s){function r(i,e){if(!a[i]){if(!o[i]){var t="function"==typeof require&&require;if(!e&&t)return t(i,!0);if(c)return c(i,!0);e=new Error("Cannot find module '"+i+"'");throw e.code="MODULE_NOT_FOUND",e}t=a[i]={exports:{}};o[i][0].call(t.exports,function(e){var t=o[i][1][e];return r(t||e)},t,t.exports,n,o,a,s)}return a[i].exports}for(var c="function"==typeof require&&require,e=0;e<s.length;e++)r(s[e]);return r}({1:[function(e,t,i){"use strict";function n(e){var t=o[e];return t?t.lastIndex=0:o[e]=t=new RegExp(a+e+s,"g"),t}var o={},a="(?:^|\\s)",s="(?:\\s|$)";t.exports={add:function(e,t){var i=e.className;i.length?n(t).test(i)||(e.className+=" "+t):e.className=t},rm:function(e,t){e.className=e.className.replace(n(t)," ").trim()}}},{}],2:[function(e,t,i){!function(o){"use strict";function R(e,t,i,n){o.navigator.pointerEnabled?X[t](e,{mouseup:"pointerup",mousedown:"pointerdown",mousemove:"pointermove"}[i],n):o.navigator.msPointerEnabled?X[t](e,{mouseup:"MSPointerUp",mousedown:"MSPointerDown",mousemove:"MSPointerMove"}[i],n):(X[t](e,{mouseup:"touchend",mousedown:"touchstart",mousemove:"touchmove"}[i],n),X[t](e,i,n))}function z(e){return void 0!==e.touches?e.touches.length:void 0!==e.which&&0!==e.which?e.which:void 0!==e.buttons?e.buttons:void 0!==(e=e.button)?1&e?1:2&e?3:4&e?2:0:void 0}function W(e,t){return void 0!==o[t]?o[t]:(ee.clientHeight?ee:q.body)[e]}function U(e,t,i){var e=e||{},n=e.className;return e.className+=" gu-hide",t=q.elementFromPoint(t,i),e.className=n,t}function G(){return!1}function Y(){return!0}function B(e){return e.width||e.right-e.left}function Z(e){return e.height||e.bottom-e.top}function H(e){return e.parentNode===q?null:e.parentNode}function V(e){return"INPUT"===e.tagName||"TEXTAREA"===e.tagName||"SELECT"===e.tagName||function e(t){return!!t&&"false"!==t.contentEditable&&("true"===t.contentEditable||e(H(t)))}(e)}function Q(t){return t.nextElementSibling||function(){for(var e=t;(e=e.nextSibling)&&1!==e.nodeType;);return e}()}function J(e,t){var t=(t=t).targetTouches&&t.targetTouches.length?t.targetTouches[0]:t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,i={pageX:"clientX",pageY:"clientY"};return t[e=e in i&&!(e in t)&&i[e]in t?i[e]:e]}var $=e("contra/emitter"),X=e("crossvent"),K=e("./classes"),q=document,ee=q.documentElement;t.exports=function(e,t){function a(e){return-1!==_.containers.indexOf(e)||O.isContainer(e)}function i(e){e=e?"remove":"add";R(ee,e,"mousedown",E),R(ee,e,"mouseup",d)}function n(e){R(ee,e?"remove":"add","mousemove",F)}function o(e){e=e?"remove":"add";X[e](ee,"selectstart",s),X[e](ee,"click",s)}function s(e){k&&e.preventDefault()}function E(e){var t,i;w=e.clientX,P=e.clientY,1!==z(e)||e.metaKey||e.ctrlKey||(i=r(t=e.target))&&(k=i,n(),"mousedown"===e.type)&&(V(t)?t.focus():e.preventDefault())}function F(e){if(k)if(0===z(e))d({});else if(void 0===e.clientX||e.clientX!==w||void 0===e.clientY||e.clientY!==P){if(O.ignoreInputTextSelection){var t=J("clientX",e),i=J("clientY",e);if(V(q.elementFromPoint(t,i)))return}var t=k,i=(n(!0),o(),l(),c(t),function(e){e=e.getBoundingClientRect();return{left:e.left+W("scrollLeft","pageXOffset"),top:e.top+W("scrollTop","pageYOffset")}}(D));M=J("pageX",e)-i.left,S=J("pageY",e)-i.top,K.add(T||D,"gu-transit"),C||(t=D.getBoundingClientRect(),(C=D.cloneNode(!0)).style.width=B(t)+"px",C.style.height=Z(t)+"px",K.rm(C,"gu-transit"),K.add(C,"gu-mirror"),O.mirrorContainer.appendChild(C),R(ee,"add","mousemove",y),K.add(O.mirrorContainer,"gu-unselectable"),_.emit("cloned",C,D,"mirror")),y(e)}}function r(e){if(!(_.dragging&&C||a(e))){for(var t=e;H(e)&&!1===a(H(e));){if(O.invalid(e,t))return;if(!(e=H(e)))return}var i=H(e);if(i&&!O.invalid(e,t))if(O.moves(e,i,t,Q(e)))return{item:e,source:i}}}function c(e){var t,i;t=e.item,i=e.source,("boolean"==typeof O.copy?O.copy:O.copy(t,i))&&(T=e.item.cloneNode(!0),_.emit("cloned",T,e.item,"copy")),A=e.source,D=e.item,N=x=Q(e.item),_.dragging=!0,_.emit("drag",D,A)}function l(){var e;_.dragging&&p(e=T||D,H(e))}function u(){n(!(k=!1)),o(!0)}function d(e){var t,i;u(),_.dragging&&(t=T||D,i=J("clientX",e),e=J("clientY",e),(i=b(U(C,i,e),i,e))&&(T&&O.copySortSource||!T||i!==A)?p(t,i):(O.removeOnSpill?g:h)())}function p(e,t){var i=H(e);T&&O.copySortSource&&t===A&&i.removeChild(D),f(t)?_.emit("cancel",e,A,A):_.emit("drop",e,t,A,x),m()}function g(){var e,t;_.dragging&&((t=H(e=T||D))&&t.removeChild(e),_.emit(T?"cancel":"remove",e,t,A),m())}function h(e){var t,i,n;_.dragging&&(e=0<arguments.length?e:O.revertOnSpill,!1===(n=f(i=H(t=T||D)))&&e&&(T?i&&i.removeChild(T):A.insertBefore(t,N)),n||e?_.emit("cancel",t,A,A):_.emit("drop",t,i,A,x),m())}function m(){var e=T||D;u(),C&&(K.rm(O.mirrorContainer,"gu-unselectable"),R(ee,"remove","mousemove",y),H(C).removeChild(C),C=null),e&&K.rm(e,"gu-transit"),j&&clearTimeout(j),_.dragging=!1,L&&_.emit("out",e,L,A),_.emit("dragend",e),A=D=T=N=x=j=L=null}function f(e,t){t=void 0!==t?t:C?x:Q(T||D);return e===A&&t===N}function b(t,i,n){for(var o=t;o&&!function(){var e=a(o);if(!1!==e)return e=I(o,t),e=v(o,e,i,n),f(o,e)||O.accepts(D,o,A,e)}();)o=H(o);return o}function y(e){function t(e){_.emit(e,a,L,A)}if(C){e.preventDefault();var i=J("clientX",e),e=J("clientY",e),n=i-M,o=e-S,a=(C.style.left=n+"px",C.style.top=o+"px",T||D),n=U(C,i,e),o=b(n,i,e),s=null!==o&&o!==L,r=(!s&&null!==o||(L&&t("out"),L=o,s&&t("over")),H(a));if(o===A&&T&&!O.copySortSource)r&&r.removeChild(a);else{var c,n=I(o,n);if(null!==n)c=v(o,n,i,e);else{if(!0!==O.revertOnSpill||T)return void(T&&r&&r.removeChild(a));c=N,o=A}(null===c&&s||c!==a&&c!==Q(a))&&(x=c,o.insertBefore(a,c),_.emit("shadow",a,o,A))}}}function I(e,t){for(var i=t;i!==e&&H(i)!==e;)i=H(i);return i===ee?null:i}function v(e,t,i,n){var o,a="horizontal"===O.direction;if(t!==e)return o=t.getBoundingClientRect(),(a?i>o.left+B(o)/2:n>o.top+Z(o)/2)?Q(t):t;for(var s,r,c=e.children.length,l=0;l<c;l++){if(r=(s=e.children[l]).getBoundingClientRect(),a&&r.left+r.width/2>i)return s;if(!a&&r.top+r.height/2>n)return s}return null}1===arguments.length&&!1===Array.isArray(e)&&(t=e,e=[]);var C,A,D,M,S,w,P,N,x,T,j,k,L=null,O=t||{},_=(void 0===O.moves&&(O.moves=Y),void 0===O.accepts&&(O.accepts=Y),void 0===O.invalid&&(O.invalid=function(){return!1}),void 0===O.containers&&(O.containers=e||[]),void 0===O.isContainer&&(O.isContainer=G),void 0===O.copy&&(O.copy=!1),void 0===O.copySortSource&&(O.copySortSource=!1),void 0===O.revertOnSpill&&(O.revertOnSpill=!1),void 0===O.removeOnSpill&&(O.removeOnSpill=!1),void 0===O.direction&&(O.direction="vertical"),void 0===O.ignoreInputTextSelection&&(O.ignoreInputTextSelection=!0),void 0===O.mirrorContainer&&(O.mirrorContainer=q.body),$({containers:O.containers,start:function(e){(e=r(e))&&c(e)},end:l,cancel:h,remove:g,destroy:function(){i(!0),d({})},canMove:function(e){return!!r(e)},dragging:!1}));return!0===O.removeOnSpill&&_.on("over",function(e){K.rm(e,"gu-hide")}).on("out",function(e){_.dragging&&K.add(e,"gu-hide")}),i(),_}}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./classes":1,"contra/emitter":5,crossvent:6}],3:[function(e,t,i){t.exports=function(e,t){return Array.prototype.slice.call(e,t)}},{}],4:[function(e,t,i){"use strict";var n=e("ticky");t.exports=function(e,t,i){e&&n(function(){e.apply(i||null,t||[])})}},{ticky:9}],5:[function(e,t,i){"use strict";var r=e("atoa"),c=e("./debounce");t.exports=function(o,e){var a=e||{},s={};return(o=void 0===o?{}:o).on=function(e,t){return s[e]?s[e].push(t):s[e]=[t],o},o.once=function(e,t){return t._once=!0,o.on(e,t),o},o.off=function(e,t){var i=arguments.length;if(1===i)delete s[e];else if(0===i)s={};else{i=s[e];if(!i)return o;i.splice(i.indexOf(t),1)}return o},o.emit=function(){var e=r(arguments);return o.emitterSnapshot(e.shift()).apply(this,e)},o.emitterSnapshot=function(n){var e=(s[n]||[]).slice(0);return function(){var t=r(arguments),i=this||o;if("error"!==n||!1===a.throws||e.length)return e.forEach(function(e){a.async?c(e,t,i):e.apply(i,t),e._once&&o.off(n,e)}),o;throw 1===t.length?t[0]:t}},o}},{"./debounce":4,atoa:3}],6:[function(i,n,e){!function(o){"use strict";function a(e,t,i){e=function(e,t,i){var n,o;for(n=0;n<l.length;n++)if((o=l[n]).element===e&&o.type===t&&o.fn===i)return n}(e,t,i);if(e)return t=l[e].wrapper,l.splice(e,1),t}var s=i("custom-event"),r=i("./eventmap"),c=o.document,e=function(e,t,i,n){return e.addEventListener(t,i,n)},t=function(e,t,i,n){return e.removeEventListener(t,i,n)},l=[];o.addEventListener||(e=function(e,t,i){return e.attachEvent("on"+t,(n=a(e=e,t=t,i=i)||function(i,n){return function(e){var t=e||o.event;t.target=t.target||t.srcElement,t.preventDefault=t.preventDefault||function(){t.returnValue=!1},t.stopPropagation=t.stopPropagation||function(){t.cancelBubble=!0},t.which=t.which||t.keyCode,n.call(i,t)}}(e,i),l.push({wrapper:n,element:e,type:t,fn:i}),n));var n},t=function(e,t,i){return(i=a(e,t,i))?e.detachEvent("on"+t,i):void 0}),n.exports={add:e,remove:t,fabricate:function(e,t,i){var n,i=-1===r.indexOf(t)?new s(t,{detail:i}):(c.createEvent?(n=c.createEvent("Event")).initEvent(t,!0,!0):c.createEventObject&&(n=c.createEventObject()),n);e.dispatchEvent?e.dispatchEvent(i):e.fireEvent("on"+t,i)}}}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./eventmap":7,"custom-event":8}],7:[function(e,o,t){!function(e){"use strict";var t=[],i="",n=/^on/;for(i in e)n.test(i)&&t.push(i.slice(2));o.exports=t}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],8:[function(e,i,t){!function(e){var t=e.CustomEvent;i.exports=function(){try{var e=new t("cat",{detail:{foo:"bar"}});return"cat"===e.type&&"bar"===e.detail.foo}catch(e){}}()?t:"function"==typeof document.createEvent?function(e,t){var i=document.createEvent("CustomEvent");return t?i.initCustomEvent(e,t.bubbles,t.cancelable,t.detail):i.initCustomEvent(e,!1,!1,void 0),i}:function(e,t){var i=document.createEventObject();return i.type=e,t?(i.bubbles=Boolean(t.bubbles),i.cancelable=Boolean(t.cancelable),i.detail=t.detail):(i.bubbles=!1,i.cancelable=!1,i.detail=void 0),i}}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],9:[function(e,t,i){var n="function"==typeof setImmediate;t.exports=n?function(e){setImmediate(e)}:function(e){setTimeout(e,0)}},{}]},{},[2])(2)}),!function(n){"use strict";function o(e){e.parent instanceof Function&&(o.apply(this,[e.parent]),this.callParent=a(this,s(this,this.constructor))),e.apply(this,arguments)}function a(e,t){for(var i in e)"callParent"!==i&&e[i]instanceof Function&&!(e[i].prototype instanceof n.Class)&&(t[i]=e[i].callParent||s(e,e[i]));return t}function s(i,n){var o=i.callParent;return n.callParent=function(){var e=i.callParent,t=(i.callParent=o,n.apply(i,arguments));return i.callParent=e,t}}n.$resource={},n.$config={},n.$data={},n.$enum={},n.$template={},n.Class=function(){},n.Class.extend=function t(i){function n(){o!==arguments[0]&&(o.apply(this,[i]),a(this,this),this.initializer instanceof Function&&this.initializer.apply(this),this.constructor.apply(this,arguments))}return((n.prototype=new this(o)).constructor=n).toString=function(){return i.toString()},n.extend=function(e){return e.parent=i,t.apply(n,arguments)},n},n.Class=n.Class.extend(function(){this.constructor=function(){},this.default={}}),n.$util={isValue:function(e){return null!=e&&""!==e},isUndefined:function(e){return void 0===e},isNull:function(e){return"object"==typeof e&&null==e},isFn:function(e){return"function"==typeof e},isDate:function(e){return e instanceof Date&&!isNaN(e)},setCookies:function(e,t,i,n,o){n&&(t=t+"; expires="+n),i&&(t=t+"; path="+i),o||(t+=";secure"),document.cookie=e+"="+t},getCookies:function(e){var t={},i=document.cookie;if(i)for(var n=i.split(";"),o=0;o<n.length;o++){var a=n[o].indexOf("=");0<=a?t[n[o].substr(0,a).trim()]=decodeURIComponent(n[o].substr(a+1).trim()):t[n[o]]=""}return e?t[e]:t},serialize:function(e){return JSON.stringify(e,(()=>{const i=new WeakSet;return(e,t)=>{if("object"==typeof t&&null!==t){if(i.has(t))return;i.add(t)}return t}})())},deserialize:function(e){if("string"!=typeof e)return"object"==typeof e&&0<Object.keys(e).length?e:{};try{return JSON.parse(e)}catch(e){return{}}},diffMinutes:function(e,t){e=(e.getTime()-t.getTime())/1e3;return e/=60,Math.abs(Math.round(e))}},n.$config={items:[{description:"Hướng dẫn sử dụng",type:"SoftwareManuals","hot-key":"F1",group:"Help"},{description:"Phím tắt màn hình danh sách và chi tiết",type:"Shortcuts",group:"Help"},{description:"Diễn đàn MISA",type:"Forum",link:"https://forum.misa.vn/",group:"SupportChanel"},{description:"Tổng đài hỗ trợ",type:"Switchboard",link:"https://www.misa.vn/tong-dai/",group:"SupportChanel"},{description:"Cộng đồng hỗ trợ miễn phí Facebook",type:"FacebookChanel",link:"",group:"SupportChanel"},{description:"Tài liệu video trên Youtube",link:"",type:"YoutubeChanel",group:"SupportChanel"},{description:"Hướng dẫn sử dụng phần mềm",link:"",type:"SoftwareTraining",group:"Training"},{description:"Kiến thức nhân sự",link:"",type:"HRKnowledge",group:"Training"}],items_default_config:[{type:"SoftwareManuals",enable:!0},{type:"Forum",enable:!0},{type:"Switchboard",enable:!0}],language_default:"vi"},n.$resource.en={items:{SoftwareManuals:"User Guides",Shortcuts:"Shortcut Key <span shortcuts='list'>List</span> and <span shortcuts='detail'>Details</span>",Forum:"MISA Forum",Switchboard:"Call Center",FacebookChanel:"Facebook",YoutubeChanel:"Youtube",SoftwareTraining:"Software training",HRKnowledge:"HR Knowledge"},group:{Help:"Help",SupportChanel:"Support Channels",Training:"Training"}},n.$resource.vi={items:{SoftwareManuals:"Hướng dẫn sử dụng",Shortcuts:"Phím tắt màn hình <span shortcuts='list'>danh sách</span> và <span shortcuts='detail'>chi tiết</span>",Forum:"Diễn đàn MISA",Switchboard:"Tổng đài hỗ trợ",FacebookChanel:"Cộng đồng hỗ trợ miễn phí Facebook",YoutubeChanel:"Tài liệu video trên Youtube",SoftwareTraining:"Hướng dẫn sử dụng phần mềm",HRKnowledge:"Kiến thức nhân sự"},group:{Help:"Trợ giúp",SupportChanel:"Kênh hỗ trợ",Training:"Đào tạo"}};var e=document.createElement("div");e.innerHTML="<style>.misa-headerbar-help-trigger{width:32px;height:32px;border-radius:16px;background-position:center;background-size:24px;background-repeat:no-repeat;overflow:unset;cursor:pointer;background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCI+DQogIDxkZWZzPg0KICAgIDxjbGlwUGF0aCBpZD0iY2xpcC1wYXRoIj4NCiAgICAgIDxyZWN0IGlkPSJSZWN0YW5nbGVfMjgxNTkiIGRhdGEtbmFtZT0iUmVjdGFuZ2xlIDI4MTU5IiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDQ0IDc5KSIgZmlsbD0iI2ZmZiIvPg0KICAgIDwvY2xpcFBhdGg+DQogIDwvZGVmcz4NCiAgPGcgaWQ9Ikdyb3VwXzgyNzg0IiBkYXRhLW5hbWU9Ikdyb3VwIDgyNzg0IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtNDY5OSAtMTcwKSI+DQogICAgPGcgaWQ9Ikdyb3VwXzgyNzc4IiBkYXRhLW5hbWU9Ikdyb3VwIDgyNzc4IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg0NjU1IDkxKSIgY2xpcC1wYXRoPSJ1cmwoI2NsaXAtcGF0aCkiPg0KICAgICAgPHBhdGggaWQ9IlBhdGhfODkwNjQiIGRhdGEtbmFtZT0iUGF0aCA4OTA2NCIgZD0iTTUzLjQsODguMzE1YTIuNjg1LDIuNjg1LDAsMCwxLDUuMjE4LjlDNTguNjEzLDkxLDU2LDkxLjksNTYsOTEuOXYuOSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNmU3MzdhIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMS44Ii8+DQogICAgICA8cGF0aCBpZD0iUGF0aF84OTA2NSIgZGF0YS1uYW1lPSJQYXRoIDg5MDY1IiBkPSJNNTYsMTAwYTksOSwwLDEsMC05LTlBOSw5LDAsMCwwLDU2LDEwMFoiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzZlNzM3YSIgc3Ryb2tlLWxpbmVjYXA9InNxdWFyZSIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBzdHJva2Utd2lkdGg9IjIiLz4NCiAgICAgIDxwYXRoIGlkPSJQYXRoXzg5MDY2IiBkYXRhLW5hbWU9IlBhdGggODkwNjYiIGQ9Ik01Niw5N2ExLDEsMCwxLDAtMS0xQTEsMSwwLDAsMCw1Niw5N1oiIGZpbGw9IiM2ZTczN2EiLz4NCiAgICA8L2c+DQogIDwvZz4NCjwvc3ZnPg0K)}.misa-headerbar-help-trigger[mode=light]{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCI+PGRlZnM+PGNsaXBQYXRoIGlkPSJhIj48cmVjdCB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDQ0IDc5KSIgZmlsbD0iI2ZmZiIvPjwvY2xpcFBhdGg+PC9kZWZzPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKC00Njk5IC0xNzApIj48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSg0NjU1IDkxKSIgY2xpcC1wYXRoPSJ1cmwoI2EpIj48cGF0aCBkPSJNNTMuNCw4OC4zMTVhMi42ODUsMi42ODUsMCwwLDEsNS4yMTguOUM1OC42MTMsOTEsNTYsOTEuOSw1Niw5MS45di45IiBmaWxsPSJub25lIiBzdHJva2U9IiNmZmYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIxLjgiLz48cGF0aCBkPSJNNTYsMTAwYTksOSwwLDEsMC05LTksOSw5LDAsMCwwLDksOVoiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2ZmZiIgc3Ryb2tlLWxpbmVjYXA9InNxdWFyZSIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBzdHJva2Utd2lkdGg9IjIiLz48cGF0aCBkPSJNNTYsOTdhMSwxLDAsMSwwLTEtMUExLDEsMCwwLDAsNTYsOTdaIiBmaWxsPSIjZmZmIi8+PC9nPjwvZz48L3N2Zz4=)}.misa-headerbar-help-trigger *{box-sizing:border-box}.misa-headerbar-help-trigger.misa-headerbar-help-active,.misa-headerbar-help-trigger:hover{background-color:rgba(0,0,0,.1)}.misa-headerbar-help-menu{position:absolute;top:calc(100% + 10px);right:-11px;left:auto;font-size:14px;z-index:5000000;float:left;cursor:default;color:#1e2538;background-color:#fff;border-radius:4px;display:none;min-width:367px;padding:12px 0 12px 0;box-shadow:0 4px 20px rgba(0,0,0,.08);-webkit-box-shadow:0 4px 20px rgba(0,0,0,.08);background-clip:padding-box;-webkit-background-clip:padding-box;-moz-background-clip:padding-box;animation-name:fadeIn;-moz-animation-name:fadeIn;-o-animation-name:fadeIn;-webkit-animation-name:fadeIn;animation-duration:.5s;-webkit-animation-duration:.5s;-moz-animation-duration:.5s;-o-animation-duration:.5s;animation-fill-mode:both;-webkit-animation-fill-mode:both;-moz-animation-fill-mode:both;-o-animation-fill-mode:both;user-select:none}.misa-headerbar-help-menu *{font-size:14px}i.misa-headerbar-help-icon-align{width:10px;height:10px;display:block;right:23px;top:-5px;position:absolute;background-color:#fff;-webkit-transform:rotate(45deg);-moz-transform:rotate(45deg);-ms-transform:rotate(45deg);-o-transform:rotate(45deg);transform:rotate(45deg)}.misa-headerbar-help-item{color:#1e2538;cursor:pointer;display:flex;position:relative;padding:0 24px}.misa-headerbar-help-item{color:#1e2538;cursor:pointer;display:flex;position:relative;padding:0 24px}.misa-headerbar-help-group-title{color:#1e2538;user-select:none;position:relative;font-size:16px;font-weight:500;padding:12px 24px}.misa-headerbar-help-item:hover{background-color:#f2f2f2;cursor:pointer}.misa-headerbar-help-item[no-hover]:hover{background-color:unset;cursor:default}.misa-headerbar-help-menu a{text-decoration:none!important}.misa-headerbar-help-item-content{height:40px;line-height:40px;padding-left:32px;background-position:left;background-size:24px;background-repeat:no-repeat;align-items:center;text-decoration:none}.misa-headerbar-help-item-content [shortcuts]{color:#1a73e8}.misa-headerbar-help-item-content[icon=SoftwareManuals]{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCI+DQogIDxkZWZzPg0KICAgIDxjbGlwUGF0aCBpZD0iY2xpcC1wYXRoIj4NCiAgICAgIDxyZWN0IGlkPSJSZWN0YW5nbGVfMjgxNTkiIGRhdGEtbmFtZT0iUmVjdGFuZ2xlIDI4MTU5IiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDQ0IDc5KSIgZmlsbD0iI2ZmZiIvPg0KICAgIDwvY2xpcFBhdGg+DQogIDwvZGVmcz4NCiAgPGcgaWQ9Ikdyb3VwXzgyNzg0IiBkYXRhLW5hbWU9Ikdyb3VwIDgyNzg0IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtNDY5OSAtMTcwKSI+DQogICAgPGcgaWQ9Ikdyb3VwXzgyNzc4IiBkYXRhLW5hbWU9Ikdyb3VwIDgyNzc4IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg0NjU1IDkxKSIgY2xpcC1wYXRoPSJ1cmwoI2NsaXAtcGF0aCkiPg0KICAgICAgPHBhdGggaWQ9IlBhdGhfODkwNjQiIGRhdGEtbmFtZT0iUGF0aCA4OTA2NCIgZD0iTTUzLjQsODguMzE1YTIuNjg1LDIuNjg1LDAsMCwxLDUuMjE4LjlDNTguNjEzLDkxLDU2LDkxLjksNTYsOTEuOXYuOSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNmU3MzdhIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMS44Ii8+DQogICAgICA8cGF0aCBpZD0iUGF0aF84OTA2NSIgZGF0YS1uYW1lPSJQYXRoIDg5MDY1IiBkPSJNNTYsMTAwYTksOSwwLDEsMC05LTlBOSw5LDAsMCwwLDU2LDEwMFoiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzZlNzM3YSIgc3Ryb2tlLWxpbmVjYXA9InNxdWFyZSIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBzdHJva2Utd2lkdGg9IjIiLz4NCiAgICAgIDxwYXRoIGlkPSJQYXRoXzg5MDY2IiBkYXRhLW5hbWU9IlBhdGggODkwNjYiIGQ9Ik01Niw5N2ExLDEsMCwxLDAtMS0xQTEsMSwwLDAsMCw1Niw5N1oiIGZpbGw9IiM2ZTczN2EiLz4NCiAgICA8L2c+DQogIDwvZz4NCjwvc3ZnPg0K)}.misa-headerbar-help-item-content[icon=Shortcuts]{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCI+PGRlZnM+PGNsaXBQYXRoIGlkPSJhIj48cmVjdCB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIGZpbGw9IiNmZmYiLz48L2NsaXBQYXRoPjwvZGVmcz48ZyBjbGlwLXBhdGg9InVybCgjYSkiPjxwYXRoIGQ9Ik0yLDhBMiwyLDAsMCwxLDQsNkgyMGEyLDIsMCwwLDEsMiwydjhhMiwyLDAsMCwxLTIsMkg0YTIsMiwwLDAsMS0yLTJaIiBmaWxsPSJub25lIiBzdHJva2U9IiM2ZTczN2EiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIyIi8+PHBhdGggZD0iTTYsMTB2LjAxIiBmaWxsPSJub25lIiBzdHJva2U9IiM2ZTczN2EiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIyIi8+PHBhdGggZD0iTTEwLDEwdi4wMSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNmU3MzdhIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMiIvPjxwYXRoIGQ9Ik0xNCwxMHYuMDEiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzZlNzM3YSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2Utd2lkdGg9IjIiLz48cGF0aCBkPSJNMTgsMTB2LjAxIiBmaWxsPSJub25lIiBzdHJva2U9IiM2ZTczN2EiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIyIi8+PHBhdGggZD0iTTYsMTR2LjAxIiBmaWxsPSJub25lIiBzdHJva2U9IiM2ZTczN2EiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIyIi8+PHBhdGggZD0iTTE4LDE0di4wMSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNmU3MzdhIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMiIvPjxwYXRoIGQ9Ik0xMCwxNGw0LC4wMSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNmU3MzdhIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMiIvPjwvZz48L3N2Zz4=)}.misa-headerbar-help-item-content[icon=Forum]{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCI+PGRlZnM+PGNsaXBQYXRoIGlkPSJhIj48cmVjdCB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIGZpbGw9IiNmZmYiLz48L2NsaXBQYXRoPjwvZGVmcz48ZyBjbGlwLXBhdGg9InVybCgjYSkiPjxwYXRoIGQ9Ik0xMS4wNDIsMTguNjNhNy40ODYsNy40ODYsMCwwLDEtMi43NTEtLjUzOWwtMy45NDkuNjYxYS43MTUuNzE1LDAsMCwxLS44LS45MzFsMS0zQTcuNTcyLDcuNTcyLDAsMCwxLDcuMjE1LDQuNTk0YTcuNSw3LjUsMCwwLDEsOS43NDcsMS43NzcsNy41NzksNy41NzksMCwwLDEsMS42MDcsNC4wNTMiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzZlNzM3YSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2Utd2lkdGg9IjIiLz48cGF0aCBkPSJNMTguMzY4LDEwLjI3MmE1LjYyNCw1LjYyNCwwLDAsMC03LjMxLDEuMzMyLDUuNjc2LDUuNjc2LDAsMCwwLDEuOTg2LDguNjQzLDUuNjEyLDUuNjEyLDAsMCwwLDQuNTE3LjE0N2wyLjk2Mi41YS41MzYuNTM2LDAsMCwwLC42LS43bC0uNzUxLTIuMjUzYTUuNjc5LDUuNjc5LDAsMCwwLTItNy42NjdaIiBmaWxsPSJub25lIiBzdHJva2U9IiM2ZTczN2EiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIyIi8+PC9nPjwvc3ZnPg==)}.misa-headerbar-help-item-content[icon=Switchboard]{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCI+DQogIDxkZWZzPg0KICAgIDxjbGlwUGF0aCBpZD0iY2xpcC1wYXRoIj4NCiAgICAgIDxyZWN0IGlkPSJSZWN0YW5nbGVfMjgxNjIiIGRhdGEtbmFtZT0iUmVjdGFuZ2xlIDI4MTYyIiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDQ0IDI1MCkiIGZpbGw9IiNmZmYiLz4NCiAgICA8L2NsaXBQYXRoPg0KICA8L2RlZnM+DQogIDxnIGlkPSJHcm91cF84Mjc4NyIgZGF0YS1uYW1lPSJHcm91cCA4Mjc4NyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTQ2OTkgLTM0MSkiPg0KICAgIDxnIGlkPSJHcm91cF84Mjc4MSIgZGF0YS1uYW1lPSJHcm91cCA4Mjc4MSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNDY1NSA5MSkiIGNsaXAtcGF0aD0idXJsKCNjbGlwLXBhdGgpIj4NCiAgICAgIDxwYXRoIGlkPSJQYXRoXzg5MDgyIiBkYXRhLW5hbWU9IlBhdGggODkwODIiIGQ9Ik01MC41NjYsMjYyLjI4NnYtMy43NjFhNS43MjEsNS43MjEsMCwwLDEsMTEuNDQsMHYzLjc2MSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNmU3MzdhIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMiIvPg0KICAgICAgPHBhdGggaWQ9IlBhdGhfODkwODMiIGRhdGEtbmFtZT0iUGF0aCA4OTA4MyIgZD0iTTQ4LjQyMSwyNjAuMTQxaDEuNDNhLjcxNS43MTUsMCwwLDEsLjcxNS43MTV2NC4yOWEuNzE1LjcxNSwwLDAsMS0uNzE1LjcxNWgtMS40M2ExLjQzLDEuNDMsMCwwLDEtMS40My0xLjQzdi0yLjg2QTEuNDMsMS40MywwLDAsMSw0OC40MjEsMjYwLjE0MVoiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzZlNzM3YSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2Utd2lkdGg9IjIiLz4NCiAgICAgIDxwYXRoIGlkPSJQYXRoXzg5MDg0IiBkYXRhLW5hbWU9IlBhdGggODkwODQiIGQ9Ik02My41NzksMjY1LjI4OWgtMS40M2EuNzE1LjcxNSwwLDAsMS0uNzE1LS43MTV2LTQuMjlhLjcxNS43MTUsMCwwLDEsLjcxNS0uNzE1aDEuNDNhMS40MywxLjQzLDAsMCwxLDEuNDMsMS40M3YyLjg2QTEuNDMsMS40MywwLDAsMSw2My41NzksMjY1LjI4OVoiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzZlNzM3YSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2Utd2lkdGg9IjIiLz4NCiAgICAgIDxwYXRoIGlkPSJQYXRoXzg5MDg1IiBkYXRhLW5hbWU9IlBhdGggODkwODUiIGQ9Ik01OS4xNDYsMjY5Ljc3OWEyLjg2LDIuODYsMCwwLDAsMi44Ni0yLjg2VjI2My43IiBmaWxsPSJub25lIiBzdHJva2U9IiM2ZTczN2EiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIyIi8+DQogICAgICA8cGF0aCBpZD0iUGF0aF84OTA4NiIgZGF0YS1uYW1lPSJQYXRoIDg5MDg2IiBkPSJNNTkuMTQ2LDI2OS43OTNhMS43ODcsMS43ODcsMCwwLDEtMS43ODgsMS43ODhINTUuMjE0YTEuNzg3LDEuNzg3LDAsMSwxLDAtMy41NzVoMi4xNDVBMS43ODcsMS43ODcsMCwwLDEsNTkuMTQ2LDI2OS43OTNaIiBmaWxsPSJub25lIiBzdHJva2U9IiM2ZTczN2EiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIyIi8+DQogICAgPC9nPg0KICA8L2c+DQo8L3N2Zz4NCg==)}.misa-headerbar-help-item-content[icon=SoftwareTraining]{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCI+DQogIDxkZWZzPg0KICAgIDxjbGlwUGF0aCBpZD0iY2xpcC1wYXRoIj4NCiAgICAgIDxyZWN0IGlkPSJSZWN0YW5nbGVfMjgxNjQiIGRhdGEtbmFtZT0iUmVjdGFuZ2xlIDI4MTY0IiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDQ0IDM4MSkiIGZpbGw9IiNmZmYiLz4NCiAgICA8L2NsaXBQYXRoPg0KICA8L2RlZnM+DQogIDxnIGlkPSJHcm91cF84Mjc4OSIgZGF0YS1uYW1lPSJHcm91cCA4Mjc4OSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTQ2OTkgLTQ3MikiPg0KICAgIDxnIGlkPSJHcm91cF84Mjc4MyIgZGF0YS1uYW1lPSJHcm91cCA4Mjc4MyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNDY1NSA5MSkiIGNsaXAtcGF0aD0idXJsKCNjbGlwLXBhdGgpIj4NCiAgICAgIDxwYXRoIGlkPSJQYXRoXzg5MDkyIiBkYXRhLW5hbWU9IlBhdGggODkwOTIiIGQ9Ik01MC41NjMsMzk5LjR2LjgzYS43NS43NSwwLDAsMCwuNDg5LjczNmw1LjczNiwxLjc1NHYtNy4zMzFsLTUuMzczLTEuOTdhLjY3OC42NzgsMCwwLDAtLjg1Mi43MjZ2MS41MyIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNmU3MzdhIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMiIvPg0KICAgICAgPHBhdGggaWQ9IlBhdGhfODkwOTMiIGRhdGEtbmFtZT0iUGF0aCA4OTA5MyIgZD0iTTYzLjAyNCwzOTkuMjc1di45NmEuNzQ2Ljc0NiwwLDAsMS0uNDg4LjczNmwtNS43NDgsMS43NDl2LTcuMzMxbDUuMzgzLTEuOTdhLjY3OC42NzgsMCwwLDEsLjg1Mi43MjZ2MS42NSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNmU3MzdhIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMiIvPg0KICAgICAgPHBhdGggaWQ9IlBhdGhfODkwOTQiIGRhdGEtbmFtZT0iUGF0aCA4OTA5NCIgZD0iTTUxLjgwNiwzOTguNjU5YzAsLjQxNS0uNDY3Ljc0Ny0xLjAzOC43NDEtMS4xNDQtLjAwNS0yLjA2OC0uNjc3LTIuMDYzLTEuNXYtLjc0N2MwLS44MjQuOTM0LTEuNDg4LDIuMDc1LTEuNDgzLjU3MiwwLDEuMDMzLjMzOCwxLjAzMi43NDdaIiBmaWxsPSJub25lIiBzdHJva2U9IiM2ZTczN2EiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIyIi8+DQogICAgICA8cGF0aCBpZD0iUGF0aF84OTA5NSIgZGF0YS1uYW1lPSJQYXRoIDg5MDk1IiBkPSJNNjEuMTYsMzk4LjY1OWMwLC40MTUuNDY3Ljc0NywxLjA0Ljc0MSwxLjE0NS0uMDA1LDIuMDcxLS42NzcsMi4wNjctMS41di0uNzQ3YzAtLjgyNC0uOTM2LTEuNDg4LTIuMDgxLTEuNDgzLS41NzIsMC0xLjAzNS4zMzgtMS4wMzIuNzQ3WiIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNmU3MzdhIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMiIvPg0KICAgICAgPHBhdGggaWQ9IlBhdGhfODkwOTYiIGRhdGEtbmFtZT0iUGF0aCA4OTA5NiIgZD0iTTUzLjM4MywzODcuNDYxYTMuNDI0LDMuNDI0LDAsMSwwLDMuNDI0LTMuNDI0QTMuNDIzLDMuNDIzLDAsMCwwLDUzLjM4MywzODcuNDYxWiIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNmU3MzdhIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMiIvPg0KICAgIDwvZz4NCiAgPC9nPg0KPC9zdmc+DQo=)}.misa-headerbar-help-item-content[icon=HRKnowledge]{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCI+DQogIDxkZWZzPg0KICAgIDxjbGlwUGF0aCBpZD0iY2xpcC1wYXRoIj4NCiAgICAgIDxyZWN0IGlkPSJSZWN0YW5nbGVfMjgxNjMiIGRhdGEtbmFtZT0iUmVjdGFuZ2xlIDI4MTYzIiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDQ0IDM0MSkiIGZpbGw9IiNmZmYiLz4NCiAgICA8L2NsaXBQYXRoPg0KICA8L2RlZnM+DQogIDxnIGlkPSJHcm91cF84Mjc4OCIgZGF0YS1uYW1lPSJHcm91cCA4Mjc4OCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTQ2OTkgLTQzMikiPg0KICAgIDxnIGlkPSJHcm91cF84Mjc4MiIgZGF0YS1uYW1lPSJHcm91cCA4Mjc4MiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNDY1NSA5MSkiIGNsaXAtcGF0aD0idXJsKCNjbGlwLXBhdGgpIj4NCiAgICAgIDxwYXRoIGlkPSJQYXRoXzg5MDg5IiBkYXRhLW5hbWU9IlBhdGggODkwODkiIGQ9Ik01NS45NiwzNTQuOTI2LDQ3LDM1MS41bDguOTYtMy41TDY1LDM1MS41WiIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNmU3MzdhIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgc3Ryb2tlLXdpZHRoPSIyIi8+DQogICAgICA8cGF0aCBpZD0iUGF0aF84OTA5MCIgZGF0YS1uYW1lPSJQYXRoIDg5MDkwIiBkPSJNNjEuNCwzNTIuODg5djQuNGE5LjM3OCw5LjM3OCwwLDAsMS0xMC44LDB2LTQuNCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNmU3MzdhIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgc3Ryb2tlLXdpZHRoPSIyIi8+DQogICAgPC9nPg0KICA8L2c+DQo8L3N2Zz4NCg==)}.misa-headerbar-help-item-content[icon=YoutubeChanel]{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCI+PGRlZnM+PGNsaXBQYXRoIGlkPSJhIj48cmVjdCB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIGZpbGw9IiNmZmYiLz48L2NsaXBQYXRoPjwvZGVmcz48ZyBjbGlwLXBhdGg9InVybCgjYSkiPjxwYXRoIGQ9Ik0xNyw1SDdBNCw0LDAsMCwwLDMsOXY2YTQsNCwwLDAsMCw0LDRIMTdhNCw0LDAsMCwwLDQtNFY5QTQsNCwwLDAsMCwxNyw1WiIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNmU3MzdhIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMiIvPjxwYXRoIGQ9Ik0xMCw5bDUsMy01LDNaIiBmaWxsPSJub25lIiBzdHJva2U9IiM2ZTczN2EiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIyIi8+PC9nPjwvc3ZnPg==)}.misa-headerbar-help-item-content[icon=FacebookChanel]{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCI+PGRlZnM+PGNsaXBQYXRoIGlkPSJhIj48cmVjdCB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIGZpbGw9IiNmZmYiLz48L2NsaXBQYXRoPjwvZGVmcz48ZyBjbGlwLXBhdGg9InVybCgjYSkiPjxwYXRoIGQ9Ik03LDEwdjRoM3Y3aDRWMTRoM2wxLTRIMTRWOGExLDEsMCwwLDEsMS0xaDNWM0gxNWE1LDUsMCwwLDAtNSw1djJaIiBmaWxsPSJub25lIiBzdHJva2U9IiM2ZTczN2EiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIyIi8+PC9nPjwvc3ZnPg==)}.misa-headerbar-help-item a{text-decoration:none;font-size:14px;font-weight:500;color:#1f1f1f;display:block;width:100%}</style>",document.head.appendChild(e.firstChild)}(window.MISAHelpMenu=window.MISAHelpMenu||{}),function(e){var o;(o=e).exports={},o.init=function(e){const t="misa-headerbar-help-menu",s="misa-headerbar-help-item-content",n={8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause/Break",20:"Caps Lock",27:"Esc",32:"Space",33:"Page Up",34:"Page Down",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",45:"Insert",46:"Delete",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",91:"Windows",93:"Right Click",96:"Numpad 0",97:"Numpad 1",98:"Numpad 2",99:"Numpad 3",100:"Numpad 4",101:"Numpad 5",102:"Numpad 6",103:"Numpad 7",104:"Numpad 8",105:"Numpad 9",106:"Numpad *",107:"Numpad +",109:"Numpad -",110:"Numpad .",111:"Numpad /",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"Num Lock",145:"Scroll Lock",182:"My Computer",183:"My Calculator",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},r={SoftwareManuals:"SoftwareManuals",Shortcuts:"Shortcuts",Forum:"Forum",Switchboard:"Switchboard",FacbookChanel:"FacbookChanel",YoutubeChanel:"YoutubeChanel",SoftwareTraining:"SoftwareTraining"};return String.prototype.format=String.prototype.format||function(){var i=arguments;return this.replace(/{([0-9]+)}/g,function(e,t){return void 0===i[t]?e:i[t]})},new(o.Class.extend(function(){var a=this;this.AllItems={},this.default={boxSelector:"#MISA_ButtonHelp",language:"vi",items:[],button_acctive_class:"misa-headerbar-help-active",resource:{items:{},group:{}},onItemClick:null,onClick:null},this.constructor=function(i){var e;a.opts=Object.assign({},a.default),a.opts=Object.assign(a.default,i),i.resource&&Object.keys(i.resource).forEach(function(e){o.$resource[e]||(o.$resource[e]={}),o.$resource[e].items||(o.$resource[e].items={}),o.$resource[e].group||(o.$resource[e].group={});var t=i.resource[e];t&&(t.items&&Object.assign(o.$resource[e].items,t.items),t.group)&&Object.assign(o.$resource[e].group,t.group)}),a.resource=o.$resource[a.opts.language],a.resource||(a.resource=o.$resource.vi),a.items=[],Array.isArray(a.opts.items)?a.items=a.opts.items:"default"==a.opts.items?a.items=o.$config.items_default_config:a.items=[],a.box=document.querySelector(a.opts.boxSelector),a.box.style.position="relative",a.box.classList.add("misa-headerbar-help-trigger"),a.box.setAttribute("mode","light"==a.opts.mode?"light":"dark"),0<a.items.length?(a.el=document.createElement("div"),a.el.classList=t,a.box.appendChild(a.el),(e=document.createElement("i")).classList="misa-headerbar-help-icon-align",a.contentEl=document.createElement("div"),a.contentEl.classList="misa-headerbar-help-content",a.el.appendChild(e),a.el.appendChild(a.contentEl),a.groups={Help:[],SupportChanel:[],Training:[]},a.items.forEach(function(t){var e,i;0!=t.enable&&(a.groups[t.group]||(a.groups[t.group]=[]),0<(e=o.$config.items.filter(e=>e.type==t.type)).length&&(e=e[0],i={},Object.assign(i,e),Object.assign(i,t),(t=i).default=!0),a.groups[t.group].push(t))}),Object.keys(a.groups).forEach(function(e){var t=a.resource.group[e];if(0<(e=a.groups[e]).length){let o=document.createElement("div");o.classList.add("misa-headerbar-help-group");var i=document.createElement("div");i.classList.add("misa-headerbar-help-group-title"),i.innerHTML=t||"",o.appendChild(i),e.forEach(function(i){let e=document.createElement("div"),t=(e.setAttribute("type",i.type),e.classList.add("misa-headerbar-help-item"),i.text||a.resource.items[i.type]);var n=document.createElement("div");if(n.classList.add(s),n.setAttribute("icon",i.type),i["hot-key"]&&(t+=" ("+i["hot-key"]+")",e.setAttribute("shortcut",i["hot-key"])),n.innerHTML=t,e.appendChild(n),i.icon)if(0==(n=i.icon).indexOf("/")||0==n.indexOf("http")||0<n.indexOf(".svg")||0<n.indexOf(".png")||0<n.indexOf(".jpg")||0<n.indexOf(".jpeg")||0==n.indexOf("data:"))e.querySelector("."+s).setAttribute("style","background-image: url("+i.icon+") !important;");else{let t=e.querySelector("."+s);i.icon.split(" ").forEach(function(e){e&&e.trim()&&t.classList.add(e)})}i.link&&((n=document.createElement("a")).setAttribute("target","_blank"),n.setAttribute("href",i.link),n.appendChild(e),e=n),e.onclick=function(t){if("function"==typeof a.opts.onItemClick){let e=null;i.type==r.Shortcuts&&(e=t.target.getAttribute("shortcuts")),a.opts.onItemClick.call(a,i.type,i,e,t.target,t)}a.hide()},a.AllItems[i.type]=e,o.appendChild(e)}),a.contentEl.appendChild(o)}}),a.el.querySelectorAll("[res-key]").forEach(function(e){var t=e.getAttribute("res-key");e.innerText=a.resource[t]}),a.box.onclick=function(e){null!=(e=e.target).closest("."+t)||e.classList.contains(t)||("block"!=a.el.style.display?a.show():a.hide()),"function"==typeof a.opts.onClick&&a.opts.onClick()},document.body.addEventListener("click",function(e){(e=e.target)==a.box||null!=e.closest(a.opts.boxSelector)||null!=e.closest("."+t)||e.classList.contains(t)||a.hide()}),window.addEventListener("keydown",function(e){var t=e||window.event,t=n[t.which||t.keyCode];let i=a.el.querySelector("[shortcut='"+t+"']");if(i)return setTimeout(()=>{i.click()},100),e.preventDefault(),e.stopPropagation(),!1})):a.box.onclick=function(e){"function"==typeof a.opts.onClick&&a.opts.onClick()}},this.hide=function(){a.el.style.display="none",a.box.classList.remove(a.opts.button_acctive_class)},this.show=function(){a.el.style.display="block",a.box.classList.add(a.opts.button_acctive_class)}}))(e)}}(window.MISAHelpMenu=window.MISAHelpMenu||{}),!function(n){"use strict";function o(e){e.parent instanceof Function&&(o.apply(this,[e.parent]),this.callParent=a(this,s(this,this.constructor))),e.apply(this,arguments)}function a(e,t){for(var i in e)"callParent"!==i&&e[i]instanceof Function&&!(e[i].prototype instanceof n.Class)&&(t[i]=e[i].callParent||s(e,e[i]));return t}function s(i,n){var o=i.callParent;return n.callParent=function(){var e=i.callParent,t=(i.callParent=o,n.apply(i,arguments));return i.callParent=e,t}}n.$resource={},n.$config={},n.$data={},n.$enum={},n.$template={},n.Class=function(){},n.Class.extend=function t(i){function n(){o!==arguments[0]&&(o.apply(this,[i]),a(this,this),this.initializer instanceof Function&&this.initializer.apply(this),this.constructor.apply(this,arguments))}return((n.prototype=new this(o)).constructor=n).toString=function(){return i.toString()},n.extend=function(e){return e.parent=i,t.apply(n,arguments)},n},n.Class=n.Class.extend(function(){this.constructor=function(){},this.default={}}),n.$util={isValue:function(e){return null!=e&&""!==e},isUndefined:function(e){return void 0===e},isNull:function(e){return"object"==typeof e&&null==e},isFn:function(e){return"function"==typeof e},isDate:function(e){return e instanceof Date&&!isNaN(e)},setCookies:function(e,t,i,n,o){n&&(t=t+"; expires="+n),i&&(t=t+"; path="+i),o||(t+=";secure"),document.cookie=e+"="+t},getCookies:function(e){var t={},i=document.cookie;if(i)for(var n=i.split(";"),o=0;o<n.length;o++){var a=n[o].indexOf("=");0<=a?t[n[o].substr(0,a).trim()]=decodeURIComponent(n[o].substr(a+1).trim()):t[n[o]]=""}return e?t[e]:t},serialize:function(e){return JSON.stringify(e,(()=>{const i=new WeakSet;return(e,t)=>{if("object"==typeof t&&null!==t){if(i.has(t))return;i.add(t)}return t}})())},deserialize:function(e){if("string"!=typeof e)return"object"==typeof e&&0<Object.keys(e).length?e:{};try{return JSON.parse(e)}catch(e){return{}}},diffMinutes:function(e,t){e=(e.getTime()-t.getTime())/1e3;return e/=60,Math.abs(Math.round(e))}},n.$config={language_default:"vi"};var e=document.createElement("div");e.innerHTML="<style>.misa-headerbar-pure-trigger{width:32px;height:32px;border-radius:16px;background-position:center;background-size:24px;background-repeat:no-repeat;overflow:unset;cursor:pointer}.misa-headerbar-pure-trigger *{box-sizing:border-box}.misa-headerbar-pure-trigger.misa-headerbar-pure-active,.misa-headerbar-pure-trigger:hover{background-color:rgba(0,0,0,.1)}.misa-headerbar-pure-menu{position:absolute;top:calc(100% + 10px);right:-11px;left:auto;font-size:14px;z-index:5000000;float:left;cursor:default;color:#1e2538;background-color:#fff;border-radius:4px;display:none;min-width:367px;padding:12px 0 12px 0;box-shadow:0 4px 20px rgba(0,0,0,.08);-webkit-box-shadow:0 4px 20px rgba(0,0,0,.08);background-clip:padding-box;-webkit-background-clip:padding-box;-moz-background-clip:padding-box;animation-name:fadeIn;-moz-animation-name:fadeIn;-o-animation-name:fadeIn;-webkit-animation-name:fadeIn;animation-duration:.5s;-webkit-animation-duration:.5s;-moz-animation-duration:.5s;-o-animation-duration:.5s;animation-fill-mode:both;-webkit-animation-fill-mode:both;-moz-animation-fill-mode:both;-o-animation-fill-mode:both;user-select:none}.misa-headerbar-pure-menu *{font-size:14px}i.misa-headerbar-pure-icon-align{width:10px;height:10px;display:block;right:23px;top:-5px;position:absolute;background-color:#fff;-webkit-transform:rotate(45deg);-moz-transform:rotate(45deg);-ms-transform:rotate(45deg);-o-transform:rotate(45deg);transform:rotate(45deg)}.misa-headerbar-pure-item{color:#1e2538;cursor:pointer;display:flex;position:relative;padding:0 24px}.misa-headerbar-pure-item{color:#1e2538;cursor:pointer;display:flex;position:relative;padding:0 24px}.misa-headerbar-pure-group-title{color:#1e2538;user-select:none;position:relative;font-size:16px;font-weight:500;padding:12px 24px}.misa-headerbar-pure-item:hover{background-color:#f2f2f2;cursor:pointer}.misa-headerbar-pure-item[no-hover]:hover{background-color:unset;cursor:default}.misa-headerbar-pure-menu a{text-decoration:none!important}.misa-headerbar-pure-line{height:1px;background-color:#e0e0e0;width:100%;margin:8px 0}.misa-headerbar-pure-item[no-hover]:hover{background-color:unset;cursor:default}.misa-headerbar-pure-item-content{height:40px;line-height:40px;padding-left:32px;background-position:left;background-size:24px;background-repeat:no-repeat;align-items:center;text-decoration:none}.misa-headerbar-pure-item-content[no-icon]{padding-left:0}.misa-headerbar-pure-item-content [shortcuts]{color:#1a73e8}.misa-headerbar-pure-item a{text-decoration:none;font-size:14px;font-weight:500;color:#1f1f1f;display:block;width:100%}</style>",document.head.appendChild(e.firstChild)}(window.MISAMenu=window.MISAMenu||{}),function(e){var i;(i=e).exports={},i.init=function(e){const t="misa-headerbar-pure-menu",r="misa-headerbar-pure-item-content",o={8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause/Break",20:"Caps Lock",27:"Esc",32:"Space",33:"Page Up",34:"Page Down",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",45:"Insert",46:"Delete",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",91:"Windows",93:"Right Click",96:"Numpad 0",97:"Numpad 1",98:"Numpad 2",99:"Numpad 3",100:"Numpad 4",101:"Numpad 5",102:"Numpad 6",103:"Numpad 7",104:"Numpad 8",105:"Numpad 9",106:"Numpad *",107:"Numpad +",109:"Numpad -",110:"Numpad .",111:"Numpad /",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"Num Lock",145:"Scroll Lock",182:"My Computer",183:"My Calculator",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"};return new(i.Class.extend(function(){var a,s=this;this.default={boxSelector:"",language:"vi",items:[],button_acctive_class:"misa-headerbar-pure-active",resource:{items:{},group:{}},onItemClick:null,onClick:null},this.constructor=function(i){Object.assign({},s.default),(_opts=Object.assign(s.default,i)).language||(_opts.language="vi");var e,n={};i.resource&&Object.keys(i.resource).forEach(function(e){var t=i.resource[e];n[e]={items:{}},t&&t.items&&Object.assign(n[e].items,t.items)}),a=n[_opts.language]||n.vi,s.items=[],Array.isArray(_opts.items)?s.items=_opts.items:s.items=[],s.box=document.querySelector(_opts.boxSelector),s.box.style.position="relative",s.box.classList.add("misa-headerbar-pure-trigger"),s.box.setAttribute("mode","light"==_opts.mode?"light":"dark"),0<s.items.length?(s.el=document.createElement("div"),s.el.classList=t,s.box.appendChild(s.el),(e=document.createElement("i")).classList="misa-headerbar-pure-icon-align",s.contentEl=document.createElement("div"),s.contentEl.classList="misa-headerbar-pure-content",s.el.appendChild(e),s.el.appendChild(s.contentEl),s.items.forEach(function(n){if(0!=n.enable){let i=document.createElement("div");if(i.setAttribute("type",n.type),i.classList.add("misa-headerbar-pure-item"),"LINE"==n.type)i.setAttribute("no-hover",1),i.innerHTML="<div class='misa-headerbar-pure-line'></div>";else if(1==n.label)(t=n.text||a.items[n.type])&&((o=document.createElement("div")).classList.add("misa-headerbar-pure-group-title"),o.innerText=t||"",s.contentEl.appendChild(o));else{let e=n.text||a.items[n.type];var t;if((t=document.createElement("div")).classList.add(r),t.setAttribute("icon",n.type),n["hot-key"]&&(e+=" ("+n["hot-key"]+")",i.setAttribute("shortcut",n["hot-key"])),t.innerHTML=e,i.appendChild(t),n.icon)if(0==(o=n.icon).indexOf("/")||0==o.indexOf("http")||0<o.indexOf(".svg")||0<o.indexOf(".png")||0<o.indexOf(".jpg")||0<o.indexOf(".jpeg")||0==o.indexOf("data:"))i.querySelector("."+r).setAttribute("style","background-image: url("+n.icon+") !important;");else{let t=i.querySelector("."+r);n.icon.split(" ").forEach(function(e){e&&e.trim()&&t.classList.add(e)})}else i.querySelector("."+r).setAttribute("no-icon",!0);n.link&&((t=document.createElement("a")).setAttribute("target","_blank"),t.setAttribute("href",n.link),t.appendChild(i),i=t)}i.onclick=function(e){"function"==typeof _opts.onItemClick&&_opts.onItemClick.call(s,n.type,n,e.target),s.hide()},s.contentEl.appendChild(i)}var o}),s.box.onclick=function(e){null!=(e=e.target).closest("."+t)||e.classList.contains(t)||("block"!=s.el.style.display?s.show():s.hide()),"function"==typeof _opts.onClick&&_opts.onClick()},document.body.addEventListener("click",function(e){(e=e.target)==s.box||null!=e.closest(_opts.boxSelector)||null!=e.closest("."+t)||e.classList.contains(t)||s.hide()}),window.addEventListener("keydown",function(e){var t=e||window.event,t=o[t.which||t.keyCode];let i=s.el.querySelector("[shortcut='"+t+"']");if(i)return setTimeout(()=>{i.click()},100),e.preventDefault(),e.stopPropagation(),!1})):s.box.onclick=function(e){"function"==typeof _opts.onClick&&_opts.onClick()}},this.hide=function(){s.el.style.display="none",s.box.classList.remove(_opts.button_acctive_class)},this.show=function(){s.el.style.display="block",s.box.classList.add(_opts.button_acctive_class)}}))(e)}}(window.MISAMenu=window.MISAMenu||{}),!function(n){"use strict";function o(e){e.parent instanceof Function&&(o.apply(this,[e.parent]),this.callParent=a(this,s(this,this.constructor))),e.apply(this,arguments)}function a(e,t){for(var i in e)"callParent"!==i&&e[i]instanceof Function&&!(e[i].prototype instanceof n.Class)&&(t[i]=e[i].callParent||s(e,e[i]));return t}function s(i,n){var o=i.callParent;return n.callParent=function(){var e=i.callParent,t=(i.callParent=o,n.apply(i,arguments));return i.callParent=e,t}}n.$resource={},n.$config={},n.$data={},n.$enum={},n.$template={},n.Class=function(){},n.Class.extend=function t(i){function n(){o!==arguments[0]&&(o.apply(this,[i]),a(this,this),this.initializer instanceof Function&&this.initializer.apply(this),this.constructor.apply(this,arguments))}return((n.prototype=new this(o)).constructor=n).toString=function(){return i.toString()},n.extend=function(e){return e.parent=i,t.apply(n,arguments)},n},n.Class=n.Class.extend(function(){this.constructor=function(){},this.default={}}),n.$util={isValue:function(e){return null!=e&&""!==e},isUndefined:function(e){return void 0===e},isNull:function(e){return"object"==typeof e&&null==e},isFn:function(e){return"function"==typeof e},isDate:function(e){return e instanceof Date&&!isNaN(e)},setCookies:function(e,t,i,n,o){n&&(t=t+"; expires="+n),i&&(t=t+"; path="+i),o||(t+=";secure"),document.cookie=e+"="+t},getCookies:function(e){var t={},i=document.cookie;if(i)for(var n=i.split(";"),o=0;o<n.length;o++){var a=n[o].indexOf("=");0<=a?t[n[o].substr(0,a).trim()]=decodeURIComponent(n[o].substr(a+1).trim()):t[n[o]]=""}return e?t[e]:t},serialize:function(e){return JSON.stringify(e,(()=>{const i=new WeakSet;return(e,t)=>{if("object"==typeof t&&null!==t){if(i.has(t))return;i.add(t)}return t}})())},deserialize:function(e){if("string"!=typeof e)return"object"==typeof e&&0<Object.keys(e).length?e:{};try{return JSON.parse(e)}catch(e){return{}}},diffMinutes:function(e,t){e=(e.getTime()-t.getTime())/1e3;return e/=60,Math.abs(Math.round(e))}},n.$config={items:[{description:"Tính năng mới",type:"NewFeature"},{description:"Bắt đầu sử dụng",type:"StartedGuide"},{description:"Đánh giá độ hài lòng",type:"NPS"},{type:"LINE"},{title:"Thông tin dịch vụ",type:"ServiceInfo"},{description:"Thoả thuận dịch vụ",type:"ServiceAgreement"},{description:"Thoả thuận mua hàng",type:"TermsOfPurchase"},{description:"Chính sách quyền riêng tư",type:"PrivacyPolicy"}],items_default_config:[{type:"ServiceInfo",enable:!0},{type:"ServiceAgreement",enable:!0},{type:"TermsOfPurchase",enable:!0},{type:"PrivacyPolicy",enable:!0}],language_default:"vi"},n.$data={},n.$resource.en={items:{NewFeature:"New feature",StartedGuide:"Getting started",ServiceInfo:"License",ServiceAgreement:"License Agreement",TermsOfPurchase:"Purchase Agreement",PrivacyPolicy:"Privacy policy",NPS:"Rate your satisfaction"}},n.$resource.vi={items:{NewFeature:"Tính năng mới",StartedGuide:"Bắt đầu sử dụng",ServiceInfo:"Giấy phép sử dụng",ServiceAgreement:"Thỏa thuận sử dụng",TermsOfPurchase:"Thỏa thuận mua hàng",PrivacyPolicy:"Chính sách quyền riêng tư",NPS:"Đánh giá độ hài lòng"}};var e=document.createElement("div");e.innerHTML="<style>.misa-headerbar-more-trigger{width:32px;height:32px;border-radius:16px;background-position:center;background-size:24px;background-repeat:no-repeat;overflow:unset;cursor:pointer;background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCI+PGRlZnM+PGNsaXBQYXRoIGlkPSJhIj48cmVjdCB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIGZpbGw9IiNmZmYiLz48L2NsaXBQYXRoPjwvZGVmcz48ZyBjbGlwLXBhdGg9InVybCgjYSkiPjxwYXRoIGQ9Ik0xMiwyMWE5LDksMCwxLDAtOS05QTksOSwwLDAsMCwxMiwyMVoiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzZlNzM3YSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2Utd2lkdGg9IjIiLz48cGF0aCBkPSJNMTIsMTJ2LjAxIiBmaWxsPSJub25lIiBzdHJva2U9IiM2ZTczN2EiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIyIi8+PHBhdGggZD0iTTgsMTJ2LjAxIiBmaWxsPSJub25lIiBzdHJva2U9IiM2ZTczN2EiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIyIi8+PHBhdGggZD0iTTE2LDEydi4wMSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNmU3MzdhIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMiIvPjwvZz48L3N2Zz4=)}.misa-headerbar-more-trigger[mode=light]{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCI+PGRlZnM+PGNsaXBQYXRoIGlkPSJhIj48cmVjdCB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIGZpbGw9IiNmZmYiLz48L2NsaXBQYXRoPjwvZGVmcz48ZyBjbGlwLXBhdGg9InVybCgjYSkiPjxwYXRoIGQ9Ik0xMiwyMWE5LDksMCwxLDAtOS05QTksOSwwLDAsMCwxMiwyMVoiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2ZmZiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2Utd2lkdGg9IjIiLz48cGF0aCBkPSJNMTIsMTJ2LjAxIiBmaWxsPSJub25lIiBzdHJva2U9IiNmZmYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIyIi8+PHBhdGggZD0iTTgsMTJ2LjAxIiBmaWxsPSJub25lIiBzdHJva2U9IiNmZmYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIyIi8+PHBhdGggZD0iTTE2LDEydi4wMSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjZmZmIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMiIvPjwvZz48L3N2Zz4=)}.misa-headerbar-more-trigger *{box-sizing:border-box}.misa-headerbar-more-trigger.misa-headerbar-more-active,.misa-headerbar-more-trigger:hover{background-color:rgba(0,0,0,.1)}.misa-headerbar-more-menu{position:absolute;top:calc(100% + 10px);right:-11px;left:auto;font-size:14px;z-index:5000000;float:left;cursor:default;color:#1e2538;background-color:#fff;border-radius:4px;display:none;min-width:367px;padding:12px 0 12px 0;box-shadow:0 4px 20px rgba(0,0,0,.08);-webkit-box-shadow:0 4px 20px rgba(0,0,0,.08);background-clip:padding-box;-webkit-background-clip:padding-box;-moz-background-clip:padding-box;animation-name:fadeIn;-moz-animation-name:fadeIn;-o-animation-name:fadeIn;-webkit-animation-name:fadeIn;animation-duration:.5s;-webkit-animation-duration:.5s;-moz-animation-duration:.5s;-o-animation-duration:.5s;animation-fill-mode:both;-webkit-animation-fill-mode:both;-moz-animation-fill-mode:both;-o-animation-fill-mode:both;user-select:none}.misa-headerbar-more-menu *{font-size:14px}i.misa-headerbar-more-icon-align{width:10px;height:10px;display:block;right:23px;top:-5px;position:absolute;background-color:#fff;-webkit-transform:rotate(45deg);-moz-transform:rotate(45deg);-ms-transform:rotate(45deg);-o-transform:rotate(45deg);transform:rotate(45deg)}.misa-headerbar-more-item{color:#1e2538;cursor:pointer;display:flex;position:relative;padding:0 24px}.misa-headerbar-more-item:hover{background-color:#f2f2f2;cursor:pointer}.misa-headerbar-more-item[no-hover]:hover{background-color:unset;cursor:default}.misa-headerbar-more-item-content{height:40px;line-height:40px;display:inline-flex;padding-left:32px;background-position:left;background-size:24px;background-repeat:no-repeat;align-items:center}.misa-headerbar-more-item-content[icon=NPS]{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCI+DQogIDxkZWZzPg0KICAgIDxjbGlwUGF0aCBpZD0iY2xpcC1wYXRoIj4NCiAgICAgIDxyZWN0IGlkPSJSZWN0YW5nbGVfMjgxNDYiIGRhdGEtbmFtZT0iUmVjdGFuZ2xlIDI4MTQ2IiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDk2OSAxNzcpIiBmaWxsPSIjZmZmIi8+DQogICAgPC9jbGlwUGF0aD4NCiAgPC9kZWZzPg0KICA8ZyBpZD0iR3JvdXBfODI3NzUiIGRhdGEtbmFtZT0iR3JvdXAgODI3NzUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0zOTA2IC04MCkiPg0KICAgIDxnIGlkPSJHcm91cF84Mjc2NCIgZGF0YS1uYW1lPSJHcm91cCA4Mjc2NCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjkzNyAtOTcpIiBjbGlwLXBhdGg9InVybCgjY2xpcC1wYXRoKSI+DQogICAgICA8cGF0aCBpZD0iUGF0aF84ODU3MCIgZGF0YS1uYW1lPSJQYXRoIDg4NTcwIiBkPSJNOTcyLjAzNiwxOTBoMS42NmE2LjYsNi42LDAsMCwwLDYuMjI1LTYuNjRjMC0xLjMxMiwyLjQ5LTEuNDc4LDIuNDksMS4wMTJhMjYuMTg1LDI2LjE4NSwwLDAsMS0uODMsNC44aDYuNjRhMS4yNDUsMS4yNDUsMCwwLDEsMCwyLjQ5aC0uODNhMS4yNDUsMS4yNDUsMCwwLDEsMCwyLjQ5aC0uODMiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzY1Njk2ZSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2Utd2lkdGg9IjIiLz4NCiAgICAgIDxwYXRoIGlkPSJQYXRoXzg4NTcxIiBkYXRhLW5hbWU9IlBhdGggODg1NzEiIGQ9Ik05ODYuNTYxLDE5NC4xNDZhMS4yNDUsMS4yNDUsMCwxLDEsMCwyLjQ5aC0uODNhMS4yNDUsMS4yNDUsMCwwLDEsMCwyLjQ5aC01LjRjLTMuMzIsMC0xLjY2LTEuNjYtOC4zLTEuNjYiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzY1Njk2ZSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2Utd2lkdGg9IjIiLz4NCiAgICAgIDxwYXRoIGlkPSJQYXRoXzg4NTcyIiBkYXRhLW5hbWU9IlBhdGggODg1NzIiIGQ9Ik05NzQuNTI2LDE4NS44NDZ2LTEuNjYiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzY1Njk2ZSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2Utd2lkdGg9IjIiLz4NCiAgICAgIDxwYXRoIGlkPSJQYXRoXzg4NTczIiBkYXRhLW5hbWU9IlBhdGggODg1NzMiIGQ9Ik05NzMuNywxODUuMDE2aDEuNjYiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzY1Njk2ZSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2Utd2lkdGg9IjIiLz4NCiAgICAgIDxwYXRoIGlkPSJQYXRoXzg4NTc0IiBkYXRhLW5hbWU9IlBhdGggODg1NzQiIGQ9Ik05NzcuODQ2LDE4MS43di0xLjY2IiBmaWxsPSJub25lIiBzdHJva2U9IiM2NTY5NmUiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIyIi8+DQogICAgICA8cGF0aCBpZD0iUGF0aF84ODU3NSIgZGF0YS1uYW1lPSJQYXRoIDg4NTc1IiBkPSJNOTc3LjAxNiwxODAuODY2aDEuNjYiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzY1Njk2ZSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2Utd2lkdGg9IjIiLz4NCiAgICAgIDxwYXRoIGlkPSJQYXRoXzg4NTc2IiBkYXRhLW5hbWU9IlBhdGggODg1NzYiIGQ9Ik05ODYuMTQ2LDE4My4zNTZWMTgxLjciIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzY1Njk2ZSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2Utd2lkdGg9IjIiLz4NCiAgICAgIDxwYXRoIGlkPSJQYXRoXzg4NTc3IiBkYXRhLW5hbWU9IlBhdGggODg1NzciIGQ9Ik05ODUuMzE2LDE4Mi41MjZoMS42NiIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNjU2OTZlIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMiIvPg0KICAgICAgPHBhdGggaWQ9IlBhdGhfODg1NzgiIGRhdGEtbmFtZT0iUGF0aCA4ODU3OCIgZD0iTTk5MC4zLDE4Ny41MDZ2LTEuNjYiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzY1Njk2ZSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2Utd2lkdGg9IjIiLz4NCiAgICAgIDxwYXRoIGlkPSJQYXRoXzg4NTc5IiBkYXRhLW5hbWU9IlBhdGggODg1NzkiIGQ9Ik05ODkuNDY2LDE4Ni42NzZoMS42NiIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNjU2OTZlIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMiIvPg0KICAgIDwvZz4NCiAgPC9nPg0KPC9zdmc+DQo=)}.misa-headerbar-more-item-content[icon=ServiceAgreement]{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij4NCiAgPGcgaWQ9Ikdyb3VwXzgyNzk4IiBkYXRhLW5hbWU9Ikdyb3VwIDgyNzk4IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtNDgyNSAtMzY1KSI+DQogICAgPHBhdGggaWQ9IlBhdGhfODkxMTkiIGRhdGEtbmFtZT0iUGF0aCA4OTExOSIgZD0iTTQ0LDI5M0g2OHYyNEg0NFoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDQ3ODEgNzIpIiBmaWxsPSJyZ2JhKDI1NSwyNTUsMjU1LDAuMDEpIi8+DQogICAgPHBhdGggaWQ9IlBhdGhfODkxMjAiIGRhdGEtbmFtZT0iUGF0aCA4OTEyMCIgZD0iTTU2LDMxMWEzLDMsMCwxLDAtMy0zQTMsMywwLDAsMCw1NiwzMTFaIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg0NzgxIDcyKSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNjU2OTZlIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMiIvPg0KICAgIDxwYXRoIGlkPSJQYXRoXzg5MTIxIiBkYXRhLW5hbWU9IlBhdGggODkxMjEiIGQ9Ik01NCwzMDBoNCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNDc4MSA3MikiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzY1Njk2ZSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2Utd2lkdGg9IjIiLz4NCiAgICA8cGF0aCBpZD0iUGF0aF84OTEyMiIgZGF0YS1uYW1lPSJQYXRoIDg5MTIyIiBkPSJNNTQsMzExdjRsMi0xLDIsMXYtNCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNDc4MSA3MikiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzY1Njk2ZSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2Utd2lkdGg9IjIiLz4NCiAgICA8cGF0aCBpZD0iUGF0aF84OTEyMyIgZGF0YS1uYW1lPSJQYXRoIDg5MTIzIiBkPSJNNTMuNjcsMzEySDUxLjMzQTIuMTksMi4xOSwwLDAsMSw0OSwzMTBWMjk4YTIuMTksMi4xOSwwLDAsMSwyLjMzLTJoOS4zNEEyLjE4LDIuMTgsMCwwLDEsNjMsMjk4djEyYTIuMTksMi4xOSwwLDAsMS0yLjMzLDJINTguMzMiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDQ3ODEgNzIpIiBmaWxsPSJub25lIiBzdHJva2U9IiM2NTY5NmUiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIyIi8+DQogIDwvZz4NCjwvc3ZnPg0K)}.misa-headerbar-more-item-content[icon=TermsOfPurchase]{background-image:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxnIGNsaXAtcGF0aD0idXJsKCNjbGlwMF84OTQ4XzgwMzEpIj4NCjxwYXRoIGQ9Ik0xNCAzVjdDMTQgNy41NTIyOCAxNC40NDc3IDggMTUgOEgxOSIgc3Ryb2tlPSIjNkU3MzdBIiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPg0KPHBhdGggZD0iTTUgOFY1QzUgMy44OTU0MyA1Ljg5NTQzIDMgNyAzSDE0TDE5IDhWMTlDMTkgMjAuMTA0NiAxOC4xMDQ2IDIxIDE3IDIxSDEyIiBzdHJva2U9IiM2RTczN0EiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+DQo8cGF0aCBkPSJNNiAxN0M3LjY1Njg1IDE3IDkgMTUuNjU2OSA5IDE0QzkgMTIuMzQzMSA3LjY1Njg1IDExIDYgMTFDNC4zNDMxNSAxMSAzIDEyLjM0MzEgMyAxNEMzIDE1LjY1NjkgNC4zNDMxNSAxNyA2IDE3WiIgc3Ryb2tlPSIjNkU3MzdBIiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPg0KPHBhdGggZD0iTTQuNSAxN0wzIDIyTDYgMjAuNUw5IDIyTDcuNSAxNyIgc3Ryb2tlPSIjNkU3MzdBIiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPg0KPC9nPg0KPGRlZnM+DQo8Y2xpcFBhdGggaWQ9ImNsaXAwXzg5NDhfODAzMSI+DQo8cmVjdCB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIGZpbGw9IndoaXRlIi8+DQo8L2NsaXBQYXRoPg0KPC9kZWZzPg0KPC9zdmc+)}.misa-headerbar-more-item-content[icon=ServiceInfo]{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij4NCiAgPGcgaWQ9Ikdyb3VwXzgyNzk5IiBkYXRhLW5hbWU9Ikdyb3VwIDgyNzk5IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtNDgyNSAtMzI1KSI+DQogICAgPGcgaWQ9Ikdyb3VwXzgyNzk2IiBkYXRhLW5hbWU9Ikdyb3VwIDgyNzk2Ij4NCiAgICAgIDxyZWN0IGlkPSJSZWN0YW5nbGVfMjgxNzEiIGRhdGEtbmFtZT0iUmVjdGFuZ2xlIDI4MTcxIiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDQ4MjUgMzI1KSIgZmlsbD0ibm9uZSIvPg0KICAgICAgPGcgaWQ9Ikdyb3VwXzgyNzk1IiBkYXRhLW5hbWU9Ikdyb3VwIDgyNzk1Ij4NCiAgICAgICAgPHBhdGggaWQ9IlBhdGhfODkxMTUiIGRhdGEtbmFtZT0iUGF0aCA4OTExNSIgZD0iTTU5LDI3NEg1MGEzLDMsMCwwLDEtMy0zdi0xSDU3djJhMiwyLDAsMCwwLDIsMlptMCwwYTIsMiwwLDAsMCwyLTJWMjU4YTIsMiwwLDEsMSwyLDJINjFtMi00SDUyYTMsMywwLDAsMC0zLDN2MTEiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDQ3ODEgNzIpIiBmaWxsPSJub25lIiBzdHJva2U9IiM2NTY5NmUiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIyIi8+DQogICAgICAgIDxwYXRoIGlkPSJQYXRoXzg5MTE2IiBkYXRhLW5hbWU9IlBhdGggODkxMTYiIGQ9Ik01MywyNjBoNCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNDc4MSA3MikiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzY1Njk2ZSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2Utd2lkdGg9IjIiLz4NCiAgICAgICAgPHBhdGggaWQ9IlBhdGhfODkxMTciIGRhdGEtbmFtZT0iUGF0aCA4OTExNyIgZD0iTTUzLDI2NGg0IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg0NzgxIDcyKSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNjU2OTZlIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMiIvPg0KICAgICAgPC9nPg0KICAgIDwvZz4NCiAgPC9nPg0KPC9zdmc+DQo=)}.misa-headerbar-more-item-content[icon=PrivacyPolicy]{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij4NCiAgPGcgaWQ9Ikdyb3VwXzgyNzk3IiBkYXRhLW5hbWU9Ikdyb3VwIDgyNzk3IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtNDgyNSAtNDA1KSI+DQogICAgPHBhdGggaWQ9IlBhdGhfODkxMjUiIGRhdGEtbmFtZT0iUGF0aCA4OTEyNSIgZD0iTTQ0LDMzM0g2OHYyNEg0NFoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDQ3ODEgNzIpIiBmaWxsPSJyZ2JhKDI1NSwyNTUsMjU1LDAuMDEpIi8+DQogICAgPHBhdGggaWQ9IlBhdGhfODkxMjYiIGRhdGEtbmFtZT0iUGF0aCA4OTEyNiIgZD0iTTYxLjQ3LDM0OS4yN2E3LjI2Miw3LjI2MiwwLDAsMS00LTYuNDh2LTEuNTJhMy43NTQsMy43NTQsMCwwLDAsMy44OS0xLjJsLjExLS4xNC4xMS4xNGEzLjc1NCwzLjc1NCwwLDAsMCwzLjg5LDEuMnYxLjUyYTcuMjYyLDcuMjYyLDAsMCwxLTQsNi40OFoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDQ3ODEgNzIpIiBmaWxsPSJub25lIiBzdHJva2U9IiM2NTY5NmUiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIyIi8+DQogICAgPHBhdGggaWQ9IlBhdGhfODkxMjciIGRhdGEtbmFtZT0iUGF0aCA4OTEyNyIgZD0iTTUzLjU3LDM0Mi4zMkg1MS42NiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNDc4MSA3MikiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzY1Njk2ZSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2Utd2lkdGg9IjIiLz4NCiAgICA8cGF0aCBpZD0iUGF0aF84OTEyOCIgZGF0YS1uYW1lPSJQYXRoIDg5MTI4IiBkPSJNNTEuNjYsMzQ4aDMuODEiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDQ3ODEgNzIpIiBmaWxsPSJub25lIiBzdHJva2U9IiM2NTY5NmUiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIyIi8+DQogICAgPHBhdGggaWQ9IlBhdGhfODkxMjkiIGRhdGEtbmFtZT0iUGF0aCA4OTEyOSIgZD0iTTYxLjk2LDM1MS40N2wtLjI2LjgzQTIuODY5LDIuODY5LDAsMCwxLDU5LDM1NEg1MWEzLDMsMCwwLDEtMy0zVjMzOWEzLDMsMCwwLDEsMy0zaDhhMy4xMTgsMy4xMTgsMCwwLDEsMi43NiwxLjgyIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg0NzgxIDcyKSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNjU2OTZlIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHN0cm9rZS13aWR0aD0iMiIvPg0KICA8L2c+DQo8L3N2Zz4NCg==)}.misa-headerbar-more-item-content[icon=StartedGuide]{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij4NCiAgPGcgaWQ9Ikdyb3VwXzgzMTUyIiBkYXRhLW5hbWU9Ikdyb3VwIDgzMTUyIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMjcyNCAzNjQpIj4NCiAgICA8cmVjdCBpZD0iUmVjdGFuZ2xlXzI4NzY1IiBkYXRhLW5hbWU9IlJlY3RhbmdsZSAyODc2NSIgd2lkdGg9IjI0IiBoZWlnaHQ9IjI0IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTI3MjQgLTM2NCkiIGZpbGw9Im5vbmUiLz4NCiAgICA8ZyBpZD0iR3JvdXBfODMxNTEiIGRhdGEtbmFtZT0iR3JvdXAgODMxNTEiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC01NSAtNCkiPg0KICAgICAgPGcgaWQ9Ikdyb3VwXzgzMTUwIiBkYXRhLW5hbWU9Ikdyb3VwIDgzMTUwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTI2NjkgLTM2MCkiPg0KICAgICAgICA8cGF0aCBpZD0iUGF0aF8xMDgyODIiIGRhdGEtbmFtZT0iUGF0aCAxMDgyODIiIGQ9Ik0xMiwyYTEwLDEwLDAsMSwwLDMuODI3Ljc2MUExMCwxMCwwLDAsMCwxMiwyWm0wLDE4YTgsOCwwLDEsMSw1LjY1Ny0yLjM0M0E4LDgsMCwwLDEsMTIsMjBaIiBmaWxsPSIjNjY2Ii8+DQogICAgICAgIDxwYXRoIGlkPSJQYXRoXzEwODI4MyIgZGF0YS1uYW1lPSJQYXRoIDEwODI4MyIgZD0iTTEyLjM0LDcuNDVhMS43LDEuNywwLDAsMC0xLjg1LS4zLDEuNiwxLjYsMCwwLDAtMSwxLjQ4djYuNzRhMS42LDEuNiwwLDAsMCwxLDEuNDgsMS42ODEsMS42ODEsMCwwLDAsLjY5LjE1LDEuNzQsMS43NCwwLDAsMCwxLjE2LS40NUwxNiwxMy4xOGExLjYsMS42LDAsMCwwLDAtMi4zNlpNMTEuNSwxNC42VjkuNEwxNC4zMSwxMloiIGZpbGw9IiM2NjYiLz4NCiAgICAgIDwvZz4NCiAgICA8L2c+DQogIDwvZz4NCjwvc3ZnPg0K)}.misa-headerbar-more-item-content[icon=NewFeature]{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCI+DQogIDxkZWZzPg0KICAgIDxjbGlwUGF0aCBpZD0iY2xpcC1wYXRoIj4NCiAgICAgIDxyZWN0IGlkPSJSZWN0YW5nbGVfMjgxNDQiIGRhdGEtbmFtZT0iUmVjdGFuZ2xlIDI4MTQ0IiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDk2OSAxMzcpIiBmaWxsPSIjZmZmIi8+DQogICAgPC9jbGlwUGF0aD4NCiAgPC9kZWZzPg0KICA8ZyBpZD0iR3JvdXBfODI3NzQiIGRhdGEtbmFtZT0iR3JvdXAgODI3NzQiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0zOTA2IC00MCkiPg0KICAgIDxnIGlkPSJHcm91cF84Mjc2MyIgZGF0YS1uYW1lPSJHcm91cCA4Mjc2MyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjkzNyAtOTcpIiBjbGlwLXBhdGg9InVybCgjY2xpcC1wYXRoKSI+DQogICAgICA8cGF0aCBpZD0iUGF0aF84ODU2NSIgZGF0YS1uYW1lPSJQYXRoIDg4NTY1IiBkPSJNOTg3LDE0NWEzLDMsMCwwLDEsMCw2IiBmaWxsPSJub25lIiBzdHJva2U9IiM2NTY5NmUiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIyIi8+DQogICAgICA8cGF0aCBpZD0iUGF0aF84ODU2NiIgZGF0YS1uYW1lPSJQYXRoIDg4NTY2IiBkPSJNOTc5LDE0NXYxMWExLDEsMCwwLDEtMSwxaC0xYTEsMSwwLDAsMS0xLTF2LTUiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzY1Njk2ZSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2Utd2lkdGg9IjIiLz4NCiAgICAgIDxwYXRoIGlkPSJQYXRoXzg4NTY3IiBkYXRhLW5hbWU9IlBhdGggODg1NjciIGQ9Ik05ODEsMTQ1bDQuNTI0LTMuNzdhLjkuOSwwLDAsMSwxLjQ3Ni42OTJ2MTIuMTU2YS45LjksMCwwLDEtMS40NzYuNjkyTDk4MSwxNTFoLThhMSwxLDAsMCwxLTEtMXYtNGExLDEsMCwwLDEsMS0xWiIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNjU2OTZlIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMiIvPg0KICAgIDwvZz4NCiAgPC9nPg0KPC9zdmc+DQo=)}.misa-headerbar-more-item-new{height:16px;color:#fff;font-size:10px;background-color:#ff2929;border-radius:8px;padding:0 5px;display:none;line-height:16px;margin-left:8px;font-weight:700}.misa-headerbar-more-item-noti{position:absolute;right:-16px;height:16px;color:#fff;font-size:10px;background-color:#ff2929;border-radius:8px;padding:0 5px;display:none;line-height:16px;margin-left:8px;font-weight:700}.misa-headerbar-more-line{height:1px;background-color:#e0e0e0;width:100%;margin:8px 0}.misa-headerbar-more-item a{text-decoration:none;font-size:14px;font-weight:500;color:#1f1f1f;display:block;width:100%}.misa-headerbar-more-mobile{margin-top:16px;padding:0 24px;display:inline-flex}.misa-headerbar-more-qr{width:88px;height:88px;min-width:88px;min-height:88px;object-fit:cover}.misa-headerbar-more-qr-info{padding-left:12px}.misa-headerbar-more-qr-heading{font-weight:700;margin-bottom:8px}.misa-headerbar-more-app-links a[mobile-type]{display:block;margin-right:12px;height:20px;width:20px;text-decoration:none;background-size:20px;background-position:center;background-repeat:no-repeat}.misa-headerbar-more-app-links{display:inline-flex;margin-top:8px}.misa-headerbar-more-app-links a[mobile-type=IOS]{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCI+DQogIDxkZWZzPg0KICAgIDxjbGlwUGF0aCBpZD0iY2xpcC1wYXRoIj4NCiAgICAgIDxyZWN0IGlkPSJSZWN0YW5nbGVfMjgxNzQiIGRhdGEtbmFtZT0iUmVjdGFuZ2xlIDI4MTc0IiB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDAgMC41KSIgZmlsbD0iI2ZmZiIvPg0KICAgIDwvY2xpcFBhdGg+DQogIDwvZGVmcz4NCiAgPGcgaWQ9Ikdyb3VwXzgyODA5IiBkYXRhLW5hbWU9Ikdyb3VwIDgyODA5IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwIC0wLjUpIiBjbGlwLXBhdGg9InVybCgjY2xpcC1wYXRoKSI+DQogICAgPHBhdGggaWQ9IlBhdGhfODkxMzMiIGRhdGEtbmFtZT0iUGF0aCA4OTEzMyIgZD0iTTE2Ljg4OCwxNC4yNDZhMTEuNDQ3LDExLjQ0NywwLDAsMS0xLjA0MSwxLjk0NGMtLjY3NCwxLjAzMS0xLjYyOSwyLjMxNi0yLjgxLDIuMzIzLTEuMDQ4LjAxLTEuMzE5LS42ODQtMi43NDQtLjY3MnMtMS43MjMuNjg0LTIuNzc0LjY3NGMtMS4xNzktLjAxLTIuMDgyLTEuMTY5LTIuNzU5LTIuMi0xLjg5Mi0yLjg4Mi0yLjA5Mi02LjI2MS0uOTIzLTguMDU3QTQuMTg1LDQuMTg1LDAsMCwxLDcuMiw2LjI0YzEuMjUsMCwyLjAzOC42ODcsMy4wNzQuNjg3LDEsMCwxLjYxNC0uNjg5LDMuMDY0LS42ODlBNC4wODYsNC4wODYsMCwwLDEsMTYuNDIsNy44NjQsMy41MjMsMy41MjMsMCwwLDAsMTYuODg4LDE0LjI0NlptLTQuNjQ2LTkuMTZhMy41MTgsMy41MTgsMCwwLDAsLjc4My0yLjZBMy44MTQsMy44MTQsMCwwLDAsMTAuNTcxLDMuOGEzLjI2NiwzLjI2NiwwLDAsMC0uOCwyLjU0QTMuMiwzLjIsMCwwLDAsMTIuMjQyLDUuMDg2WiIgZmlsbD0iIzZlNzM3YSIvPg0KICA8L2c+DQo8L3N2Zz4NCg==)}.misa-headerbar-more-app-links a[mobile-type=Android]{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCI+DQogIDxkZWZzPg0KICAgIDxjbGlwUGF0aCBpZD0iY2xpcC1wYXRoIj4NCiAgICAgIDxyZWN0IGlkPSJSZWN0YW5nbGVfMjgxNzMiIGRhdGEtbmFtZT0iUmVjdGFuZ2xlIDI4MTczIiB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDAgMC41KSIgZmlsbD0iI2ZmZiIvPg0KICAgIDwvY2xpcFBhdGg+DQogIDwvZGVmcz4NCiAgPGcgaWQ9Ikdyb3VwXzgyODA4IiBkYXRhLW5hbWU9Ikdyb3VwIDgyODA4IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwIC0wLjUpIiBjbGlwLXBhdGg9InVybCgjY2xpcC1wYXRoKSI+DQogICAgPHBhdGggaWQ9IlBhdGhfODkxMzIiIGRhdGEtbmFtZT0iUGF0aCA4OTEzMiIgZD0iTTYuODA3LDIuNTUzYS4zLjMsMCwwLDAtLjIzOC40NzNsLjg4NywxLjI4MkE0LjIsNC4yLDAsMCwwLDUuODQ4LDcuMDQ0aDguM2E0LjIsNC4yLDAsMCwwLTEuNjA4LTIuNzM1bC44ODctMS4yODJhLjMuMywwLDEsMC0uNDkzLS4zNDFMMTIuMDQ0LDMuOThhNC4xNjgsNC4xNjgsMCwwLDAtNC4wODgsMEw3LjA2MiwyLjY4NkEuMy4zLDAsMCwwLDYuODA3LDIuNTUzWk04LjIsNC42NDRhLjYuNiwwLDEsMS0uNi42QS42LjYsMCwwLDEsOC4yLDQuNjQ0Wm0zLjYsMGEuNi42LDAsMSwxLS42LjZBLjYuNiwwLDAsMSwxMS44LDQuNjQ0Wk00LDguMjQ0YS42LjYsMCwwLDAtLjYuNnY0LjhhLjYuNiwwLDEsMCwxLjIsMHYtNC44QS42LjYsMCwwLDAsNCw4LjI0NFptMS44LDB2NmExLjIsMS4yLDAsMCwwLDEuMiwxLjJ2Mi4xYS45LjksMCwwLDAsMS44LDB2LTIuMWgyLjR2Mi4xYS45LjksMCwwLDAsMS44LDB2LTIuMWExLjIsMS4yLDAsMCwwLDEuMi0xLjJ2LTZabTEwLjIsMGEuNi42LDAsMCwwLS42LjZ2NC44YS42LjYsMCwxLDAsMS4yLDB2LTQuOEEuNi42LDAsMCwwLDE2LDguMjQ0WiIgZmlsbD0iIzZlNzM3YSIvPg0KICA8L2c+DQo8L3N2Zz4NCg==)}</style>",document.head.appendChild(e.firstChild)}(window.MISAMoreMenu=window.MISAMoreMenu||{}),function(e){var p;(p=e).init=function(e){const n="misa-headerbar-more-menu",s="misa-headerbar-more-item-content",r="misa-headerbar-more-qr-des",c="misa-headerbar-more-qr-heading",l="misa-headerbar-more-app-links",u={8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause/Break",20:"Caps Lock",27:"Esc",32:"Space",33:"Page Up",34:"Page Down",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",45:"Insert",46:"Delete",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",91:"Windows",93:"Right Click",96:"Numpad 0",97:"Numpad 1",98:"Numpad 2",99:"Numpad 3",100:"Numpad 4",101:"Numpad 5",102:"Numpad 6",103:"Numpad 7",104:"Numpad 8",105:"Numpad 9",106:"Numpad *",107:"Numpad +",109:"Numpad -",110:"Numpad .",111:"Numpad /",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"Num Lock",145:"Scroll Lock",182:"My Computer",183:"My Calculator",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},d={ServiceAgreement:"ServiceAgreement",ServiceInfo:"ServiceInfo",NPS:"NPS",NewFeature:"NewFeature",LINE:"LINE",Shortcuts:"Shortcuts"};return String.prototype.format=String.prototype.format||function(){var i=arguments;return this.replace(/{([0-9]+)}/g,function(e,t){return void 0===i[t]?e:i[t]})},new(p.Class.extend(function(){var a=this;function t(e){a.resource.mobile&&a.resource.mobile[e.app_name]&&((i=a.resource.mobile[e.app_name]).title&&(e.title=i.title),i.description)&&(e.description=i.description);var t,i=document.createElement("div"),n=(i.classList.add("misa-headerbar-more-mobile"),document.createElement("img"));n.classList.add("misa-headerbar-more-qr"),n.src=e.qr_url,i.appendChild(n),(n=document.createElement("div")).classList.add("misa-headerbar-more-qr-info"),n.innerHTML="<div class='"+c+"'></div><div class='"+r+"'></div>",n.querySelector("."+c).innerText=e.title,n.querySelector("."+r).innerText=e.description,e.links&&((t=document.createElement("div")).classList.add(l),n.appendChild(t),e.links.ios&&(t=o(e.links.ios,"IOS"),n.querySelector("."+l).appendChild(t)),e.links.android)&&(t=o(e.links.android,"Android"),n.querySelector("."+l).appendChild(t)),i.append(n),a.el.appendChild(i)}function o(e,t){var i=document.createElement("a");return i.target="_blank",i.href=e,i.setAttribute("mobile-type",t),i}this.AllItems={},this.default={mode:"dark",boxSelector:"#MISA_MoreMenu",language:"vi",mobile:null,items:[],button_acctive_class:"misa-headerbar-more-active",onItemClick:null,onClick:null},this.constructor=function(i){var e;a.opts=Object.assign({},a.default),a.opts=Object.assign(a.default,i),i.resource&&Object.keys(i.resource).forEach(function(e){p.$resource[e]||(p.$resource[e]={}),p.$resource[e].mobile||(p.$resource[e].mobile={}),p.$resource[e].items||(p.$resource[e].items={});var t=i.resource[e];t&&(t.items&&Object.assign(p.$resource[e].items,t.items),t.mobile)&&Object.assign(p.$resource[e].mobile,t.mobile)}),a.resource=p.$resource[a.opts.language],a.resource||(a.resource=p.$resource.vi),a.items=[],Array.isArray(a.opts.items)?a.items=a.opts.items:"default"==a.opts.items?a.items=p.$config.items_default_config:a.items=[],a.box=document.querySelector(a.opts.boxSelector),a.box.style.position="relative",a.box.classList.add("misa-headerbar-more-trigger"),a.box.setAttribute("mode","light"==a.opts.mode?"light":"dark"),0<a.items.length||a.opts.mobile?(a.el=document.createElement("div"),a.el.classList=n,a.box.appendChild(a.el),(e=document.createElement("i")).classList="misa-headerbar-more-icon-align",a.contentEl=document.createElement("div"),a.contentEl.classList="misa-headerbar-more-content",a.el.appendChild(e),a.el.appendChild(a.contentEl),a.items.forEach(function(n){if(0!=n.enable){let i=document.createElement("div");if(i.setAttribute("type",n.type),i.classList.add("misa-headerbar-more-item"),n.type==d.LINE)i.setAttribute("no-hover",1),i.innerHTML="<div class='misa-headerbar-more-line'></div>";else{var t=p.$config.items.filter(e=>e.type==n.type);0<t.length&&(t=t[0],o={},Object.assign(o,t),Object.assign(o,n),(n=o).default=!0);let e=n.text||a.resource.items[n.type];if((t=document.createElement("div")).classList.add(s),t.setAttribute("icon",n.type),n["hot-key"]&&(e+=" ("+n["hot-key"]+")",i.setAttribute("shortcut",n["hot-key"])),t.innerHTML="<div>{0}</div>".format(e),i.appendChild(t),n.icon)if(0==(o=n.icon).indexOf("/")||0==o.indexOf("http")||0<o.indexOf(".svg")||0<o.indexOf(".png")||0<o.indexOf(".jpg")||0<o.indexOf(".jpeg")||0==o.indexOf("data:"))i.querySelector("."+s).setAttribute("style","background-image: url("+n.icon+") !important;");else{let t=i.querySelector("."+s);n.icon.split(" ").forEach(function(e){e&&e.trim()&&t.classList.add(e)})}n.link&&((t=document.createElement("a")).setAttribute("target","_blank"),t.setAttribute("href",n.link),t.appendChild(i),i=t),i.onclick=function(e){"function"==typeof a.opts.onItemClick&&a.opts.onItemClick.call(a,n.type,n,{},e.target,e),a.hide()}}a.AllItems[n.type]=i,a.contentEl.appendChild(i)}var o}),a.opts.mobile&&a.opts.mobile&&(Array.isArray(a.opts.mobile)?a.opts.mobile.forEach(function(e){t(e)}):t(a.opts.mobile)),a.el.querySelectorAll("[res-key]").forEach(function(e){var t=e.getAttribute("res-key");e.innerText=a.resource[t]}),a.box.onclick=function(e){null!=(e=e.target).closest("."+n)||e.classList.contains(n)||("block"!=a.el.style.display?a.show():a.hide()),"function"==typeof a.opts.onClick&&a.opts.onClick()},document.body.addEventListener("click",function(e){(e=e.target)==a.box||null!=e.closest(a.opts.boxSelector)||null!=e.closest("."+n)||e.classList.contains(n)||a.hide()}),window.addEventListener("keydown",function(e){var t=e||window.event,t=u[t.which||t.keyCode];let i=a.el.querySelector("[shortcut='"+t+"']");if(i)return setTimeout(()=>{i.click()},100),e.preventDefault(),e.stopPropagation(),!1})):a.box.onclick=function(e){"function"==typeof a.opts.onClick&&a.opts.onClick()}},this.hide=function(){a.el.style.display="none",a.box.classList.remove(a.opts.button_acctive_class)},this.show=function(){a.el.style.display="block",a.box.classList.add(a.opts.button_acctive_class)}}))(e)},p.showNewFeature=function(e){}}(window.MISAMoreMenu=window.MISAMoreMenu||{}),!function(n){"use strict";function o(e){e.parent instanceof Function&&(o.apply(this,[e.parent]),this.callParent=a(this,s(this,this.constructor))),e.apply(this,arguments)}function a(e,t){for(var i in e)"callParent"!==i&&e[i]instanceof Function&&!(e[i].prototype instanceof n.Class)&&(t[i]=e[i].callParent||s(e,e[i]));return t}function s(i,n){var o=i.callParent;return n.callParent=function(){var e=i.callParent,t=(i.callParent=o,n.apply(i,arguments));return i.callParent=e,t}}n.$resource={},n.$config={},n.$data={},n.$enum={},n.$template={},n.Class=function(){},n.Class.extend=function t(i){function n(){o!==arguments[0]&&(o.apply(this,[i]),a(this,this),this.initializer instanceof Function&&this.initializer.apply(this),this.constructor.apply(this,arguments))}return((n.prototype=new this(o)).constructor=n).toString=function(){return i.toString()},n.extend=function(e){return e.parent=i,t.apply(n,arguments)},n},n.Class=n.Class.extend(function(){this.constructor=function(){},this.default={}}),n.$util={isValue:function(e){return null!=e&&""!==e},isUndefined:function(e){return void 0===e},isNull:function(e){return"object"==typeof e&&null==e},isFn:function(e){return"function"==typeof e},isDate:function(e){return e instanceof Date&&!isNaN(e)},setCookies:function(e,t,i,n,o){n&&(t=t+"; expires="+n),i&&(t=t+"; path="+i),o||(t+=";secure"),document.cookie=e+"="+t},getCookies:function(e){var t={},i=document.cookie;if(i)for(var n=i.split(";"),o=0;o<n.length;o++){var a=n[o].indexOf("=");0<=a?t[n[o].substr(0,a).trim()]=decodeURIComponent(n[o].substr(a+1).trim()):t[n[o]]=""}return e?t[e]:t},serialize:function(e){return JSON.stringify(e,(()=>{const i=new WeakSet;return(e,t)=>{if("object"==typeof t&&null!==t){if(i.has(t))return;i.add(t)}return t}})())},deserialize:function(e){if("string"!=typeof e)return"object"==typeof e&&0<Object.keys(e).length?e:{};try{return JSON.parse(e)}catch(e){return{}}},diffMinutes:function(e,t){e=(e.getTime()-t.getTime())/1e3;return e/=60,Math.abs(Math.round(e))}},n.$config={website:"https://amis.misa.vn",getNewPostPath:"/wp-json/notification/v1/new-post",fixedCategory:{1:"experts",2:"ebook"},links:[{type:"academy",url:"https://academy.misa.vn/",res:"Academy_Label",hideNumber:!0},{type:"ebook",url:"{0}/tai-lieu-ebooks/",res:"Ebook_Label",cate:2},{type:"experts",url:"{0}/gap-go-chuyen-gia/",res:"Experts_Label",cate:1},{type:"blog",url:{3:"{0}/tin-tuc/tai-chinh-ke-toan/",4:"{0}/tin-tuc/quan-tri-khach-hang/",5:"{0}/tin-tuc/quan-ly-nhan-su/",6:"{0}/tin-tuc/quan-tri-doanh-nghiep/"},res:"Blog_Label"}]},n.$resource.en={Academy_Label:"Certificate courses",Ebook_Label:"Documents - eBooks",Experts_Label:"Meet the experts",Blog_Label:"Blog"},n.$resource.vi={Academy_Label:"Khóa học cấp chứng nhận",Ebook_Label:"Tài liệu - eBooks",Experts_Label:"Gặp gỡ chuyên gia",Blog_Label:"Blog"};var e=document.createElement("div");e.innerHTML="<style>.misa-knowledge-trigger{width:32px;height:32px;border-radius:16px;background-position:center;background-size:24px;background-repeat:no-repeat;overflow:unset;cursor:pointer;background-image:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxwYXRoIGQ9Ik0zIDEwVjIxIiBzdHJva2U9IiNGRkFBMkIiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+DQo8cGF0aCBkPSJNMyAxMEMzLjA2NjY3IDkuNjY2NjcgMy41NiA5IDUgOSIgc3Ryb2tlPSIjRkZBQTJCIiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPg0KPHBhdGggZD0iTTIxIDEwQzIwLjkzMzMgOS42NjY2NyAyMC40NCA5IDE5IDkiIHN0cm9rZT0iI0ZGQUEyQiIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz4NCjxwYXRoIGQ9Ik0yMSAxMFYyMSIgc3Ryb2tlPSIjRkZBQTJCIiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPg0KPHBhdGggZD0iTTMgMjFDNC4zNjgxNyAyMC4yMSA1LjkyMDE3IDE5Ljc5NDIgNy41IDE5Ljc5NDJDOS4wNzk4MyAxOS43OTQyIDEwLjYzMTggMjAuMjEgMTIgMjFDMTMuMzY4MiAyMC4yMSAxNC45MjAyIDE5Ljc5NDIgMTYuNSAxOS43OTQyQzE4LjA3OTggMTkuNzk0MiAxOS42MzE4IDIwLjIxIDIxIDIxIiBzdHJva2U9IiNGRkFBMkIiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+DQo8cGF0aCBkPSJNOS42IDEyLjA3MTRDOC45MjgzOCAxMS41NzY3IDguNDMyMjcgMTAuODg3IDguMTgxOTUgMTAuMDk5OUM3LjkzMTYzIDkuMzEyOTEgNy45Mzk3OCA4LjQ2ODQ3IDguMjA1MjYgNy42ODYyNUM4LjQ3MDc1IDYuOTA0MDIgOC45ODAxIDYuMjIzNjYgOS42NjExNiA1Ljc0MTU1QzEwLjM0MjIgNS4yNTk0MyAxMS4xNjA1IDUgMTIgNUMxMi44Mzk1IDUgMTMuNjU3OCA1LjI1OTQzIDE0LjMzODggNS43NDE1NUMxNS4wMTk5IDYuMjIzNjYgMTUuNTI5MyA2LjkwNDAyIDE1Ljc5NDcgNy42ODYyNUMxNi4wNjAyIDguNDY4NDcgMTYuMDY4NCA5LjMxMjkxIDE1LjgxODEgMTAuMDk5OUMxNS41Njc3IDEwLjg4NyAxNS4wNzE2IDExLjU3NjcgMTQuNCAxMi4wNzE0QzE0LjA4NzcgMTIuMzc1MSAxMy44NTI1IDEyLjc0NjcgMTMuNzEzNSAxMy4xNTYyQzEzLjU3NDUgMTMuNTY1NyAxMy41MzU2IDE0LjAwMTYgMTMuNiAxNC40Mjg2QzEzLjYgMTQuODQ1MyAxMy40MzE0IDE1LjI0NSAxMy4xMzE0IDE1LjUzOTdDMTIuODMxMyAxNS44MzQ0IDEyLjQyNDMgMTYgMTIgMTZDMTEuNTc1NyAxNiAxMS4xNjg3IDE1LjgzNDQgMTAuODY4NiAxNS41Mzk3QzEwLjU2ODYgMTUuMjQ1IDEwLjQgMTQuODQ1MyAxMC40IDE0LjQyODZDMTAuNDY0NCAxNC4wMDE2IDEwLjQyNTUgMTMuNTY1NyAxMC4yODY1IDEzLjE1NjJDMTAuMTQ3NSAxMi43NDY3IDkuOTEyMzUgMTIuMzc1MSA5LjYgMTIuMDcxNFoiIHN0cm9rZT0iI0ZGQUEyQiIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz4NCjxwYXRoIGQ9Ik0xMC4xNjAyIDEyLjg1NzJIMTMuODQwMiIgc3Ryb2tlPSIjRkZBQTJCIiBzdHJva2Utd2lkdGg9IjEuNSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+DQo8cGF0aCBkPSJNMTIgMkwxMiAxIiBzdHJva2U9IiNGRkFBMkIiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+DQo8cGF0aCBkPSJNNyA0TDYuMDQ0OTkgMy43MDM0NCIgc3Ryb2tlPSIjRkZBQTJCIiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPg0KPHBhdGggZD0iTTE2Ljk5OTggNEwxNy45NTQ4IDMuNzAzNDQiIHN0cm9rZT0iI0ZGQUEyQiIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz4NCjwvc3ZnPg0K)}.misa-knowledge-trigger *{box-sizing:border-box}.misa-knowledge-trigger.misa-knowledge-active,.misa-knowledge-trigger:hover{background-color:rgba(0,0,0,.1)}.misa-knowledge-menu{position:absolute;top:calc(100% + 10px);right:-11px;left:auto;z-index:5000000;float:left;cursor:default;color:#1e2538;background-color:#fff;border-radius:6px;display:none;box-shadow:0 2px 8px rgba(0,0,0,.16);-webkit-box-shadow:0 2px 8px rgba(0,0,0,.16);width:240px;padding:12px 0;background-clip:padding-box;-webkit-background-clip:padding-box;-moz-background-clip:padding-box;animation-name:fadeIn;-moz-animation-name:fadeIn;-o-animation-name:fadeIn;-webkit-animation-name:fadeIn;animation-duration:.5s;-webkit-animation-duration:.5s;-moz-animation-duration:.5s;-o-animation-duration:.5s;animation-fill-mode:both;-webkit-animation-fill-mode:both;-moz-animation-fill-mode:both;-o-animation-fill-mode:both}.misa-knowledge-total-number{background-color:#ff2929;color:#fff;position:absolute;top:-4px;left:20px;padding:0 5px;border-radius:24px;height:16px;line-height:16px;font-size:10px;user-select:none;font-weight:700}i.misa-knowledge-icon-align{width:10px;height:10px;display:block;right:23px;top:-5px;position:absolute;background-color:#fff;-webkit-transform:rotate(45deg);-moz-transform:rotate(45deg);-ms-transform:rotate(45deg);-o-transform:rotate(45deg);transform:rotate(45deg)}.misa-knowledge-item{height:40px;line-height:40px;border-radius:3px;color:#1e2538;cursor:pointer;display:flex;position:relative;padding-left:16px}.misa-knowledge-item:hover{background-color:#f2f2f2}.misa-knowledge-item a{text-decoration:none;font-size:14px;color:#1f1f1f;display:block;width:100%}.misa-knowledge-item .misa-knowledge-item-num{min-width:16px;padding:0 5px;height:16px;border-radius:16px;color:#fff;background-color:#ff2929;cursor:default;font-size:10px;line-height:16px;font-weight:700;text-align:center;position:absolute;right:16px;top:12px;box-sizing:border-box}</style>",document.head.appendChild(e.firstChild)}(window.MKLMenu=window.MKLMenu||{}),function(e){var g;(g=e).init=function(e){const l="misa-knowledge-menu",u="."+l,d=g.$config.website,p=g.$config.getNewPostPath;String.prototype.format=String.prototype.format||function(){var i=arguments;return this.replace(/{([0-9]+)}/g,function(e,t){return void 0===i[t]?e:i[t]})},g.menu=new(g.Class.extend(function(){var r=this;this.default={user:"",website:"",boxSelector:"#MISA_Knowledge",blogID:5,blogURL:null,language:"vi",delay:5e3},this.listCates=[],this.types=[],this.numbers={};const e="misa_knowledge";function i(){r.numbers={},r.types.forEach(function(e){r.numbers[e]=0}),a()}function n(){r.el.querySelectorAll("[type]").forEach(function(e){c(e),e.innerText=""})}function o(){return e+"_"+r.opts.blogID+"_"+r.opts.user}function a(){var t;r.opts.user&&sessionStorage.setItem(o(),JSON.stringify({time:(new Date).toISOString(),data:r.numbers})),n(),r.types.forEach(function(e){var t;r.numbers[e],t=r.el.querySelector("[type='"+e+"']"),0<(e="number"==typeof r.numbers[e]?r.numbers[e]:0)?(t.innerText=99<e?"99+":e,s(t)):(c(t),t.innerText="")}),t=0,r.types.forEach(function(e){r.numbers[e]||(r.numbers[e]=0),t+=r.numbers[e]}),(0==t?(r.totalNumberEl.innerText="",c):(r.totalNumberEl.innerText=99<t?"99+":t,s))(r.totalNumberEl)}function c(e){e&&(e.style.display="none")}function s(e,t){t=t||"block",e&&(e.style.display=t)}this.constructor=function(e){r.opts=Object.assign({},r.default),r.opts=Object.assign(r.default,e),r.resource=g.$resource[r.opts.language],r.resource||(r.resource=g.$resource.vi),r.opts.resource&&Object.assign(r.resource,r.opts.resource),r.opts.website?r.websiteURL=website:r.websiteURL=d;{r.box=document.querySelector(r.opts.boxSelector),r.box.style.position="relative",r.box.classList.add("misa-knowledge-trigger"),r.totalNumberEl=document.createElement("div"),r.totalNumberEl.classList.add("misa-knowledge-total-number"),c(r.totalNumberEl),r.box.appendChild(r.totalNumberEl),r.el=document.createElement("div"),r.el.classList=l,r.el.innerHTML="<i class='misa-knowledge-icon-align'></i><div class='misa-knowledge-content'></div>";let s=r.el.querySelector(".misa-knowledge-content");if(r.listCates=[],g.$config.links.forEach(function(e){var t,i=document.createElement("div"),n=(i.classList.add("misa-knowledge-item"),document.createElement("a"));n.setAttribute("target","_blank"),n.setAttribute("res-key",e.res);let o="",a=null;"blog"==e.type?(a=r.opts.blogID,o=r.opts.blogURL||e.url[a]):(o=e.url,a=e.cate),o=o.format(r.websiteURL),n.href=(t=o,a,r.opts.user?t+"?mid="+btoa(r.opts.user):t),i.appendChild(n),e.hideNumber||((t=document.createElement("div")).classList.add("misa-knowledge-item-num"),t.setAttribute("type",e.type),i.appendChild(t),r.types.push(e.type)),a&&0<a&&(r.listCates.push(a),i.setAttribute("cate",a)),s.appendChild(i)}),r.el.querySelectorAll("[res-key]").forEach(function(e){var t=e.getAttribute("res-key");e.innerText=r.resource[t]}),r.box.appendChild(r.el),r.box.onclick=function(e){null!=(e=e.target).closest(u)||e.classList.contains(l)||("block"!=r.el.style.display?r.show():r.hide())},document.addEventListener("click",r.closeAllSelect),document.body.addEventListener("click",function(e){(e=e.target)==r.box||null!=e.closest(r.opts.boxSelector)||null!=e.closest(u)||e.classList.contains(l)||r.hide()}),r.el.querySelectorAll(".misa-knowledge-item").forEach(function(e){e.onclick=function(e){(e=e.currentTarget.querySelector(".misa-knowledge-item-num"))&&"academy"!=(type=e.getAttribute("type"))&&(r.numbers[type]=0,a()),"blog"==type&&"function"==typeof r.opts.blogClickFn&&r.opts.blogClickFn(),r.hide()}.bind(r)}),n(),r.opts.enableService)if(r.opts.user)try{var t=function(){if(r.opts.user){var e=o(),t=sessionStorage.getItem(e);try{if(t){var t=JSON.parse(t),i=new Date(t.time);if(i.setTime(i.getTime()+36e5),i<new Date)return sessionStorage.removeItem(e),null;if(t.data)return t.data}}catch(e){}}return null}();t?(r.numbers=t,a()):(r.timeout&&clearTimeout(r.timeout),r.timeout=setTimeout(function(){{let e=new XMLHttpRequest,t=new URL(r.websiteURL+p);t.searchParams.set("mid",btoa(r.opts.user)),t.searchParams.set("type",r.listCates.join(";")),e.responseType="json",e.open("GET",t),e.send(),e.onload=function(){if(200!=e.status)i();else{let i=e.response;i&&"object"==typeof i&&(r.numbers={},Object.keys(i).forEach(function(e){var t=g.$config.fixedCategory[e];r.numbers[t||"blog"]=i[e]})),"function"==typeof r.opts.customBlogNumber?r.opts.customBlogNumber(function(e){r.numbers.blog=e=e||0,a()}):a()}},e.onerror=function(){i()}}},r.opts.delay))}catch(e){console.log(e),i()}else console.log("MISA knowledge required user id!"),i()}},this.hide=function(){r.el.style.display="none",r.box.classList.remove("misa-knowledge-active")},this.show=function(){r.el.style.display="block",r.box.classList.add("misa-knowledge-active")}}))(e)}}(window.MKLMenu=window.MKLMenu||{}),!function(n){"use strict";function o(e){e.parent instanceof Function&&(o.apply(this,[e.parent]),this.callParent=a(this,s(this,this.constructor))),e.apply(this,arguments)}function a(e,t){for(var i in e)"callParent"!==i&&e[i]instanceof Function&&!(e[i].prototype instanceof n.Class)&&(t[i]=e[i].callParent||s(e,e[i]));return t}function s(i,n){var o=i.callParent;return n.callParent=function(){var e=i.callParent,t=(i.callParent=o,n.apply(i,arguments));return i.callParent=e,t}}n.$resource={},n.$config={},n.$data={},n.$enum={},n.$template={},n.Class=function(){},n.Class.extend=function t(i){function n(){o!==arguments[0]&&(o.apply(this,[i]),a(this,this),this.initializer instanceof Function&&this.initializer.apply(this),this.constructor.apply(this,arguments))}return((n.prototype=new this(o)).constructor=n).toString=function(){return i.toString()},n.extend=function(e){return e.parent=i,t.apply(n,arguments)},n},n.Class=n.Class.extend(function(){this.constructor=function(){},this.default={}}),n.$util={isValue:function(e){return null!=e&&""!==e},isUndefined:function(e){return void 0===e},isNull:function(e){return"object"==typeof e&&null==e},isFn:function(e){return"function"==typeof e},isDate:function(e){return e instanceof Date&&!isNaN(e)},setCookies:function(e,t,i,n,o){n&&(t=t+"; expires="+n),i&&(t=t+"; path="+i),o||(t+=";secure"),document.cookie=e+"="+t},getCookies:function(e){var t={},i=document.cookie;if(i)for(var n=i.split(";"),o=0;o<n.length;o++){var a=n[o].indexOf("=");0<=a?t[n[o].substr(0,a).trim()]=decodeURIComponent(n[o].substr(a+1).trim()):t[n[o]]=""}return e?t[e]:t},serialize:function(e){return JSON.stringify(e,(()=>{const i=new WeakSet;return(e,t)=>{if("object"==typeof t&&null!==t){if(i.has(t))return;i.add(t)}return t}})())},deserialize:function(e){if("string"!=typeof e)return"object"==typeof e&&0<Object.keys(e).length?e:{};try{return JSON.parse(e)}catch(e){return{}}},diffMinutes:function(e,t){e=(e.getTime()-t.getTime())/1e3;return e/=60,Math.abs(Math.round(e))}},n.$config={},n.$icon={Tenant:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxnIGNsaXAtcGF0aD0idXJsKCNjbGlwMF80MzE3XzcwMDgpIj4NCjxwYXRoIGQ9Ik0yLjY5NjI5IDE3LjYzNkgxNy42MzYzIiBzdHJva2U9IiM2RTczN0EiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+DQo8cGF0aCBkPSJNNC4zNTY0NSAxNy42MzZWNi4wMTU5OEwxMC45OTY0IDIuNjk1OThWMTcuNjM2IiBzdHJva2U9IiM2RTczN0EiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+DQo8cGF0aCBkPSJNMTUuOTc2MSAxNy42MzZWOS4zMzU5OUwxMC45OTYxIDYuMDE1OTkiIHN0cm9rZT0iIzZFNzM3QSIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz4NCjxwYXRoIGQ9Ik03LjY3NTc4IDcuNjgwMTFWNy42ODg0MSIgc3Ryb2tlPSIjNkU3MzdBIiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPg0KPHBhdGggZD0iTTcuNjc1NzggMTAuMTcwMVYxMC4xNzg0IiBzdHJva2U9IiM2RTczN0EiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+DQo8cGF0aCBkPSJNNy42NzU3OCAxMi42NjAyVjEyLjY2ODUiIHN0cm9rZT0iIzZFNzM3QSIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz4NCjxwYXRoIGQ9Ik03LjY3NTc4IDE1LjE1MDFWMTUuMTU4NCIgc3Ryb2tlPSIjNkU3MzdBIiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPg0KPC9nPg0KPGRlZnM+DQo8Y2xpcFBhdGggaWQ9ImNsaXAwXzQzMTdfNzAwOCI+DQo8cmVjdCB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIGZpbGw9IndoaXRlIi8+DQo8L2NsaXBQYXRoPg0KPC9kZWZzPg0KPC9zdmc+DQo=",Data:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgdmlld0JveD0iMCAwIDE2IDE2Ij48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMDAwMCA2Njg1KSI+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMCA1KSI+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTEwMDAwIC02NjkwKSI+PHBhdGggZD0iTTAsMEgxNlYxNkgwWiIgb3BhY2l0eT0iMCIvPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDggOCkiPjxwYXRoIGQ9Ik0wLDBIMTUuODRWMTUuODRIMFoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC03LjkyIC03LjkyKSIgZmlsbD0ibm9uZSIvPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0wLjE1OCAtNC4xMTgpIj48ZWxsaXBzZSBjeD0iNS4yOCIgY3k9IjEuOTgiIHJ4PSI1LjI4IiByeT0iMS45OCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTUuMjggLTEuOTgpIiBmaWxsPSJub25lIiBzdHJva2U9IiMxZjFmMWYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIxIi8+PC9nPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0wLjE1OCAtMS4xNDgpIj48cGF0aCBkPSJNMi42NCwzLjk2VjcuOTJDMi42NCw5LjAxNCw1LDkuOSw3LjkyLDkuOXM1LjI4LS44ODYsNS4yOC0xLjk4VjMuOTYiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC03LjkyIC02LjkzKSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMWYxZjFmIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMSIvPjwvZz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMC4xNTggMi44MTIpIj48cGF0aCBkPSJNMi42NCw3LjkydjMuOTZjMCwxLjA5NCwyLjM2NCwxLjk4LDUuMjgsMS45OHM1LjI4LS44ODYsNS4yOC0xLjk4VjcuOTIiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC03LjkyIC0xMC44OSkiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzFmMWYxZiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2Utd2lkdGg9IjEiLz48L2c+PC9nPjwvZz48L2c+PC9nPjwvc3ZnPg==",Key:"data:image/svg+xml;base64,PHN2ZyBpZD0ia2V5IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij4NCiAgPGcgaWQ9Ikdyb3VwXzMzMDEwIiBkYXRhLW5hbWU9Ikdyb3VwIDMzMDEwIj4NCiAgICA8cGF0aCBpZD0iUGF0aF8zNDg3NCIgZGF0YS1uYW1lPSJQYXRoIDM0ODc0IiBkPSJNMCwwSDI0VjI0SDBaIiBmaWxsPSJub25lIi8+DQogICAgPGNpcmNsZSBpZD0iRWxsaXBzZV8yMjI2IiBkYXRhLW5hbWU9IkVsbGlwc2UgMjIyNiIgY3g9IjQiIGN5PSI0IiByPSI0IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg0IDExKSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNjg2YzdiIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMiIvPg0KICAgIDxwYXRoIGlkPSJQYXRoXzM0ODc1IiBkYXRhLW5hbWU9IlBhdGggMzQ4NzUiIGQ9Ik0xMC44NSwxMi4xNSwxOSw0IiBmaWxsPSJub25lIiBzdHJva2U9IiM2ODZjN2IiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIyIi8+DQogICAgPHBhdGggaWQ9IlBhdGhfMzQ4NzYiIGRhdGEtbmFtZT0iUGF0aCAzNDg3NiIgZD0iTTE4LDVsMiwyIiBmaWxsPSJub25lIiBzdHJva2U9IiM2ODZjN2IiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIyIi8+DQogICAgPHBhdGggaWQ9IlBhdGhfMzQ4NzciIGRhdGEtbmFtZT0iUGF0aCAzNDg3NyIgZD0iTTE1LDhsMiwyIiBmaWxsPSJub25lIiBzdHJva2U9IiM2ODZjN2IiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIyIi8+DQogIDwvZz4NCjwvc3ZnPg0K",Account:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij4NCiAgPGcgaWQ9Ikdyb3VwXzMzODAzIiBkYXRhLW5hbWU9Ikdyb3VwIDMzODAzIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyNTI2IC02NzcpIj4NCiAgICA8cGF0aCBpZD0iUGF0aF8zNDgzMCIgZGF0YS1uYW1lPSJQYXRoIDM0ODMwIiBkPSJNMCwwSDI0VjI0SDBaIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMjUyNiA2NzcpIiBmaWxsPSJub25lIi8+DQogICAgPGcgaWQ9Ikdyb3VwXzMzODAyIiBkYXRhLW5hbWU9Ikdyb3VwIDMzODAyIj4NCiAgICAgIDxjaXJjbGUgaWQ9IkVsbGlwc2VfMjIzMiIgZGF0YS1uYW1lPSJFbGxpcHNlIDIyMzIiIGN4PSI5IiBjeT0iOSIgcj0iOSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTI1MjMgNjgwKSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNjg2YzdiIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMiIvPg0KICAgICAgPGNpcmNsZSBpZD0iRWxsaXBzZV8yMTg3IiBkYXRhLW5hbWU9IkVsbGlwc2UgMjE4NyIgY3g9IjIiIGN5PSIyIiByPSIyIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMjUxNiA2ODUpIiBmaWxsPSJub25lIiBzdHJva2U9IiM2ODZjN2IiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIyIi8+DQogICAgICA8cGF0aCBpZD0iSW50ZXJzZWN0aW9uXzEiIGRhdGEtbmFtZT0iSW50ZXJzZWN0aW9uIDEiIGQ9Ik00LjAyNCwxNi41YTUsNSwwLDAsMSw5Ljk1MSwwLDkuMDA2LDkuMDA2LDAsMCwxLTkuOTUxLDBaIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMjUyMyA2ODApIiBmaWxsPSJub25lIiBzdHJva2U9IiM2ODZjN2IiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIyIi8+DQogICAgPC9nPg0KICA8L2c+DQo8L3N2Zz4NCg==",Security:"data:image/svg+xml;base64,PHN2ZyBpZD0iU2hpZWxkLWNoZWNrIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij4NCiAgPGcgaWQ9Ikdyb3VwXzMzMDEyIiBkYXRhLW5hbWU9Ikdyb3VwIDMzMDEyIj4NCiAgICA8cGF0aCBpZD0iUGF0aF8zNDg4MCIgZGF0YS1uYW1lPSJQYXRoIDM0ODgwIiBkPSJNMCwwSDI0VjI0SDBaIiBmaWxsPSJub25lIi8+DQogICAgPHBhdGggaWQ9IlBhdGhfMzQ4ODEiIGRhdGEtbmFtZT0iUGF0aCAzNDg4MSIgZD0iTTksMTJsMiwyLDQtNCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNjg2YzdiIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMiIvPg0KICAgIDxwYXRoIGlkPSJQYXRoXzM0ODgyIiBkYXRhLW5hbWU9IlBhdGggMzQ4ODIiIGQ9Ik0xMiwzYTEyLDEyLDAsMCwwLDguNSwzQTEyLDEyLDAsMCwxLDEyLDIxLDEyLDEyLDAsMCwxLDMuNSw2LDEyLDEyLDAsMCwwLDEyLDMiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzY4NmM3YiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2Utd2lkdGg9IjIiLz4NCiAgPC9nPg0KPC9zdmc+DQo=",Loyalty:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxnIGNsaXAtcGF0aD0idXJsKCNjbGlwMF8xXzMzMDApIj4NCjxwYXRoIGQ9Ik01IDdDNSA4LjA2MDg3IDUuNDIxNDMgOS4wNzgyOCA2LjE3MTU3IDkuODI4NDNDNi45MjE3MiAxMC41Nzg2IDcuOTM5MTMgMTEgOSAxMUMxMC4wNjA5IDExIDExLjA3ODMgMTAuNTc4NiAxMS44Mjg0IDkuODI4NDNDMTIuNTc4NiA5LjA3ODI4IDEzIDguMDYwODcgMTMgN0MxMyA1LjkzOTEzIDEyLjU3ODYgNC45MjE3MiAxMS44Mjg0IDQuMTcxNTdDMTEuMDc4MyAzLjQyMTQzIDEwLjA2MDkgMyA5IDNDNy45MzkxMyAzIDYuOTIxNzIgMy40MjE0MyA2LjE3MTU3IDQuMTcxNTdDNS40MjE0MyA0LjkyMTcyIDUgNS45MzkxMyA1IDdaIiBzdHJva2U9IiM1NDU5NjUiIHN0cm9rZS13aWR0aD0iMS41IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz4NCjxwYXRoIGQ9Ik0zIDIxVjE5QzMgMTcuOTM5MSAzLjQyMTQzIDE2LjkyMTcgNC4xNzE1NyAxNi4xNzE2QzQuOTIxNzIgMTUuNDIxNCA1LjkzOTEzIDE1IDcgMTVIMTFDMTEuOTYgMTUgMTIuODQgMTUuMzM4IDEzLjUzIDE1LjkwMSIgc3Ryb2tlPSIjNTQ1OTY1IiBzdHJva2Utd2lkdGg9IjEuNSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+DQo8cGF0aCBkPSJNMTYgMy4xMjk4OEMxNi44NjA0IDMuMzUwMTggMTcuNjIzIDMuODUwNTggMTguMTY3NiA0LjU1MjE5QzE4LjcxMjIgNS4yNTM4IDE5LjAwNzggNi4xMTY3MSAxOS4wMDc4IDcuMDA0ODhDMTkuMDA3OCA3Ljg5MzA1IDE4LjcxMjIgOC43NTU5NiAxOC4xNjc2IDkuNDU3NTdDMTcuNjIzIDEwLjE1OTIgMTYuODYwNCAxMC42NTk2IDE2IDEwLjg3OTkiIHN0cm9rZT0iIzU0NTk2NSIgc3Ryb2tlLXdpZHRoPSIxLjUiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPg0KPHBhdGggZD0iTTE2IDE5SDIyIiBzdHJva2U9IiM1NDU5NjUiIHN0cm9rZS13aWR0aD0iMS41IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz4NCjxwYXRoIGQ9Ik0xOSAxNlYyMiIgc3Ryb2tlPSIjNTQ1OTY1IiBzdHJva2Utd2lkdGg9IjEuNSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+DQo8L2c+DQo8ZGVmcz4NCjxjbGlwUGF0aCBpZD0iY2xpcDBfMV8zMzAwIj4NCjxyZWN0IHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgZmlsbD0iIzU0NTk2NSIvPg0KPC9jbGlwUGF0aD4NCjwvZGVmcz4NCjwvc3ZnPg0K",Logout:"data:image/svg+xml;base64,PHN2ZyBpZD0ibG9nb3V0IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij4NCiAgPGcgaWQ9Ikdyb3VwXzMyNzkwIiBkYXRhLW5hbWU9Ikdyb3VwIDMyNzkwIj4NCiAgICA8cGF0aCBpZD0iUGF0aF8zNDU1NyIgZGF0YS1uYW1lPSJQYXRoIDM0NTU3IiBkPSJNMCwwSDI0VjI0SDBaIiBmaWxsPSJub25lIi8+DQogICAgPHBhdGggaWQ9IlBhdGhfMzQ1NTgiIGRhdGEtbmFtZT0iUGF0aCAzNDU1OCIgZD0iTTE0LDhWNmEyLDIsMCwwLDAtMi0ySDVBMiwyLDAsMCwwLDMsNlYxOGEyLDIsMCwwLDAsMiwyaDdhMiwyLDAsMCwwLDItMlYxNiIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNjg2YzdiIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMiIvPg0KICAgIDxwYXRoIGlkPSJQYXRoXzM0NTU5IiBkYXRhLW5hbWU9IlBhdGggMzQ1NTkiIGQ9Ik03LDEySDIxTDE4LDltMCw2LDMtMyIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNjg2YzdiIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMiIvPg0KICA8L2c+DQo8L3N2Zz4NCg==",LanguageVietnam:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMiIgaGVpZ2h0PSIxNi41IiB2aWV3Qm94PSIwIDAgMjIgMTYuNSI+DQogIDxnIGlkPSJfNDhweF92aWV0bmFtIiBkYXRhLW5hbWU9IjQ4cHhfdmlldG5hbSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMCAtNikiPg0KICAgIDxnIGlkPSJHcm91cF8xNDI1MSIgZGF0YS1uYW1lPSJHcm91cCAxNDI1MSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMCA2KSI+DQogICAgICA8cGF0aCBpZD0iUGF0aF8yMjc3NSIgZGF0YS1uYW1lPSJQYXRoIDIyNzc1IiBkPSJNMjIsMjEuNTgzYS45MTcuOTE3LDAsMCwxLS45MTcuOTE3SC45MTdBLjkxNy45MTcsMCwwLDEsMCwyMS41ODNWNi45MTdBLjkxNy45MTcsMCwwLDEsLjkxNyw2SDIxLjA4M0EuOTE3LjkxNywwLDAsMSwyMiw2LjkxN1oiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDAgLTYpIiBmaWxsPSIjZDgyODI3Ii8+DQogICAgICA8cGF0aCBpZD0iUGF0aF8yMjc3NiIgZGF0YS1uYW1lPSJQYXRoIDIyNzc2IiBkPSJNMjMuMywxOC4xMzlIMjAuNmwtMS4xMzItMi40NTUtMS4xMzMsMi40NTVoLTIuN0wxNy42MSwyMC4xOGwtLjcyOSwyLjk1OCwyLjU4OS0xLjQ3MSwyLjU4OSwxLjQ3MS0uNzI5LTIuOTU4WiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTguNDcxIC0xMS4yNDUpIiBmaWxsPSIjZmZmZDM4Ii8+DQogICAgPC9nPg0KICA8L2c+DQo8L3N2Zz4NCg==",LanguageEnglish:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMiIgaGVpZ2h0PSIxNi41IiB2aWV3Qm94PSIwIDAgMjIgMTYuNSI+DQogIDxnIGlkPSJfNDhweF91ayIgZGF0YS1uYW1lPSI0OHB4X3VrIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwIC02KSI+DQogICAgPGcgaWQ9Ikdyb3VwXzE2NjgzIiBkYXRhLW5hbWU9Ikdyb3VwIDE2NjgzIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwIDYpIj4NCiAgICAgIDxwYXRoIGlkPSJQYXRoXzIyNzc5IiBkYXRhLW5hbWU9IlBhdGggMjI3NzkiIGQ9Ik0yMS4wODMsNkguOTE3QS45MTcuOTE3LDAsMCwwLDAsNi45MTdWMjEuNTgzYS45MTcuOTE3LDAsMCwwLC45MTcuOTE3SDIxLjA4M0EuOTE3LjkxNywwLDAsMCwyMiwyMS41ODNWNi45MTdBLjkxNy45MTcsMCwwLDAsMjEuMDgzLDZaIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwIC02KSIgZmlsbD0iIzAwMjc4MSIvPg0KICAgICAgPHBhdGggaWQ9IlBhdGhfMjI3ODAiIGRhdGEtbmFtZT0iUGF0aCAyMjc4MCIgZD0iTTIyLDYuOTE3QS45MTcuOTE3LDAsMCwwLDIxLjA4Myw2SDE4LjcxOGwtNS44ODUsNC41MjdWNkg5LjE2N3Y0LjUyN0wzLjI4Miw2SC45MTdBLjkxNy45MTcsMCwwLDAsMCw2LjkxN1Y4LjFsNS42MSw0LjMxNUgwdjMuNjY3SDUuNjFMMCwyMC40djEuMTg1YS45MTcuOTE3LDAsMCwwLC45MTcuOTE3SDMuMjgybDUuODg1LTQuNTI3VjIyLjVoMy42NjdWMTcuOTczTDE4LjcxOCwyMi41aDIuMzY1QS45MTcuOTE3LDAsMCwwLDIyLDIxLjU4M1YyMC40bC01LjYxLTQuMzE1SDIyVjEyLjQxN0gxNi4zOUwyMiw4LjFaIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwIC02KSIgZmlsbD0iI2U2ZTZlNiIvPg0KICAgICAgPHBhdGggaWQ9IlBhdGhfMjI3ODEiIGRhdGEtbmFtZT0iUGF0aCAyMjc4MSIgZD0iTTIyLDEzLjMzM0gxMS45MTdWNkgxMC4wODN2Ny4zMzNIMHYxLjgzM0gxMC4wODNWMjIuNWgxLjgzM1YxNS4xNjdIMjJaIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwIC02KSIgZmlsbD0iI2QxMGQyNCIvPg0KICAgICAgPHBhdGggaWQ9IlBhdGhfMjI3ODIiIGRhdGEtbmFtZT0iUGF0aCAyMjc4MiIgZD0iTTM3LjM1OSw2LjMwNywyOS4yLDEyLjU4M2gxLjVsNy4xMTMtNS40NzJWNy4wODNBLjkuOSwwLDAsMCwzNy4zNTksNi4zMDdaIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTUuODE3IC02LjE2NikiIGZpbGw9IiNkMTBkMjQiLz4NCiAgICAgIDxwYXRoIGlkPSJQYXRoXzIyNzgzIiBkYXRhLW5hbWU9IlBhdGggMjI3ODMiIGQ9Ik0zMC43LDI4SDI5LjJsOC4xNTksNi4yNzZhLjkuOSwwLDAsMCwuNDU4LS43NzZ2LS4wMjhaIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTUuODE3IC0xNy45MTcpIiBmaWxsPSIjZDEwZDI0Ii8+DQogICAgICA8cGF0aCBpZD0iUGF0aF8yMjc4NCIgZGF0YS1uYW1lPSJQYXRoIDIyNzg0IiBkPSJNNy4xMTMsMjgsMCwzMy40NzJWMzMuNWEuOS45LDAsMCwwLC40NTguNzc2TDguNjE3LDI4aC0xLjVaIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwIC0xNy45MTcpIiBmaWxsPSIjZDEwZDI0Ii8+DQogICAgICA8cGF0aCBpZD0iUGF0aF8yMjc4NSIgZGF0YS1uYW1lPSJQYXRoIDIyNzg1IiBkPSJNNy4xMTMsMTIuNTgzaDEuNUwuNDU4LDYuMzA3QS45LjksMCwwLDAsMCw3LjA4M3YuMDI4WiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMCAtNi4xNjYpIiBmaWxsPSIjZDEwZDI0Ii8+DQogICAgPC9nPg0KICA8L2c+DQo8L3N2Zz4NCg==",IconRequired:"data:image/svg+xml;base64,PHN2ZyBpZD0iSWNvbl9XYXJuaW5nIiBkYXRhLW5hbWU9Ikljb24vV2FybmluZyIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAxNiAxNiI+DQogIDxyZWN0IGlkPSJSZWN0YW5nbGVfMTY1MjgiIGRhdGEtbmFtZT0iUmVjdGFuZ2xlIDE2NTI4IiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIGZpbGw9Im5vbmUiLz4NCiAgPHBhdGggaWQ9IlBhdGhfMTkiIGRhdGEtbmFtZT0iUGF0aCAxOSIgZD0iTTguNjcsMS42N2E3LDcsMCwxLDAsNyw3QTcsNywwLDAsMCw4LjY3LDEuNjdabS0uNyw0LjJhLjcuNywwLDEsMSwxLjM5NSwwdjIuOGEuNy43LDAsMCwxLTEuMzk1LDBabS43MDYsNi4zYS43MS43MSwwLDAsMS0uNzA2LS43MDYuNy43LDAsMCwxLC43LS43aC4wMDhhLjcuNywwLDAsMSwuNy43QS43LjcsMCwwLDEsOC42NzgsMTIuMTc0WiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTAuNjcgLTAuNjcpIiBmaWxsPSIjZGQyYTJhIi8+DQo8L3N2Zz4NCg==",IconCamera:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyOCIgaGVpZ2h0PSIyOCIgdmlld0JveD0iMCAwIDI4IDI4Ij4NCiAgPGcgaWQ9Ikdyb3VwXzMyMTI5IiBkYXRhLW5hbWU9Ikdyb3VwIDMyMTI5IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTM1IC0xMTYpIj4NCiAgICA8Y2lyY2xlIGlkPSJFbGxpcHNlXzI0MjMiIGRhdGEtbmFtZT0iRWxsaXBzZSAyNDIzIiBjeD0iMTQiIGN5PSIxNCIgcj0iMTQiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEzNSAxMTYpIiBmaWxsPSIjZmZmIi8+DQogICAgPGNpcmNsZSBpZD0iRWxsaXBzZV8yNDIyIiBkYXRhLW5hbWU9IkVsbGlwc2UgMjQyMiIgY3g9IjEyIiBjeT0iMTIiIHI9IjEyIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMzcgMTE4KSIgZmlsbD0iI2I5YmJiZiIvPg0KICAgIDxwYXRoIGlkPSJQYXRoXzQ3NTEiIGRhdGEtbmFtZT0iUGF0aCA0NzUxIiBkPSJNNC40NzctMTAuMjcxdjcuMDE4YTEuMTI4LDEuMTI4LDAsMCwxLS4zNDEuODI5LDEuMTI4LDEuMTI4LDAsMCwxLS44MjkuMzQxSC02LjgzYTEuMTI4LDEuMTI4LDAsMCwxLS44MjktLjM0MUExLjEyOCwxLjEyOCwwLDAsMS04LTMuMjUydi03LjAxOGExLjEyOCwxLjEyOCwwLDAsMSwuMzQxLS44MjksMS4xMjgsMS4xMjgsMCwwLDEsLjgyOS0uMzQxaDIuMTQ0bC4yOTItLjhhMS40MSwxLjQxLDAsMCwxLC4yNTYtLjM5QTEuMTQyLDEuMTQyLDAsMCwxLTMuNzYtMTIuOSwxLjEyNywxLjEyNywwLDAsMS0zLjMtMTNILS4yMjZhMS4xMTEsMS4xMTEsMCwwLDEsLjY1OC4yMDcsMS4yNywxLjI3LDAsMCwxLC40MzkuNTQ4bC4yOTIuOEgzLjMwN2ExLjEyOCwxLjEyOCwwLDAsMSwuODI5LjM0MUExLjEyOCwxLjEyOCwwLDAsMSw0LjQ3Ny0xMC4yNzFaTS4zMS00LjY5YTIuODIsMi44MiwwLDAsMCwuODUzLTIuMDcxQTIuODIsMi44MiwwLDAsMCwuMzEtOC44MzNhMi44MiwyLjgyLDAsMCwwLTIuMDcxLS44NTMsMi44MiwyLjgyLDAsMCwwLTIuMDcxLjg1MywyLjgyLDIuODIsMCwwLDAtLjg1MywyLjA3MUEyLjgyLDIuODIsMCwwLDAtMy44MzMtNC42OWEyLjgyLDIuODIsMCwwLDAsMi4wNzEuODUzQTIuODIsMi44MiwwLDAsMCwuMzEtNC42OVptLS41Ni0zLjU4MkEyLjA2MywyLjA2MywwLDAsMSwuMzgzLTYuNzYxLDIuMDYzLDIuMDYzLDAsMCwxLS4yNTEtNS4yNTFhMi4wNjMsMi4wNjMsMCwwLDEtMS41MTEuNjM0LDIuMDYzLDIuMDYzLDAsMCwxLTEuNTExLS42MzQsMi4wNjMsMi4wNjMsMCwwLDEtLjYzNC0xLjUxMSwyLjA2MywyLjA2MywwLDAsMSwuNjM0LTEuNTExLDIuMDYzLDIuMDYzLDAsMCwxLDEuNTExLS42MzRBMi4wNjMsMi4wNjMsMCwwLDEtLjI1MS04LjI3MloiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE1MC43NjEgMTM3LjU0MSkiIGZpbGw9IiMyMTI5M2EiLz4NCiAgPC9nPg0KPC9zdmc+DQo="},n.$resource.en={AccountMenu_ChangePassword:"Change password",AccountMenu_AccountSetting:"Account setting",AccountMenu_SecuritySetting:"Security setting",AccountMenu_Subscription:"License & payment",AccountMenu_Loyalty:"Referrals receive rewards",AccountMenu_Logout_Name:"Logout",LanguageTitle:"Language",AccountMenu_WarningSecurity2FA:"Your account has not enabled 2-factor security",AccountMenu_WarningSecurityPassword:"Your password is not secure enough"},n.$resource.vi={AccountMenu_ChangePassword:"Đổi mật khẩu",AccountMenu_AccountSetting:"Thiết lập tài khoản",AccountMenu_SecuritySetting:"Thiết lập bảo mật",AccountMenu_Subscription:"Giấy phép & thanh toán",AccountMenu_Loyalty:"Giới thiệu nhận thưởng",AccountMenu_Logout_Name:"Đăng xuất",LanguageTitle:"Ngôn ngữ",AccountMenu_CompleteProfile:"Hoàn thiện tài khoản",AccountMenu_UpdateProfile:"Cập nhật",AccountMenu_WarningSecurity2FA:"Tài khoản chưa bật bảo mật 2 yếu tố",AccountMenu_WarningSecurityPassword:"Mật khẩu của bạn không đủ bảo mật"},n.$template.Menu='\ufeff<div class="misa-user-account-menu" apui-template><i class="icon-align"></i><ul class="misaid-popup-menu"><li class="misaid-user-details"><div class="misaid-user-avatar"><img class="misaid-avatar-img"> <i class="misaid-user-avatar-upload"><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyOCIgaGVpZ2h0PSIyOCIgdmlld0JveD0iMCAwIDI4IDI4Ij4NCiAgPGcgaWQ9Ikdyb3VwXzMyMTI5IiBkYXRhLW5hbWU9Ikdyb3VwIDMyMTI5IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTM1IC0xMTYpIj4NCiAgICA8Y2lyY2xlIGlkPSJFbGxpcHNlXzI0MjMiIGRhdGEtbmFtZT0iRWxsaXBzZSAyNDIzIiBjeD0iMTQiIGN5PSIxNCIgcj0iMTQiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEzNSAxMTYpIiBmaWxsPSIjZmZmIi8+DQogICAgPGNpcmNsZSBpZD0iRWxsaXBzZV8yNDIyIiBkYXRhLW5hbWU9IkVsbGlwc2UgMjQyMiIgY3g9IjEyIiBjeT0iMTIiIHI9IjEyIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMzcgMTE4KSIgZmlsbD0iI2I5YmJiZiIvPg0KICAgIDxwYXRoIGlkPSJQYXRoXzQ3NTEiIGRhdGEtbmFtZT0iUGF0aCA0NzUxIiBkPSJNNC40NzctMTAuMjcxdjcuMDE4YTEuMTI4LDEuMTI4LDAsMCwxLS4zNDEuODI5LDEuMTI4LDEuMTI4LDAsMCwxLS44MjkuMzQxSC02LjgzYTEuMTI4LDEuMTI4LDAsMCwxLS44MjktLjM0MUExLjEyOCwxLjEyOCwwLDAsMS04LTMuMjUydi03LjAxOGExLjEyOCwxLjEyOCwwLDAsMSwuMzQxLS44MjksMS4xMjgsMS4xMjgsMCwwLDEsLjgyOS0uMzQxaDIuMTQ0bC4yOTItLjhhMS40MSwxLjQxLDAsMCwxLC4yNTYtLjM5QTEuMTQyLDEuMTQyLDAsMCwxLTMuNzYtMTIuOSwxLjEyNywxLjEyNywwLDAsMS0zLjMtMTNILS4yMjZhMS4xMTEsMS4xMTEsMCwwLDEsLjY1OC4yMDcsMS4yNywxLjI3LDAsMCwxLC40MzkuNTQ4bC4yOTIuOEgzLjMwN2ExLjEyOCwxLjEyOCwwLDAsMSwuODI5LjM0MUExLjEyOCwxLjEyOCwwLDAsMSw0LjQ3Ny0xMC4yNzFaTS4zMS00LjY5YTIuODIsMi44MiwwLDAsMCwuODUzLTIuMDcxQTIuODIsMi44MiwwLDAsMCwuMzEtOC44MzNhMi44MiwyLjgyLDAsMCwwLTIuMDcxLS44NTMsMi44MiwyLjgyLDAsMCwwLTIuMDcxLjg1MywyLjgyLDIuODIsMCwwLDAtLjg1MywyLjA3MUEyLjgyLDIuODIsMCwwLDAtMy44MzMtNC42OWEyLjgyLDIuODIsMCwwLDAsMi4wNzEuODUzQTIuODIsMi44MiwwLDAsMCwuMzEtNC42OVptLS41Ni0zLjU4MkEyLjA2MywyLjA2MywwLDAsMSwuMzgzLTYuNzYxLDIuMDYzLDIuMDYzLDAsMCwxLS4yNTEtNS4yNTFhMi4wNjMsMi4wNjMsMCwwLDEtMS41MTEuNjM0LDIuMDYzLDIuMDYzLDAsMCwxLTEuNTExLS42MzQsMi4wNjMsMi4wNjMsMCwwLDEtLjYzNC0xLjUxMSwyLjA2MywyLjA2MywwLDAsMSwuNjM0LTEuNTExLDIuMDYzLDIuMDYzLDAsMCwxLDEuNTExLS42MzRBMi4wNjMsMi4wNjMsMCwwLDEtLjI1MS04LjI3MloiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE1MC43NjEgMTM3LjU0MSkiIGZpbGw9IiMyMTI5M2EiLz4NCiAgPC9nPg0KPC9zdmc+DQo=" style="width:28px;height:28px"> </i><input class="misaid-user-avatar-file-upload" type="file" name="image" accept="image/jpeg,image/png,image/svg,image/jpg"></div><div class="misaid-user-info"><div class="misaid-user-fullname"></div><div class="misaid-user-account"></div></div></li><li class="misaid-workspaces"><div bg="Tenant" class="misaid-workspace misaid-tenant"></div><div bg="Data" class="misaid-workspace misaid-datasource"></div></li><li class="misaid-menu-account-item misaid-menu-item extend-item has-icon" type="changepassword"><i bg="Key" class="misaid-user-menu-icon"></i><label res-key="AccountMenu_ChangePassword"></label></li><li class="misaid-menu-account-item misaid-menu-item extend-item has-icon" type="info"><i bg="Account" class="misaid-user-menu-icon"></i><label res-key="AccountMenu_AccountSetting"></label></li><li class="misaid-menu-account-item misaid-menu-item extend-item has-icon" style="place-items:center" type="security"><i bg="Security" class="misaid-user-menu-icon"></i> <label res-key="AccountMenu_SecuritySetting"></label><div class="misaid-menu-account-warning-security" type="WarningSecurity"><img style="padding-right:8px;height:24px" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGcgY2xpcC1wYXRoPSJ1cmwoI2NsaXAwXzIyMzlfMTIpIj4KPHBhdGggZD0iTTEyIDlWMTFNMTIgMTVWMTUuMDEiIHN0cm9rZT0iI0ZGMjkyOSIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiPjwvcGF0aD4KPHBhdGggZD0iTTUuMDAwMDEgMTlIMTlDMTkuNjYyNSAxOC45OTU0IDIwLjI3OTggMTguNjYyOSAyMC42NDgyIDE4LjExMjNDMjEuMDE2NyAxNy41NjE2IDIxLjA4ODUgMTYuODY0MiAyMC44NCAxNi4yNUwxMy43NCA0LjAwMDAyQzEzLjM4NzggMy4zNjMzOCAxMi43MTc2IDIuOTY4MjYgMTEuOTkgMi45NjgyNkMxMS4yNjI0IDIuOTY4MjYgMTAuNTkyMyAzLjM2MzM4IDEwLjI0IDQuMDAwMDJMMy4xNDAwMSAxNi4yNUMyLjg5NjQxIDE2Ljg0OTggMi45NTgxMyAxNy41MzAzIDMuMzA1NjYgMTguMDc2NEMzLjY1MzIgMTguNjIyNSA0LjI0MzU1IDE4Ljk2NjcgNC44OTAwMSAxOSIgc3Ryb2tlPSIjRkYyOTI5IiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCI+PC9wYXRoPgo8L2c+CjxkZWZzPgo8Y2xpcFBhdGggaWQ9ImNsaXAwXzIyMzlfMTIiPgo8cmVjdCB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIGZpbGw9IndoaXRlIj48L3JlY3Q+CjwvY2xpcFBhdGg+CjwvZGVmcz4KPC9zdmc+"></div><div class="misaid-menu-account-warning-box"><div class="misaid-menu-item-warning" type="WarningSecurityPassword"><div class="misa-user-account-warning-icon"></div><label res-key="AccountMenu_WarningSecurityPassword"></label></div><div class="misaid-menu-item-warning" type="WarningSecurity2FA"><div class="misa-user-account-warning-icon"></div><label res-key="AccountMenu_WarningSecurity2FA"></label></div></div></li><li class="misaid-menu-account-item misaid-menu-item extend-item has-icon" type="loyalty"><i bg="Loyalty" class="misaid-user-menu-icon"></i><label res-key="AccountMenu_Loyalty"></label></li><li class="misaid-language-switch misaid-menu-item extend-item has-icon"><div class="misaid-combobox-body"><div class="misaid-combobox-input"><div class="misaid-language-icon"></div></div><div class="misaid-languages-menu"></div></div></li><li class="misaid-menu-item-logout"><p><label bg="Logout" class="misaid-user-menu-icon misaid-icon-logout" res-key="AccountMenu_Logout_Name"></label></p></li></ul></div>';var e=document.createElement("div");e.innerHTML='<style>.misa-user-account-menu{position:absolute;top:calc(100% + 12px);right:-8px;left:auto;z-index:5000000;float:left;cursor:default;color:#1f1f1f;background-color:#fff;border-radius:8px;display:none;box-shadow:0 3px 16px rgba(0,0,0,.16);-webkit-box-shadow:0 3px 16px rgba(0,0,0,.16);width:302px;background-clip:padding-box;-webkit-background-clip:padding-box;-moz-background-clip:padding-box;animation-name:fadeIn;-moz-animation-name:fadeIn;-o-animation-name:fadeIn;-webkit-animation-name:fadeIn;animation-duration:.5s;-webkit-animation-duration:.5s;-moz-animation-duration:.5s;-o-animation-duration:.5s;animation-fill-mode:both;-webkit-animation-fill-mode:both;-moz-animation-fill-mode:both;-o-animation-fill-mode:both}.misaid-user-account-warning{z-index:2;right:-8px;top:-8px;position:absolute;width:20px;height:20px;background-image:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxjaXJjbGUgY3g9IjEwIiBjeT0iMTAiIHI9IjEwIiBmaWxsPSJ3aGl0ZSIvPg0KPHBhdGggZD0iTTEzLjk1OTQgMy4wMzE4M0MxNy4yOTMxIDQuOTU2NzIgMTguNzgzMSA4Ljk4MzEgMTcuNTA1NiAxMi42MTQ1QzE2LjIyOCAxNi4yNDU5IDEyLjU0NTIgMTguNDUyNCA4Ljc0MDYyIDE3Ljg2NTlDNC45MzYwMSAxNy4yNzk1IDIuMDg4NjQgMTQuMDY2MyAxLjk2Mzk2IDEwLjIxODdMMS45NTk5NiA5Ljk1OTU2TDEuOTYzOTYgOS43MDAzN0MyLjA1NTA5IDYuODkwMDcgMy42MTQ5NCA0LjMzMzk0IDYuMDcyNDcgMi45Njc3NEM4LjUzIDEuNjAxNTQgMTEuNTI0NCAxLjYyNTg3IDEzLjk1OTQgMy4wMzE4M1pNOS45Njc1NiAxMi4zNTk1TDkuODY1OTcgMTIuMzY1MUM5LjQ2MzU1IDEyLjQxMjkgOS4xNjA0OSAxMi43NTQyIDkuMTYwNDkgMTMuMTU5NEM5LjE2MDQ5IDEzLjU2NDcgOS40NjM1NSAxMy45MDU5IDkuODY1OTcgMTMuOTUzOEw5Ljk1OTU2IDEzLjk1OTRMMTAuMDYxMiAxMy45NTM4QzEwLjQ2MzYgMTMuOTA1OSAxMC43NjY2IDEzLjU2NDcgMTAuNzY2NiAxMy4xNTk0QzEwLjc2NjYgMTIuNzU0MiAxMC40NjM2IDEyLjQxMjkgMTAuMDYxMiAxMi4zNjUxTDkuOTY3NTYgMTIuMzU5NVpNOS45NTk1NiA1Ljk1OTcyQzkuNTU0IDUuOTU5NzcgOS4yMTI2NSA2LjI2MzMxIDkuMTY1MiA2LjY2NjA5TDkuMTU5NiA2Ljc1OTY5VjkuOTU5NTZMOS4xNjUyIDEwLjA1MzJDOS4yMTMwNyAxMC40NTU2IDkuNTU0MyAxMC43NTg2IDkuOTU5NTYgMTAuNzU4NkMxMC4zNjQ4IDEwLjc1ODYgMTAuNzA2MSAxMC40NTU2IDEwLjc1MzkgMTAuMDUzMkwxMC43NTk1IDkuOTU5NTZWNi43NTk2OUwxMC43NTM5IDYuNjY2MDlDMTAuNzA2NSA2LjI2MzMxIDEwLjM2NTEgNS45NTk3NyA5Ljk1OTU2IDUuOTU5NzJaIiBmaWxsPSIjRkYyOTI5Ii8+DQo8L3N2Zz4NCg==);background-repeat:no-repeat;background-size:20px;background-position:center}.misaid-popup-menu{font-size:14px;text-align:left;list-style:none;margin:2px 0 0;padding:0}.misaid-popup-menu label{font-weight:400!important}i.icon-align{width:10px;height:10px;display:block;right:19px;top:-5px;position:absolute;background-color:#fff;-webkit-transform:rotate(45deg);-moz-transform:rotate(45deg);-ms-transform:rotate(45deg);-o-transform:rotate(45deg);transform:rotate(45deg)}.misaid-user-avatar{height:64px;width:64px;margin:0 auto;margin-top:24px}.misaid-user-avatar img{border-radius:50%;height:64px;width:64px;display:block}.misa-user-account-menu .misaid-user-info{text-align:center;margin-bottom:16px;margin-top:16px}.misa-user-account-menu .misaid-user-fullname{margin-bottom:4px;font-size:20px;font-weight:700;padding:0 24px;line-height:30px}.misa-user-account-menu .misaid-user-account{font-size:13px;color:#666;line-height:19px}.misa-user-account-menu .misaid-workspaces{height:auto;margin:0 16px;border-radius:4px;color:#1f1f1f;cursor:pointer;border:1px solid #e0e0e0;margin-bottom:8px;padding:0 8px}.misa-user-account-menu .misaid-workspace{padding:8px 12px 8px;position:relative;line-height:21px;background-position:left;padding-left:24px;background-repeat:no-repeat}.misa-user-account-menu .misaid-workspace:before{content:"";position:absolute;right:9px;top:calc(50% - 5px);width:8px;height:8px;border:solid #65696e;border-width:0 2px 2px 0;-webkit-transform:rotate(-45deg);-moz-transform:rotate(-45deg);-o-transform:rotate(-45deg);box-sizing:border-box;-ms-transform:rotate(-45deg);transform:rotate(-45deg)}.misa-user-account-menu .misaid-workspace:hover{color:#2196f3}.misa-user-account-menu .misaid-workspace:hover:before{border:solid #2196f3;border-width:0 2px 2px 0}.misa-user-account-menu .misaid-workspace.misaid-datasource{border-top:1px solid #e5e5e5}.misaid-user-menu-icon{background-repeat:no-repeat;background-size:24px}.misa-user-account-menu li.misaid-menu-item.misaid-language-switch{cursor:default}.misaid-combobox-body{position:relative;background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgdmlld0JveD0iMCAwIDE2IDE2Ij4NCiAgPGcgaWQ9Ikdyb3VwXzgzMDA0IiBkYXRhLW5hbWU9Ikdyb3VwIDgzMDA0IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTY4MiAxMDEwNykgcm90YXRlKDkwKSI+DQogICAgPGcgaWQ9Ikdyb3VwXzgzMDAyIiBkYXRhLW5hbWU9Ikdyb3VwIDgzMDAyIj4NCiAgICAgIDxnIGlkPSJHcm91cF84MzAwMSIgZGF0YS1uYW1lPSJHcm91cCA4MzAwMSI+DQogICAgICAgIDxyZWN0IGlkPSJSZWN0YW5nbGVfMjg2NzUiIGRhdGEtbmFtZT0iUmVjdGFuZ2xlIDI4Njc1IiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xMDEwNyAtMTY5OCkiIGZpbGw9Im5vbmUiLz4NCiAgICAgICAgPHBhdGggaWQ9IlBhdGhfMTA4MjIxIiBkYXRhLW5hbWU9IlBhdGggMTA4MjIxIiBkPSJNNi4zNjMsNC4zODNsNCw0LTQsNCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTEwMTA3LjM2MyAtMTY5OC4zODMpIiBmaWxsPSJub25lIiBzdHJva2U9IiM2NTY5NmUiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIyIi8+DQogICAgICA8L2c+DQogICAgPC9nPg0KICA8L2c+DQo8L3N2Zz4NCg==);background-position:right;background-repeat:no-repeat}.misaid-combobox-input{padding-right:24px;cursor:pointer}.misaid-languages-menu{position:absolute;top:calc(100% + 2px);right:0;left:auto;z-index:5000000;display:none;width:160px;float:left;padding:8px;cursor:default;margin:2px 0 0;font-size:16px;text-align:left;list-style:none;background-color:#fff;-webkit-background-clip:padding-box;-moz-background-clip:padding-box;background-clip:padding-box;border-radius:4px;-webkit-box-shadow:0 2px 8px rgba(0,0,0,.3);box-shadow:0 2px 8px rgba(0,0,0,.3);-moz-animation-name:fadeIn;-o-animation-name:fadeIn;-webkit-animation-name:fadeIn;animation-name:fadeIn;-webkit-animation-duration:.5s;-moz-animation-duration:.5s;-o-animation-duration:.5s;animation-duration:.5s;-webkit-animation-fill-mode:both;-moz-animation-fill-mode:both;overflow:hidden;-o-animation-fill-mode:both;animation-fill-mode:both;color:#1f1f1f;padding-right:10px}.misaid-language-item{height:32px;line-height:32px;font-size:14px;color:#1f1f1f;padding:0 16px 0 16px;overflow:hidden;cursor:pointer;white-space:nowrap;-ms-text-overflow:ellipsis;-o-text-overflow:ellipsis;text-overflow:ellipsis;display:block;position:relative}.misaid-language-item.selected.selected::after{content:"";position:absolute;right:16px;top:6px;width:6px;height:12px;border:solid #2196f3;border-width:0 2px 2px 0;-webkit-transform:rotate(45deg);-moz-transform:rotate(45deg);-o-transform:rotate(45deg);-ms-transform:rotate(45deg);transform:rotate(45deg)}.misaid-language-item:hover{background-color:#f2f2f2}.misaid-language-icon{background-size:20px;background-position:10px;background-repeat:no-repeat;padding-left:40px}.misa-user-account-menu li.misaid-menu-item{height:40px;line-height:42px;margin:0 16px;border-radius:3px;color:#1f1f1f;cursor:pointer;display:flex}.misa-user-account-menu li.misaid-menu-item:hover{background-color:#f2f2f2}.misa-user-account-menu li.misaid-menu-item span{width:100%;display:block}.misa-user-account-menu li.misaid-menu-item.has-icon span{width:calc(100% - 32px);display:block}.misa-user-account-menu li.misaid-menu-item i.misaid-user-menu-icon{height:40px;width:40px;background-position:8px center!important;background-repeat:no-repeat;background-size:24px;display:block}.misaid-menu-item-logout{border-top:1px solid #e0e0e0;height:44px;line-height:44px;text-align:center;margin-top:16px}.misaid-menu-item-logout:hover{background-color:#f2f2f2;cursor:pointer}.misaid-menu-item-logout label.misaid-icon-logout{cursor:pointer!important}.misaid-menu-item-logout .misaid-icon-logout{background-position:left;background-repeat:no-repeat;background-size:24px;padding:8px 32px;text-align:unset;display:unset!important}.misaid-menu-item-logout p{margin:0}.misaid-menu-account-warning-box>.misaid-menu-item-warning:hover{background-color:#f2f2f2;cursor:pointer}.misaid-menu-item-warning label{color:#1a73e8;margin-bottom:0;cursor:pointer}.misaid-menu-item-warning{padding:0 16px;line-height:42px;cursor:pointer}.misaid-menu-account-warning-security{position:absolute;right:16px;display:none;height:24px;width:24px}.misaid-menu-account-warning-box:hover,.misaid-menu-account-warning-security:hover+.misaid-menu-account-warning-box{display:block;right:26px;opacity:1;transition:opacity .5s ease,left 0s .5s,-webkit-transform .5s ease;transition:opacity .5s ease,transform .5s ease,left 0s .5s;transition:opacity .5s ease,transform .5s ease,left 0s .5s,-webkit-transform .5s ease}.misa-user-account-warning-icon{background-image:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGcgY2xpcC1wYXRoPSJ1cmwoI2NsaXAwXzIyMzlfMTIpIj4KPHBhdGggZD0iTTEyIDlWMTFNMTIgMTVWMTUuMDEiIHN0cm9rZT0iI0ZGMjkyOSIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiPjwvcGF0aD4KPHBhdGggZD0iTTUuMDAwMDEgMTlIMTlDMTkuNjYyNSAxOC45OTU0IDIwLjI3OTggMTguNjYyOSAyMC42NDgyIDE4LjExMjNDMjEuMDE2NyAxNy41NjE2IDIxLjA4ODUgMTYuODY0MiAyMC44NCAxNi4yNUwxMy43NCA0LjAwMDAyQzEzLjM4NzggMy4zNjMzOCAxMi43MTc2IDIuOTY4MjYgMTEuOTkgMi45NjgyNkMxMS4yNjI0IDIuOTY4MjYgMTAuNTkyMyAzLjM2MzM4IDEwLjI0IDQuMDAwMDJMMy4xNDAwMSAxNi4yNUMyLjg5NjQxIDE2Ljg0OTggMi45NTgxMyAxNy41MzAzIDMuMzA1NjYgMTguMDc2NEMzLjY1MzIgMTguNjIyNSA0LjI0MzU1IDE4Ljk2NjcgNC44OTAwMSAxOSIgc3Ryb2tlPSIjRkYyOTI5IiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCI+PC9wYXRoPgo8L2c+CjxkZWZzPgo8Y2xpcFBhdGggaWQ9ImNsaXAwXzIyMzlfMTIiPgo8cmVjdCB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIGZpbGw9IndoaXRlIj48L3JlY3Q+CjwvY2xpcFBhdGg+CjwvZGVmcz4KPC9zdmc+);background-repeat:no-repeat;background-size:24px;background-position:center;width:24px;height:24px;vertical-align:middle;border-style:none;margin-right:8px;display:inline-block}.misaid-menu-account-warning-box{display:none;opacity:0;z-index:5000000;background:#fff;right:-1000px;position:absolute;border-radius:5px;width:300px;box-shadow:0 3px 16px rgba(0,0,0,.16);-webkit-box-shadow:0 3px 16px rgba(0,0,0,.16)}.misaid-user-avatar{height:64px;width:64px;margin:0 auto;margin-top:24px}.misaid-user-avatar img{border-radius:50%;height:64px;width:64px;display:block}.misaid-user-avatar-upload{position:relative;left:60%;top:-40%;display:none;cursor:pointer}.misaid-user-avatar-file-upload{display:none!important}</style>',document.head.appendChild(e.firstChild)}(window.MISAIDAccount=window.MISAIDAccount||{}),function(e){var d;(d=e).exports={},d.init=function(e){return String.prototype.format=String.prototype.format||function(){var i=arguments;return this.replace(/{([0-9]+)}/g,function(e,t){return void 0===i[t]?e:i[t]})},new(d.Class.extend(function(){var a=this;function s(e){a.avatarImg.src=e,a.el.querySelector("img.misaid-avatar-img").src=e}function r(){var t,e,i=o(),n=(e=!0,a.opts.dataSource&&a.opts.dataSource.Name?(t=a.el.querySelector(".misaid-datasource"),n=a.opts.dataSource.Name,t.innerText=54<n.length?n.substr(0,54)+"...":n,t.setAttribute("id",a.opts.dataSource.ID),t.setAttribute("title",n),t.onclick=function(e){"function"==typeof a.opts.events.onDataSourceSelect&&a.opts.events.onDataSourceSelect({name:t.innerText,id:t.getAttribute("id")},e),a.hide()}):e=!(a.el.querySelector(".misaid-datasource").style.display="none"),e);a.el.querySelector(".misaid-workspaces").style.display=i||n?"block":"none"}function o(){var e,t=!0,i=a.el.querySelector(".misaid-tenant");return a.opts.tenant&&a.opts.tenant.Name?(e=a.opts.tenant.Name,i.innerText=54<e.length?e.substr(0,54)+"...":e,i.setAttribute("id",a.opts.tenant.ID),i.setAttribute("title",e),i.onclick=function(e){"function"==typeof a.opts.events.onTenantSelect&&a.opts.events.onTenantSelect({name:i.innerText,id:i.getAttribute("id")},e),a.hide()}):t=!(i.style.display="none"),t}function c(){a.isWarningSecurity?(a.box.querySelector(".misaid-user-account-warning").style.display="block",a.el.querySelector('[type="WarningSecurity"]').style.display="block",a.el.querySelector(".misaid-menu-account-warning-box").style.display="",a.el.querySelector('[type="WarningSecurityPassword"]').style.display=a.isWarningSecurityPassword?"block":"none",a.el.querySelector('[type="WarningSecurity2FA"]').style.display=a.isWarningSecurity2FA?"block":"none",a.avatar.style.border="2px solid red"):(a.el.querySelector('[type="WarningSecurity"]').style.display="none",a.el.querySelector(".misaid-menu-account-warning-box").style.display="none",a.avatar.style.border="none",a.box.querySelector(".misaid-user-account-warning").style.display="none")}function l(t,e){var i,n=a.opts.languages.list.filter(function(e){return e.code==t})[0];a.langMenuEl&&(a.langMenuEl.style.display="none",u(i=a.langDisplayEl.querySelector(".misaid-language-icon"),n.icon),i.innerText=a.resource.LanguageTitle+": "+n.display,i=a.el.querySelector(".misaid-language-item[code='"+t+"']"),a.el.querySelectorAll(".misaid-language-item.selected").forEach(function(e){e.classList.remove("selected")}),i.classList+=" selected"),"function"==typeof a.opts.events.onLanguageChange&&a.opts.events.onLanguageChange(t,e)}function u(e,t){e.style.backgroundImage="url("+t+")"}this.default={user:{FullName:"",Account:"",Avatar:""},boxSelector:"#body",tenant:{Name:"",ID:""},dataSource:{Name:"",ID:""},loyalty:!0,warningSecurity:{isShow:!1},warningSecurity2FA:{isShow:!1},warningSecurityPassword:{isShow:!1},changeAvatar:{isAllow:!1},events:{onLanguageChange:function(e){},onTenantSelect:function(e,t){},onDataSourceSelect:function(e,t){},onLogoutClick:function(e){},onItemClick:function(e,t,i){},onUploadAvatarClick:function(e,t){}},languages:{multi:!0,list:[{code:"vi",display:"Việt Nam",icon:d.$icon.LanguageVietnam},{code:"en",display:"English",icon:d.$icon.LanguageEnglish}],current:null,default:"vi"}},this.constructor=function(i){e=i,a.opts=Object.assign({},a.default),Object.assign(a.opts.user,e.user),Object.assign(a.opts.tenant,e.tenant),Object.assign(a.opts.dataSource,e.dataSource),Object.assign(a.opts.languages,e.languages),Object.assign(a.opts.events,e.events),Object.assign(a.opts.warningSecurity2FA,e.warningSecurity2FA),Object.assign(a.opts.warningSecurityPassword,e.warningSecurityPassword),Object.assign(a.opts.changeAvatar,e.changeAvatar),Object.assign(a.opts.warningSecurity,e.warningSecurity),e.boxSelector&&(a.opts.boxSelector=e.boxSelector),a.languageConfig=a.opts.languages;var e,t,n,o="string"==typeof a.languageConfig.current?a.languageConfig.current:"function"==typeof a.languageConfig.current?a.languageConfig.current():a.languageConfig.default;0==a.opts.languages.list.filter(e=>e.code==o).length&&(o=a.opts.languages.default),i.resource&&Object.keys(i.resource).forEach(function(e){d.$resource[key]||(d.$resource[e]={});var t=i.resource[e];t&&Object.assign(d.$resource[e],t)}),a.currentCulture=o,a.resource=d.$resource[a.currentCulture]||d.$resource[a.opts.languages.default]||d.$resource.vi,a.isWarningSecurity=!1,a.isWarningSecurity2FA=!1,a.isWarningSecurityPassword=!1,a.opts.warningSecurity&&a.opts.warningSecurity.isShow&&("function"==typeof a.opts.warningSecurity.isShow?a.isWarningSecurity=a.opts.warningSecurity.isShow():a.isWarningSecurity=a.opts.warningSecurity.isShow),a.isWarningSecurity&&(a.opts.warningSecurity2FA&&a.opts.warningSecurity2FA.isShow&&("function"==typeof a.opts.warningSecurity2FA.isShow?a.isWarningSecurity2FA=a.opts.warningSecurity2FA.isShow():a.isWarningSecurity2FA=a.opts.warningSecurity2FA.isShow),a.opts.warningSecurityPassword)&&a.opts.warningSecurityPassword.isShow&&("function"==typeof a.opts.warningSecurityPassword.isShow?a.isWarningSecurityPassword=a.opts.warningSecurityPassword.isShow():a.isWarningSecurityPassword=a.opts.warningSecurityPassword.isShow),a.isWarningSecurity2FA||a.isWarningSecurityPassword||(a.isWarningSecurity=!1),a.allowChangeAvatar=!1,a.opts.changeAvatar&&a.opts.changeAvatar.isAllow&&("function"==typeof a.opts.changeAvatar.isAllow?a.allowChangeAvatar=a.opts.changeAvatar.isAllow():a.allowChangeAvatar=a.opts.changeAvatar.isAllow),a.box=document.querySelector(a.opts.boxSelector),a.box.style.position="relative",a.box.innerHTML="<div class='misaid-user-account-warning' style='display:none'></div>",(e=document.createElement("div")).style.position="relative",e.style.borderRadius="50%",e.style.cursor="pointer",e.style.width="32px",e.style.height="32px",e.style.overflow="hidden",a.avatar=e,a.avatarImg=document.createElement("img"),a.avatarImg.style.width="100%",a.avatarImg.style.height="100%",a.avatarImg.style.maxHeight=32,a.avatarImg.style.maxWidth=32,e.appendChild(a.avatarImg),a.box.appendChild(e),a.el=(t=d.$template.Menu,n=document.createElement("template"),t=t.trim(),n.innerHTML=t,n.content.firstChild),a.el.querySelectorAll("[res-key]").forEach(function(e){var t=e.getAttribute("res-key");e.innerText=a.resource[t]}),a.el.querySelectorAll("[bg]").forEach(function(e){var t=e.getAttribute("bg");u(e,d.$icon[t])}),a.box.appendChild(a.el),a.box.onclick=function(e){null!=(e=e.target).closest(".misa-user-account-menu")||e.classList.contains(".misa-user-account-menu")||("block"!=a.el.style.display?a.show():a.hide())},a.el.querySelector(".misaid-user-fullname").innerText=a.opts.user.FullName,a.el.querySelector(".misaid-user-account").innerText=a.opts.user.Account,a.allowChangeAvatar&&((e=a.el.querySelector(".misaid-user-avatar-upload")).style.display="block",e.onclick=function(e){"function"==typeof a.opts.events.onUploadAvatarClick&&a.opts.events.onUploadAvatarClick(a,e)}),r(),a.opts.languages.multi&&Array.isArray(a.opts.languages.list)&&1<a.opts.languages.list.length?(a.langMenuEl=a.el.querySelector(".misaid-languages-menu"),a.opts.languages.list.forEach(function(e){var t=document.createElement("div");t.classList+="misaid-language-icon misaid-language-item",t.innerText=e.display,t.setAttribute("code",e.code),u(t,e.icon),t.onclick=function(e){e.stopPropagation(),e.preventDefault(),l(e.currentTarget.getAttribute("code"),!0),a.hide()}.bind(a),a.langMenuEl.appendChild(t)}),a.langDisplayEl=a.el.querySelector(".misaid-combobox-input"),a.langDisplayEl.onclick=function(e){"block"!=a.langMenuEl.style.display?a.langMenuEl.style.display="block":a.langMenuEl.style.display="none"}):a.el.querySelector(".misaid-language-switch").style.display="none",l(a.currentCulture),a.opts.loyalty||(a.el.querySelector('[type="loyalty"]').style.display="none"),c(),s(a.opts.user.Avatar),document.body.onclick=function(e){(e=e.target).classList.contains("misaid-languages-menu")||e.closest(".misaid-languages-menu")||e==a.langDisplayEl||e.closest(".misaid-combobox-input")||a.langMenuEl&&(a.langMenuEl.style.display="none"),e==a.box||null!=e.closest(a.opts.boxSelector)||null!=e.closest(".misa-user-account-menu")||e.classList.contains(".misa-user-account-menu")||a.hide()},a.el.querySelectorAll(".misaid-menu-account-item").forEach(function(e){e.onclick=function(e){var t=e.currentTarget,i=t.getAttribute("type");"WarningSecurity2FA"!=e.target.getAttribute("type")&&!e.target.closest('[type="WarningSecurity2FA"]')||(i="two-factor-authen"),"WarningSecurityPassword"!=e.target.getAttribute("type")&&!e.target.closest('[type="WarningSecurityPassword"]')||(i="changepassword"),"function"==typeof a.opts.events.onItemClick&&a.opts.events.onItemClick(i,t,e),a.hide()}.bind(a)}),a.el.querySelector(".misaid-menu-item-logout").onclick=function(e){"function"==typeof a.opts.events.onLogoutClick&&a.opts.events.onLogoutClick(e)},d.exports[a.opts.boxSelector]={updateTenant:a.updateTenant.bind(a),updateDataSource:a.updateDataSource.bind(a),updateAvatar:a.updateAvatar.bind(a),showWarning:a.showWarning.bind(a)}},this.updateTenant=function(e){a.opts.tenant=e,o()},this.updateDataSource=function(e){a.opts.dataSource=e,r()},this.hide=function(){a.el.style.display="none"},this.show=function(){a.el.style.display="block"},this.updateAvatar=s.bind(a),this.showWarning=function(e){a.isWarningSecurityPassword=!!(e=e||{WarningSecurityPassword:!1,WarningSecurity2FA:!1}).WarningSecurityPassword,a.isWarningSecurity2FA=!!e.WarningSecurity2FA,a.isWarningSecurity=a.isWarningSecurityPassword||a.isWarningSecurity2FA,c()}.bind(a)}))(e)},d.updateTenant=function(t){Object.keys(d.exports).forEach(function(e){d.exports[e]&&"function"==typeof d.exports[e].updateTenant&&d.exports[e].updateTenant(t)})},d.updateDataSource=function(t){Object.keys(d.exports).forEach(function(e){d.exports[e]&&"function"==typeof d.exports[e].updateDataSource&&d.exports[e].updateDataSource(t)})},d.updateAvatar=function(t){Object.keys(d.exports).forEach(function(e){d.exports[e]&&"function"==typeof d.exports[e].updateAvatar&&d.exports[e].updateAvatar(t)})},d.showWarning=function(t){Object.keys(d.exports).forEach(function(e){d.exports[e]&&"function"==typeof d.exports[e].showWarning&&d.exports[e].showWarning(t)})}}(window.MISAIDAccount=window.MISAIDAccount||{}),!function(n){"use strict";function o(e){e.parent instanceof Function&&(o.apply(this,[e.parent]),this.callParent=a(this,s(this,this.constructor))),e.apply(this,arguments)}function a(e,t){for(var i in e)"callParent"!==i&&e[i]instanceof Function&&!(e[i].prototype instanceof n.Class)&&(t[i]=e[i].callParent||s(e,e[i]));return t}function s(i,n){var o=i.callParent;return n.callParent=function(){var e=i.callParent,t=(i.callParent=o,n.apply(i,arguments));return i.callParent=e,t}}n.Class=function(){},n.Class.extend=function t(i){function n(){o!==arguments[0]&&(o.apply(this,[i]),a(this,this),this.initializer instanceof Function&&this.initializer.apply(this),this.constructor.apply(this,arguments))}return((n.prototype=new this(o)).constructor=n).toString=function(){return i.toString()},n.extend=function(e){return e.parent=i,t.apply(n,arguments)},n},n.Class=n.Class.extend(function(){var t=this;this.constructor=function(){},this.default={},this.isValue=function(e){return null!=e&&""!==e},this.isNull=function(e){return null==e},this.updateOption=function(e){t.default||(t.default={}),t.opts=t.extendConfig(t.default,e=e||{})},this.extendConfig=function(e,i){var n=$.extend({},e);return Object.keys(i).forEach(function(t){var e=Object.keys(n).firstOrDefault(function(e){return e.toLowerCase()==t.toLowerCase()});e?n[e]=i[t]:n[t]=i[t]}),Object.keys(n).forEach(function(e){"string"!=typeof n[e]||"true"!=n[e].toLowerCase()&&"false"!=n[e].toLowerCase()||(n[e]=n[e].bool())}),n}})}(APCore={Fn:{},BuildDate:"20240605",VERSION:"3.6.0",Cache:{},MonitorData:{}}),String.prototype.isUrl=function(){return/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/.test(this)},String.prototype.secure=function(t,n){t=t||[],n=(n=n||[]).concat(["html","body","iframe","embed","base","meta","link","style","object","marquee","frameset","xss","script","applet"]);var e,o=["onmouseover","onmouseenter","onmouseleave","onmouseout","onMouseMove","onMouseOver","onMouseWheel","onwheel","onmouseup","onclick","ondblclick","onscroll","onresize","onfocus","onblur","autofocus","onchange","oncontextmenu","oninput","oninvalid","onreset","onsearch","onselect","onsubmit","onerror","onstart","onload","onbeforeload","onUnload","onpageshow","onpagehide","onEnd","onPopState","onPropertyChange","onfilterchange","formaction","onReadyStateChange","ontoggle","onafterprint","onbeforeprint","onbeforeunload","onhashchange","onmessage","onoffline","ononline","onstorage","onkeyup","onkeydown","onkeypress","onkeyup","ondrag","ondragend","ondragenter","ondragleave","ondragover","ondragstart","ondrop","oncopy","oncut","onpaste","onabort","oncanplay","oncanplaythrough","oncuechange","ondurationchange","onemptied","onended","onloadeddata","onloadedmetadata","onloadstart","onpause","onbegin","onplay","onplaying","onprogress","onratechange","onseeked","onseeking","onstalled","onsuspend","ontimeupdate","onvolumechange","onwaiting"],i=(t.forEach(function(e){e.toLowerCase()}),n=n.filter(function(e){return e=e.toLowerCase(),!t.contains(e)}),document.createElement("div")),a=document.createElement("textarea");return i.innerHTML=this,i.querySelectorAll("*").forEach(function(e){var t,i=e.tagName.toLowerCase();n.contains(i)?(a.innerHTML=e.outerHTML,e.replaceWith(a.innerHTML)):(t=e,o.forEach(function(e){t.removeAttribute(e)}),"a"==t.tagName.toLowerCase()?t.href.contains("javascript:")&&(t.href=""):"img"==t.tagName.toLowerCase()?t.src.contains("javascript:")&&(t.src=""):"iframe"!=t.tagName.toLowerCase()&&"embed"!=t.tagName.toLowerCase()||t.src.contains("data:")&&(t.src=""))}),e=i.innerHTML,i=a=null,e},String.prototype.removeXSSTag=String.prototype.secure,String.prototype.equals=function(e,t){return null!=e&&(t?this.toLowerCase()==e.toLowerCase():this==e)},String.prototype.decodeContent=function(){var e=document.createElement("textarea");return e.innerHTML=this,e.value},String.prototype.encodeHTML=function(){var e,t=document.createElement("textarea");return t.innerHTML=this,e=t.innerHTML,t=null,e},String.prototype.decodeHTML=String.prototype.decodeContent,String.prototype.encodeContent=function(){var e=this+"";return e=(e+"").removeHTML()!=e?e.replace(/[\u00A0-\u9999<>\&]/gim,function(e){return"&#"+e.charCodeAt(0)+";"}):e},String.prototype.toBase64=function(){return btoa(this+"")},String.prototype.fromBase64=function(){return atob(this+"")},String.prototype.replaceVietnamese=function(){var e=this+"";return e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=e.replace(/à|á|ạ|ả|ã|â|ầ|ấ|ậ|ẩ|ẫ|ă|ằ|ắ|ặ|ẳ|ẵ/g,"a")).replace(/è|é|ẹ|ẻ|ẽ|ê|ề|ế|ệ|ể|ễ/g,"e")).replace(/ì|í|ị|ỉ|ĩ/g,"i")).replace(/ò|ó|ọ|ỏ|õ|ô|ồ|ố|ộ|ổ|ỗ|ơ|ờ|ớ|ợ|ở|ỡ/g,"o")).replace(/ù|ú|ụ|ủ|ũ|ư|ừ|ứ|ự|ử|ữ/g,"u")).replace(/ỳ|ý|ỵ|ỷ|ỹ/g,"y")).replace(/À|Á|Ạ|Ả|Ã|Â|Ầ|Ấ|Ậ|Ẩ|Ẫ|Ă|Ằ|Ắ|Ặ|Ẳ|Ẵ/g,"A")).replace(/È|É|Ẹ|Ẻ|Ẽ|Ê|Ề|Ế|Ệ|Ể|Ễ/g,"E")).replace(/Ì|Í|Ị|Ỉ|Ĩ/g,"I")).replace(/Ò|Ó|Ọ|Ỏ|Õ|Ô|Ồ|Ố|Ộ|Ổ|Ỗ|Ơ|Ờ|Ớ|Ợ|Ở|Ỡ/g,"O")).replace(/Ù|Ú|Ụ|Ủ|Ũ|Ư|Ừ|Ứ|Ự|Ử|Ữ/g,"U")).replace(/Ỳ|Ý|Ỵ|Ỷ|Ỹ/g,"Y")).replace(/Đ/g,"D")).replace(/đ/g,"d")},String.prototype.like=function(e){return(this+"").replaceVietnamese().toLowerCase().contains(e.replaceVietnamese().toLowerCase())},String.prototype.formatCurrency=function(){return this.replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1.")},String.prototype.removeHTML=function(){return this.replace(/(<([^>]+)>)/gi,"")},String.prototype.formatData=function(i){var n=this;return Object.keys(i).forEach(function(e){var t=new RegExp("\\{"+("#"+e+"#")+"\\}","gi");null!=i[e]&&null!=i[e]||(i[e]=""),n=n.replace(t,i[e])}),n},String.prototype.format=function(){for(var e,t=this,i=0;i<arguments.length;i++)e=new RegExp("\\{"+i+"\\}","gi"),t=t.replace(e,arguments[i]);return t},String.prototype.config=function(e){for(var t,i=this,n=0;n<e.length;n++)t=new RegExp("\\{"+n+"\\}","gi"),i=i.replace(t,e);return i},String.prototype.bool=function(){return/^true$/i.test(this)},String.prototype.trim=function(e){return e?this.replace(/(?:(?:^|\n)\s+|\s+(?:$|\n))/g,"").replace(/\s+/g," "):/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(this)[1]},String.prototype.count=function(e){return this.split(e).length-1},String.prototype.isEmpty=function(){return 0===this.length},String.prototype.isEmail=function(){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(this)},String.prototype.isVNTaxCode=function(){return/^[0-9]{10}-[0-9]{3}$/.test(this)||/^[0-9]{10}$/.test(this)},String.prototype.isNumberPhone=function(){return!!(this.match(/^\(?([0-9]{3})\)?[-. ]?([0-9]{3})[-. ]?([0-9]{4})$/)||this.match(/^\(?([0-9]{4})\)?[-. ]?([0-9]{3})[-. ]?([0-9]{3})$/)||this.match(/^(0\d{1})[0-9]{8}$/))},String.prototype.isIsoDate=function(){return/^\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d(.)?(\d)?(\d)?(\d)?(Z)?$/.test(this)},String.prototype.isMsDate=function(){return 0==this.indexOf("/Date")},String.prototype.isNullOrEmpty=function(){return!this},String.prototype.isLastTrimEmpty=function(){return 0===this.trim().length},String.prototype.isNullOrWhiteSpace=function(){return this.isNullOrEmpty()||this.isLastTrimEmpty()},String.prototype.replaceAll=function(e,t){return this.split(e).join(t)},String.prototype.highlight=function(e){e=new RegExp(e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi");return this.replace(e,"<span class = 'highlight'>$&</span>")},String.prototype.contains=function(){return arguments&&arguments[0]&&-1<this.indexOf(arguments[0])},String.prototype.vbVal=function(){return parseInt(this.replaceAll(" ",""))},String.prototype.isInt=function(){return/^\d+$/.test(this)},String.prototype.isJson=function(){return/^[\],:{}\s]*$/.test(this.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))},String.prototype.startWith=function(e){return 0===this.indexOf(e)},String.prototype.In=function(e){for(var t=0;t<e.length;t++)if(e[t]==this.valueOf())return!0;return!1},String.prototype.endWith=function(e){return-1<this.indexOf(e)&&this.indexOf(e)===this.length-e.length},String.prototype.insert=function(e,t){return this.substr(0,e)+t+this.substring(e)},String.prototype.processXXS=function(){return this.replaceAll("<","&lt;").replaceAll(">","&gt;")},String.prototype.repeat=function(e){"use strict";var t,i;if(null===this)throw new TypeError("can't convert "+this+" to object");if(t=""+this,(e=(e=+e)!=e?0:e)<0)throw new RangeError("repeat count must be non-negative");if(e===1/0)throw new RangeError("repeat count must be less than infinity");if(e=Math.floor(e),0===t.length||0===e)return"";if(268435456<=t.length*e)throw new RangeError("repeat count must not overflow maximum string size");for(i="";1==(1&e)&&(i+=t),0!==(e>>>=1);)t+=t;return i},String.prototype.removeHtmlTag=function(){var e=document.createElement("DIV");return e.innerHTML=this,e.textContent||e.innerText||""},String.prototype.isGuid=function(){return/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-5][0-9a-fA-F]{3}-[89ab][0-9a-fA-F]{3}-[0-9a-fA-F]{12}$/.test(this)},String.prototype.replaceAt=function(e,t){return this.substr(0,e)+t+this.substr(e+1)},String.prototype.subWord=function(e){if(e&&"number"==typeof e)return this.split(/\s+/).slice(0,e).join(" ");throw"param is invalid or not a number"},Number.isFinite=Number.isFinite||function(e){return"number"==typeof e&&!isNaN(e)&&e!==1/0&&e!==-1/0},Number.isNaN=Number.isNaN||function(e){return"number"==typeof e&&isNaN(e)},Date.prototype.addDays=function(e){return new Date(this.setDate(this.getDate()+e))},Date.prototype.addMonths=function(e){return new Date(this.setMonth(this.getMonth()+e))},Date.prototype.addYears=function(e){return new Date(this.setYear(this.getFullYear()+e))},Date.prototype.addYearsMonthDays=function(e,t,i){return e&&this.addYears(e),t&&this.addMonths(t),i&&this.addDays(i),this},Date.prototype.compareDate=function(e){var t=0;return this.getFullYear()>e.getFullYear()?t=1:this.getFullYear()<e.getFullYear()?t=-1:this.getMonth()>e.getMonth()?t=1:this.getMonth()<e.getMonth()?t=-1:this.getDate()>e.getDate()?t=1:this.getDate()<e.getDate()&&(t=-1),t},Date.prototype.compareDateTime=function(e){var t=0;return this.getFullYear()>e.getFullYear()?t=1:this.getFullYear()<e.getFullYear()?t=-1:this.getMonth()>e.getMonth()?t=1:this.getMonth()<e.getMonth()?t=-1:this.getDate()>e.getDate()?t=1:this.getDate()<e.getDate()?t=-1:this.getHours()>e.getHours()?t=1:this.getHours()<e.getHours()?t=-1:this.getMinutes()>e.getMinutes()?t=1:this.getMinutes()<e.getMinutes()?t=-1:this.getSeconds()>e.getSeconds()?t=1:this.getSeconds()<e.getSeconds()&&(t=-1),t},Date.prototype.getDateOnly=function(){var e=new Date(this);return e.setHours(-e.getTimezoneOffset()/60),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0),e},Date.prototype.toMsString=function(){return"/Date("+this.getTime()+"-0700)/"},Date.prototype.addHours=function(e){if("number"==typeof e)return this.setTime(this.getTime()+36e5*e),this;throw"param is not number"},Date.prototype.addMinutes=function(e){if("number"==typeof e)return this.setTime(this.getTime()+6e4*e),this;throw"param is not number"},Date.prototype.addSeconds=function(e){if("number"==typeof e)return this.setTime(this.getTime()+1e3*e),this;throw"param is not number"},Date.prototype.clone=function(){var e=new Date(this);return e.setMilliseconds(this.getMilliseconds()),e},Date.prototype.formatDate=function(){var e,t=this.clone();return t&&""!==t?(e=(e=t.getDate())<10?"0"+e:e)+"/"+(e=(e=t.getMonth()+1)<10?"0"+e:e)+"/"+t.getFullYear():""},Array.prototype.shiftLeft=function(e,t){if((e=e||0)<this.length){for(var i=e;i<this.length-1;)this[i]=this[++i];return t&&this.pop(),this}throw"index out of ranger"},Array.prototype.indexOf=function(e,t){for(var i=t||0,n=this.length;i<n;i++)if(this[i]===e)return i;return-1},Array.prototype.first=function(){return 0<this.length?this[0]:void 0},Array.prototype.last=function(){return 0<this.length?this[this.length-1]:void 0},Array.prototype.insert=function(e,t){var i,n;if(0!==e&&e>this.length-1)throw"index out of range!";for(i=this.length-1,this.push(this[i]),n=i;e<n;n--)this[n]=this[n-1];this[e]=t},Array.prototype.remove=function(e){var t,i=this.indexOf(e);if(-1<i){for(t=i;t<this.length-1;t++)this[t]=this[t+1];this.pop(),this.remove(e)}return this},Array.prototype.contains=function(e){return-1<this.indexOf(e)},Array.prototype.getRandom=function(){return this[Math.floor(Math.random()*this.length)]},Array.prototype.sortObject=function(){var c,i;if(0<arguments.length)return c=function(o,a,e,t){var i=0,n=e[t].split(" "),s=n.first(),r=1<n.length&&"desc"===n.last().toLowerCase()?-1:1;return i=0===(i=function(e){var t=0,i=void 0,n=void 0;switch(e.split(".").forEach(function(e){i=(void 0===i?o:i)[e],n=(void 0===n?a:n)[e]}),typeof i){case"number":null==i&&null!=n?t=-1*r:null!=i&&null==n?t=r:i<n?t=-1*r:n<i&&(t=r);break;case"string":isNaN(new Date(i).getTime())||isNaN(new Date(n).getTime())?(i=null==i?"":i.toString().toLowerCase(),n=null==n?"":n.toString().toLowerCase(),i.localeCompare(n)<0?t=-1*r:0<i.localeCompare(n)&&(t=r)):new Date(i).compareDateTime(new Date(n))<0?t=-1*r:0<new Date(i).compareDateTime(new Date(n))&&(t=r);break;case"boolean":(i=i?1:0)<(n=n?1:0)?t=-1*r:n<i&&(t=r);break;case"object":i&&i.constructor&&"Date"==i.constructor.name&&(new Date(i).compareDateTime(new Date(n))<0?t=-1*r:0<new Date(i).compareDateTime(new Date(n))&&(t=r))}return t}(s))&&e.length>t+1?c(o,a,e,t+1):i},i=arguments,this.sort(function(e,t){return c(e,t,i,0)});throw"fields invalid"},Array.prototype.popObject=function(e){if(0<arguments.length&&e){for(var t=0,i=void 0,n=!1;t<this.length;t++)n?this[t-1]=this[t]:e(this[t])&&(i=this[t],n=!0);return n&&this.pop(),i}throw"fn invalid"},Array.prototype.addRange=function(e){var t=this;Array.isArray(e)&&e.forEach(function(e){t.push(e)})},Array.prototype.distinct=function(){for(var e=[],o=[],a=[],t=0;t<arguments.length;t++)a[t]=arguments[t];return a&&0<a.length?(this.forEach(function(t){var i="",n={};a.forEach(function(e){i+=(""===i?"":";")+t[e],n[e]=t[e]}),e.contains(i)||(e.push(i),o.push(n))}),o):this},Array.prototype.distinctObject=function(e){for(var t=[],i=[],n=this.length,o=0;o<n;o++)t[this[o][e]]||(t[this[o][e]]=!0,i.push(this[o][e]));return i},Array.prototype.firstOrDefault=function(e){if("function"!=typeof e)throw"param is not function";for(var t=0;t<this.length;t++)if(e(this[t]))return this[t];return null},window._getStorageDataSize=function(){var e,t,i=0;for(t in localStorage)localStorage.hasOwnProperty(t)&&(i+=e=2*(localStorage[t].length+t.length),console.log(t.substr(0,50)+" = "+(e/1024).toFixed(2)+" KB"));console.log("Total = "+(i/1024).toFixed(2)+" KB")},window._getSessionStorageDataSize=function(){var e,t,i=0;for(t in sessionStorage)sessionStorage.hasOwnProperty(t)&&(i+=e=2*(sessionStorage[t].length+t.length),console.log(t.substr(0,50)+" = "+(e/1024).toFixed(2)+" KB"));console.log("Total = "+(i/1024).toFixed(2)+" KB")},window._isValue=function(e){return null!=e&&""!==e},window._isNull=function(e){return null==e},window._isFn=function(e){return"function"==typeof e},window._isTrue=function(e){return 1==e||"string"==typeof e&&e.bool()},window._isLocalhost=function(){return"localhost"===location.hostname||"127.0.0.1"===location.hostname||""===location.hostname},window._stopEvent=function(e){e.stopPropagation(),e.preventDefault()},window._getByKey=function(t,i,e){let n=t[i];return e&&Object.keys(t).forEach(function(e){e.toLowerCase()==i.toLowerCase()&&(n=t[e])}),n},APCore.Fn.minimizeObject=function(t){Object.keys(t).forEach(function(e){null==t[e]||null==t[e]||""==t[e]?delete t[e]:Array.isArray(t[e])&&t[e].forEach(function(e){APCore.Fn.minimizeObject(e)})})},APCore.Fn.deleteCookies=function(e){document.cookie=e+"=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;"},APCore.Fn.setCookies=function(e,t,i,n,o){n&&(t=t+"; expires="+n),i&&(t=t+"; path="+i),o||(t+=";secure"),document.cookie=e+"="+t},APCore.Fn.getCookies=function(e){var t={},i=document.cookie;if(i)for(var n=i.split(";"),o=0;o<n.length;o++){var a=n[o].indexOf("=");0<=a?t[n[o].substr(0,a).trim()]=decodeURIComponent(n[o].substr(a+1).trim()):t[n[o]]=""}return e?t[e]:t},APCore.Fn.getGuidEmpty=function(){return"00000000-0000-0000-0000-000000000000"},APCore.Fn.isGuidEmpty=function(e){return"00000000-0000-0000-0000-000000000000"==e},APCore.Fn.newGuid=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return"{0}{1}-{2}-{3}-{4}-{5}{6}{7}".format(e(),e(),e(),e(),e(),e(),e(),e())},APCore.Fn.parseUrl=function(e,t,i){var n=e=e||location.href,o="",a="",t=(-1<(n=-1<(n=(t="/"==t?"":t)&&-1<e.indexOf(t)?e.split(t)[1]:n).indexOf("://")?-1<(n=n.split("//")[1]).indexOf("/")?n.substr(n.indexOf("/")):n:n).indexOf("?")?(o=(e=n.split("?"))[0],a="?"+e[1]):o=n,o.split("/").filter(function(e){return e&&0<e.length})),s={};if(a&&0==a.indexOf("?"))for(var r=a.substring(1).split("&"),c=0;c<r.length;c++){var l,u=r[c].indexOf("=");0<=u?(l=r[c].substr(0,u),s[l=i?l.toLowerCase():l]=decodeURIComponent(r[c].substr(u+1))):s[r[c]]=""}return{routers:t,query:s}},APCore.Fn.getQueryParams=function(e,t){var i={};if((e=e||window.location.search)&&0==e.indexOf("?"))for(var n=e.substring(1).split("&"),o=0;o<n.length;o++){var a,s=n[o].indexOf("=");0<=s?(a=n[o].substr(0,s),i[a=t?a.toLowerCase():a]=decodeURIComponent(n[o].substr(s+1))):i[n[o]]=""}return i},APCore.Fn.openUrl=function(e,n,o){if(n){var t;let i=[];Object.keys(n).forEach(function(e){var t;_isValue(n[e])&&(t=o?n[e]:encodeURIComponent(n[e]),i.push(e+"="+t))}),0<i.length&&(t=i.join("&"),0<e.indexOf("?")?e+=t:e+="?"+t)}location.href=e},APCore.Fn.openNewTab=function(t,n){if(n){var e;let i=[];Object.keys(n).forEach(function(e){var t;_isValue(n[e])&&(t=encodeURIComponent(n[e]),i.push(e+"="+t))}),e=i.join("&"),0<t.indexOf("?")?t+=e:t+="?"+e}var i;_isLocalhost()?window.open(t,"newtab"):(i=window.open("about:blank","newtab"),APCore.Fn.get("/",null,function(e){i.location=t}))},APCore.Fn.copyClipboard=function(e){var t=$("<input style='height:0 !important'/>");$("body").append(t),t.val(e),t[0].select(),t[0].setSelectionRange(0,99999),document.execCommand("copy"),t.remove()},APCore.Fn.debounce=function(i,n,o){var a;return function(){if(a){if(!o)return;clearTimeout(a)}var e=this,t=arguments;a=setTimeout(function(){a=null,i.apply(e,t)},n)}},APCore.Fn.removeXSS=function(e){return(e+"").secure()},APCore.Fn.compareText=function(e,t){return(e=e.toLowerCase().replaceVietnamese())<(t=t.toLowerCase().replaceVietnamese())?-1:t<e?1:0},APCore.Fn.extendConfig=function(e,i){var n=$.extend({},e);return Object.keys(i).forEach(function(t){var e=Object.keys(n).firstOrDefault(function(e){return e.toLowerCase()==t.toLowerCase()});e?n[e]=i[t]:n[t]=i[t]}),Object.keys(n).forEach(function(e){"string"!=typeof n[e]||"true"!=n[e].toLowerCase()&&"false"!=n[e].toLowerCase()||(n[e]=n[e].bool())}),n},APCore.Fn.forceDownload=function(e,i){var t=new XMLHttpRequest;t.open("GET",e,!0),t.responseType="blob",t.onload=function(){var e=(window.URL||window.webkitURL).createObjectURL(this.response),t=document.createElement("a");t.href=e,t.download=i,document.body.appendChild(t),t.click(),document.body.removeChild(t),me.stopDownload=!1},t.send()},window._copyClipboard=APCore.Fn.copyClipboard,window._getCookies=APCore.Fn.getCookies,window._getGuidEmpty=APCore.Fn.getGuidEmpty,window._isGuidEmpty=APCore.Fn.isGuidEmpty,window._newGuid=APCore.Fn.newGuid,window._parseUrl=APCore.Fn.parseUrl,window._getQueryParams=APCore.Fn.getQueryParams,window._openUrl=APCore.Fn.openUrl,window._openNewTab=APCore.Fn.openNewTab,!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.moment=t()}(window.APCore,function(){"use strict";var E;function d(){return E.apply(null,arguments)}function F(e){return"[object Array]"===Object.prototype.toString.call(e)}function R(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function p(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function z(e,t){for(var i in t)p(t,i)&&(e[i]=t[i]);return p(t,"toString")&&(e.toString=t.toString),p(t,"valueOf")&&(e.valueOf=t.valueOf),e}function W(e,t,i,n){return He(e,t,i,n,!0).utc()}function g(e){return null==e._pf&&(e._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}),e._pf}function U(e){var t;return null==e._isValid&&(t=g(e),e._isValid=!(isNaN(e._d.getTime())||!(t.overflow<0)||t.empty||t.invalidMonth||t.invalidWeekday||t.nullInput||t.invalidFormat||t.userInvalidated),e._strict)&&(e._isValid=e._isValid&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour),e._isValid}function G(e){var t=W(NaN);return null!=e?z(g(t),e):g(t).userInvalidated=!0,t}var Y=d.momentProperties=[];function B(e,t){var i,n,o;if(void 0!==t._isAMomentObject&&(e._isAMomentObject=t._isAMomentObject),void 0!==t._i&&(e._i=t._i),void 0!==t._f&&(e._f=t._f),void 0!==t._l&&(e._l=t._l),void 0!==t._strict&&(e._strict=t._strict),void 0!==t._tzm&&(e._tzm=t._tzm),void 0!==t._isUTC&&(e._isUTC=t._isUTC),void 0!==t._offset&&(e._offset=t._offset),void 0!==t._pf&&(e._pf=g(t)),void 0!==t._locale&&(e._locale=t._locale),0<Y.length)for(i in Y)void 0!==(o=t[n=Y[i]])&&(e[n]=o);return e}var Z=!1;function H(e){B(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),!1===Z&&(Z=!0,d.updateOffset(this),Z=!1)}function h(e){return e instanceof H||null!=e&&null!=e._isAMomentObject}function r(e){return e<0?Math.ceil(e):Math.floor(e)}function c(e){var e=+e,t=0;return t=0!=e&&isFinite(e)?r(e):t}function V(e,t,i){for(var n=Math.min(e.length,t.length),o=Math.abs(e.length-t.length),a=0,s=0;s<n;s++)(i&&e[s]!==t[s]||!i&&c(e[s])!==c(t[s]))&&a++;return a+o}function Q(){}var J,i={};function $(e){return e&&e.toLowerCase().replace("_","-")}function X(e){var t;if(!i[e]&&"undefined"!=typeof module&&module&&module.exports)try{t=J._abbr,require("./locale/"+e),K(t)}catch(e){}return i[e]}function K(e,t){return(J=e&&(e=void 0===t?m(e):q(e,t))?e:J)._abbr}function q(e,t){return null!==t?(t.abbr=e,i[e]=i[e]||new Q,i[e].set(t),K(e),i[e]):(delete i[e],null)}function m(e){var t;if(!(e=e&&e._locale&&e._locale._abbr?e._locale._abbr:e))return J;if(!F(e)){if(t=X(e))return t;e=[e]}for(var i,n,o,a,s=e,r=0;r<s.length;){for(i=(a=$(s[r]).split("-")).length,n=(n=$(s[r+1]))?n.split("-"):null;0<i;){if(o=X(a.slice(0,i).join("-")))return o;if(n&&n.length>=i&&V(a,n,!0)>=i-1)break;i--}r++}return null}var ee={};function e(e,t){var i=e.toLowerCase();ee[i]=ee[i+"s"]=ee[t]=e}function a(e){return"string"==typeof e?ee[e]||ee[e.toLowerCase()]:void 0}function te(e){var t,i,n={};for(i in e)p(e,i)&&(t=a(i))&&(n[t]=e[i]);return n}function ie(t,i){return function(e){return null!=e?(oe(this,t,e),d.updateOffset(this,i),this):ne(this,t)}}function ne(e,t){return e._d["get"+(e._isUTC?"UTC":"")+t]()}function oe(e,t,i){e._d["set"+(e._isUTC?"UTC":"")+t](i)}function ae(e,t){if("object"==typeof e)for(var i in e)this.set(i,e[i]);else if("function"==typeof this[e=a(e)])return this[e](t);return this}function se(e,t,i){var n=""+Math.abs(e);return(0<=e?i?"+":"":"-")+Math.pow(10,Math.max(0,t-n.length)).toString().substr(1)+n}var re=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,ce=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,le={},ue={};function n(e,t,i,n){var o="string"==typeof n?function(){return this[n]()}:n;e&&(ue[e]=o),t&&(ue[t[0]]=function(){return se(o.apply(this,arguments),t[1],t[2])}),i&&(ue[i]=function(){return this.localeData().ordinal(o.apply(this,arguments),e)})}function de(e,t){return e.isValid()?(t=pe(t,e.localeData()),le[t]=le[t]||function(i){for(var e,n=i.match(re),o=0,a=n.length;o<a;o++)ue[n[o]]?n[o]=ue[n[o]]:n[o]=(e=n[o]).match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"");return function(e){var t="";for(o=0;o<a;o++)t+=n[o]instanceof Function?n[o].call(e,i):n[o];return t}}(t),le[t](e)):e.localeData().invalidDate()}function pe(e,t){var i=5;function n(e){return t.longDateFormat(e)||e}for(ce.lastIndex=0;0<=i&&ce.test(e);)e=e.replace(ce,n),ce.lastIndex=0,--i;return e}var t=/\d/,o=/\d\d/,ge=/\d{3}/,he=/\d{4}/,s=/[+-]?\d{6}/,l=/\d\d?/,u=/\d{1,3}/,f=/\d{1,4}/,b=/[+-]?\d{1,6}/,me=/\d+/,fe=/[+-]?\d+/,be=/Z|[+-]\d\d:?\d\d/gi,y=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,ye={};function I(e,t,i){ye[e]="function"==typeof(e=t)&&"[object Function]"===Object.prototype.toString.call(e)?t:function(e){return e&&i?i:t}}var Ie={};function v(e,i){var t,n=i;for("string"==typeof e&&(e=[e]),"number"==typeof i&&(n=function(e,t){t[i]=c(e)}),t=0;t<e.length;t++)Ie[e[t]]=n}function ve(e,o){v(e,function(e,t,i,n){i._w=i._w||{},o(e,i._w,i,n)})}var C=0,A=1,D=2,M=3,S=4,w=5,P=6;function Ce(e,t){return new Date(Date.UTC(e,t+1,0)).getUTCDate()}n("M",["MM",2],"Mo",function(){return this.month()+1}),n("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)}),n("MMMM",0,0,function(e){return this.localeData().months(this,e)}),e("month","M"),I("M",l),I("MM",l,o),I("MMM",y),I("MMMM",y),v(["M","MM"],function(e,t){t[A]=c(e)-1}),v(["MMM","MMMM"],function(e,t,i,n){n=i._locale.monthsParse(e,n,i._strict);null!=n?t[A]=n:g(i).invalidMonth=e});var Ae={en:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),vi:"Tháng 1,_Tháng 2,_Tháng 3,_Tháng 4,_Tháng 5,_Tháng 6,_Tháng 7,_Tháng 8,_Tháng 9,_Tháng 10,_Tháng 11,_Tháng 12,".split("_")},De={vi:"Thg 1_Thg 2_Thg 3_Thg 4_Thg 5_Thg 6_Thg7_Thg 8_Thg 9_Thg 10_Thg 11_Thg 12".split("_"),en:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_")},Me={en:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),vi:"Chủ nhật_Thứ 2_Thứ 3_Thứ 4_Thứ 5_Thứ 6_Thứ 7".split("_")},Se={en:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),vi:"CN_T2_T3_T4_T5_T6_T7".split("_")},N={vi:"CN_T2_T3_T4_T5_T6_T7".split("_"),en:"Su_Mo_Tu_We_Th_Fr_Sa".split("_")};function we(e,t){var i;"string"==typeof t&&"number"!=typeof(t=e.localeData().monthsParse(t))||(i=Math.min(e.date(),Ce(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,i))}function Pe(e){return null!=e?(we(this,e),d.updateOffset(this,!0),this):ne(this,"Month")}function Ne(e){var t=e._a;return t&&-2===g(e).overflow&&(t=t[A]<0||11<t[A]?A:t[D]<1||t[D]>Ce(t[C],t[A])?D:t[M]<0||24<t[M]||24===t[M]&&(0!==t[S]||0!==t[w]||0!==t[P])?M:t[S]<0||59<t[S]?S:t[w]<0||59<t[w]?w:t[P]<0||999<t[P]?P:-1,g(e)._overflowDayOfYear&&(t<C||D<t)&&(t=D),g(e).overflow=t),e}function xe(e){!1===d.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function x(e,t){var i=!0;return z(function(){return i&&(xe(e+"\n"+(new Error).stack),i=!1),t.apply(this,arguments)},t)}var Te={};d.suppressDeprecationWarnings=!1;var je=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,ke=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],Le=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],Oe=/^\/?Date\((\-?\d+)/i;function _e(e){var t,i,n=e._i,o=je.exec(n);if(o){for(g(e).iso=!0,t=0,i=ke.length;t<i;t++)if(ke[t][1].exec(n)){e._f=ke[t][0];break}for(t=0,i=Le.length;t<i;t++)if(Le[t][1].exec(n)){e._f+=(o[6]||" ")+Le[t][0];break}n.match(be)&&(e._f+="Z"),Be(e)}else e._isValid=!1}function Ee(e,t,i,n,o,a,s){t=new Date(e,t,i,n,o,a,s);return e<1970&&t.setFullYear(e),t}function Fe(e){var t=new Date(Date.UTC.apply(null,arguments));return e<1970&&t.setUTCFullYear(e),t}function Re(e){return ze(e)?366:365}function ze(e){return e%4==0&&e%100!=0||e%400==0}d.createFromInputFallback=x("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),n(0,["YY",2],0,function(){return this.year()%100}),n(0,["YYYY",4],0,"year"),n(0,["YYYYY",5],0,"year"),n(0,["YYYYYY",6,!0],0,"year"),e("year","y"),I("Y",fe),I("YY",l,o),I("YYYY",f,he),I("YYYYY",b,s),I("YYYYYY",b,s),v(["YYYYY","YYYYYY"],C),v("YYYY",function(e,t){t[C]=2===e.length?d.parseTwoDigitYear(e):c(e)}),v("YY",function(e,t){t[C]=d.parseTwoDigitYear(e)});var We=ie("FullYear",!(d.parseTwoDigitYear=function(e){return c(e)+(68<c(e)?1900:2e3)}));function Ue(e,t,i){var t=i-t,i=i-e.day();return t<i&&(i-=7),i<t-7&&(i+=7),t=T(e).add(i,"d"),{week:Math.ceil(t.dayOfYear()/7),year:t.year()}}n("w",["ww",2],"wo","week"),n("W",["WW",2],"Wo","isoWeek"),e("week","w"),e("isoWeek","W"),I("w",l),I("ww",l,o),I("W",l),I("WW",l,o),ve(["w","ww","W","WW"],function(e,t,i,n){t[n.substr(0,1)]=c(e)});function Ge(e,t,i){return null!=e?e:null!=t?t:i}function Ye(e){var t,i,n,o,a,s,r,c,l,u=[];if(!e._d){for(n=e,l=new Date,i=n._useUTC?[l.getUTCFullYear(),l.getUTCMonth(),l.getUTCDate()]:[l.getFullYear(),l.getMonth(),l.getDate()],e._w&&null==e._a[D]&&null==e._a[A]&&(null!=(l=(n=e)._w).GG||null!=l.W||null!=l.E?(r=1,c=4,o=Ge(l.GG,n._a[C],Ue(T(),1,4).year),a=Ge(l.W,1),s=Ge(l.E,1)):(r=n._locale._week.dow,c=n._locale._week.doy,o=Ge(l.gg,n._a[C],Ue(T(),r,c).year),a=Ge(l.w,1),null!=l.d?(s=l.d)<r&&++a:s=null!=l.e?l.e+r:r),l=function(e,t,i,n,o){var a=Fe(e,0,1+(n=6+o-n)).getUTCDay();return a<o&&(a+=7),{year:0<(n=1+n+7*(t-1)-a+(i=null!=i?+i:o))?e:e-1,dayOfYear:0<n?n:Re(e-1)+n}}(o,a,s,c,r),n._a[C]=l.year,n._dayOfYear=l.dayOfYear),e._dayOfYear&&(o=Ge(e._a[C],i[C]),e._dayOfYear>Re(o)&&(g(e)._overflowDayOfYear=!0),a=Fe(o,0,e._dayOfYear),e._a[A]=a.getUTCMonth(),e._a[D]=a.getUTCDate()),t=0;t<3&&null==e._a[t];++t)e._a[t]=u[t]=i[t];for(;t<7;t++)e._a[t]=u[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[M]&&0===e._a[S]&&0===e._a[w]&&0===e._a[P]&&(e._nextDay=!0,e._a[M]=0),e._d=(e._useUTC?Fe:Ee).apply(null,u),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[M]=24)}}function Be(e){if(e._f===d.ISO_8601)_e(e);else{e._a=[],g(e).empty=!0;for(var t,i,n,o,a,s=""+e._i,r=s.length,c=0,l=pe(e._f,e._locale).match(re)||[],u=0;u<l.length;u++)t=l[u],(a=(s.match((a=e,p(ye,o=t)?ye[o](a._strict,a._locale):new RegExp(o.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,i,n,o){return t||i||n||o}).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"))))||[])[0])&&(0<(o=s.substr(0,s.indexOf(a))).length&&g(e).unusedInput.push(o),s=s.slice(s.indexOf(a)+a.length),c+=a.length),ue[t]?(a?g(e).empty=!1:g(e).unusedTokens.push(t),o=t,n=e,null!=(i=a)&&p(Ie,o)&&Ie[o](i,n._a,n,o)):e._strict&&!a&&g(e).unusedTokens.push(t);g(e).charsLeftOver=r-c,0<s.length&&g(e).unusedInput.push(s),!0===g(e).bigHour&&e._a[M]<=12&&0<e._a[M]&&(g(e).bigHour=void 0),e._a[M]=function(e,t,i){if(null==i)return t;return null!=e.meridiemHour?e.meridiemHour(t,i):null!=e.isPM?((e=e.isPM(i))&&t<12&&(t+=12),t=e||12!==t?t:0):t}(e._locale,e._a[M],e._meridiem),Ye(e),Ne(e)}}function Ze(e){var t,i,n=e._i,o=e._f;if(e._locale=e._locale||m(e._l),null===n||void 0===o&&""===n)return G({nullInput:!0});if("string"==typeof n&&(e._i=n=e._locale.preparse(n)),h(n))return new H(Ne(n));if(F(o)){var a,s,r,c,l,u=e;if(0===u._f.length)g(u).invalidFormat=!0,u._d=new Date(NaN);else{for(c=0;c<u._f.length;c++)l=0,a=B({},u),null!=u._useUTC&&(a._useUTC=u._useUTC),a._f=u._f[c],Be(a),U(a)&&(l=(l+=g(a).charsLeftOver)+10*g(a).unusedTokens.length,g(a).score=l,null==r||l<r)&&(r=l,s=a);z(u,s||a)}}else if(o)Be(e);else if(R(n))e._d=n;else if(void 0===(n=(o=e)._i))o._d=new Date;else R(n)?o._d=new Date(+n):"string"==typeof n?(i=o,null!==(t=Oe.exec(i._i))?i._d=new Date(+t[1]):(_e(i),!1===i._isValid&&(delete i._isValid,d.createFromInputFallback(i)))):F(n)?(o._a=function(e,t){for(var i=[],n=0;n<e.length;++n)i.push(t(e[n],n));return i}(n.slice(0),function(e){return parseInt(e,10)}),Ye(o)):"object"==typeof n?(t=o)._d||(i=te(t._i),t._a=[i.year,i.month,i.day||i.date,i.hour,i.minute,i.second,i.millisecond],Ye(t)):"number"==typeof n?o._d=new Date(n):d.createFromInputFallback(o);return e}function He(e,t,i,n,o){var a={};return"boolean"==typeof i&&(n=i,i=void 0),a._isAMomentObject=!0,a._useUTC=a._isUTC=o,a._l=i,a._i=e,a._f=t,a._strict=n,(o=new H(Ne(Ze(o=a))))._nextDay&&(o.add(1,"d"),o._nextDay=void 0),o}function T(e,t,i,n){return He(e,t,i,n,!1)}n("DDD",["DDDD",3],"DDDo","dayOfYear"),e("dayOfYear","DDD"),I("DDD",u),I("DDDD",ge),v(["DDD","DDDD"],function(e,t,i){i._dayOfYear=c(e)}),d.ISO_8601=function(){};var Ve=x("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(){var e=T.apply(null,arguments);return e<this?this:e}),Qe=x("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(){var e=T.apply(null,arguments);return this<e?this:e});function Je(e,t){var i,n;if(!(t=1===t.length&&F(t[0])?t[0]:t).length)return T();for(i=t[0],n=1;n<t.length;++n)t[n].isValid()&&!t[n][e](i)||(i=t[n]);return i}function $e(e){var e=te(e),t=e.year||0,i=e.quarter||0,n=e.month||0,o=e.week||0,a=e.day||0,s=e.hour||0,r=e.minute||0,c=e.second||0,e=e.millisecond||0;this._milliseconds=+e+1e3*c+6e4*r+36e5*s,this._days=+a+7*o,this._months=+n+3*i+12*t,this._data={},this._locale=m(),this._bubble()}function Xe(e){return e instanceof $e}function Ke(e,i){n(e,0,0,function(){var e=this.utcOffset(),t="+";return e<0&&(e=-e,t="-"),t+se(~~(e/60),2)+i+se(~~e%60,2)})}Ke("Z",":"),Ke("ZZ",""),I("Z",be),I("ZZ",be),v(["Z","ZZ"],function(e,t,i){i._useUTC=!0,i._tzm=et(e)});var qe=/([\+\-]|\d\d)/gi;function et(e){var e=(e||"").match(be)||[],e=((e[e.length-1]||[])+"").match(qe)||["-",0,0],t=60*e[1]+c(e[2]);return"+"===e[0]?t:-t}function tt(e,t){var i;return t._isUTC?(t=t.clone(),i=(h(e)||R(e)?+e:+T(e))-+t,t._d.setTime(+t._d+i),d.updateOffset(t,!1),t):T(e).local()}function it(e){return 15*-Math.round(e._d.getTimezoneOffset()/15)}function nt(){return this._isUTC&&0===this._offset}d.updateOffset=function(){};var ot=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,at=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/;function j(e,t){var i,n=e;return Xe(e)?n={ms:e._milliseconds,d:e._days,M:e._months}:"number"==typeof e?(n={},t?n[t]=e:n.milliseconds=e):(t=ot.exec(e))?(i="-"===t[1]?-1:1,n={y:0,d:c(t[D])*i,h:c(t[M])*i,m:c(t[S])*i,s:c(t[w])*i,ms:c(t[P])*i}):(t=at.exec(e))?(i="-"===t[1]?-1:1,n={y:st(t[2],i),M:st(t[3],i),d:st(t[4],i),h:st(t[5],i),m:st(t[6],i),s:st(t[7],i),w:st(t[8],i)}):null==n?n={}:"object"==typeof n&&("from"in n||"to"in n)&&(t=function(e,t){var i;t=tt(t,e),e.isBefore(t)?i=rt(e,t):((i=rt(t,e)).milliseconds=-i.milliseconds,i.months=-i.months);return i}(T(n.from),T(n.to)),(n={}).ms=t.milliseconds,n.M=t.months),i=new $e(n),Xe(e)&&p(e,"_locale")&&(i._locale=e._locale),i}function st(e,t){e=e&&parseFloat(e.replace(",","."));return(isNaN(e)?0:e)*t}function rt(e,t){var i={milliseconds:0,months:0};return i.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(i.months,"M").isAfter(t)&&--i.months,i.milliseconds=+t-+e.clone().add(i.months,"M"),i}function ct(o,a){return function(e,t){var i,n;return null===t||isNaN(+t)||(n="moment()."+(i=a)+"(period, number) is deprecated. Please use moment()."+a+"(number, period).",Te[i]||(xe(n),Te[i]=!0),n=e,e=t,t=n),lt(this,j(e="string"==typeof e?+e:e,t),o),this}}function lt(e,t,i,n){var o=t._milliseconds,a=t._days,t=t._months;n=null==n||n,o&&e._d.setTime(+e._d+o*i),a&&oe(e,"Date",ne(e,"Date")+a*i),t&&we(e,ne(e,"Month")+t*i),n&&d.updateOffset(e,a||t)}j.fn=$e.prototype;var ut=ct(1,"add"),dt=ct(-1,"subtract");function pt(){var e=this.clone().utc();return 0<e.year()&&e.year()<=9999?"function"==typeof Date.prototype.toISOString?this.toDate().toISOString():de(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):de(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function gt(e){return void 0===e?this._locale._abbr:(null!=(e=m(e))&&(this._locale=e),this)}d.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";var ht=x("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return void 0===e?this.localeData():this.locale(e)});function mt(){return this._locale}function ft(e,t){n(0,[e,e.length],0,t)}function bt(e,t,i){return Ue(T([e,11,31+t-i]),t,i).week}n(0,["gg",2],0,function(){return this.weekYear()%100}),n(0,["GG",2],0,function(){return this.isoWeekYear()%100}),ft("gggg","weekYear"),ft("ggggg","weekYear"),ft("GGGG","isoWeekYear"),ft("GGGGG","isoWeekYear"),e("weekYear","gg"),e("isoWeekYear","GG"),I("G",fe),I("g",fe),I("GG",l,o),I("gg",l,o),I("GGGG",f,he),I("gggg",f,he),I("GGGGG",b,s),I("ggggg",b,s),ve(["gggg","ggggg","GGGG","GGGGG"],function(e,t,i,n){t[n.substr(0,2)]=c(e)}),ve(["gg","GG"],function(e,t,i,n){t[n]=d.parseTwoDigitYear(e)}),n("Q",0,0,"quarter"),e("quarter","Q"),I("Q",t),v("Q",function(e,t){t[A]=3*(c(e)-1)}),n("D",["DD",2],"Do","date"),e("date","D"),I("D",l),I("DD",l,o),I("Do",function(e,t){return e?t._ordinalParse:t._ordinalParseLenient}),v(["D","DD"],D),v("Do",function(e,t){t[D]=c(e.match(l)[0])});f=ie("Date",!0);function yt(e,t){n(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}function It(e,t){return t._meridiemParse}n("d",0,"do","day"),n("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)}),n("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)}),n("dddd",0,0,function(e){return this.localeData().weekdays(this,e)}),n("e",0,0,"weekday"),n("E",0,0,"isoWeekday"),e("day","d"),e("weekday","e"),e("isoWeekday","E"),I("d",l),I("e",l),I("E",l),I("dd",y),I("ddd",y),I("dddd",y),ve(["dd","ddd","dddd"],function(e,t,i){var n=i._locale.weekdaysParse(e);null!=n?t.d=n:g(i).invalidWeekday=e}),ve(["d","e","E"],function(e,t,i,n){t[n]=c(e)}),n("H",["HH",2],0,"hour"),n("h",["hh",2],0,function(){return this.hours()%12||12}),yt("a",!0),yt("A",!1),e("hour","h"),I("a",It),I("A",It),I("H",l),I("h",l),I("HH",l,o),I("hh",l,o),v(["H","HH"],M),v(["a","A"],function(e,t,i){i._isPm=i._locale.isPM(e),i._meridiem=e}),v(["h","hh"],function(e,t,i){t[M]=c(e),g(i).bigHour=!0});var k,he=ie("Hours",!0),b=(n("m",["mm",2],0,"minute"),e("minute","m"),I("m",l),I("mm",l,o),v(["m","mm"],S),ie("Minutes",!1)),s=(n("s",["ss",2],0,"second"),e("second","s"),I("s",l),I("ss",l,o),v(["s","ss"],w),ie("Seconds",!1));for(n("S",0,0,function(){return~~(this.millisecond()/100)}),n(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),n(0,["SSS",3],0,"millisecond"),n(0,["SSSS",4],0,function(){return 10*this.millisecond()}),n(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),n(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),n(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),n(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),n(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),e("millisecond","ms"),I("S",u,t),I("SS",u,o),I("SSS",u,ge),k="SSSS";k.length<=9;k+="S")I(k,me);function vt(e,t){t[P]=c(1e3*("0."+e))}for(k="S";k.length<=9;k+="S")v(k,vt);y=ie("Milliseconds",!1);n("z",0,0,"zoneAbbr"),n("zz",0,0,"zoneName");t=H.prototype,t.add=ut,t.calendar=function(e,t){var i=tt(e=e||T(),this).startOf("day"),i=(i=this.diff(i,"days",!0))<-6?"sameElse":i<-1?"lastWeek":i<0?"lastDay":i<1?"sameDay":i<2?"nextDay":i<7?"nextWeek":"sameElse";return this.format(t&&t[i]||this.localeData().calendar(i,this,T(e)))},t.clone=function(){return new H(this)},t.diff=function(e,t,i){var n,o=6e4*((e=tt(e,this)).utcOffset()-this.utcOffset());return"year"===(t=a(t))||"month"===t||"quarter"===t?(n=function(e,t){var i,n=12*(t.year()-e.year())+(t.month()-e.month()),o=e.clone().add(n,"months");e=t-o<0?(i=e.clone().add(n-1,"months"),(t-o)/(o-i)):(i=e.clone().add(1+n,"months"),(t-o)/(i-o));return-(n+e)}(this,e),"quarter"===t?n/=3:"year"===t&&(n/=12)):(e=this-e,n="second"===t?e/1e3:"minute"===t?e/6e4:"hour"===t?e/36e5:"day"===t?(e-o)/864e5:"week"===t?(e-o)/6048e5:e),i?n:r(n)},t.endOf=function(e){return void 0===(e=a(e))||"millisecond"===e?this:this.startOf(e).add(1,"isoWeek"===e?"week":e).subtract(1,"ms")},t.format=function(e){return e=de(this,e||d.defaultFormat),this.localeData().postformat(e)},t.from=function(e,t){return this.isValid()?j({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},t.fromNow=function(e){return this.from(T(),e)},t.to=function(e,t){return this.isValid()?j({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},t.toNow=function(e){return this.to(T(),e)},t.get=ae,t.invalidAt=function(){return g(this).overflow},t.isAfter=function(e,t){return"millisecond"===(t=a(void 0!==t?t:"millisecond"))?+(e=h(e)?e:T(e))<+this:(h(e)?+e:+T(e))<+this.clone().startOf(t)},t.isBefore=function(e,t){return"millisecond"===(t=a(void 0!==t?t:"millisecond"))?+this<+(e=h(e)?e:T(e)):(e=h(e)?+e:+T(e),+this.clone().endOf(t)<e)},t.isBetween=function(e,t,i){return this.isAfter(e,i)&&this.isBefore(t,i)},t.isSame=function(e,t){return"millisecond"===(t=a(t||"millisecond"))?+this==+(e=h(e)?e:T(e)):(e=+T(e),+this.clone().startOf(t)<=e&&e<=+this.clone().endOf(t))},t.isValid=function(){return U(this)},t.lang=ht,t.locale=gt,t.localeData=mt,t.max=Qe,t.min=Ve,t.parsingFlags=function(){return z({},g(this))},t.set=ae,t.startOf=function(e){switch(e=a(e)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e&&this.weekday(0),"isoWeek"===e&&this.isoWeekday(1),"quarter"===e&&this.month(3*Math.floor(this.month()/3)),this},t.subtract=dt,t.toArray=function(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]},t.toObject=function(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}},t.toDate=function(){return this._offset?new Date(+this):this._d},t.toISOString=pt,t.toJSON=pt,t.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},t.unix=function(){return Math.floor(+this/1e3)},t.valueOf=function(){return+this._d-6e4*(this._offset||0)},t.year=We,t.isLeapYear=function(){return ze(this.year())},t.weekYear=function(e){var t=Ue(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==e?t:this.add(e-t,"y")},t.isoWeekYear=function(e){var t=Ue(this,1,4).year;return null==e?t:this.add(e-t,"y")},t.quarter=t.quarters=function(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)},t.month=Pe,t.daysInMonth=function(){return Ce(this.year(),this.month())},t.week=t.weeks=function(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")},t.isoWeek=t.isoWeeks=function(e){var t=Ue(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")},t.weeksInYear=function(){var e=this.localeData()._week;return bt(this.year(),e.dow,e.doy)},t.isoWeeksInYear=function(){return bt(this.year(),1,4)},t.date=f,t.day=t.days=function(e){var t,i,n=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(t=e,i=this.localeData(),e="string"!=typeof t?t:isNaN(t)?"number"==typeof(t=i.weekdaysParse(t))?t:null:parseInt(t,10),this.add(e-n,"d")):n},t.weekday=function(e){var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")},t.isoWeekday=function(e){return null==e?this.day()||7:this.day(this.day()%7?e:e-7)},t.dayOfYear=function(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")},t.hour=t.hours=he,t.minute=t.minutes=b,t.second=t.seconds=s,t.millisecond=t.milliseconds=y,t.utcOffset=function(e,t){var i,n=this._offset||0;return null!=e?("string"==typeof e&&(e=et(e)),Math.abs(e)<16&&(e*=60),!this._isUTC&&t&&(i=it(this)),this._offset=e,this._isUTC=!0,null!=i&&this.add(i,"m"),n!==e&&(!t||this._changeInProgress?lt(this,j(e-n,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,d.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?n:it(this)},t.utc=function(e){return this.utcOffset(0,e)},t.local=function(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e)&&this.subtract(it(this),"m"),this},t.parseZone=function(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&this.utcOffset(et(this._i)),this},t.hasAlignedHourOffset=function(e){return e=e?T(e).utcOffset():0,(this.utcOffset()-e)%60==0},t.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},t.isDSTShifted=function(){var e,t;return void 0===this._isDSTShifted&&(B(e={},this),(e=Ze(e))._a?(t=(e._isUTC?W:T)(e._a),this._isDSTShifted=this.isValid()&&0<V(e._a,t.toArray())):this._isDSTShifted=!1),this._isDSTShifted},t.isLocal=function(){return!this._isUTC},t.isUtcOffset=function(){return this._isUTC},t.isUtc=nt,t.isUTC=nt,t.zoneAbbr=function(){return this._isUTC?"UTC":""},t.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},t.dates=x("dates accessor is deprecated. Use date instead.",f),t.months=x("months accessor is deprecated. Use month instead",Pe),t.years=x("years accessor is deprecated. Use year instead",We),t.zone=x("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",function(e,t){return null!=e?(this.utcOffset(e="string"!=typeof e?-e:e,t),this):-this.utcOffset()}),o=t;function Ct(e){return e}u=Q.prototype;function At(e,t,i,n){var o=m(),n=W().set(n,t);return o[i](n,e)}function Dt(e,t,i,n,o){if("number"==typeof e&&(t=e,e=void 0),e=e||"",null!=t)return At(e,t,i,o);for(var a=[],s=0;s<n;s++)a[s]=At(e,s,i,o);return a}u._calendar={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},u.calendar=function(e,t,i){return"function"==typeof(e=this._calendar[e])?e.call(t,i):e},u._longDateFormat={vi:{LTS:"h:mm:ss A",LT:"h:mm A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},en:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY h:mm A",LLLL:"dddd, MMMM D YYYY h:mm A"}}[window.appLanguage||"vi"],u.longDateFormat=function(e){var t=this._longDateFormat[e],i=this._longDateFormat[e.toUpperCase()];return t||!i?t:(this._longDateFormat[e]=i.replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e])},u._invalidDate="Invalid date",u.invalidDate=function(){return this._invalidDate},u._ordinal="%d",u.ordinal=function(e){return this._ordinal.replace("%d",e)},u._ordinalParse=/\d{1,2}/,u.preparse=Ct,u.postformat=Ct,u._relativeTime={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},u.relativeTime=function(e,t,i,n){var o=this._relativeTime[i];return"function"==typeof o?o(e,t,i,n):o.replace(/%d/i,e)},u.pastFuture=function(e,t){return"function"==typeof(e=this._relativeTime[0<e?"future":"past"])?e(t):e.replace(/%s/i,t)},u.set=function(e){var t,i;for(i in e)"function"==typeof(t=e[i])?this[i]=t:this["_"+i]=t;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)},u.months=function(e){return this._months[e.month()]},u._months=Ae[window._appLanguage||"vi"],u.monthsShort=function(e){return this._monthsShort[e.month()]},u._monthsShort=De[window._appLanguage||"vi"],u.monthsParse=function(e,t,i){var n,o;for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),n=0;n<12;n++){if(o=W([2e3,n]),i&&!this._longMonthsParse[n]&&(this._longMonthsParse[n]=new RegExp("^"+this.months(o,"").replace(".","")+"$","i"),this._shortMonthsParse[n]=new RegExp("^"+this.monthsShort(o,"").replace(".","")+"$","i")),i||this._monthsParse[n]||(o="^"+this.months(o,"")+"|^"+this.monthsShort(o,""),this._monthsParse[n]=new RegExp(o.replace(".",""),"i")),i&&"MMMM"===t&&this._longMonthsParse[n].test(e))return n;if(i&&"MMM"===t&&this._shortMonthsParse[n].test(e))return n;if(!i&&this._monthsParse[n].test(e))return n}},u.week=function(e){return Ue(e,this._week.dow,this._week.doy).week},u._week={dow:0,doy:6},u.firstDayOfYear=function(){return this._week.doy},u.firstDayOfWeek=function(){return this._week.dow},u.weekdays=function(e){return this._weekdays[e.day()]},u._weekdays=Me[window._appLanguage||"vi"],u.weekdaysMin=function(e){return this._weekdaysMin[e.day()]},u._weekdaysMin=N[window._appLanguage||"vi"],u.weekdaysShort=function(e){return this._weekdaysShort[e.day()]},u._weekdaysShort=Se[window._appLanguage||"vi"],u.weekdaysParse=function(e){var t,i;for(this._weekdaysParse=this._weekdaysParse||[],t=0;t<7;t++)if(this._weekdaysParse[t]||(i=T([2e3,1]).day(t),i="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[t]=new RegExp(i.replace(".",""),"i")),this._weekdaysParse[t].test(e))return t},u.isPM=function(e){return"p"===(e+"").toLowerCase().charAt(0)},u._meridiemParse=/[ap]\.?m?\.?/i,u.meridiem=function(e,t,i){return 11<e?i?"pm":"PM":i?"am":"AM"},K("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1===c(e%100/10)?"th":1==t?"st":2==t?"nd":3==t?"rd":"th")}}),d.lang=x("moment.lang is deprecated. Use moment.locale instead.",K),d.langData=x("moment.langData is deprecated. Use moment.localeData instead.",m);var L=Math.abs;function Mt(e,t,i,n){t=j(t,i);return e._milliseconds+=n*t._milliseconds,e._days+=n*t._days,e._months+=n*t._months,e._bubble()}function St(e){return e<0?Math.floor(e):Math.ceil(e)}function wt(e){return 4800*e/146097}function Pt(e){return 146097*e/4800}function O(e){return function(){return this.as(e)}}ge=O("ms"),ut=O("s"),Qe=O("m"),Ve=O("h"),dt=O("d"),he=O("w"),b=O("M"),s=O("y");function Nt(e){return function(){return this._data[e]}}y=Nt("milliseconds"),f=Nt("seconds"),We=Nt("minutes"),t=Nt("hours"),Ae=Nt("days"),De=Nt("months"),Me=Nt("years");var xt=Math.round,_={s:45,m:45,h:22,d:26,M:11};function Tt(e,t,i){var n=j(e).abs(),o=xt(n.as("s")),a=xt(n.as("m")),s=xt(n.as("h")),r=xt(n.as("d")),c=xt(n.as("M")),n=xt(n.as("y")),o=(o<_.s?["s",o]:1===a&&["m"])||(a<_.m?["mm",a]:1===s&&["h"])||(s<_.h?["hh",s]:1===r&&["d"])||(r<_.d?["dd",r]:1===c&&["M"])||(c<_.M?["MM",c]:1===n&&["y"])||["yy",n];return o[2]=t,o[3]=0<+e,o[4]=i,function(e,t,i,n,o){return o.relativeTime(t||1,!!i,e,n)}.apply(null,o)}var jt=Math.abs;function kt(){var e=jt(this._milliseconds)/1e3,t=jt(this._days),i=jt(this._months),n=r(e/60),o=r(n/60),a=(e%=60,n%=60,r(i/12)),i=i%=12,s=this.asSeconds();return s?(s<0?"-":"")+"P"+(a?a+"Y":"")+(i?i+"M":"")+(t?t+"D":"")+(o||n||e?"T":"")+(o?o+"H":"")+(n?n+"M":"")+(e?e+"S":""):"P0D"}N=$e.prototype;return N.abs=function(){var e=this._data;return this._milliseconds=L(this._milliseconds),this._days=L(this._days),this._months=L(this._months),e.milliseconds=L(e.milliseconds),e.seconds=L(e.seconds),e.minutes=L(e.minutes),e.hours=L(e.hours),e.months=L(e.months),e.years=L(e.years),this},N.add=function(e,t){return Mt(this,e,t,1)},N.subtract=function(e,t){return Mt(this,e,t,-1)},N.as=function(e){var t,i,n=this._milliseconds;if("month"===(e=a(e))||"year"===e)return t=this._days+n/864e5,i=this._months+wt(t),"month"===e?i:i/12;switch(t=this._days+Math.round(Pt(this._months)),e){case"week":return t/7+n/6048e5;case"day":return t+n/864e5;case"hour":return 24*t+n/36e5;case"minute":return 1440*t+n/6e4;case"second":return 86400*t+n/1e3;case"millisecond":return Math.floor(864e5*t)+n;default:throw new Error("Unknown unit "+e)}},N.asMilliseconds=ge,N.asSeconds=ut,N.asMinutes=Qe,N.asHours=Ve,N.asDays=dt,N.asWeeks=he,N.asMonths=b,N.asYears=s,N.valueOf=function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*c(this._months/12)},N._bubble=function(){var e=this._milliseconds,t=this._days,i=this._months,n=this._data;return 0<=e&&0<=t&&0<=i||e<=0&&t<=0&&i<=0||(e+=864e5*St(Pt(i)+t),i=t=0),n.milliseconds=e%1e3,e=r(e/1e3),n.seconds=e%60,e=r(e/60),n.minutes=e%60,e=r(e/60),n.hours=e%24,t+=r(e/24),i+=e=r(wt(t)),t-=St(Pt(e)),e=r(i/12),i%=12,n.days=t,n.months=i,n.years=e,this},N.get=function(e){return this[(e=a(e))+"s"]()},N.milliseconds=y,N.seconds=f,N.minutes=We,N.hours=t,N.days=Ae,N.weeks=function(){return r(this.days()/7)},N.months=De,N.years=Me,N.humanize=function(e){var t=this.localeData(),i=Tt(this,!e,t);return e&&(i=t.pastFuture(+this,i)),t.postformat(i)},N.toISOString=kt,N.toString=kt,N.toJSON=kt,N.locale=gt,N.localeData=mt,N.toIsoString=x("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",kt),N.lang=ht,n("X",0,0,"unix"),n("x",0,0,"valueOf"),I("x",fe),I("X",/[+-]?\d+(\.\d{1,3})?/),v("X",function(e,t,i){i._d=new Date(1e3*parseFloat(e,10))}),v("x",function(e,t,i){i._d=new Date(c(e))}),d.version="2.10.6",E=T,d.fn=o,d.min=function(){return Je("isBefore",[].slice.call(arguments,0))},d.max=function(){return Je("isAfter",[].slice.call(arguments,0))},d.utc=W,d.unix=function(e){return T(1e3*e)},d.months=function(e,t){return Dt(e,t,"months",12,"month")},d.isDate=R,d.locale=K,d.invalid=G,d.duration=j,d.isMoment=h,d.weekdays=function(e,t){return Dt(e,t,"weekdays",7,"day")},d.parseZone=function(){return T.apply(null,arguments).parseZone()},d.localeData=m,d.isDuration=Xe,d.monthsShort=function(e,t){return Dt(e,t,"monthsShort",12,"month")},d.weekdaysMin=function(e,t){return Dt(e,t,"weekdaysMin",7,"day")},d.defineLocale=q,d.weekdaysShort=function(e,t){return Dt(e,t,"weekdaysShort",7,"day")},d.normalizeUnits=a,d.relativeTimeThreshold=function(e,t){return void 0!==_[e]&&(void 0===t?_[e]:(_[e]=t,!0))},d}),APCore.Fn.callAjax=function(e,t,i,n,o){function a(e,t,i){"function"==typeof n&&n(e,t,i)}var s,r,e={url:e,async:!0,type:"POST",traditional:!1,dataType:"json",contentType:"application/json",data:""},c=null!=t?t:"";"post"==(e=i?$.extend(e,i):e).type.toLowerCase()&&(c=APCore.Fn.serialize(t)),e.data=c,jQuery.ajax(e).done(function(e){s=arguments,r=e}).always(function(e,t){"error"==t?"function"==typeof o?o(e.status,e.responseJSON):a.apply(e.responseJSON,s||[e.responseText,t,e],e.status):a.apply(r,s||[e.responseText,t,e],e.status)})},APCore.Fn.getService=function(e,t,i,n){APCore.Fn.callAjax(e,t,{type:"GET"},i,n)},APCore.Fn.postService=function(e,t,i,n){APCore.Fn.callAjax(e,t,{type:"POST"},i,n)},APCore.Fn.uploadFileWithData=function(e,t,i,n){var o,a,s=new FormData,r=0;Array.isArray(i)?i.forEach(function(e){r++,s.append("uploadedFiles"+r,e)}):s.append("uploadedFiles",i),s.append("Data",APCore.Fn.serialize(t)),$.ajax({url:e,type:"POST",xhr:function(){return $.ajaxSettings.xhr()},data:s,cache:!1,contentType:!1,processData:!1}).done(function(e){a=arguments,o=e}).always(n&&function(e,t){"function"==typeof n&&n.apply(o,a||[e.responseText,t,e],e.status)})},APCore.Fn.uploadFile=function(e,t,i){var n,o,a=new FormData,s=0;Array.isArray(t)?t.forEach(function(e){s++,a.append("uploadedFiles"+s,e)}):a.append("uploadedFiles",t),$.ajax({url:e,type:"POST",xhr:function(){return $.ajaxSettings.xhr()},data:a,cache:!1,contentType:!1,processData:!1}).done(function(e){o=arguments,n=e}).always(i&&function(e,t){"function"==typeof i&&i.apply(n,o||[e.responseText,t,e],e.status)})},APCore.Fn.loadCss=function(e,t,i){$.when.apply($,$.map(e,function(e){return $.get({url:e,async:!1,cache:!0}).then(function(){$("<link>",{rel:"stylesheet",type:"text/css",href:e}).appendTo("head")})})).always(t&&function(e,t){"function"==typeof i&&i(e,result),_callback.apply(result,response||[e.responseText,t,e],t)})},APCore.Fn.loadScript=function(e,t,i){$.when.apply($,$.map(e,function(e){return $.get({url:e,async:!1,dataType:"script",cache:!0}).then(function(e){})})).always(t&&function(e,t){"function"==typeof i&&i(e,result),_callback.apply(result,response||[e.responseText,t,e],t)})},APCore.Fn.serialize=function(e){return Array.isArray(e)?JSON.stringify(e):JSON.stringify(e,(()=>{const i=new WeakSet;return(e,t)=>{if("object"==typeof t&&null!==t){if(i.has(t))return;i.add(t)}return t}})())},APCore.Fn.deserialize=function(e){if("string"!=typeof e)return"object"==typeof e&&0<Object.keys(e).length?e:{};try{return JSON.parse(e)}catch(e){return{}}},APCore.Fn.decodeHTML=function(e){return $("<textarea />").html(e)[0].value},APCore.Fn.formatCurrency=function(e){let t="";return"string"==typeof e?t=e:"number"==typeof e&&(t=e+""),t=t.replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1.")},APCore.Fn.getFileSizeByUnit=function(e,t){var i=0,i="object"==typeof e?e.size:parseInt(e);switch(t){case"MB":return Math.round(100*i/1048576)/100;case"KB":return Math.round(100*i/1024)/100;case"Bytes":return i;default:return null}},APCore.Fn.getFileSizeUnit=function(e){var t=0;return 1048576<(t="object"==typeof e?e.size:parseInt(e))?Math.round(100*t/1048576)/100+" MB":1024<=t?Math.round(100*t/1024)/100+" KB":t+" Bytes"},window._decodeHTML=APCore.Fn.decodeHTML,window._formatCurrency=APCore.Fn.formatCurrency,$.fn.removeXSS=function(){var e=$(this);e.find("script style link svg meta style iframe").remove(),e.find("img").removeAttr("onmouseover onerror")},$.fn.loadText=function(e){let t=e+"";return(e+"").decodeHTML()!=e&&(t=e.decodeHTML()),$(this).text(t),$(this)},$.fn.scrollEvent=function(e,t,i){var n=$(this);i=i||100,n.on("scroll.se",function(){"function"==typeof e&&e(),clearTimeout($.data(this,"scrollTimer")),$.data(this,"scrollTimer",setTimeout(function(){"function"==typeof t&&t()},i))})},$.fn.printPdf=function(e){var t=this._printIframe;this._printIframe||(t=this._printIframe=document.createElement("iframe"),document.body.appendChild(t),t.style.display="none",t.onload=function(){setTimeout(function(){t.focus(),t.contentWindow.print()},1)}),t.src=e},$.fn.onScrollEnd=function(i,n,o){($this=$(this)).unbind("scroll").on("scroll",function(e){e.stopPropagation(),e.preventDefault();var e=$this.oldTop||0,t=(o=o||0,$this.scrollTop()+$this.innerHeight());t>=$this[0].scrollHeight-o&&e<t&&"function"==typeof i&&i(n),$this.oldTop=t})},$.fn.smoothScrollToTarget=function(e,t){let i=0;t=t||800;var n=$(this),o=n[0];i="[object Number]"===Object.prototype.toString.call(e)?e:"bottom"===e?o.scrollHeight-o.offsetHeight:"top"===e?0:(null!=e.length?e[0]:e).offsetTop,n.animate({scrollTop:i},t)},$.fn.scrollToTarget=function(e){var t=$(this)[0],i=e&&1===e.nodeType,n="[object Number]"===Object.prototype.toString.call(e);i?t.scrollTop=e.offsetTop-e.offsetHeight-40:n?t.scrollTop=e:"bottom"===e?t.scrollTop=t.scrollHeight-t.offsetHeight:"top"===e&&(t.scrollTop=0)},$.fn.scrollToTop=function(){$(this)[0].scrollTop=0},$.fn.scrollToBottom=function(){var e=$(this)[0];e.scrollTop=e.scrollHeight-e.offsetHeight},$.fn.getStyle=function(e){var t=$(this)[0];return window.getComputedStyle(t,e)},$.fn.getStyleOne=function(e){return $(this).getStyle().getPropertyValue(e)},$.fn.isVisible=function(){return"none"!==$(this).getStyleOne("display")&&"hidden"!==$(this).getStyleOne("visibility")},$.fn.coords=function(){var e=$(this)[0].getBoundingClientRect();return{top:e.top+window.pageYOffset,left:e.left+window.pageXOffset,height:e.height,width:e.width}},$.fn.getObjects=function(n){$(this).find("[objName]").each(function(e,t){var t=$(t),i=t.attr("objName");n[i]=t})},$.fn.bindResource=function(t){var e,i=$(this);function n(e){return _isValue(t[e])?t[e]:""}i.attr("res-key")&&(e=i.attr("res-key"),e=n(e),"INPUT"==i[0].tagName.toUpperCase()||"TEXTAREA"==i[0].tagName.toUpperCase()?i.val(e):i.html(e)),i.attr("placeholder-key")&&(e=i.attr("placeholder-key"),e=n(e),i.attr("placeholder",e)),i.attr("placeholder-key")&&(e=i.attr("placeholder-key"),e=n(e),i.attr("placeholder",e)),i.attr("title-key")&&(e=i.attr("title-key"),e=n(e),i.attr("title",e)),i.attr("data-placeholder-key")&&(e=i.attr("data-placeholder-key"),e=n(e),i.attr("data-placeholder",e)),i.find("[res-key]").each(function(e,t){var t=$(t),i=t.attr("res-key"),i=n(i);"INPUT"==t[0].tagName.toUpperCase()||"TEXTAREA"==t[0].tagName.toUpperCase()?t.val(i):t.html(i)}),i.find("[placeholder-key]").each(function(e,t){var t=$(t),i=t.attr("placeholder-key"),i=n(i);t.attr("placeholder",i)}),i.find("[title-key]").each(function(e,t){var t=$(t),i=t.attr("title-key"),i=n(i);t.attr("title",i)}),i.find("[data-placeholder-key]").each(function(e,t){var t=$(t),i=t.attr("data-placeholder-key"),i=n(i);t.attr("data-placeholder",i)})},jQuery.fn.pastePlainText=function(){$(this)[0].addEventListener("paste",function(e){e.stopPropagation(),e.preventDefault();var e=((e.originalEvent||e).clipboardData||window.clipboardData).getData("text/plain"),t=$("<textarea></textarea>");t.append(e),e=t.text(),delete t,document.execCommand("insertHTML",!1,e)})},jQuery.fn.enableDrag=function(e,t,s){var r=$(e);return"function"==typeof t?s=t:t=t||"drag-moving",r.css("position","absolute"),this.bind("mousedown",function(e){var i,n,o,a;($(e.target).hasClass(t)||$(e.target).hasClass("apui-drag-moving")||$(e.target).hasClass("drag-moving"))&&(i=e.pageX-r.offset().left,n=e.pageY-r.offset().top,o=$("body").width()-r.width()-10,a=$("body").height()-r.height()-10,$("body").on("mousemove.drag",function(e){var t=Math.min(o,Math.max(0,e.pageX-i)),e=Math.min(a,Math.max(0,e.pageY-n));r.css("left",t+"px").css("top",e+"px"),s()}))}),$("body").bind("mouseup.drag",function(e){$("body").unbind("mousemove.drag")}),this},jQuery.fn.customPaste=function(i){$(this)[0].addEventListener("paste",function(e){_stopEvent(e);e=((e.originalEvent||e).clipboardData||window.clipboardData).getData("Text");let t;(t="function"==typeof i?i(e):t)&&document.execCommand("insertHTML",!1,t)})},jQuery.fn.dragdrop=jQuery.fn.enableDrag,"undefined"!=typeof EventTarget){let n=EventTarget.prototype.addEventListener;EventTarget.prototype.addEventListener=function(e,t,i){this.func=n,"boolean"!=typeof i&&((i=i||{}).passive=!1),this.func(e,t,i)}}APCore.DateResource={vi:{Duration:{day:"Hôm qua",hour:"1 giờ",minute:"1 phút",days:"{0} ngày",hours:"{0} giờ",minutes:"{0} phút",seconds:"Vừa xong",milliseconds:"Vừa xong",second:"Vừa xong",millisecond:"Vừa xong"},DurationAgo:{month:"1 tháng trước",months:"{0} tháng trước",week:"1 tuần trước",weeks:"{0} tuần trước",days:"{0} ngày trước",day:"Hôm qua",hour:"1 giờ trước",minute:"1 phút trước",hours:"{0} giờ trước",minutes:"{0} phút trước",seconds:"Vừa xong",milliseconds:"Vừa xong",second:"Vừa xong",millisecond:"Vừa xong"}},en:{Duration:{day:"Yesterday",hour:"1 hour",minute:"1 minute",days:"{0} days",hours:"{0} hours",minutes:"{0} minutes",seconds:"Just now",milliseconds:"Just now",second:"Just now",millisecond:"Just now"},DurationAgo:{month:"1 month ago",months:"{0} months ago",week:"1 week ago",weeks:"{0} week ago",day:"Yesterday",hour:"1 hour ago",minute:"1 minute ago",days:"{0} days ago",hours:"{0} hours ago",minutes:"{0} minutes ago",seconds:"Just now",milliseconds:"Just now",second:"Just now",millisecond:"Just now"}}},APCore.Fn.Date={countDateTime:function(e,t){let n=new Date(e),o=new Date(t);t<e&&(n=new Date(t),o=new Date(e));function a(e,t,i){0==i&&(s=APCore.Fn.Date.diffByUnit(e,t,"years")),t=new Date(new Date(t).addYears(s)),i<=1&&(r=APCore.Fn.Date.diffByUnit(e,t,"months")),t=new Date(new Date(t).addMonths(r)),i<=2&&(c=APCore.Fn.Date.diffByUnit(e,t,"days")),r<0?(s-=1,a(o,n,1)):c<0&&(0<r?(r-=1,a(o,n,2)):(s-=1,a(o,n,1)))}var s=0,r=0,c=0;return a(o,n,0),{Years:s,Months:r,Days:c}},countDown:function(e){return parseInt(e/3600)<1?new Date(1e3*e).toISOString().substr(14,5):new Date(1e3*e).toISOString().substr(11,8)},parseDate:function(e,t,i){i=i||(t?"dd/mm/yyyy hh:ii:ss":"dd/mm/yyyy");var t=(e=e.replace(/\s\s+/g," ")).replace(/[^a-zA-Z0-9]/g,"-"),e=i.toLowerCase().replace(/[^a-zA-Z0-9]/g,"-").split("-"),i=t.split("-"),t=e.indexOf("mm"),n=e.indexOf("dd"),o=e.indexOf("yyyy"),a=e.indexOf("hh"),s=e.indexOf("ii"),e=e.indexOf("ss"),r=new Date,o=-1<o?i[o]:r.getFullYear(),t=-1<t?i[t]-1:r.getMonth()-1,n=-1<n?i[n]:r.getDate(),a=-1<a?i[a]:r.getHours(),s=-1<s?i[s]:r.getMinutes(),i=-1<e?i[e]:r.getSeconds();let c=new Date(o,t,n,a,s,i);return c="Invalid Date"==c?null:c},prettyDate:function(e,t){var i,n=e;t=t||"en";let o=APCore.DateResource[t];return o=o||APCore.DateResource.en,"[object Date]"==Object.prototype.toString.call(n)?(t=((new Date).getTime()-n.getTime())/1e3,i=Math.floor(t/86400),isNaN(i)||i<0||7<i?this.formatDateTime("dd:MM:yyyy hh:ii",n):0==i&&(t<60&&o.Duration.seconds||t<3600&&Math.floor(t/60)+o.Duration.minutes||t<86400&&Math.floor(t/3600)+o.Duration.hours)||i<=7&&i+o.Duration.days):e},formatDate:function(e,t,i){return e?(i=t?i||"DD/MM/YYYY hh:mm:ss":i||"DD/MM/YYYY",APCore.moment(e).format(i)):null},formatDateTimeUS:function(e){let t="",i="";return e&&(t=APCore.moment(e).format("DD/MM/YYYY"),i=e.toLocaleString("en-US",{hour:"numeric",minute:"numeric",hour12:!0})),t+" "+i},getMomentTime:function(t,i){if(null==i)return APCore.moment.duration({hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),milliseconds:t.milliseconds()});{t._ambigTime=!1,APCore.moment.isDuration(i)||APCore.moment.isMoment(i)||(i=APCore.moment.duration(i));let e=0;return APCore.moment.isDuration(i)&&(e=24*Math.floor(i.asDays())),t.hours(e+i.hours()).minutes(i.minutes()).seconds(i.seconds()).milliseconds(i.milliseconds())}},utc:function(e,t){return APCore.moment.fn.utc.call(e,t),e._ambigTime=!1,e._ambigZone=!1,e},stripTime:function(e){return e._ambigTime||(this.utc(e,!0),e.set({hours:0,minutes:0,seconds:0,ms:0}),e._ambigTime=!0,e._ambigZone=!0),e},diffDayTime:function(e,t){e=this.stripTime(new APCore.moment(e.clone())),t=this.stripTime(new APCore.moment(t.clone()));return APCore.moment.duration({days:e.diff(t,"days"),ms:this.getMomentTime(e)-this.getMomentTime(t)})},diffDay:function(e,t){e=this.stripTime(new APCore.moment(e.clone())),t=this.stripTime(new APCore.moment(t.clone()));return APCore.moment.duration({days:e.diff(t,"days")}).asDays()},diffByUnit:function(e,t,i){if("day"==i||"days"==i)return this.diffDay(e,t);var e=new APCore.moment(e.clone()),t=new APCore.moment(t.clone()),n=APCore.moment.duration(Math.round(e.diff(t,i,!0)),i);switch(i){case"year":case"years":return n.asYears();case"month":case"months":return n.asMonths();case"week":case"weeks":return n.asWeeks();case"day":case"days":return n.asDays();case"hour":case"hours":return n.asHours();case"day":case"days":return n.asDays();case"minute":case"minutes":return n.asMinutes();case"second":case"seconds":return n.asSeconds();default:return n.asMilliseconds()}},getDurationText:function(e,t,i){t=_isValue(t)?t:_getAppLanguage();t=(t=APCore.DateResource[t])||APCore.DateResource.en,i=i?t.DurationAgo:t.Duration;let n=this._computeGreatestUnit(e);t=this.diffByUnit(new Date,e,n);return 1<t&&(n+="s"),i[n]?i[n].format(t):this.formatDate(e,!0,"DD/MM/YYYY hh:mm")},getGreatestDuration:function(e){var t=new APCore.moment(e.clone()),e=this._computeGreatestUnit(e);return{value:this.diffByUnit(new Date,t,e),unit:e}},computeRangeAs:function(e,t,i){t=new APCore.moment(t.clone()),i=new APCore.moment(i.clone());return null!=i?i.diff(t,e,!0):APCore.moment.isDuration(t)?t.as(e):t.end.diff(t.start,e,!0)},_computeGreatestUnit:function(e,t){var i,n=["year","month","week","day","hour","minute","second","millisecond"],o=(t=t||new Date,new APCore.moment(e.clone())),a=new APCore.moment(t.clone());let s,r;for(s=0;s<n.length&&(r=n[s],!(1<=(i=this.computeRangeAs(r,o,a)))||isNaN(parseInt(i)));s++);return r}},window._getDurationText=APCore.Fn.Date.getDurationText.bind(APCore.Fn.Date),window._parseDate=APCore.Fn.Date.parseDate.bind(APCore.Fn.Date),window._formatDate=APCore.Fn.Date.formatDate.bind(APCore.Fn.Date),APCore.Fn.DOM={Node_ELEMENT_NODE:"undefined"!=typeof Node?Node.ELEMENT_NODE:1,Node_TEXT_NODE:"undefined"!=typeof Node?Node.TEXT_NODE:3,scrollEvent:function(e,t,i,n){(e=$(e)).scrollEvent(t,i,n)},scrollToBottom:function(e){$(e).scrollToBottom()},scrollToTop:function(e){$(e).scrollToTop()},smoothScrollToTarget:function(e,t,i,n){$(t).smoothScrollToTarget(e,i,n)},scrollToTarget:function(e,t){$(t).scrollToTarget(e)},pageHeight:function(){var e=document.body,t=document.documentElement;return Math.max(e.scrollHeight,e.offsetHeight,t.clientHeight,t.scrollHeight,t.offsetHeight)},getStyle:function(e,t){return $(e).getStyleOne(t)},getStyleOne:function(e,t){return $(e).getStyleOne(t)},isVisible:function(e){return $(e).isVisible()},onScreen:function(e){var t;return!!$(e).isVisible()&&(t=(e=$(e).coords()).top<window.screen.height&&0<e.top||e.top+e.height<window.screen.height&&0<e.top+e.height,e=e.left<window.screen.width&&0<e.left||e.left+e.width<window.screen.width&&0<e.left+e.width,t)&&e},isVisibleInParent:function(e,t,i){return i=i||0,!!$(e).isVisible()&&(e=$(e).coords(),t=$(t).coords(),i=e.top<t.top+t.height-i&&e.top>t.top||e.top+e.height<t.top+t.height-i&&e.top+e.height>t.top,e=e.left<t.left+t.width&&e.left+e.width>t.left||e.left+e.width<t.left+t.width&&e.left+e.width>t.left,i)&&e},coords:function(e){return $(e).coords()},positionXY:function(e,t){switch(t){case"client":return this.clientXY(e);case"screen":return this.screenXY(e);case"page":return this.pageXY(e);default:return{x:0,y:0}}},clientXY:function(e){return{x:(e.changedTouches?e.changedTouches[0]:e).clientX,y:(e.changedTouches?e.changedTouches[0]:e).clientY}},screenXY:function(e){return{x:(e.changedTouches?e.changedTouches[0]:e).screenX,y:(e.changedTouches?e.changedTouches[0]:e).screenY}},pageXY:function(e){return{x:(e.changedTouches?e.changedTouches[0]:e).pageX,y:(e.changedTouches?e.changedTouches[0]:e).pageY}},hasText:function(e){var t=$("<div></div>");return t.append(e),_isValue(t.text().trim())},getPlainText:function(e){var t=$("<div></div>");return t.append(e),t.text()},customPaste:function(e,i){e[0].addEventListener("paste",function(e){_stopEvent(e);e=((e.originalEvent||e).clipboardData||window.clipboardData).getData("Text");let t;(t="function"==typeof i?i(e):t)&&document.execCommand("insertHTML",!1,t)})},pastePlainText:function(e){(e=$(e))[0].addEventListener("paste",function(e){_stopEvent(e);e=((e.originalEvent||e).clipboardData||window.clipboardData).getData("text/plain");document.execCommand("insertHTML",!1,e)})},res:function(e,o){e.find("[res-key]").each(function(e,t){var i=$(t),n=i.attr("res-key"),n=null==o[n]||null==o[n]?"":o[n];"INPUT"==t.tagName.toUpperCase()||"TEXTAREA"==t.tagName.toUpperCase()?i.val(n):i.text(n)}),e.find("[placeholder-key]").each(function(e,t){var t=$(t),i=t.attr("placeholder-key"),i=null==o[i]||null==o[i]?"":o[i];t.attr("placeholder",i)}),e.find("[title-key]").each(function(e,t){var t=$(t),i=t.attr("title-key"),i=null==o[i]||null==o[i]?"":o[i];t.attr("title",i)}),e.find("[data-placeholder-key]").each(function(e,t){var t=$(t),i=t.attr("data-placeholder-key"),i=null==o[i]||null==o[i]?"":o[i];t.attr("data-placeholder",i)})},isOrContainsNode:function(e,t){for(var i=t;i;){if(i===e)return!0;i=i.parentNode}return!1},nextNode:function(e,t){if(e.firstChild)return e.firstChild;for(;e;){if(e==t)return null;if(e.nextSibling)return e.nextSibling;e=e.parentNode}return null},pasteHtmlAtCaret:function(n,o){if(window.getSelection){var a=window.getSelection();if(a.getRangeAt&&a.rangeCount){var s=a.getRangeAt(0),r=document.createElement("div");r.innerHTML=o;let e=document.createDocumentFragment(),t,i;for(;t=r.firstChild;)i=e.appendChild(t);APCore.Fn.DOM.isOrContainsNode(n,s.commonAncestorContainer)?(s.deleteContents(),s.insertNode(e)):n.appendChild(e),i&&((s=s.cloneRange()).setStartAfter(i),s.collapse(!0),a.removeAllRanges(),a.addRange(s))}}else if(document.selection){a=document.selection;if("Control"!=a.type){var t,s=a.createRange();s.collapse(!0);let e=a.createRange();(APCore.Fn.DOM.isOrContainsNode(n,e.parentElement())?e:((t=document.body.createTextRange()).moveToElementText(n),t.collapse(!1),t.select(),t)).pasteHTML(o),(e=a.createRange()).setEndPoint("StartToEnd",s),e.select()}}},saveSelection:function(e){if(window.getSelection){var t=window.getSelection();if(0<t.rangeCount)return t.getRangeAt(0)}else if(document.selection)return document.selection.createRange();return null},restoreSelection:function(e,t){var i;t&&(window.getSelection?((i=window.getSelection()).removeAllRanges(),i.addRange(t)):document.selection&&t.select())},getSelectionRect:function(){if(window.getSelection){var e=window.getSelection();if(!e.rangeCount)return!1;var e=e.getRangeAt(0).cloneRange();if(e.getBoundingClientRect)return!(!(e=e.getBoundingClientRect())||0==e.left&&0==e.top&&0==e.right&&0==e.bottom)&&{left:parseInt(e.left),top:parseInt(e.top),width:parseInt(e.right-e.left),height:parseInt(e.bottom-e.top)}}else if(document.selection){e=document.selection;if("Control"!=e.type)return{left:(e=e.createRange()).boundingLeft,top:e.boundingTop,width:e.boundingWidth,height:e.boundingHeight}}return!1},getSelectionCollapsed:function(e){if(window.getSelection)return!!window.getSelection().isCollapsed;if(document.selection){var t,i,n=document.selection;if("Text"==n.type)return t=document.selection.createRange(),(i=document.body.createTextRange()).moveToElementText(e),i.setEndPoint("EndToStart",t),0==t.htmlText.length;if("Control"==n.type)return!1}return!0},getSelectedNodes:function(o){if(window.getSelection){var a=window.getSelection();if(!a.rangeCount)return[];var s=[];for(let n=0;n<a.rangeCount;++n){let e=a.getRangeAt(n),i=e.startContainer,t=e.endContainer;for(;i;){if(i!=o){let t=!1;if(a.containsNode)t=a.containsNode(i,!0);else{var r=document.createRange();r.selectNodeContents(i);for(let e=0;e<a.rangeCount;++e){var c=a.getRangeAt(e);if(c.compareBoundaryPoints(c.START_TO_START,r)<=0&&0<=c.compareBoundaryPoints(c.END_TO_END,r)){t=!0;break}}}t&&s.push(i)}i=APCore.Fn.DOM.nextNode(i,i==t?t:o)}}return 0==s.length&&APCore.Fn.DOM.isOrContainsNode(o,a.focusNode)&&a.focusNode!=o&&s.push(a.focusNode),s}if(document.selection){var e=document.selection;if("Text"==e.type){var i,n=[];let e=document.selection.createRange(),t=o;for(;t;)t!=o&&t.nodeType==APCore.Fn.DOM.Node_ELEMENT_NODE&&((i=e.duplicate()).moveToElementText(t),e.inRange(i))&&n.push(t),t=APCore.Fn.DOM.nextNode(t,o);return 0==n.length&&APCore.Fn.DOM.isOrContainsNode(o,document.activeElement)&&document.activeElement!=o&&n.push(document.activeElement),n}if("Control"==e.type){var t=[],l=document.selection.createRange();for(let e=0;e<l.length;++e)t.push(l(e));return t}}return[]},collapseSelectionEnd:function(){var e;window.getSelection?(e=window.getSelection()).isCollapsed||e.collapseToEnd():document.selection&&"Control"!=(e=document.selection).type&&((e=e.createRange()).collapse(!1),e.select())},getSelectionHtml:function(e){if(!APCore.Fn.DOM.getSelectionCollapsed(e))if(window.getSelection){var t=window.getSelection();if(t.rangeCount){var i=document.createElement("div"),n=t.rangeCount;for(let e=0;e<n;++e){var o=t.getRangeAt(e).cloneContents();i.appendChild(o)}return i.innerHTML}}else if(document.selection){e=document.selection;if("Text"==e.type)return e.createRange().htmlText}return null},setSelectionTo:function(e){var t,i;window.getSelection?(i=window.getSelection())&&((t=document.createRange()).selectNodeContents(e),t.collapse(!1),(i=window.getSelection()).removeAllRanges(),i.addRange(t)):document.selection&&((i=document.body.createTextRange()).moveToElementText(e),i.setEndPoint("StartToEnd",i),i.select())},clipSelectionTo:function(o){if(window.getSelection&&o.compareDocumentPosition){var a=window.getSelection();let e=a.anchorNode,t=a.anchorOffset,i=a.focusNode,n=a.focusOffset;(e==i&&t>n||e.compareDocumentPosition(i)&Node.DOCUMENT_POSITION_PRECEDING)&&(e=a.focusNode,t=a.focusOffset,i=a.anchorNode,n=a.anchorOffset);var s=APCore.Fn.DOM.isOrContainsNode(o,e),r=APCore.Fn.DOM.isOrContainsNode(o,i);if(!s||!r){if(!s&&o.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_FOLLOWING)return!1;if(!r&&o.compareDocumentPosition(i)&Node.DOCUMENT_POSITION_PRECEDING)return!1;var c=document.createRange();c.selectNodeContents(o),s&&c.setStart(e,t),r&&c.setEnd(i,n),a.removeAllRanges(),a.addRange(c)}}else if(document.selection){s=document.selection;if("Text"==s.type){r=document.body.createTextRange(),a=(r.moveToElementText(o),s.createRange());if(!r.inRange(a)){if(0<r.compareEndPoints("StartToEnd",a))return!1;if(r.compareEndPoints("EndToStart",a)<0)return!1;0<r.compareEndPoints("StartToStart",a)&&a.setEndPoint("StartToStart",r),r.compareEndPoints("EndToEnd",a)<0&&a.setEndPoint("EndToEnd",r),a.select()}}}return!0},HSVtoRGB:function(e,t,i){var n,o,a,s=Math.floor(6*e),e=6*e-s,r=i*(1-t),c=i*(1-e*t),l=i*(1-(1-e)*t);switch(s%6){case 0:n=i,o=l,a=r;break;case 1:n=c,o=i,a=r;break;case 2:n=r,o=i,a=l;break;case 3:n=r,o=c,a=i;break;case 4:n=l,o=r,a=i;break;case 5:n=i,o=r,a=c}e=Math.floor(255*n).toString(16),t=Math.floor(255*o).toString(16),s=Math.floor(255*a).toString(16);return"#"+(e.length<2?"0":"")+e+(t.length<2?"0":"")+t+(s.length<2?"0":"")+s},addEvent:function(e,t,i){e.addEventListener?e.addEventListener(t,i,!1):e.attachEvent?e.attachEvent("on"+t,i):e!=window&&(e["on"+t]=i)},removeEvent:function(e,t,i){e.removeEventListener?e.removeEventListener(t,i,!1):e.detachEvent?e.detachEvent("on"+t,i):e!=window&&(e["on"+t]=null)},fireEvent:function(e,t,i,n){var o;document.createEvent?((o=document.createEvent("Event")).initEvent(t,void 0===i||i,void 0!==n&&n),e.dispatchEvent(o)):document.createEventObject&&(i=document.createEventObject(),e.fireEvent("on"+t,i))},fixedOffset:function(e){for(var t={left:0,top:0},i=e.get(0);i;)t.left+=i.offsetLeft,t.top+=i.offsetTop,i=i.offsetParent;return t}},window._hasText=APCore.Fn.DOM.hasText.bind(APCore.Fn.DOM),window._isOrContainsNode=APCore.Fn.DOM.isOrContainsNode.bind(APCore.Fn.DOM),APCore.DOMClass=APCore.Class.extend(function(){var o=this;this.opts={},this.resource={},this.constructor=function(e){o.updateOption(e),o.initDom()},this.initDom=function(){},this.hide=function(){},this.show=function(){},this.getObjects=function(e){e.find("[objName]").each(function(e,t){var t=$(t),i=t.attr("objName");o[i]=t})},this.res=function(e,t){t=t||o.resource,e.bindResource(t)},this.renderControls=function(e){APCore.Widgets&&APCore.Widgets.renderControls(o,e)},this.keys=[],this.keyEvent=function(e,t){"function"!=typeof t.onKeyDown&&"function"!=typeof t.onEnter&&"function"!=typeof t.onESC||e.keydown(function(e){o._onKeyDown(e,t)}),"function"==typeof t.onKeyPress&&e.keypress(function(e){o._onKeyPress(e,t)}),e.on("keyup",function(e){o._onKeyUp(e,t)})},this._onKeyPress=function(e,t){var i=e.which,n=$(e.target);o._registerKey(i),"function"==typeof t.onKeyPress&&t.onKeyPress(n,i,e),13==i&&"function"==typeof t.onEnter&&t.onEnter(n,i,e),27==i&&"function"==typeof t.onESC&&t.onESC(n,i,e)},this._onKeyDown=function(e,t){var i=e.which,n=$(e.target);o._registerKey(i),"function"==typeof t.onKeyDown&&t.onKeyDown(n,i,e),13==i&&"function"==typeof t.onEnter&&t.onEnter(n,i,e),27==i&&"function"==typeof t.onESC&&t.onESC(n,i,e)},this._registerKey=function(t){this.keys.some(function(e){return e==t})||this.keys.push(t)},this._unRegisterKey=function(e){e=this.keys.indexOf(e);this.keys.splice(e,1)},this._onKeyUp=function(e,t){var i=$(e.target),n=e.which;o._unRegisterKey(n),"function"==typeof t.onKeyUp&&t.onKeyUp(i,n,e)}}),APCore=window.APCore||{},AMISPlatformLicenseTemplate={},AMISPlatformUITemplate={},APLoginMessage={},APCoreResource={},APErrorPageResource={},APCore.SocketPool={},APCore.SocketFunctionPool=[],APCore.INFO="",window.AMISPlatformConfig=Object.assign({LogoVersion:"20230221",AvatarVersion:"20230221",BackgroundVersion:"20230221",MISAIDClientID:"6bcbc4d1-5426-42f7-bc61-69cac2e229f4",Version:"R52.0.0.0",API:{ManagementAPI:"/APIS/ManagementAPI",PlatformAPI:"/APIS/PlatformAPI",AuthenAPI:"/APIS/AuthenAPI",NotificationAPI:"/APIS/NotificationAPI",BillingAPI:"/APIS/BillingAPI",IntegrationAPI:"/APIS/IntegrationAPI",MiscAPI:"/APIS/MiscAPI",MarketPlaceAPI:"/APIS/MarketPlaceAPI",ChatbotAPI:"/APIS/ChatbotAPI"},URL:{helpUrl:"https://helpapps.amis.vn/",misaid2FAURL:"https://id.misa.vn/security",forgotPasswordUrl:"https://id.misa.vn/account/forgotpasswordphone",forgotPasswordPhoneUrl:"https://id.misa.vn/account/forgotpasswordphone",misaidLogoutUrl:"https://id.misa.vn/account/logout"}},{
    "Environment": "Production",
    "CDN": "https://amisplatform.misacdn.net",
    "Root": "https://amisapp.misa.vn",
    "LogoutPage": "https://amisapp.misa.vn/logout",
    "CDNFilePath" : {
        "cdnLogoAMIS": "https://amisplatform.misacdn.net/images/iconapps/images/logo/",
        "cdnIconNotification": "https://amisplatform.misacdn.net/images/iconotification/",
        "cdnLogoURL": "https://amisplatform.misacdn.net/images/iconapps/",
        "cdnLauncherBackground": "https://amisplatform.misacdn.net/images/launcherbackground/",
        "cdnMarketLogoURL": "https://amisplatform.misacdn.net/images/iconapps/market/",
        "cdnScreenShotURL": "https://amisplatform.misacdn.net/images/screenshotapps/"
    },
    "Logo" : {
        "logoAMISWithText":  "https://amisplatform.misacdn.net/images/logo/logo_amis_text.svg?v=20230609",
        "logoAMIS": "https://amisplatform.misacdn.net/images/logo/logo_amis.svg?v=20230609"
    }
}),window.AMISPlatformConfig.ReleaseVersion="-3.6.1",window.AMISPlatformConfig.BuildVersion="2024-07-03T10:15:21.725Z",AMISPlatformLicenseTemplate.en=[{Type:1,Body:"Dịch vụ dùng thử của quý khách sẽ hết hạn sau <b>{#Date#}</b> ngày nữa. Vui lòng mua bản chính thức để tiếp tục sử dụng phần mềm.",Title:"SẮP HẾT HẠN DÙNG THỬ PHẦN MỀM",TextButton:"MUA NGAY",ActionType:1},{Type:2,Body:"<span style='color:red'> Dịch vụ dùng thử của quý khách đã hết hạn từ ngày <b>{#Date#}</b>. Vui lòng mua bản chính thức để tiếp tục sử dụng phần mềm.</span>",Title:"HẾT HẠN DÙNG THỬ PHẦN MỀM",TextButton:"MUA NGAY",ActionType:1},{Type:4,Body:"Phần mềm của quý khách sẽ hết hạn sau <b>{#Date#}</b> nữa. Vui lòng gia hạn để tiếp tục sử dụng phần mềm.",Title:"Sắp hết hạn sử dụng phần mềm",TextButton:"GIA HẠN",ActionType:1},{Type:5,Body:"Phần mềm của quý khách sẽ hết hạn sau <b>{#Date#}</b> nữa. Vui lòng gia hạn để tiếp tục sử dụng phần mềm",Title:"Sắp hết hạn sử dụng phần mềm",TextButton:"GIA HẠN",ActionType:1},{Type:6,Body:"Phần mềm của quý khách sẽ hết hạn sau <b>{#Date#}</b> ngày nữa. Vui lòng thực hiện gia hạn để công việc không bị gián đoạn",Title:"Sắp hết hạn sử dụng phần mềm",TextButton:"GIA HẠN",ActionType:1},{Type:7,Body:"<span style='color:red'>Phần mềm của quý khách đã hết hạn từ ngày <b>{#Date#}</b>. Vui lòng gia hạn để tiếp tục sử dụng phần mềm. </span>.",Title:"HẾT HẠN SỬ DỤNG PHẦN MỀM",TextButton:"GIA HẠN",ActionType:1},{Type:9,Body:"<span style='color:red'> Dịch vụ dùng thử của quý khách đã hết hạn. Vui lòng mua bản chính thức để tiếp tục sử dụng phần mềm.</span>",Title:"HẾT HẠN DÙNG THỬ PHẦN MỀM",TextButton:"MUA NGAY",ActionType:1},{Type:10,Body:"Đã mua: <b>{#TotalCapacity#}</b> MB &nbsp;&nbsp;&nbsp;&nbsp;  Đã sử dụng: <b>{#UsedCapacity#}</b> MB &nbsp;&nbsp;&nbsp;&nbsp; Còn lại: <b>{#RemainCapacity#}</b> MB  <br><br> Vui lòng kiểm tra thông tin dịch vụ và mua thêm để công việc không bị gián đoạn.",Title:"Đã hết dung lượng lưu trữ tài liệu",TextButton:"Chi tiết",ActionType:2},{Type:12,Body:"Đã mua: <b>{#TotalCapacity#}</b> MB &nbsp;&nbsp;&nbsp;&nbsp; Đã sử dụng: <b>{#UsedCapacity#}</b> MB &nbsp;&nbsp;&nbsp;&nbsp; Còn lại: <b>{#RemainCapacity#}</b> MB  <br><br> Bạn đang sử dụng quá dung lượng lưu trữ tối đa cho phép. Vui lòng xóa bớt dữ liệu để đảm bảo hoạt động của chương trình. <br> Bạn còn <b>7</b> ngày để thực hiện xóa dữ liệu, sau đó tất cả các tài liệu quá hạn mức tài nguyên cho phép sẽ tự động bị xóa khỏi hệ thống.",Title:"Quá hạn mức sử dụng cho phép",TextButton:"NÂNG CẤP",ActionType:1},{Type:13,Body:"Đã mua:<b>{#TotalCapacity#}</b> MB &nbsp;&nbsp;&nbsp;&nbsp; Đã sử dụng: <b>{#UsedCapacity#}</b> MB &nbsp;&nbsp;&nbsp;&nbsp; Còn lại: <b>{#RemainCapacity#}</b> MB  <br><br> Vui lòng kiểm tra thông tin dịch vụ và mua thêm để công việc không bị gián đoạn.",Title:"Sắp hết dung lượng lưu trữ tài liệu",TextButton:"Chi tiết",ActionType:2},{Type:15,Body:"Đã mua: <b>{#TotalCapacity#}</b>  MB &nbsp;&nbsp;&nbsp;&nbsp; Đã sử dụng: <b>{#UsedCapacity#}</b> MB &nbsp;&nbsp;&nbsp;&nbsp; Còn lại: <b>{#RemainCapacity#}</b> MB  <br><br> Vui lòng kiểm tra thông tin dịch vụ và mua thêm để công việc không bị gián đoạn.",Title:"Sắp hết dung lượng lưu trữ tài liệu",TextButton:"Chi tiết",ActionType:2},{Type:17,Body:"Đã mua: <b>{#TotalUser#}</b> Tài khoản &nbsp;&nbsp;&nbsp;&nbsp; Đã sử dụng: <b>{#UsedUser#}</b> Tài khoản  &nbsp;&nbsp;&nbsp;&nbsp; Còn lại: <b>{#RemainUser#}</b> Tài khoản  <br><br> Vui lòng kiểm tra thông tin dịch vụ và mua thêm để công việc không bị gián đoạn.",Title:"Đã hết tài khoản sử dụng",TextButton:"Chi tiết",ActionType:2},{Type:19,Body:"Đã mua: <b>{#TotalUser#}</b> Tài khoản &nbsp;&nbsp;&nbsp;&nbsp; Đã sử dụng: <b>{#UsedUser#}</b> Tài khoản  &nbsp;&nbsp;&nbsp;&nbsp; Còn lại: <b>{#RemainUser#}</b> Tài khoản  <br><br> Số lượng người dùng đang sử dụng quá hạn mức cho phép. Vui lòng thực hiện nâng cấp dịch vụ hoặc xóa bớt người dùng khỏi ứng dụng để đảm bảo hoạt động của chương trình.",Title:"Quá số lượng người dùng sử dụng cho phép",TextButton:"NÂNG CẤP",ActionType:1}],APLoginMessage.en={UserIsDeleted:"You were removed from this company.",EmployeeNotWorking:"Employee has resigned or retired",MemberIsNotUser:"You do not have an account in this company.",UserInactive:"Your account has not been activated in this company",RedirectToLogin:"Redirecting to login screen...",NeedInputCaptcha:"Username or password's not correct",CaptchaInvalid:"Captcha code is not correct.",ErrorMISAID:"MISAID error!",TenantNotFound:"Tenant not found",TenantNotAllowed:"Your account's not allowed in this tenant",TokenInvalid:"Token invalid",UserWithNoAllowedApplication:"Your don't have any applications",UserNotFound:"User not found",BlockedBySecurityPolicy:"Login is blocked according to the company's privacy policy",UserWaitForActivation:"Your account has not been activated. Please check your email and activate",MISAID_InvalidClient:"Invalid client",MISAID_WrongUserNamePassword:"Username or password's not correct",MISAID_AccountIsLocked:"Your account was locked! Try again after 1 minutes",MISAID_EmailNotActive:"Email not active",MISAID_MobileNotActive:"Mobile Number not active",MISAID_InvalidScope:"Invalid scope",MISAID_OTPWasSent:"OPT was sent",TooManyFailedAttempts:"Too many failed attempts. Try again in few minutes!",Error:"Error!"},APErrorPageResource.vi={NotPermission_Title:"Oops! Not Permission",NotPermission_Des:"Please contact system administrator for support",NotPermission_Relogin:"Relogin MISA AMIS",NotPermission_Home:"Return to home page",NotPermission_OrText:"or",NotFound_Title:"Oops! Page not found",NotFound_Home:"Return to home page",NotFound_Des:"The link you are accessing has been changed or does not exist."},APCoreResource.en={AppMISAAMIS_Title:"Install AMIS Mobile",AppMISAAMIS_Des:"Work anywhere, anytime with mobile app on:",Error:"Error occurred! Please contact MISA for help",AccountMenu_Logout_Name:"Logout",AccountMenu_AccountSetting:"Account setting",AccountMenu_ChangePassword:"Change password",AccountMenu_SecuritySetting:"Security setting",AccountMenu_Loyalty:"Referral - Loyalty",AccountMenu_LoyaltyDes:"Get points for introducing MISA products",AccountMenu_Language:"Language",Menu_BackgroundSetting:"Change background",Menu_Setting:"Setting",Menu_License:"License detail",Menu_AppsSetting:"Customize the application list",ChangeLanguage:"Change language",Vietnamese:"Tiếng Việt",English:"English",NewTab:"Open in new tab",Back:"Back",Search_Placeholder:"Search application",Sort_Title:"Sort items by",Sort_ByName:"Application name",Sort_ByCategory:"Category",BackgroundSetting_Title:"Select background",AMISAppDock_ViewMore:"More",Launcher_RemoveFavorite:"Remove favorite",Launcher_Favorite:"Favorite",Launcher_Close:"Back",Launcher_BackToApp:"Back to {0}",HeaderNotify_Cancel:"Remind later",HeaderNotify_Upgrade:"Upgrade",HeaderNotify_Renewal:"Renewal",HeaderNotify_TrialMessage:"Your trial period of <b>{0}</b> has <b>{1}</b> days left. Please upgrade to the official version to avoid work interruption.",HeaderNotify_Message:"You only have <b>{1}</b> days left to use <b>{0}</b>. Please extend to avoid work interruption.",TenantsPopup_Title:"Your company",TenantsPopup_CurrentTenantTile:"Current company",TenantsPopup_OtherTenantTile:"Other companies",TenantsPopup_NoMoreTenant:"-- No data --",TenantPopup_TitleLoading:"Login to the company",SettingPopup_Title:"Setting",SettingPopup_ButtonCancel:"Cancel",SettingPopup_ButtonOK:"Save",SettingPopup_Heading:"Choose startup application",SettingPopup_LabelListApp:"All applications",SettingPopup_LastestApp:"Open lastest application",SettingPopup_SelectApp:"Select startup application",SettingPopup_SearchAppPlaceholder:"Enter application name",Notification:"Notifications",Notification_MarkAllAsRead:"Show all",Notification_ReadAll:"Mark all messages as read",Notification_SettingTitle:"Notification setting",Notification_SettingNumber:"Notification number",Notification_SettingNumber_New:"Show number of new notifications",Notification_SettingNumber_Unread:"Show number of unread notifications",Notification_Filter_All:"All",Notification_Filter_Unread:"Unread",Notification_AdvancedSetting:"Advanced setting",Empty_AdminLabel:"Admin contacts:",Empty_AdminTitle:"You don't have permission to use any applications in<br><b>MISA AMIS Platform</b>",Empty_AdminSubTitle:"Please contact with your admin to get permission",LicenseText:"I have read and accept the Terms of Use",Launcher_Category_All:"All",Launcher_Category_Recent:"Recent",Launcher_Category_Favorite:"Favorite",Launcher_Market_Button:"Marketplace",ButtonSave:"Apply",ButtonCancel:"Cancel",NPSBox2_ContentPlaceholder:"Your comments (optional)",NPSBox2_ContentPlaceholder_Require:"What we need to do to benefit you more?",NPSBox2_PhonePlaceholder:"Your phone number",NPSBox2_PhoneTitleLowScore:"Please leave your phone number for support",NPSBox2_PhoneTitle:"Please leave your phone number for support",NPSBox2_OptionTitle:"Please tell us why you are not satisfied with the product ",NPSBox2_Close:"Close",NPSBox2_Send:"Send",NPSBox2_ShowLate:"Close",NPSBox2_ScoreTitle:"Are you willing to recommend <b>{0}</b> to your friends to use?",NPSBox2_LowScoreText:"No",NPSBox2_MidScoreText:"Maybe",NPSBox2_HightScoreText:"Sure",NPSBox2_Thank:"Thank you for taking the time to complete our survey.",UserControlPanel:{Tooltip_HelpMenu:"Help",Tooltip_MoreMenu:"Other features",Tooltip_KnowledgeMenu:"Knowledge",Tooltip_NotificationBox:"Notifications"},SystemNotificationPopup:{Title:"Notification",Add_Role_Admin:"You have just been added to the system administrator role",Edit_Role_User:"You have just updated permissions in the <b>{#AppName#}</b> app.",Add_Role_User:"You have just been authorized to enter <b>{#AppName#}</b>.",Remove_Role_User:"You have just removed from <b>{#AppName#}</b> app.",Remove_Role_Admin:"You have just been removed from the system administrator role",Button:"Close",ButtonNext:"Continue",KeepWorking:"Continue",ReLogin:"Relogin"}},AMISPlatformLicenseTemplate.vi=[{Type:1,Body:"Dịch vụ dùng thử của quý khách sẽ hết hạn sau <b>{#Date#}</b> ngày nữa. Vui lòng mua bản chính thức để tiếp tục sử dụng phần mềm.",Title:"SẮP HẾT HẠN DÙNG THỬ PHẦN MỀM",TextButton:"MUA NGAY",ActionType:1},{Type:2,Body:"<span style='color:red'> Dịch vụ dùng thử của quý khách đã hết hạn từ ngày <b>{#Date#}</b>. Vui lòng mua bản chính thức để tiếp tục sử dụng phần mềm.</span>",Title:"HẾT HẠN DÙNG THỬ PHẦN MỀM",TextButton:"MUA NGAY",ActionType:1},{Type:4,Body:"Phần mềm của quý khách sẽ hết hạn sau <b>{#Date#}</b> nữa. Vui lòng gia hạn để tiếp tục sử dụng phần mềm.",Title:"Sắp hết hạn sử dụng phần mềm",TextButton:"GIA HẠN",ActionType:1},{Type:5,Body:"Phần mềm của quý khách sẽ hết hạn sau <b>{#Date#}</b> nữa. Vui lòng gia hạn để tiếp tục sử dụng phần mềm",Title:"Sắp hết hạn sử dụng phần mềm",TextButton:"GIA HẠN",ActionType:1},{Type:6,Body:"Phần mềm của quý khách sẽ hết hạn sau <b>{#Date#}</b> ngày nữa. Vui lòng thực hiện gia hạn để công việc không bị gián đoạn",Title:"Sắp hết hạn sử dụng phần mềm",TextButton:"GIA HẠN",ActionType:1},{Type:7,Body:"<span style='color:red'>Phần mềm của quý khách đã hết hạn từ ngày <b>{#Date#}</b>. Vui lòng gia hạn để tiếp tục sử dụng phần mềm. </span>.",Title:"HẾT HẠN SỬ DỤNG PHẦN MỀM",TextButton:"GIA HẠN",ActionType:1},{Type:9,Body:"<span style='color:red'> Dịch vụ dùng thử của quý khách đã hết hạn. Vui lòng mua bản chính thức để tiếp tục sử dụng phần mềm.</span>",Title:"HẾT HẠN DÙNG THỬ PHẦN MỀM",TextButton:"MUA NGAY",ActionType:1},{Type:10,Body:"Đã mua: <b>{#TotalCapacity#}</b> MB &nbsp;&nbsp;&nbsp;&nbsp;  Đã sử dụng: <b>{#UsedCapacity#}</b> MB &nbsp;&nbsp;&nbsp;&nbsp; Còn lại: <b>{#RemainCapacity#}</b> MB  <br><br> Vui lòng kiểm tra thông tin dịch vụ và mua thêm để công việc không bị gián đoạn.",Title:"Đã hết dung lượng lưu trữ tài liệu",TextButton:"Chi tiết",ActionType:2},{Type:12,Body:"Đã mua: <b>{#TotalCapacity#}</b> MB &nbsp;&nbsp;&nbsp;&nbsp; Đã sử dụng: <b>{#UsedCapacity#}</b> MB &nbsp;&nbsp;&nbsp;&nbsp; Còn lại: <b>{#RemainCapacity#}</b> MB  <br><br> Bạn đang sử dụng quá dung lượng lưu trữ tối đa cho phép. Vui lòng xóa bớt dữ liệu để đảm bảo hoạt động của chương trình. <br> Bạn còn <b>7</b> ngày để thực hiện xóa dữ liệu, sau đó tất cả các tài liệu quá hạn mức tài nguyên cho phép sẽ tự động bị xóa khỏi hệ thống.",Title:"Quá hạn mức sử dụng cho phép",TextButton:"NÂNG CẤP",ActionType:1},{Type:13,Body:"Đã mua:<b>{#TotalCapacity#}</b> MB &nbsp;&nbsp;&nbsp;&nbsp; Đã sử dụng: <b>{#UsedCapacity#}</b> MB &nbsp;&nbsp;&nbsp;&nbsp; Còn lại: <b>{#RemainCapacity#}</b> MB  <br><br> Vui lòng kiểm tra thông tin dịch vụ và mua thêm để công việc không bị gián đoạn.",Title:"Sắp hết dung lượng lưu trữ tài liệu",TextButton:"Chi tiết",ActionType:2},{Type:15,Body:"Đã mua: <b>{#TotalCapacity#}</b>  MB &nbsp;&nbsp;&nbsp;&nbsp; Đã sử dụng: <b>{#UsedCapacity#}</b> MB &nbsp;&nbsp;&nbsp;&nbsp; Còn lại: <b>{#RemainCapacity#}</b> MB  <br><br> Vui lòng kiểm tra thông tin dịch vụ và mua thêm để công việc không bị gián đoạn.",Title:"Sắp hết dung lượng lưu trữ tài liệu",TextButton:"Chi tiết",ActionType:2},{Type:17,Body:"Đã mua: <b>{#TotalUser#}</b> Tài khoản &nbsp;&nbsp;&nbsp;&nbsp; Đã sử dụng: <b>{#UsedUser#}</b> Tài khoản  &nbsp;&nbsp;&nbsp;&nbsp; Còn lại: <b>{#RemainUser#}</b> Tài khoản  <br><br> Vui lòng kiểm tra thông tin dịch vụ và mua thêm để công việc không bị gián đoạn.",Title:"Đã hết tài khoản sử dụng",TextButton:"Chi tiết",ActionType:2},{Type:19,Body:"Đã mua: <b>{#TotalUser#}</b> Tài khoản &nbsp;&nbsp;&nbsp;&nbsp; Đã sử dụng: <b>{#UsedUser#}</b> Tài khoản  &nbsp;&nbsp;&nbsp;&nbsp; Còn lại: <b>{#RemainUser#}</b> Tài khoản  <br><br> Số lượng người dùng đang sử dụng quá hạn mức cho phép. Vui lòng thực hiện nâng dịch vụ hoặc xóa bớt người dùng khỏi ứng dụng để đảm bảo hoạt động của chương trình.",Title:"Quá số lượng người dùng sử dụng cho phép",TextButton:"NÂNG CẤP",ActionType:1}],APErrorPageResource.vi={NotPermission_Title:"Oops! Bạn không có quyền truy cập vào trang này",NotPermission_Des:"Vui lòng liên hệ Quản trị hệ thống để được trợ giúp",NotPermission_Relogin:"Đăng nhập lại MISA AMIS",NotPermission_Home:"Quay lại trang chủ",NotPermission_OrText:"hoặc",NotFound_Title:"Oops! Không tìm thấy trang",NotFound_Home:"Quay lại trang chủ",NotFound_Des:"Đường dẫn đang truy cập đã bị thay đổi hoặc không tồn tại."},APLoginMessage.vi={UserIsDeleted:"Tài khoản của bạn đã bị xóa khỏi công ty này. Vui lòng liên hệ Quản trị hệ thống công ty bạn nếu cần hỗ trợ",EmployeeNotWorking:"Bạn đã nghỉ việc ở công ty này",MemberIsNotUser:"Bạn chưa có tài khoản đăng nhập vào công ty.",UserInactive:"Tài khoản của bạn chưa được kích hoạt.",RedirectToLogin:"Đang chuyển tới trang đăng nhập",NeedInputCaptcha:"Tên đăng nhập hoặc mật khẩu không đúng",CaptchaInvalid:"Mã captcha không đúng",ErrorMISAID:"Có lỗi xảy ra. Vui lòng liên hệ MISA để được trợ giúp",TenantNotFound:" Tài khoản không được đăng nhập vào công ty nào",TenantNotAllowed:"Tài khoản đăng nhập vào công ty không được phép",TokenInvalid:"Thông tin đăng nhập vào công ty không hợp lệ",UserWithNoAllowedApplication:"Tài khoản không được sử dụng ứng dụng nào",UserNotFound:"Không tìm được tài khoản nào trên hệ thống MISA AMIS.",UserWaitForActivation:"Tài khoản chưa kích hoạt. Vui lòng kiểm tra email để kích hoạt",BlockedBySecurityPolicy:"Đăng nhập bị chặn theo chính sách bảo mật của công ty",MISAID_InvalidClient:"Có lỗi xảy ra. Vui lòng liên hệ MISA để được trợ giúp",MISAID_WrongUserNamePassword:"Tên đăng nhập hoặc mật khẩu không đúng",MISAID_AccountIsLocked:"Tài khoản bị khóa tạm thời trong 1 phút do bạn đã đăng nhập sai nhiều lần",MISAID_EmailNotActive:"Tài khoản chưa được kích hoạt. Vui lòng kiểm tra Email của bạn và thực hiện kích hoạt",MISAID_MobileNotActive:"Số điện thoại chưa được kích hoạt",MISAID_InvalidScope:"Có lỗi xảy ra. Vui lòng liên hệ MISA để được trợ giúp",MISAID_OTPWasSent:"Mã xác nhận đã được gửi đến {0}. Bạn vui lòng nhập chính xác mã vào ô trên.",TooManyFailedAttempts:"Đăng nhập sai quá nhiều lần. Vui lòng thử lại sau ít phút",Error:"Có lỗi khi đăng nhập"},APCoreResource.vi={AppMISAAMIS_Title:"Cài đặt AMIS Mobile",AppMISAAMIS_Des:"Làm việc mọi lúc, mọi nơi với ứng dụng mobile trên:",Error:"Có lỗi xảy ra! Vui lòng liên hệ MISA để được trợ giúp",AccountMenu_Logout_Name:"Đăng xuất",AccountMenu_AccountSetting:"Thiết lập tài khoản",AccountMenu_ChangePassword:"Đổi mật khẩu",AccountMenu_SecuritySetting:"Thiết lập bảo mật",AccountMenu_Loyalty:"Giới thiệu - Tích điểm",AccountMenu_LoyaltyDes:"Nhận điểm tích lũy khi giới thiệu sản phẩm MISA",AccountMenu_Language:"Ngôn ngữ",Menu_BackgroundSetting:"Đổi ảnh nền",Menu_Setting:"Thiết lập",Menu_License:"Thông tin dịch vụ",Menu_AppsSetting:"Tùy chỉnh danh sách ứng dụng",ChangeLanguage:"Đổi ngôn ngữ",Vietnamese:"Tiếng Việt",English:"English",AccountInfo_Title:"Thônng báo",AccountInfo_Content:"Vui lòng đăng nhập lại để tiếp tục",AccountInfo_OK:"Đăng nhập",AccountInfo_Cancel:"Đóng",NewTab:"Mở tab mới",Back:"Quay lại",Search_Placeholder:"Tìm kiếm ứng dụng",Sort_Title:"Sắp xếp theo",Sort_ByName:"Tên ứng dụng",Sort_ByCategory:"Nghiệp vụ",BackgroundSetting_Title:"Đổi ảnh nền",AMISAppDock_ViewMore:"Tất cả",Launcher_RemoveFavorite:"Bỏ yêu thích",Launcher_Favorite:"Yêu thích",Launcher_Close:"Quay lại",Launcher_BackToApp:"Quay lại {0}",HeaderNotify_Cancel:"Để sau",HeaderNotify_Upgrade:"Nâng cấp ngay",HeaderNotify_Renewal:"Gia hạn ngay",HeaderNotify_TrialMessage:"Thời gian dùng thử <b>{0}</b> của quý khách <b>còn {1} ngày</b>. Vui lòng nâng cấp phiên bản chính thức để không gián đoạn công việc",HeaderNotify_Message:"Thời gian sử dụng <b>{0}</b> của quý khách chỉ <b>còn {1} ngày</b>. Vui lòng gia hạn để không bị gián đoạn công việc.",TenantsPopup_Title:"Công ty của bạn",TenantsPopup_CurrentTenantTile:"Công ty đang làm việc",TenantsPopup_OtherTenantTile:"Chọn công ty khác",TenantsPopup_NoMoreTenant:"Bạn không thuộc công ty nào khác",TenantPopup_TitleLoading:"Đang đăng nhập vào công ty",SettingPopup_Title:"Thiết lập",SettingPopup_ButtonCancel:"Hủy bỏ",SettingPopup_ButtonOK:"Đồng ý",SettingPopup_Heading:"Hiển thị màn hình mặc định khi vào làm việc",SettingPopup_LabelListApp:"Danh sách ứng dụng",SettingPopup_LastestApp:"Ứng dụng làm việc gần nhất",SettingPopup_SelectApp:"Chọn ứng dụng",SettingPopup_SearchAppPlaceholder:"Nhập tên ứng dụng",Notification:"Thông báo",Notification_ViewAll:"Xem tất cả",Notification_MarkAllAsRead:"Đánh dấu đã đọc tất cả",Notification_SettingTitle:"Thiết lập thông báo",Notification_SettingNumber:"Số thông báo",Notification_SettingNumber_New:"Hiển thị số thông báo mới",Notification_SettingNumber_Unread:"Hiển thị số thông báo chưa đọc",Notification_Filter_All:"Tất cả",Notification_Filter_Unread:"Chưa đọc",Notification_AdvancedSetting:"Thiết lập nâng cao",Empty_AdminLabel:"Danh sách quản trị hệ thống:",Empty_AdminTitle:"Bạn chưa có quyền sử dụng ứng dụng trên <br> <b>Nền tảng MISA AMIS</b>",Empty_AdminSubTitle:"Vui lòng liên hệ với quản trị để được cấp quyền sử dụng",LicenseText:"Tôi đã đọc và đồng ý với thỏa thuận dịch vụ",Launcher_Category_All:"Tất cả",Launcher_Category_Recent:"Gần đây",Launcher_Category_Favorite:"Yêu thích",Launcher_Market_Button:"Chợ ứng dụng",ButtonSave:"Áp dụng",ButtonCancel:"Hủy bỏ",NPSBox2_ContentPlaceholder:"Chúng tôi cần làm gì đề mang lại nhiều lợi ích hơn nữa cho bạn? (Không bắt buộc)",NPSBox2_ContentPlaceholder_Require:"Chúng tôi cần làm gì đề mang lại nhiều lợi ích hơn nữa cho bạn?",NPSBox2_CommentTitle:"Góp ý của bạn",NPSBox2_PhonePlaceholder:"Số điện thoại",NPSBox2_PhoneTitleLowScore:"Vui lòng để lại số điện thoại, MISA sẽ hỗ trợ vấn đề bạn gặp phải",NPSBox2_PhoneTitle:"Vui lòng để lại số điện thoại để {0} hỗ trợ",NPSBox2_OptionTitle:"Chọn một lý do khiến bạn chưa hài lòng về sản phẩm? ",NPSBox2_Close:"Đóng",NPSBox2_ShowLate:"Để sau",NPSBox2_Send:"Gửi",NPSBox2_ScoreTitle:"Bạn có sẵn lòng giới thiệu <b>{0}</b> đến người khác không?",NPSBox2_LowScoreText:"Không",NPSBox2_MidScoreText:"Có thể",NPSBox2_HightScoreText:"Rất sẵn lòng",NPSBox2_Thank:"Cảm ơn bạn dành thời gian thực hiện khảo sát của chúng tôi.",UserControlPanel:{Tooltip_HelpMenu:"Trợ giúp",Tooltip_MoreMenu:"Tính năng khác",Tooltip_KnowledgeMenu:"Kiến thức hữu ích",Tooltip_NotificationBox:"Thông báo"},SystemNotificationPopup:{Title:"Thông báo",Add_Role_Admin:"Bạn vừa được phân quyền làm Quản trị hệ thống.",Add_Role_User:"Bạn vừa được phân quyền vào ứng dụng <b>{#AppName#}</b>.",Edit_Role_User:"Bạn vừa được cập nhật quyền trong ứng dụng <b>{#AppName#}</b>.",Remove_Role_User:"Bạn vừa bị xóa khỏi ứng dụng <b>{#AppName#}</b>.",Remove_Role_Admin:"Bạn vừa bị xóa quyền Quản trị hệ thống.",Button:"Đóng",ButtonNext:"Tiếp tục",KeepWorking:"Tiếp tục làm việc",ReLogin:"Đăng nhập lại"}},APCore.Widgets={},APCore.Widgets.config={res:{},api:{},url:{}},APCore.Widgets.define=function(e,t){APCore.Widgets[e]=new APCore.DOMClass.extend(t),APCore&&!APCore[e]&&(APCore[e]=APCore.Widgets[e])},APCore.Widgets.hideAllPopups=function(n,o){var e=$(".apui-popup");n&&0<e.length?e.each(function(e,t){var i;return 0!==$("body").find(t).length&&(0!=(i=$(t)).find(n).length||t===n[0]||o&&t===o[0]||i.is(":hidden")||("function"==typeof i.customHide?i.customHide():"function"==typeof i[0].customHide?i[0].customHide():i.hide()),!0)}):0<e.length&&e.each(function(e,t){if(0===$("body").find(t).length)return!1;var i=$(t);o&&t===o[0]||i.is(":hidden")||("function"==typeof i.customHide?i.customHide():"function"==typeof i[0].customHide?i[0].customHide():i.hide())})},window.hideAPPopup=APCore.Widgets.hideAllPopups,APCore.Widgets.renderControls=function(e,t,i){i=i||APCore.Widgets.config,APCore.Widgets.renderTabPanel(e,t,i),APCore.Widgets.renderCombobox(e,t,i),APCore.Widgets.renderButton(e,t,i),APCore.Widgets.renderCombobox(e,t,i),APCore.Widgets.renderGrid(e,t,i),APCore.Widgets.renderSearchInput(e,t,i),APCore.Widgets.renderDataFields(e,t,i),APCore.Widgets.renderDateRange(e,t,i)},APCore.Widgets._convertAttrToConfig=function(o,a,s){let r={};return a&&$.each(a.attributes,function(e,n){if(n.specified){let i=n.value;n=n.name;if("string"==typeof i)if((i=i.trim()).startsWith("api:"))r[n]=_isFn(s.api)?s.api(i.substr(4)):i;else if(i.startsWith("url:"))r[n]=_isFn(s.url)?s.url(i.substr(4)):i;else if(i.startsWith("arr:")){var t=i&&i.substr(4);r[n]=t.split(";")}else if(i.startsWith("res:"))r[n]=_isFn(s.res)?s.res(i.substr(4)):i;else if(i.startsWith("this:")){let e=i.substr(5),t=!1;e.endsWith("()")&&(e=e.substr(0,e.length-2),t=!0),"function"==typeof o[e]?r[n]=t?o[e](a):o[e].bind(o):console.log("fn: "+e+" not existed in scope this")}else if(i.startsWith("fn:")){let e=i.substr(3),t=!1;e.endsWith("()")&&(e=e.substr(0,e.length-2),t=!0),"function"==typeof o[e]?r[n]=t?o[e](a):o[e].bind(o):"function"==typeof window[e]?r[n]=t?window[e](a):window[e]:console.log("fn: "+e+" not existed")}else r[n]=i}}),r},APCore.Widgets._getControlEvent=function(i,e){e=$(e).find("event");let n={};return e.each(function(e,t){t=APCore.Widgets._convertAttrToConfig(i,t);n[t.name]=t.fn}),n},$(document).on("click.apuipopup",function(e){var t=$(e.target);t.hasClass("apui-popup")?APCore.Widgets.hideAllPopups(t):0<t.parents(".apui-popup").length?APCore.Widgets.hideAllPopups(t.parents(".apui-popup").first()):setTimeout(function(){APCore.Widgets.hideAllPopups(t)},100)}),function(c){"use strict";function o(e,t,i){var n;void 0===e.selectionStart?(e.focus(),(n=e.createTextRange()).collapse(!0),n.moveEnd("character",i),n.moveStart("character",t),n.select()):(e.selectionStart=t,e.selectionEnd=i)}function h(e,t){"string"==typeof e[t]&&(e[t]*=1)}function a(e,t){i=e,n=t,c.each(n,function(e,t){"function"==typeof t?n[e]=t(i,n,e):"function"==typeof i.autoNumeric[t]&&(n[e]=i.autoNumeric[t](i,n,e))}),t.oEvent=null,t.tagList=["b","caption","cite","code","dd","del","div","dfn","dt","em","h1","h2","h3","h4","h5","h6","ins","kdb","label","li","output","p","q","s","sample","span","strong","td","th","u","var"];var i,n,o,a,e=t.vMax.toString().split("."),s=t.vMin||0===t.vMin?t.vMin.toString().split("."):[],e=(h(t,"vMax"),h(t,"vMin"),h(t,"mDec"),t.mDec="CHF"===t.mRound?"2":t.mDec,t.allowLeading=!0,t.aNeg=t.vMin<0?"-":"",e[0]=e[0].replace("-",""),s[0]=s[0].replace("-",""),t.mInt=Math.max(e[0].length,s[0].length,1),null===t.mDec&&(a=o=0,e[1]&&(o=e[1].length),s[1]&&(a=s[1].length),t.mDec=Math.max(o,a)),null===t.altDec&&0<t.mDec&&("."===t.aDec&&","!==t.aSep?t.altDec=",":","===t.aDec&&"."!==t.aSep&&(t.altDec=".")),t.aNeg?"([-\\"+t.aNeg+"]?)":"(-?)"),s=(t.aNegRegAutoStrip=e,t.skipFirstAutoStrip=new RegExp(e+"[^-"+(t.aNeg?"\\"+t.aNeg:"")+"\\"+t.aDec+"\\d].*?(\\d|\\"+t.aDec+"\\d)"),t.skipLastAutoStrip=new RegExp("(\\d\\"+t.aDec+"?)[^\\"+t.aDec+"\\d]\\D*$"),"-"+t.aNum+"\\"+t.aDec);return t.allowedAutoStrip=new RegExp("[^"+s+"]","gi"),t.numRegAutoStrip=new RegExp(e+"(?:\\"+t.aDec+"?(\\d+\\"+t.aDec+"\\d+)|(\\d*(?:\\"+t.aDec+"\\d*)?))"),t}function s(e,t,i){if(t.aSign)for(;-1<e.indexOf(t.aSign);)e=e.replace(t.aSign,"");e=(e=(e=e.replace(t.skipFirstAutoStrip,"$1$2")).replace(t.skipLastAutoStrip,"$1")).replace(t.allowedAutoStrip,"");var n,o=(e=t.altDec?e.replace(t.altDec,t.aDec):e).match(t.numRegAutoStrip);return e=o?[o[1],o[2],o[3]].join(""):"","allow"!==t.lZero&&"keep"!==t.lZero||"strip"===i||(o=[],n="",-1!==(o=e.split(t.aDec))[0].indexOf("-")&&(o[0]=o[0].replace(n="-","")),o[0].length>t.mInt&&"0"===o[0].charAt(0)&&(o[0]=o[0].slice(1)),e=n+o.join(t.aDec)),(i&&"deny"===t.lZero||i&&"allow"===t.lZero&&!1===t.allowLeading)&&(n="^"+t.aNegRegAutoStrip+"0*(\\d"+("leading"===i?")":"|$)"),n=new RegExp(n),e=e.replace(n,"$1$2")),e}function r(e,t,i){return t=t.split(","),"set"===i||"focusout"===i?(e=e.replace("-",""),e=t[0]+e+t[1]):"get"!==i&&"focusin"!==i&&"pageLoad"!==i||e.charAt(0)!==t[0]||(e=(e=e.replace(t[0],"-")).replace(t[1],"")),e}function n(e,t,i){var n;return e=t&&i&&(n=e.split(t))[1]&&n[1].length>i?0<i?(n[1]=n[1].substring(0,i),n.join(t)):n[0]:e}function l(e,t,i){return t&&"."!==t&&(e=e.replace(t,".")),(e=i&&"-"!==i?e.replace(i,"-"):e).match(/\d/)||(e+="0"),e}function u(e,t){var i;return e&&((i=+e)<1e-6&&-1<i?e=(e=(e=(e=+e)<1e-6&&0<e?(e=(e+10).toString()).substring(1):e)<0&&-1<e?"-"+(e=(e-10).toString()).substring(2):e).toString():void 0!==(i=e.split("."))[1]&&(e=0==+i[1]?i[0]:(i[1]=i[1].replace(/0*$/,""),i.join(".")))),"keep"===t.lZero?e:e.replace(/^0*(\d)/,"$1")}function d(e,t,i){return i&&"-"!==i&&(e=e.replace("-",i)),e=t&&"."!==t?e.replace(".",t):e}function p(e,t){e=+(e=l(e=n(e=s(e,t),t.aDec,t.mDec),t.aDec,t.aNeg));return"set"===t.oEvent&&(e<t.vMin||e>t.vMax)&&c.error("The value ("+e+") from the 'set' method falls outside of the vMin / vMax range"),e>=t.vMin&&e<=t.vMax}function g(e,t,i){return""===e||e===t.aNeg?"zero"===t.wEmpty?e+"0":"sign"===t.wEmpty||i?e+t.aSign:e:null}function m(e,t){var i=(e=s(e,t)).replace(",","."),n=g(e,t,!0);if(null!==n)return n;var o="",o=2===t.dGroup?/(\d)((\d)(\d{2}?)+)$/:4===t.dGroup?/(\d)((\d{4}?)+)$/:/(\d)((\d{3}?)+)$/,n=e.split(t.aDec),a=(n=t.altDec&&1===n.length?e.split(t.altDec):n)[0];if(t.aSep)for(;o.test(a);)a=a.replace(o,"$1"+t.aSep+"$2");return e=0!==t.mDec&&1<n.length?(n[1].length>t.mDec&&(n[1]=n[1].substring(0,t.mDec)),a+t.aDec+n[1]):a,t.aSign&&(n=-1!==e.indexOf(t.aNeg),e=e.replace(t.aNeg,""),e="p"===t.pSign?t.aSign+e:e+t.aSign,n)&&(e=t.aNeg+e),e="set"===t.oEvent&&i<0&&null!==t.nBracket?r(e,t.nBracket,t.oEvent):e}function f(e,t){e=""===e?"0":e.toString(),h(t,"mDec"),"CHF"===t.mRound&&(e=(Math.round(20*e)/20).toString());function i(e){var t=0===s?/(\.(?:\d*[1-9])?)0*$/:1===s?/(\.\d(?:\d*[1-9])?)0*$/:new RegExp("(\\.\\d{"+s+"}(?:\\d*[1-9])?)0*$");return e=e.replace(t,"$1"),e=0===s?e.replace(/\.$/,""):e}var n="",o=0,a="",s="boolean"==typeof t.aPad||null===t.aPad?t.aPad?t.mDec:0:+t.aPad,r=((e="-"===e.charAt(0)?e.replace(a="-",""):e).match(/^\d/)||(e="0"+e),"-"===a&&0==+e&&(a=""),(e=0<+e&&"keep"!==t.lZero||0<e.length&&"allow"===t.lZero?e.replace(/^0*(\d)/,"$1"):e).lastIndexOf(".")),c=-1===r?e.length-1:r,l=e.length-1-c;if(l<=t.mDec){if(n=e,l<s){-1===r&&(n+=".");for(var u="000000";l<s;)n+=u=u.substring(0,s-l),l+=u.length}else s<l?n=i(n):0===l&&0===s&&(n=n.replace(/\.$/,""));if("CHF"!==t.mRound)return 0==+n?n:a+n;"CHF"===t.mRound&&(r=n.lastIndexOf("."),e=n)}var c=r+t.mDec,r=+e.charAt(c+1),d=e.substring(0,c+1).split(""),p="."===e.charAt(c)?e.charAt(c-1)%2:e.charAt(c)%2,g=!0;if(1!==p&&(p=0===p&&0<e.substring(c+2,e.length)?1:0),4<r&&"S"===t.mRound||4<r&&"A"===t.mRound&&""===a||5<r&&"A"===t.mRound&&"-"===a||5<r&&"s"===t.mRound||5<r&&"a"===t.mRound&&""===a||4<r&&"a"===t.mRound&&"-"===a||5<r&&"B"===t.mRound||5==r&&"B"===t.mRound&&1===p||0<r&&"C"===t.mRound&&""===a||0<r&&"F"===t.mRound&&"-"===a||0<r&&"U"===t.mRound||"CHF"===t.mRound)for(o=d.length-1;0<=o;--o)if("."!==d[o]){if("CHF"===t.mRound&&d[o]<=2&&g){d[o]=0,g=!1;break}if("CHF"===t.mRound&&d[o]<=7&&g){g=!(d[o]=5);break}if("CHF"===t.mRound&&g?g=!(d[o]=10):d[o]=+d[o]+1,d[o]<10)break;0<o&&(d[o]="0")}return 0==+(n=i((d=d.slice(0,c+1)).join("")))?n:a+n}function b(e,t){this.settings=t,this.that=e,this.$that=c(e),this.formatted=!1,this.settingsClone=a(this.$that,this.settings),this.value=e.value}function y(e){return"string"==typeof e&&(e="#"+(e=e.replace(/\[/g,"\\[").replace(/\]/g,"\\]")).replace(/(:|\.)/g,"\\$1")),c(e)}function I(e,t,i){var n=e.data("autoNumeric"),o=(n||e.data("autoNumeric",n={}),n.holder);return(void 0===o&&t||i)&&(o=new b(e.get(0),t),n.holder=o),o}b.prototype={init:function(e){var t,i,n;this.value=this.that.value,this.settingsClone=a(this.$that,this.settings),this.ctrlKey=e.ctrlKey,this.cmdKey=e.metaKey,this.shiftKey=e.shiftKey,this.selection=(t=this.that,n={},void 0===t.selectionStart?(t.focus(),i=document.selection.createRange(),n.length=i.text.length,i.moveStart("character",-t.value.length),n.end=i.text.length,n.start=n.end-n.length):(n.start=t.selectionStart,n.end=t.selectionEnd,n.length=n.end-n.start),n),"keydown"!==e.type&&"keyup"!==e.type||(this.kdCode=e.keyCode),this.which=e.which,this.processed=!1,this.formatted=!1},setSelection:function(e,t,i){e=Math.max(e,0),t=Math.min(t,this.that.value.length),this.selection={start:e,end:t,length:t-e},void 0!==i&&!i||o(this.that,e,t)},setPosition:function(e,t){this.setSelection(e,e,t)},getBeforeAfter:function(){var e=this.value;return[e.substring(0,this.selection.start),e.substring(this.selection.end,e.length)]},getBeforeAfterStriped:function(){var e=this.getBeforeAfter();return e[0]=s(e[0],this.settingsClone),e[1]=s(e[1],this.settingsClone),e},normalizeParts:function(e,t){var i,n=this.settingsClone,o=!!(t=s(t,n)).match(/^\d/)||"leading",o=(""!==(e=s(e,n,o))&&e!==n.aNeg||"deny"!==n.lZero||""<t&&(t=t.replace(/^0*(\d)/,"$1")),e+t);return n.aDec&&(i=o.match(new RegExp("^"+n.aNegRegAutoStrip+"\\"+n.aDec)))&&(o=(e=e.replace(i[1],i[1]+"0"))+t),"zero"!==n.wEmpty||o!==n.aNeg&&""!==o||(e+="0"),[e,t]},setValueParts:function(e,t){var i=this.settingsClone,e=this.normalizeParts(e,t),t=e.join(""),e=e[0].length;return!!p(t,i)&&(e>(t=n(t,i.aDec,i.mDec)).length&&(e=t.length),this.value=t,this.setPosition(e,!1),!0)},signPosition:function(){var e=this.settingsClone,t=e.aSign,i=this.that;return t?(t=t.length,"p"===e.pSign?e.aNeg&&i.value&&i.value.charAt(0)===e.aNeg?[1,t+1]:[0,t]:[(e=i.value.length)-t,e]):[1e3,-1]},expandSelectionOnSign:function(e){var t=this.signPosition(),i=this.selection;i.start<t[1]&&i.end>t[0]&&((i.start<t[0]||i.end>t[1])&&this.value.substring(Math.max(i.start,t[0]),Math.min(i.end,t[1])).match(/^\s*$/)?i.start<t[0]?this.setSelection(i.start,t[0],e):this.setSelection(t[1],i.end,e):this.setSelection(Math.min(i.start,t[0]),Math.max(i.end,t[1]),e))},checkPaste:function(){var e,t;void 0!==this.valuePartsBeforePaste&&(e=this.getBeforeAfter(),t=this.valuePartsBeforePaste,delete this.valuePartsBeforePaste,e[0]=e[0].substr(0,t[0].length)+s(e[0].substr(t[0].length),this.settingsClone),this.setValueParts(e[0],e[1])||(this.value=t.join(""),this.setPosition(t[0].length,!1)))},skipAllways:function(e){var t=this.kdCode,i=this.which,n=this.ctrlKey,o=this.cmdKey,a=this.shiftKey;return(n||o)&&"keyup"===e.type&&void 0!==this.valuePartsBeforePaste||a&&45===t?(this.checkPaste(),!1):112<=t&&t<=123||91<=t&&t<=93||9<=t&&t<=31||t<8&&(0===i||i===t)||144===t||145===t||45===t||!(!n&&!o||65!==t)||(!n&&!o||67!==t&&86!==t&&88!==t?!(!n&&!o)||(37===t||39===t?(a=this.settingsClone.aSep,i=this.selection.start,n=this.that.value,"keydown"===e.type&&a&&!this.shiftKey&&(37===t&&n.charAt(i-2)===a?this.setPosition(i-1):39===t&&n.charAt(i+1)===a&&this.setPosition(i+1)),!0):34<=t&&t<=40):("keydown"===e.type&&this.expandSelectionOnSign(),86!==t&&45!==t||("keydown"===e.type||"keypress"===e.type?void 0===this.valuePartsBeforePaste&&(this.valuePartsBeforePaste=this.getBeforeAfter()):this.checkPaste()),"keydown"===e.type||"keypress"===e.type||67===t))},processAllways:function(){var e;return(8===this.kdCode||46===this.kdCode)&&(this.selection.length?(this.expandSelectionOnSign(!1),e=this.getBeforeAfterStriped()):(e=this.getBeforeAfterStriped(),8===this.kdCode?e[0]=e[0].substring(0,e[0].length-1):e[1]=e[1].substring(1,e[1].length)),this.setValueParts(e[0],e[1]),!0)},processKeypress:function(){var e=this.settingsClone,t=String.fromCharCode(this.which),i=this.getBeforeAfterStriped(),n=i[0],i=i[1];return t===e.aDec||e.altDec&&t===e.altDec||("."===t||","===t)&&110===this.kdCode?e.mDec&&e.aDec&&(e.aNeg&&-1<i.indexOf(e.aNeg)||-1<n.indexOf(e.aDec)||0<i.indexOf(e.aDec)||(0===i.indexOf(e.aDec)&&(i=i.substr(1)),this.setValueParts(n+e.aDec,i))):"-"===t||"+"===t?e.aNeg&&(""===n&&-1<i.indexOf(e.aNeg)&&(n=e.aNeg,i=i.substring(1,i.length)),n=n.charAt(0)===e.aNeg?n.substring(1,n.length):"-"===t?e.aNeg+n:n,this.setValueParts(n,i)):"0"<=t&&t<="9"&&(e.aNeg&&""===n&&-1<i.indexOf(e.aNeg)&&(n=e.aNeg,i=i.substring(1,i.length)),e.vMax<=0&&e.vMin<e.vMax&&-1===this.value.indexOf(e.aNeg)&&"0"!==t&&(n=e.aNeg+n),this.setValueParts(n+t,i)),!0},formatQuick:function(){var e=this.settingsClone,t=this.getBeforeAfterStriped(),i=this.value,i=((""===e.aSep||""!==e.aSep&&-1===i.indexOf(e.aSep))&&(""===e.aSign||""!==e.aSign&&-1===i.indexOf(e.aSign))&&(n=[],s="",-1<(n=i.split(e.aDec))[0].indexOf("-")&&(n[0]=n[0].replace(s="-",""),t[0]=t[0].replace("-","")),n[0].length>e.mInt&&"0"===t[0].charAt(0)&&(t[0]=t[0].slice(1)),t[0]=s+t[0]),m(this.value,this.settingsClone)),n=i.length;if(i){for(var o=t[0].split(""),a=0;a<o.length;a+=1)o[a].match("\\d")||(o[a]="\\"+o[a]);var s=new RegExp("^.*?"+o.join(".*?")),t=i.match(s);t?(0===(n=t[0].length)&&i.charAt(0)!==e.aNeg||1===n&&i.charAt(0)===e.aNeg)&&e.aSign&&"p"===e.pSign&&(n=this.settingsClone.aSign.length+("-"===i.charAt(0)?1:0)):e.aSign&&"s"===e.pSign&&(n-=e.aSign.length)}this.that.value=i,this.setPosition(n),this.formatted=!0}};var t={init:function(n){return this.each(function(){var a=c(this),e=a.data("autoNumeric"),t=a.data();if("object"==typeof e)return this;if((e=c.extend({},{aNum:"0123456789",aSep:",",dGroup:"3",aDec:".",altDec:null,aSign:"",pSign:"p",vMax:"9999999999999.99",vMin:"0.00",mDec:null,mRound:"S",aPad:!0,nBracket:null,wEmpty:"empty",lZero:"allow",aForm:!0,onSomeEvent:function(){}},t,n)).aDec===e.aSep)return c.error("autoNumeric will not function properly when the decimal character aDec: '"+e.aDec+"' and thousand separator aSep: '"+e.aSep+"' are the same character"),this;a.data("autoNumeric",e),e.runOnce=!1;var i=I(a,e);if(-1===c.inArray(a.prop("tagName").toLowerCase(),e.tagList)&&"input"!==a.prop("tagName").toLowerCase())return c.error("The <"+a.prop("tagName").toLowerCase()+"> is not supported by autoNumeric()"),this;!1===e.runOnce&&e.aForm&&(a.is("input[type=text], input[type=hidden], input[type=tel], input:not([type])")&&(t=!0,""===a[0].value&&"empty"===e.wEmpty&&(a[0].value="",t=!1),""===a[0].value&&"sign"===e.wEmpty&&(a[0].value=e.aSign,t=!1),t)&&a.autoNumeric("set",a.val()),-1!==c.inArray(a.prop("tagName").toLowerCase(),e.tagList))&&""!==a.text()&&a.autoNumeric("set",a.text()),e.runOnce=!0,a.is("input[type=text], input[type=hidden], input[type=tel], input:not([type])")&&(a.on("keydown.autoNumeric",function(e){return(i=I(a)).settings.aDec===i.settings.aSep?(c.error("autoNumeric will not function properly when the decimal character aDec: '"+i.settings.aDec+"' and thousand separator aSep: '"+i.settings.aSep+"' are the same character"),this):i.that.readOnly||(13===e.keyCode&&"function"==typeof a[0].onEnter&&a[0].onEnter(e,a),i.init(e),i.settings.oEvent="keydown",i.skipAllways(e))?i.processed=!0:i.processAllways()?(i.processed=!0,i.formatQuick(),e.preventDefault(),!1):!(i.formatted=!1)}),a.on("keypress.autoNumeric",function(e){var t=I(a),i=t.processed;return t.init(e),t.settings.oEvent="keypress",!!t.skipAllways(e)||(i?(e.preventDefault(),!1):t.processAllways()||t.processKeypress()?(t.formatQuick(),e.preventDefault(),!1):void(t.formatted=!1))}),a.on("keyup.autoNumeric",function(e){var t=I(a),e=(t.init(e),t.settings.oEvent="keyup",t.skipAllways(e));return t.kdCode=0,delete t.valuePartsBeforePaste,a[0].value===t.settings.aSign&&("s"===t.settings.pSign?o(this,0,0):o(this,t.settings.aSign.length,t.settings.aSign.length)),!!e||""===this.value||void(t.formatted||t.formatQuick())}),a.on("focusin.autoNumeric",function(){var e=I(a),t=(e.settingsClone.oEvent="focusin",null!==e.settingsClone.nBracket&&(t=a.val(),a.val(r(t,e.settingsClone.nBracket,e.settingsClone.oEvent))),e.inVal=a.val(),g(e.inVal,e.settingsClone,!0));null!==t&&(a.val(t),"s"===e.settings.pSign?o(this,0,0):o(this,e.settings.aSign.length,e.settings.aSign.length))}),a.on("focusout.autoNumeric",function(){var e=I(a),t=e.settingsClone,i=a.val(),n=i,o=(e.settingsClone.oEvent="focusout",""),o=("allow"===t.lZero&&(t.allowLeading=!1,o="leading"),""!==i&&(i=null===g(i=s(i,t,o),t)&&p(i,t,a[0])?d(i=f(i=l(i,t.aDec,t.aNeg),t),t.aDec,t.aNeg):""),g(i,t,!1));(o=null===o?m(i,t):o)!==n&&a.val(o),o!==e.inVal&&(a.change(),delete e.inVal),null!==t.nBracket&&a.autoNumeric("get")<0&&(e.settingsClone.oEvent="focusout",a.val(r(a.val(),t.nBracket,t.oEvent)))}))})},destroy:function(){return c(this).each(function(){var e=c(this);e.off(".autoNumeric"),e.removeData("autoNumeric")})},update:function(n){return c(this).each(function(){var e,t=y(c(this)),i=t.data("autoNumeric");return"object"!=typeof i?(c.error("You must initialize autoNumeric('init', {options}) prior to calling the 'update' method"),this):(e=t.autoNumeric("get"),I(t,i=c.extend(i,n),!0),i.aDec===i.aSep?(c.error("autoNumeric will not function properly when the decimal character aDec: '"+i.aDec+"' and thousand separator aSep: '"+i.aSep+"' are the same character"),this):(t.data("autoNumeric",i),""!==t.val()||""!==t.text()?t.autoNumeric("set",e):void 0))})},set:function(o){if(null!==o)return c(this).each(function(){var e=y(c(this)),t=e.data("autoNumeric"),i=o.toString(),n=o.toString();return"object"!=typeof t?(c.error("You must initialize autoNumeric('init', {options}) prior to calling the 'set' method"),this):(n!==e.attr("value")&&"input"===e.prop("tagName").toLowerCase()&&!1===t.runOnce&&(i=s(i=null!==t.nBracket?r(e.val(),t.nBracket,"pageLoad"):i,t)),n!==e.attr("value")&&n!==e.text()||!1!==t.runOnce||(i=i.replace(",",".")),c.isNumeric(+i)?(i=u(i,t),t.oEvent="set",i.toString(),i=m(i=p(i=d(i=""!==i?f(i,t):i,t.aDec,t.aNeg),t)?i:f("",t),t),e.is("input[type=text], input[type=hidden], input[type=tel], input:not([type])")?e.val(i):-1!==c.inArray(e.prop("tagName").toLowerCase(),t.tagList)?e.text(i):(c.error("The <"+e.prop("tagName").toLowerCase()+"> is not supported by autoNumeric()"),!1)):"")})},get:function(){var e=y(c(this)),t=e.data("autoNumeric");if("object"!=typeof t)return c.error("You must initialize autoNumeric('init', {options}) prior to calling the 'get' method"),this;t.oEvent="get";var i="";if(e.is("input[type=text], input[type=hidden], input[type=tel], input:not([type])"))i=e.eq(0).val();else{if(-1===c.inArray(e.prop("tagName").toLowerCase(),t.tagList))return c.error("The <"+e.prop("tagName").toLowerCase()+"> is not supported by autoNumeric()"),!1;i=e.eq(0).text()}return""===i&&"empty"===t.wEmpty||i===t.aSign&&("sign"===t.wEmpty||"empty"===t.wEmpty)?"":(null!==t.nBracket&&""!==i&&(i=r(i,t.nBracket,t.oEvent)),0==+(i=l(i=!t.runOnce&&!1!==t.aForm?i:s(i,t),t.aDec,t.aNeg))&&"keep"!==t.lZero&&(i="0"),"keep"!==t.lZero?u(i,t):i)},getString:function(){for(var e=!1,t=y(c(this)),i=t.serialize(),n=i.split("&"),o=c("form").index(t),a=0;a<n.length;a+=1){var s=n[a].split("="),r=c("form:eq("+o+') input[name="'+decodeURIComponent(s[0])+'"]');"object"==typeof r.data("autoNumeric")&&null!==s[1]&&(s[1]=r.autoNumeric("get"),n[a]=s.join("="),e=!0)}return!0===e?n.join("&"):i},getArray:function(){var n=!1,e=y(c(this)),t=e.serializeArray(),o=c("form").index(e);return c.each(t,function(e,t){var i=c("form:eq("+o+') input[name="'+decodeURIComponent(t.name)+'"]');"object"==typeof i.data("autoNumeric")&&(""!==t.value&&(t.value=i.autoNumeric("get").toString()),n=!0)}),!0===n?t:this},getSettings:function(){return y(c(this)).eq(0).data("autoNumeric")}};c.fn.autoNumeric=function(e){return t[e]?t[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void c.error('Method "'+e+'" is not supported by autoNumeric()'):t.init.apply(this,arguments)}}(jQuery),APCore.Widgets.define("Button",function(){var i=this;this.default={renderTo:null,css:{},cls:"",onClick:null,box:!0,text:"Click me!"},this.initDom=function(){i.data=i.opts.data,i.createDom()},this.disable=function(){i.isDisable=!0,i.jObject.addClass("disable")},this.enable=function(){i.isDisable=!1,i.jObject.removeClass("disable")},this.createDom=function(){i.jObject=$("<div class='apui-button-container'></div>"),_isTrue(i.opts.box)||i.jObject.addClass("apui-button-no-box"),i.opts.cls&&i.jObject.addClass(i.opts.cls),i.opts.css&&i.jObject.css(i.opts.css),i.opts.renderTo&&i.opts.renderTo.append(i.jObject),i.opts.text&&i.text(i.opts.text),i.initAction()},this.text=function(e){i.jObject.text(e)},this.disable=function(){i.isDisable=!0,i.jObject.addClass("disable")},this.enable=function(){i.isDisable=!1,i.jObject.removeClass("disable").removeClass("loading")},this.loading=function(){i.disable(),i.jObject.addClass("loading")},this.reset=function(){i.enable()},this.initAction=function(){i.jObject.unbind("click").on("click",function(e){var t=$(e.target);i.isDisable?_stopEvent(e):_isFn(i.opts.onClick)&&i.opts.onClick(e,t,i)})},this.show=function(){i.jObject.show()},this.hide=function(){i.jObject.hide()}}),APCore.Widgets.define("APCheckbox",function(){var t=this;this.default={renderTo:$("body"),onClick:null,afterChange:null,label:"",name:"",class:"",value:"",checked:!1},this.initDom=function(e){t.createDom(),t.initAction()},this.createDom=function(){t.jObject=$(["<label class='apui-checkbox'>","<input type='checkbox' name='",t.opts.name,"' value='",t.opts.value,"'><span class='checkmark'></span><span class='caption'>",t.opts.label,"</span>","</label>"].join("")),t.jObject.addClass(t.opts.class.split(",").join(" ")),t.input=t.jObject.find("input").first(),t.opts.renderTo.html("").append(t.jObject),t.setChecked(t.opts.checked)},this.setLabel=function(e){t.jObject.find(".caption").html(e)},this.setChecked=function(e){t.input[0].checked=!!e,t.checked=!!e},this.initAction=function(){t.jObject.unbind("click").on("click",".checkmark",function(e){_stopEvent(e),"function"==typeof t.opts.onClick&&t.opts.onClick(t),t.input.click()}),t.jObject.unbind("click").on("click",".caption",function(e){_stopEvent(e),"function"==typeof t.opts.onClick&&t.opts.onClick(t),t.input.click()}),t.input.change(function(e){t.checked=t.input[0].checked,"function"==typeof t.opts.afterChange&&t.opts.afterChange(t.checked,t)}.bind(t))}}),$.fn.APCheckbox=function(e){var t=$(this);(e=e||{}).renderTo=t,new APCore.Widgets.APCheckbox(e)},APCore.Widgets.define("Combobox",function(){var o=this;function i(){var e;o.pressKey&&o.opts.search&&(e=o.input.val(),_isValue(e)||o.opts.required?o.selectedRecord?e!=o.selectedRecord[o.opts.displayField]&&n(o.selectedRecord):n(null):o.setValue(null)),o.pressKey=!1}function t(e){if(o.menu.html(""),o.listItems=[],o.opts.menuTitle&&o.menu.append('<div  class="apui-combobox-menu-title">'+o.opts.menuTitle.encodeHTML()+"</div>"),o.opts.showClearItem&&o.menu.append('<div  class="apui-combobox-menu-clear">'+o.opts.clearText.encodeHTML()+"</div>"),o.menuItem={},e&&0<e.length)for(var t=0;t<e.length;t++){var i=e[t],n=o.getItem(i);n.data("data",i),n.data("value",i[o.opts.valueField]),o.menuItem[i[o.opts.valueField]]=n,i.IsTitle&&n.addClass("apui-combobox-item-title"),o.menu.append(n),o.listItems.push(n)}else o.menu.html("<div class='apui-combobox-empty'>"+o.opts.noDataText+"</div>");o.hideMenu()}function n(e){let t="";1==o.opts.search?(t=e?"function"==typeof o.opts.customDisplay?o.opts.customDisplay(e):e[o.opts.displayField]:"",e&&!_isValue(e[o.opts.valueField])&&(t=""),t=$("<div></div>").html(t).text(),o.input.val(t)):(t=e?"function"==typeof o.opts.customDisplay?o.opts.customDisplay(e):o.displayTmpl.formatData(e):"<div style='color:#9e9e9e'>"+o.opts.emptyText+"</div>",o.input.html(t))}function a(e,t){(e=e&&!_isValue(e[o.opts.valueField])?null:e)?(n(e),o.selectedRecord=e):(n(null),o.selectedRecord=null),t||"function"!=typeof o.opts.afterSetValue||o.opts.afterSetValue(o.selectedRecord,o)}this.default={renderTo:null,css:{},valueField:"Value",displayField:"Display",displayTmpl:"",emptyText:"",noDataText:"No data",clearText:"- Remove selected -",showClearItem:!1,menuCss:{},search:!0,data:[]},this.initDom=function(){o.opts.displayField=o.opts.displayField||"Display",o.opts.valueField=o.opts.valueField||"Value",o.displayTmpl=o.opts.displayTmpl||"{#"+o.opts.displayField+"#}",o.data=o.opts.data,o.createDom()},this.createDom=function(){o.jObject=$("<div class='apui-combobox-body'></div>"),1==o.opts.search?(o.input=$("<input type='text' class='apui-combobox-input apui-input'/>"),o.input.attr("placeholder",o.opts.emptyText),o.input.on("keyup",function(e){var t=e.which;if(function(e){{if(void 0===e.which)return 1;if("number"==typeof e.which&&0<e.which)return!e.ctrlKey&&!e.metaKey&&!e.altKey&&8!=e.which&&27!=e.which&&13!=e.which&&(e.which<37||40<e.which)}return}(e)||8==t){o.pressKey=!0;let i=o.input.val();_isValue(i)?(o.showMenu(),o.menu.find(".apui-combobox-item").each(function(e,t){t=$(t);t.data("data")[o.opts.displayField].like(i)?t.show():t.hide()}),(e=o.listItems.filter(function(e){return e.isVisible()}).first())&&o.setSelectedItem(e)):(o.selectedItem=null,o.menu.find(".selected").removeClass("selected"),o.menu.find(".apui-combobox-item").each(function(e,t){$(t).show()}),o.showMenu())}}.bind(o)),o.input.keydown(function(e){var t=e.which;if(38==t||40==t)if(o.menu.isVisible())switch(_stopEvent(e),t){case 38:!function(){var e=o.listItems.filter(function(e){return e.isVisible()});{var t;o.selectedItem&&o.selectedItem.isVisible()?(t=e.indexOf(o.selectedItem),t=0<t?t-1:e.length-1,o.selectedItem=e[t]):o.selectedItem=e.first()}o.setSelectedItem(o.selectedItem)}();break;case 40:!function(){var e=o.listItems.filter(function(e){return e.isVisible()});{var t;o.selectedItem&&o.selectedItem.isVisible()?(t=e.indexOf(o.selectedItem),t=t<e.length-1?t+1:0,o.selectedItem=e[t]):o.selectedItem=e.first()}o.setSelectedItem(o.selectedItem)}()}else o.showMenu();else 13==t?(_stopEvent(e),o.selectedItem?(o.selectedItem.trigger("click"),o.selectedItem=null):(i(),o.hideMenu(),o.input.blur())):9!=t&&27!=t||(i(),o.hideMenu())}.bind(o)),o.input.on("blur",i.bind(o))):o.input=$("<div type='text' class='apui-combobox-input'></div>"),o.opts.class&&o.input.addClass(o.opts.class),o.menu=$(['<ul class="apui-combobox-menu custom-scroll" style="display:none" ></ul>'].join("")),o.jObject.append(o.input).append(o.menu),o.opts.css&&o.input.css(o.opts.css),o.opts.height&&(o.jObject.css({height:o.opts.height}),o.input.css({height:o.opts.height})),o.opts.menuCss&&o.menu.css(o.opts.menuCss),o.opts.renderTo&&o.opts.renderTo.append(o.jObject),o.opts.emptyText&&o.input.html("<div style='color:#9e9e9e'>"+o.opts.emptyText+"</div>"),t(o.opts.data),o.initAction()},this.setValue=function(t,e){a(o.data.firstOrDefault(function(e){return e[o.opts.valueField]===t}),e)},this.getValue=function(){return o.selectedRecord?o.selectedRecord[o.opts.valueField]:null},this.getSelectedRecord=function(){return o.selectedRecord},this.selectFirst=function(e){a(o.data.first(),e)},this.setSelectedItem=function(e){o.menu.find(".selected").removeClass("selected"),e.addClass("selected"),o.selectedItem=e,APCore.Fn.DOM.isVisibleInParent(e,o.menu,40)||o.menu.smoothScrollToTarget(e,10)},this.showMenu=function(i){if(!o.isDisable){i&&o.menu.find(".apui-combobox-item").each(function(e,t){var t=$(t),i=t.data("data");o.selectedRecord&&o.selectedRecord[o.opts.valueField]==i[o.opts.valueField]&&o.setSelectedItem(t),t.show()}),o.menu.show();{i=$("body").outerWidth();let e=$("body").outerHeight(),t=((e>window.screen.height||0==e)&&(e=window.screen.height),(i>window.screen.width||0==i)&&window.screen.width,i=o.input.coords(),"450px");o.opts.maxHeight?t=o.opts.maxHeight:(t=e-i.top-i.height-32,t+="px"),(i=i.left+i.width-o.menu.outerWidth())<0&&o.menu.css("right",i),o.menu.css({"max-height":t})}}},this.loadData=function(e){o.data=e,t(e)},this.getItem=function(e){var t;return o.opts.getItem&&"function"==typeof o.opts.getItem?o.opts.getItem(e,o):(t=$("<div></div>").html(e[o.opts.displayField]).text(),$("<div class='apui-combobox-item' title='{0}'>{1}</div>".format(t,e[o.opts.displayField])))},this.hideMenu=function(){o.menu.fadeOut(100),o.selectedItem=null,o.menu.find(".selected").removeClass("selected")},this.initAction=function(){o.input.unbind("click").on("click",function(e){var t=$(e.target);o.isDisable?_stopEvent(e):t.hasClass(0==t.parents(".apui-combobox-menu").length)||(o.menu.is(":visible")?o.hideMenu():o.showMenu(!0))}),$("body").on("click.apcb",function(e){e=$(e.target);e.hasClass("apui-combobox-menu")||0!=e.parents(".apui-combobox-menu").length||e[0]==o.input[0]||0!=o.input.find(e[0]).length||o.hideMenu()}),o.menu.on("click.apcb",".apui-combobox-item",function(e){_stopEvent(e);e=$(e.currentTarget);o.setSelectedItem(e),o.selectedRecord=e.data("data"),o.setValue(o.selectedRecord[o.opts.valueField]),"function"==typeof o.opts.onItemClick&&o.opts.onItemClick(e,o.selectedRecord,o),o.hideMenu()}),o.menu.on("click",".apui-combobox-menu-clear",function(){o.setValue(null),o.hideMenu()})},this.disable=function(){o.isDisable=!0,o.jObject.addClass("disable")},this.enable=function(){o.isDisable=!1,o.jObject.removeClass("disable")}}),APCore.Widgets.define("CurrencyInput",function(){var i=this;this.default={renderTo:$("body"),css:{},class:"",textAlign:"left",decimalSeperator:",",thousandSeperator:".",minValue:0,onEnter:null,maxValue:null},this.initDom=function(){i.createDom()},this.disable=function(){i.isDisable=!0,i.jObject.addClass("disable")},this.enable=function(){i.isDisable=!1,i.jObject.removeClass("disable")},this.createDom=function(){i.jObject=$("<div class='apui-currency-input-body'></div>"),i.input=$("<input type='text' class='apui-currency-input apui-input'/>"),i.opts.placeholder&&i.input.attr("placeholder",i.opts.placeholder),_isValue(i.opts.thousandSeperator)&&i.input.attr("data-a-sep",i.opts.thousandSeperator),_isValue(i.opts.decimalSeperator)&&i.input.attr("data-a-dec",i.opts.decimalSeperator),_isValue(i.opts.minValue)&&i.input.attr("data-v-min",i.opts.minValue),_isValue(i.opts.maxValue)&&i.input.attr("data-v-max",i.opts.maxValue),i.input.addClass(i.opts.class),"right"==i.opts.textAlign&&i.input.css("text-align","right"),i.jObject.append(i.input),i.opts.css&&i.jObject.css(i.opts.css),i.opts.renderTo.append(i.jObject),i.input[0].onEnter=i.opts.onEnter,i.input.autoNumeric("init")},this.getValue=function(){return i.input.autoNumeric("get")},this.setValue=function(e,t){return i.input.autoNumeric("set",e)}}),APCore.Widgets.define("DataField",function(){var o=this;function n(e,t,i){"function"==typeof o.opts.onChange&&o.opts.onChange(o,t,i)}function t(){var e=$('<input type="text"  class="apui-input"  />');return o.opts.placeholder&&e.attr("placeholder",o.opts.placeholder),o.opts.maxLength&&e.attr("maxlength",o.opts.maxLength),e.change(function(e){var t=$(e.target);n(e.target.dataField,t.val(),e)}),o.getValue=function(e){var t=o.input.val();return"string"!=typeof t||o.opts.allowSpace||(t=t.trim()),e||o.valid(t),t},o.setValue=function(e){o.removeError(),o.input.val(e)},o.input=e}this.default={type:"",title:"",fieldName:"",height:"",width:"",flex:"",placeholder:"",inputCls:"",inputCss:"",required:!1,disable:!1,editable:!0,allowSpace:!1,info:null,resource:null,emptyText:"",noDataText:"",errorMessage:null,validFn:null,rawName:"",valueName:"",isCustom:!1,items:[],onChange:null,onClick:null,disableSearch:!1,minValue:null,maxValue:null,maxLength:null},this.initDom=function(){o.fieldName=o.opts.fieldName,o.type=o.opts.type,o.rawName=o.opts.rawName,o.valueName=o.opts.valueName,o.createForm()},this.createForm=function(){o.jObject=$(['<div class="apui-data-field">','<div class="apui-data-field-caption-wrap"><div class="apui-data-field-caption apui-ellipsis"></div></div><div class="apui-data-field-control"></div>',"</div>"].join("")),o.jCaption=o.jObject.find(".apui-data-field-caption").first(),o.jCaption.text(o.opts.title),o.opts.required&&(o.jCaption.append("<span class='apui-error' style='color: red; margin-left: 8px;'>*</span>"),o.jObject.attr("require","true")),o.jControlWrap=o.jObject.find(".apui-data-field-control").first();var e=function(e){switch(e){case"currency":return function(){var e={decimalSeperator:",",thousandSeperator:".",minValue:0,maxValue:1e18,afterSetValue:function(e){n(o.fieldName,e)}},i=new APCore.Widgets.CurrencyInput(e);e=i.jObject;return o.input=i.input,o.input.disable=i.disable,o.input.enable=i.enable,o.getValue=function(e){var t=i.getValue();return e||o.valid(t),t},o.setValue=function(e){o.removeError(),i.setValue(e)},e}();case"text":return t();case"long-text":return function(){var e=$('<div contenteditable="true" class="apui-data-long-text-field"></div>');o.opts.placeholder&&e.attr("data-placeholder",o.opts.placeholder);return o.getValue=function(e){var t=o.input.text();return"string"!=typeof(t=t.decodeContent())||o.opts.allowSpace||(t=t.trim()),e||o.valid(t),t},o.setValue=function(e){o.removeError(),e=(e=e||"").decodeContent(),o.input.text(e)},o.input=e}();case"number":case"amount":return function(e){o.jControlWrap.addClass("apui-data-nf-"+e);e=$('<input type="number" class="apui-input"/>');_isValue(o.opts.minValue)&&e.attr("min",o.opts.minValue);_isValue(o.opts.maxValue)&&e.attr("max",o.opts.maxValue);o.opts.placeholder&&e.attr("placeholder",o.opts.placeholder);return o.getValue=function(e){var t=o.input.val();return e||o.valid(t),t=parseInt(t),t=isNaN(t)?0:t},o.setValue=function(e){o.removeError(),e=parseInt(e),isNaN(e)&&(e=0),o.input.val(e)},e.change(function(e){var t=$(e.target),t=parseInt(t.val());n(e.target.dataField,t,e)}),o.input=e}(e);case"combobox":return function(){var e=$('<div  style="cursor:pointer"></div>'),t={type:"combobox",fullWidth:!0,position:"left",data:o.opts.items,afterSetValue:function(e,t){n(o.fieldName,e)}};return e.APDropDownMenu(t),o.getValue=function(e){var t=o.input.getValue();return e||o.valid(t),t},o.setValue=function(e){o.removeError(),o.input.setValue(e)},o.input=e}();case"enumcombobox":return function(){var e={data:o.opts.items,search:!o.opts.disableSearch,emptyText:o.opts.placeholder,afterSetValue:function(e,t){n(o.fieldName,e)}},i=(e=APCore.Fn.extendConfig(e,o.opts),new APCore.Widgets.Combobox(e));e=i.jObject;return o.input=i.input,o.input.data("Combobox",i),o.loadItems=function(e){o.input.data("Combobox").loadData(e),o.input.data("Combobox").setValue(null)},o.input.disable=i.disable,o.input.enable=i.enable,o.getValue=function(e){var t=i.getValue();return e||o.valid(t),t},o.setValue=function(e){o.removeError(),i.setValue(e)},e}();case"multi-combobox":return function(){o.jControlWrap.addClass("icon-trigger");var e=$('<input type="text" class="apui-input" />'),t={data:o.opts.items,valueField:o.opts.valueField||"Value",displayField:o.opts.displayField||"Display"};return o.multiSelect=new APCore.Widgets.MultiSelect(e,t),e[0].multiSelect=o.multiSelect,o.getValue=function(e){var t=o.input[0].multiSelect.getValue();return e||o.valid(t),t},o.setValue=function(e){o.removeError(),o.input[0].multiSelect.setValue(e,"; ")},o.input=e}();case"searchbox":return function(){o.jControlWrap.addClass("icon-trigger");var e=$('<input type="text"  class="apui-input" />');o.opts.placeholder&&e.attr("placeholder",o.opts.placeholder);var t={url:o.opts.api,method:_isValue(o.opts.method)?o.opts.method:"POST",resultMinHeight:"40px",localData:o.opts.data,position:"left",footerMenu:!1,queryLocal:!_isValue(o.opts.queryLocal)||o.opts.queryLocal,paging:!!_isValue(o.opts.paging)&&o.opts.paging,displayField:o.opts.displayField||"Display",searchField:o.opts.displayField||"Display",valueField:o.opts.valueField||"Value",fullWidth:!0,getItem:o.opts.getItem,getParam:function(e){return"function"==typeof o.opts.getParam?o.opts.getParam(o,e):e},onChange:function(e,t,i){n(t.input[0].dataField,e,i)},afterApi:function(e,t){if("function"==typeof o.opts.afterApi)return o.opts.afterApi(e,t,o)}};return o.liveSearch=new APCore.Widgets.DataLiveSearch(e,t),e[0].liveSearch=o.liveSearch,o.getValue=function(e){var t=o.input[0].liveSearch.getValue();return _isValue(t)||(t=o.input.val()),e||o.valid(o.input.val()),t},o.setValue=function(e,t){o.removeError(),o.input[0].liveSearch.loaded?o.input[0].liveSearch.setValue(e):o.input[0].liveSearch.setInitData(e,t)},o.setRawValue=function(e){o.removeError(),o.input.val(e)},o.input=e}();default:return t()}}(o.opts.type);o.jControlWrap.append(e),o.input.addClass("apui-data-field-input"),o.input.addClass(o.opts.inputCls),o.opts.inputCss&&o.input.css(o.opts.inputCss),(o.input[0].dataField=o).input[0].dataset.field=o.opts.fieldName,o.opts.isCustom&&(o.input[0].dataset.customfield=o.opts.fieldName),o.input.on("focus",function(e){o.removeError()}),o.input.on("click",function(e){o.removeError(),"function"==typeof o.opts.onClick&&o.opts.onClick(o.input,o)}),o.input.on("mouseover",function(e){o.input.hasClass("not-valid")&&o.showTooltip()}),o.input.on("mouseleave",function(e){o.input.hasClass("not-valid")&&o.removeTooltip()}),o.opts.disable&&(o.opts.editable=!1,o.disable()),o.setEditable(o.opts.editable),o.opts.info&&(o.jInfo=$("<div class='apui-data-field-info'>i</div>"),o.jCaption.parent().append(o.jInfo),new APCore.Widgets.Tooltip({trigger:o.jInfo,text:o.opts.info.text,position:o.opts.info.position}))},this.showTooltip=function(){var e=o.input.offset().top+o.input.height()+4,t=o.input.offset().left;let i="";var n="Không được để trống";o.opts.resource&&o.opts.resource.Data_NotEmpty&&(n=o.opts.resource.Data_NotEmpty),i=_isValue(o.errorType)&&o.opts.errorMessage?o.opts.errorMessage[o.errorType]:n,o.jObject.append(["<div class='data-field-tooltip' style='top:"+e+"px; left:"+t+"px;'>",i,"</div>"].join(""))},this.removeTooltip=function(){o.jObject.find(".data-field-tooltip").remove()},this.showError=function(e){o.errorType=e,o.input.addClass("not-valid")},this.removeError=function(){o.input.removeClass("not-valid"),o.removeTooltip()},this.getValue=function(){},this.setValue=function(){},this.valid=function(e){"string"!=typeof e||o.opts.allowSpace||(e=e.trim()),o.input.hasClass("disable")?o.removeError():"function"==typeof o.opts.validFn?o.opts.validFn(e,function(e){o.showError(e)},function(){o.removeError()}):o.opts.required&&(_isValue(e)?o.removeError():o.showError())},this.setEditable=function(e){e?(o.input.attr("readonly",null),"function"==typeof o.input.enable&&o.input.enable()):(o.input.attr("readonly","readonly"),"function"==typeof o.input.disable&&o.input.disable())},this.disable=function(){o.input.attr("readonly","readonly"),o.input.addClass("disable"),"function"==typeof o.input.disable&&o.input.disable()},this.enable=function(){o.input.attr("readonly",null),o.input.removeClass("disable"),"function"==typeof o.input.enable&&o.input.enable()}}),APCore.Widgets.define("DataLiveSearch",function(){var c=this;this.default={area:$("body"),position:"right",url:"",method:"POST",localData:null,queryLocal:!1,paging:!0,ajaxCache:!1,typingDelay:150,maxLength:20,minLengthQuery:0,resultWidth:"400px",resultMinHeight:"0px",footerMenu:!0,footerMenuTmpl:"",footerMenuClick:null,inlineResultParent:null,displayField:"Display",valueField:"Value",getItem:null,type:null,editable:!0,onBlur:null,endSearching:null,onQueryComplete:null,onChange:null},this.curPage=0,this.pageLimit=10,this.constructor=function(e,t){c.updateOption(t),c.input=e,c.input.disable=function(){c.opts.editable=!1},c.request="POST"==c.opts.method?APCore.Fn.postService:APCore.Fn.getService,"local"!==c.opts.url&&c.opts.url?c.queryLocal=!1:(c.localData=c.opts.localData,c.queryLocal=!0,c.loaded=!0);t=c.input.parent();t.find(".apui-sf-result").remove(),t.addClass("apui-live-search-wrap"),c.initAction()},this.setConfig=function(e,t){c.opts[e]=t},this.initAction=function(){c.input.addClass("input-search-box"),c.input.on("mousedown",function(e){c.opts.editable&&!c.input.hasClass("disable")&&!c.input.attr("readonly")||_stopEvent(e)}),c.input.unbind("click").on("click",function(e){_stopEvent(e),c.input.focus()}),c.input.unbind("focus").on("focus",function(e){c.opts.inlineResultParent||APCore.Widgets.hideAllPopups(),!c.opts.editable||c.input.hasClass("disable")||c.input.attr("readonly")||(c.opts.onFocus&&c.opts.onFocus(e),c.isFocus=!0,(e=c.input.val())===c.lastQuery&&0!==e.length&&"combobox"!=c.opts.type)||c.doQuery(c.isFocus)}),c.input.unbind("blur").on("blur",function(e){c.isFocus=!1;var t=c.input.val(),i=c.getSelectedData(),i=(i&&!_isValue(t)&&(c.setSelectedData(null),c.opts.onRemoveValue)&&"function"==typeof c.opts.onRemoveValue&&c.opts.onRemoveValue(i),c.getSelectedData());"function"==typeof c.opts.onBlur&&c.opts.onBlur(i?i[c.opts.displayField]:"",i||null,c.input),"function"!=typeof c.opts.onClearData||_isValue(t)||c.opts.onClearData()}),c.input.keydown(c._onKeyDown.bind(c)),c.input.on("keyup",function(e){var t;c.opts.editable&&(13===(t=e.keyCode||e.which)||9==t||27==e.which||38==e.which||40==e.which?(_stopEvent(e),c._onKeyUp(e)):c.doQuery())})},this.endSearching=function(e,t){c.opts.endSearching&&"function"==typeof c.opts.endSearching&&c.opts.endSearching(e,t)},this.preventEvent=function(e){c.stopFireEvent=e},this.getItem=function(e){var t;return c.opts.getItem&&"function"==typeof c.opts.getItem?(t=e[c.opts.displayField],c.opts.getItem(e,c.input,t,c)):$("<div class='result-item apui-ellipsis'>"+e[c.opts.displayField]+"</div>")},this.setSelectedData=function(e,t,i,n){var o=null;e&&"object"==typeof e?(o=e[c.opts.valueField],c.selectedRecord=e,c.setRawValue(e[c.opts.displayField])):(c.selectedRecord=null,c.setRawValue(t||"")),n||c.stopFireEvent||"function"!=typeof c.opts.onChange||c.opts.onChange(o,c,i),"function"==typeof c.opts.afterSelect&&c.opts.afterSelect(e,c)},this.selectFirst=function(){var e;Array.isArray(c.localData)&&0<c.localData.length&&(e=c.localData[0])&&c.setSelectedData(e)},this.setValue=function(t){var e;c.queryLocal&&c.loaded&&Array.isArray(c.localData)&&(e=c.localData.firstOrDefault(function(e){return e[c.opts.valueField]===t}))&&c.setSelectedData(e)},this.setInitData=function(e,t){c.stopFireEvent=!0,c.selectedRecord={},c.selectedRecord[c.opts.valueField]=e,c.selectedRecord[c.opts.displayField]=t,c.setRawValue(t),c.stopFireEvent=!1},this.setRawValue=function(e){c.input.val(e)},this.getRawValue=function(){c.input.val()},this.getSelectedData=function(){return c.selectedRecord||null},this.getValue=function(){return c.selectedRecord?c.selectedRecord[c.opts.valueField]:null},this.hideResult=function(){c.resultForm&&c.resultForm.hide()},this.showResult=function(){APCore.Widgets.hideAllPopups(c.resultForm),c.resultForm.is(":hidden")&&c.resultForm.show()},this.initResult=function(){let e="200px";var t;c.opts.inlineResultParent?(c.resultForm=$('<div class="search-result-inline" tabindex="0" style="height: 100%"></div>'),c.opts.inlineResultParent.html(""),c.opts.inlineResultParent.append(c.resultForm)):(c.resultForm=$('<div class="apui-popup apui-sf-result  animated" style="display:none"></div>'),(t=c.opts.area||$("body")).find(".apui-sf-result").remove(),t.append(c.resultForm),c.opts.resultMinHeight&&c.resultForm.css("min-height",c.opts.resultMinHeight),e=c.opts.resultMaxHeight||"200px",c.setPosition()),c.resultForm.customHide=c.hideResult,c.resultForm[0].customHide=c.hideResult,c.resultForm.css("max-height",e),c.resultContent=$('<div class="custom-scroll result-scroll" tabindex="0" ></div>'),c.resultContent.css("max-height",c.opts.footerMenu?parseInt(e)-90+"px":e),c.resultContent.css("overflow-y","auto").css("position","relative"),c.opts.resultWidth&&c.resultForm.css("width",c.opts.resultWidth),c.resultForm.append(c.resultContent),c.opts.paging&&c.resultContent.onScrollEnd(c.loadPagingData,c,40),c.opts.footerMenu&&(c.footer=$(c.opts.footerMenuTmpl),c.footer.on("click",function(e){"function"==typeof c.opts.footerMenuClick&&c.opts.footerMenuClick(e,c.lastQuery),setTimeout(c.hideResult,500)}),c.resultForm.append(c.footer))},this.setPosition=function(){var e=c.input[0].getBoundingClientRect(),t=e.height,i=e.width,n=c.resultForm.outerHeight(),o=parseInt(c.opts.width)||250,a=c.opts.area[0].getBoundingClientRect(),s=a.top,r=a.height,a=a.width,a=("left"===c.opts.position?a>o+e.left?c.resultForm.css("left",e.left):c.resultForm.css("left",a-o):c.resultForm.css("left",e.left+i-o),r+s>e.top+t+n?c.resultForm.css("top",e.top+t+4):c.resultForm.css("top",e.top-n-2),c.opts.width||"250px");c.opts.fullWidth&&(a=c.input.outerWidth()),c.resultForm.css("width",a).css("position","fixed"),c.resultForm.css("z-index","999999")},this.loadPagingData=function(){var e=c.lastQuery||"",e=(c.curPage=c.curPage+c.pageLimit,{Value:e,Skip:c.curPage,Take:c.pageLimit,FieldName:c.opts.fieldName});"function"==typeof c.opts.getParam&&(e=c.opts.getParam(e)),c.prevenLoading||c.request(c.opts.url,e,function(e){e&&e.Success?Array.isArray(e.PageData)&&0<e.PageData.length&&(c.insertMoreResult(e.PageData),c.curPage*c.pageLimit>e.TotalCount?c.prevenLoading=!0:c.prevenLoading=!1):c.prevenLoading=!1})},this.insertMoreResult=function(e){if(e&&0<e.length)for(var t=0;t<e.length;t++){var i=c.getItem(e[t],c);i.data("data",e[t]),i.unbind("click").on("click",function(e){var t=$(e.target),i=t;t.hasClass("result-item")||(i=t.parents(".result-item").first()),c.setSelectedData(i.data("data"),null,"click"),c.opts.onResultClick&&"function"==typeof c.opts.onResultClick&&c.opts.onResultClick(i,t,i.data("data")),c.opts.inlineResultParent||t.parent(".apui-sf-result").hide(),c.opts.endSearching&&"function"==typeof c.opts.endSearching&&c.opts.endSearching(e),c.opts.inlineResultParent||c.hideResult()}),c.resultContent.append(i),c.listItems.push(i)}},this.renderResult=function(e,t){c.initResult(),c.listItems=[];var i=!(c.selectedItem=null);if(c.curPage=1,c.opts.clearSeletedWhenSearch&&(c.selectedRecord=null),e&&0<e.length){for(var n=0;n<e.length;n++){var o=c.getItem(e[n],c);o.data("data",e[n]),o.unbind("mousedown").on("mousedown",c.onItemClick.bind(c)),c.resultContent.append(o),c.listItems.push(o)}c.setSelectedItem(c.listItems.first())}else 0<c.input.val().length?c.resultContent.html("<p class='no-result-search'>{0}</p>".format("Không có kết quả phù hợp")):(c.resultContent.html(""),i=!1),c.setSelectedItem(null),c.setSelectedData(null,c.input.val());"function"==typeof c.opts.afterRender&&c.opts.afterRender(),c.queryLocal&&c.loaded&&0==c.localData.length?c.hideResult():!t&&i&&c.showResult()},this.onItemClick=function(e){var e=$(e.target),t=e;e.hasClass("result-item")||(t=e.parents(".result-item").first()),c.opts.onResultClick&&"function"==typeof c.opts.onResultClick&&c.opts.onResultClick(t,e,t.data("data")),c.doSelectItem(t)},this.doSelectItem=function(t){c.setSelectedData(t.data("data"),null,"click"),c.opts.inlineResultParent||t.parent(".apui-sf-result").hide(),c.opts.endSearching&&"function"==typeof c.opts.endSearching&&c.opts.endSearching(e),c.opts.inlineResultParent||c.hideResult()},this.onQueryComplete=function(e,t,i,n){c.renderResult(t,n),c.lastQuery=i,c.lastData=t,c.opts.onQueryComplete&&"function"==typeof c.opts.onQueryComplete&&c.opts.onQueryComplete(e,t,i)},this.loadData=function(e,t){c.localData=e,c.renderResult(c.localData,t)},this.doQuery=function(n){var e;c.queryLocal&&c.loaded&&0==c.localData.length?c.hideResult():(e=c.opts,c.input.val().length>=e.minLengthQuery?(c.tobeExecuted&&clearTimeout(c.tobeExecuted),c.tobeExecuted=setTimeout(function(){var e,a,i,t=null!=c.opts.valueFind?c.opts.valueFind:"",s=n?t:c.input.val();c.queryLocal&&0<c.localData.length?(t=c.localData,e=[],s&&0<s.length?(s=s.toLowerCase(),a=c.opts.searchField.split(","),t&&0<t.length&&(e=t.filter(function(e){for(var t=!1,i=0;i<a.length;i++){var n=e[a[i]].toLowerCase().replaceVietnamese(),o=s.replaceVietnamese();-1<n.indexOf(o)&&(t=!0)}return t}))):e=t,c.onQueryComplete(null,e,s)):(i={Key:c.input.val(),Skip:0,FieldName:c.opts.fieldName,Take:c.pageLimit},"function"==typeof c.opts.getParam&&(i=c.opts.getParam(i)),c.request(c.opts.url,i,function(e){var t;c.curPage=1,e&&e.Success&&c.isFocus&&(t=c.opts.paging?e.Data.PageData:e.Data,e=c.opts.paging?e.Data.Total:e.Data.length,"function"==typeof c.opts.onResponse&&(t=c.opts.onResponse(t)),c.curPage*c.pageLimit>e?c.prevenLoading=!0:c.prevenLoading=!1,c.input.data("resultData",t),c.opts.queryLocal&&!c.opts.paging&&(c.queryLocal=!0,c.localData=t,c.loaded=!0),c.onQueryComplete(null,t,s),"function"==typeof c.opts.afterApi)&&c.opts.afterApi(i,t)}))},c.opts.typingDelay)):(c.opts.inlineResultParent||(c.resultFrom.is(":visible")||c.resultFrom.is(":animated"))&&c.hideResult(),c.latestValue=c.input.val()))},this.clearData=function(e){c.stopFireEvent=!e,c.loaded=!1,c.localData=[],c.renderResult([],!0),c.setSelectedData(null),c.input.val(""),c.stopFireEvent=!1},this.reloadData=function(i){c.clearData();var e={},n=(e.FieldName=c.opts.fieldName,e.Key="",c.opts.getParam?c.opts.getParam(e):e);c.request(c.opts.url,n,function(e){var t;c.curPage=1,e&&e.Data&&(t=c.opts.paging?e.Data.PageData:e.Data,e=c.opts.paging?e.Data.Total:e.Data.length,c.curPage*c.pageLimit>e?c.prevenLoading=!0:c.prevenLoading=!1,c.input.data("resultData",t),c.opts.queryLocal&&!c.opts.paging&&(c.queryLocal=!0,c.localData=t,c.loaded=!0),i||c.input.focus(),c.onQueryComplete(null,t,"",i),"function"==typeof c.opts.afterApi)&&c.opts.afterApi(n,t)})},this.keys=[],this._registerKey=function(t){c.keys.some(function(e){return e==t})||c.keys.push(t)},this._unRegisterKey=function(e){e=c.keys.indexOf(e);c.keys.splice(e,1)},this._onKeyDown=function(e){var t=e.which,i=c.getSelectedData();if(13==t?(_stopEvent(e),c.queryLocal&&c.loaded&&0==c.localData.length?(c.input.blur(),"function"==typeof c.opts.onChange&&c.opts.onChange("",c,"raw")):0!=c.input.val().length||c.selectedItem?c.selectedItem&&c.doSelectItem(c.selectedItem):(c.setSelectedData(null),c.opts.onRemoveValue&&"function"==typeof c.opts.onRemoveValue&&c.opts.onRemoveValue(i),c.input.blur(),c.hideResult(),c.endSearching(e,i))):27==e.which&&(_stopEvent(e),c.endSearching(e,data)),c.resultForm)if(c.resultForm.is(":hidden"))40==t&&c.showResult();else if(c._registerKey(t),38==t||40==t)switch(e.preventDefault(),t){case 38:c.setPrevItem();break;case 40:c.setNextItem()}},this._onKeyUp=function(e){e=e.which;c._unRegisterKey(e)},this.setPrevItem=function(){var e;c.selectedItem?(e=0<(e=c.listItems.indexOf(c.selectedItem))?e-1:c.listItems.length-1,c.selectedItem=c.listItems[e]):c.selectedItem=c.listItems.first(),c.setSelectedItem(c.selectedItem)},this.setNextItem=function(){var e;c.selectedItem?(e=(e=c.listItems.indexOf(c.selectedItem))<c.listItems.length-1?e+1:0,c.selectedItem=c.listItems[e]):c.selectedItem=c.listItems.first(),c.setSelectedItem(c.selectedItem)},this.setSelectedItem=function(e){e?(c.resultContent.find(".selected").removeClass("selected"),e.addClass("selected"),c.selectedItem=e,c.resultContent.scrollToTarget(e[0])):(c.resultContent.find(".selected").removeClass("selected"),c.selectedItem=null)}}),function(){"use strict";jQuery.fn.APDataLiveSearch=function(e){this.liveSearch=new APCore.Widgets.DataLiveSearch(this,e),this[0].liveSearch=this.liveSearch}}(),APCore.Widgets.define("APDateRange",function(){var o=this;const a={YesterDay:-1,Tomorrow:1,Today:0,ThisWeek:7,ThisMonth:30,ThisQuarter:90,ThisYear:365,LastWeek:-7,LastMonth:-30,LastQuartar:-90,LastYear:-365,Custom:2,All:99},e={vi:{YeterDay:"Hôm qua",Tomorrow:"Ngày mai",Today:"Hôm nay",ThisWeek:"Tuần này",ThisMonth:"Tháng này",ThisQuarter:"Quý này",ThisYear:"Năm nay",LastWeek:"Tuần trước",LastMonth:"Tháng trước",LastQuarter:"Quý trước",LastYear:"Năm trước",Custom:"Tùy chọn",All:"Tất cả"},en:{YesterDay:"YesterDay",Tomorrow:"Tomorrow",Today:"Today",ThisWeek:"This week",ThisMonth:"This month",ThisQuarter:"This quarter",ThisYear:"This year",LastWeek:"Last week",LastMonth:"Last month",LastQuarter:"Last quarter",LastYear:"Last year",Custom:"Custom",All:"All"}};this.default={language:"vi",renderTo:null,defaultType:a.ThisMonth,afterChange:null},this.initDom=function(){o.resource=e[o.opts.language],_isValue(o.resource)||(o.resource=e.vi),o.createDom(),o.customElements(),o.initAction()},this.getObjects=function(){o.jObject.find("[objName]").each(function(e,t){var t=$(t),i=t.attr("objName");o[i]=t})},this.createDom=function(){o.jObject=$(['<div class="apui-date-range">','<div objName="jSelect" class="apui-date-range-select"></div>','<input objName="jFrom" class="apui-date-range-from apui-input" type="text" style="display:none"/>','<input objName="jTo" class="apui-date-range-to apui-input" type="text" style="display:none"/>',"</div>"].join("")),o.getObjects(),o.opts.renderTo&&o.opts.renderTo.html("").append(o.jObject),o.data={}},this.customElements=function(){var e=[{Value:a.Today,Display:o.resource.Today},{Value:a.ThisWeek,Display:o.resource.ThisWeek},{Value:a.ThisMonth,Display:o.resource.ThisMonth},{Value:a.ThisYear,Display:o.resource.ThisYear},{Value:a.Custom,Display:o.resource.Custom}];o.jFrom.addClass("disable"),o.jTo.addClass("disable"),o.jFrom.attr("disabled","disabled"),o.jTo.attr("disabled","disabled"),o.jSelect.APDropDownMenu({position:"left",showTrigger:!0,width:"120px",inner:!0,valueField:"Value",displayField:"Display",type:"combobox",triggerIcon:" icon-trigger-dropdown",data:e,afterSetValue:o.onSelectType.bind(o)}),o.jFrom.datepicker({clearButton:!0,range:!1,timepicker:!1,onSelect:function(e,t,i){o.data.From=o._cloneDate(t),"00:00:00"==o.data.From.toLocaleTimeString()&&(o.data.From=new Date(o.data.From.addHours(12))),o.afterChange()},afterClear:function(){o.data.From=null,o.afterChange()}}),o.jTo.datepicker({clearButton:!0,range:!1,timepicker:!1,onSelect:function(e,t,i){o.data.To=o._cloneDate(t),"00:00:00"==o.data.To.toLocaleTimeString()&&(o.data.To=new Date(o.data.To.addHours(12))),o.afterChange()},afterClear:function(){o.data.To=null,o.afterChange()}}),o.hideDate(),o.setRangeType(o.opts.defaultType,!0)},this.setRangeType=function(e,t){_isValue(e)||(e=a.ThisMonth),o.jSelect.setValue(e,t),o.onSetValue(e,t)},this.onSelectType=function(e){o.onSetValue(e.Value)},this.showDate=function(){o.jFrom.show(),o.jTo.show()},this.hideDate=function(){o.jFrom.hide(),o.jTo.hide()},this.onSetValue=function(e,t){var i=new Date;if(e==a.Custom)o.jFrom.removeAttr("disabled"),o.jTo.removeAttr("disabled"),o.jFrom.removeClass("disable"),o.jTo.removeClass("disable"),o.data.From||(o.data.From=i),o.data.To||(o.data.To=i),o.setRange(o.data.From,o.data.To,!0),o.showDate();else{if(o.hideDate(),o.jFrom.attr("disabled","disabled"),o.jTo.attr("disabled","disabled"),o.jFrom.addClass("disable"),o.jTo.addClass("disable"),e==a.ThisYear){let e=APCore.moment().startOf("year").toDate();e=new Date(e.addHours(12));var n=APCore.moment().endOf("year").toDate();o.setRange(e,n,!0)}else e==a.All?o.setRange(null,null,!0):e==a.Today&&o.setRange(i,i,!0);if(e==a.ThisWeek){let e=APCore.moment().startOf("week").toDate();e=new Date(e.addHours(12));n=APCore.moment().endOf("week").toDate();o.setRange(e,n,!0)}if(e==a.ThisMonth){let e=APCore.moment().startOf("month").toDate();e=new Date(e.addHours(12));i=APCore.moment().endOf("month").toDate();o.setRange(e,i,!0)}}o.data.Type=e,o.afterChange(t)},this.setRange=function(e,t,i){o.setFromDate(e,i),o.setToDate(t,i)},this.setToDate=function(e){o.jTo[0].picker.setValue(o._cloneDate(e),!0),o.data.To=o._cloneDate(e)},this.setFromDate=function(e){o.jFrom[0].picker.setValue(o._cloneDate(e),!0),o.data.From=o._cloneDate(e)},this.initAction=function(){},this._cloneDate=function(e){return e?e.clone():null},this.afterChange=function(e){var t=o.validate();t?o.jObject.removeClass("invalid"):o.jObject.addClass("invalid"),t&&!e&&"function"==typeof o.opts.afterChange&&o.opts.afterChange(o.data)},this.getValue=function(){return{Type:o.data.Type,From:o._cloneDate(o.data.From),To:o._cloneDate(o.data.To)}},this.validate=function(){let e=!0;return e=o.data.To&&o.data.From&&-1==o.data.To.compareDate(o.data.From)?!1:e}}),function(e,p,o){function i(e,t){this.el=e,this.$el=p(e),this.$el.picker=this,(e.picker=this).configs=p.extend(!0,{},r,t,this.$el.data()),n==o&&(n=p("body")),this.configs.startDate||(this.configs.startDate=new Date),"INPUT"==this.el.nodeName&&(this.elIsInput=!0),this.configs.altField&&(this.$altField="string"==typeof this.configs.altField?p(this.configs.altField):this.configs.altField),this.inited=!1,this.visible=!1,this.silent=!1,this.currentDate=this.configs.startDate,this.currentView=this.configs.view,this._createShortCuts(),this.selectedDates=[],this.views={},this.keys=[],this.minRange="",this.maxRange="",this._prevOnSelectValue="",this.init()}var n,t,a,s,r,c,g,l,h,u,d,m;r={allowTyping:s=!(a="datepicker"),classes:"",inline:!1,language:"vi",startDate:new Date,firstDay:"",weekends:[6,0],dateFormat:"",altField:"",altFieldDateFormat:"@",toggleSelected:!0,keyboardNav:!0,position:"bottom left",offset:12,view:"days",minView:"days",showOtherMonths:!0,selectOtherMonths:!0,moveToOtherMonthsOnSelect:!0,showOtherYears:!0,selectOtherYears:!0,moveToOtherYearsOnSelect:!0,minDate:"",maxDate:"",disableNavWhenOutOfRange:!0,multipleDates:!1,multipleDatesSeparator:" - ",range:!1,todayButton:!1,clearButton:!1,showEvent:"focus",autoClose:!0,monthsField:"monthsShort",prevHtml:'<svg><path d="M 17,12 l -5,5 l 5,5"></path></svg>',nextHtml:'<svg><path d="M 14,12 l 5,5 l -5,5"></path></svg>',navTitles:{days:"MM, <i>yyyy</i>",months:"yyyy",years:"yyyy1 - yyyy2"},timepicker:!1,onlyTimepicker:!1,dateTimeSeparator:" ",timeFormat:"",minHours:0,maxHours:24,minMinutes:0,maxMinutes:59,hoursStep:1,minutesStep:1,onSelect:"",onShow:"",onHide:"",onChangeMonth:"",onChangeYear:"",onChangeDecade:"",onChangeView:"",onRenderCell:""},c={ctrlRight:[17,39],ctrlUp:[17,38],ctrlLeft:[17,37],ctrlDown:[17,40],shiftRight:[16,39],shiftUp:[16,38],shiftLeft:[16,37],shiftDown:[16,40],altUp:[18,38],altRight:[18,39],altLeft:[18,37],altDown:[18,40],ctrlShiftUp:[16,17,38]},(g=i).prototype={VERSION:"2.2.3",viewIndexes:["days","months","years"],init:function(){s||this.configs.inline||!this.elIsInput||this._buildDatepickersContainer(),this._buildBaseHtml(),this._defineLocale(this.configs.language),this._getDateOverRange(),this.elIsInput&&(this.configs.inline||(this._setPositionClasses(this.configs.position),this._bindEvents()),this.configs.keyboardNav&&!this.configs.onlyTimepicker&&this._bindKeyboardEvents(),this.$datepicker.unbind("click").unbind("mousedown").on("mousedown",this._onMouseDownDatepicker.bind(this)),this.configs.innerClearButton&&(this.configs.innerClearButton.unbind("click").unbind("mousedown").on("mousedown",p.proxy(this._onInnerClearIconClick,this)),this.configs.innerClearButton.on("mouseup",this._onMouseUpDatepicker.bind(this))),this.$datepicker.on("mouseup",this._onMouseUpDatepicker.bind(this))),this.configs.classes&&this.$datepicker.addClass(this.configs.classes),this.configs.timepicker&&(this.timepicker=new p.fn.datepicker.Timepicker(this,this.configs),this._bindTimepickerEvents()),this.configs.onlyTimepicker&&this.$datepicker.addClass("-only-timepicker-"),this.views[this.currentView]=new p.fn.datepicker.Body(this,this.currentView,this.configs),this.views[this.currentView].show(),this.nav=new p.fn.datepicker.Navigation(this,this.configs),this.view=this.currentView,this.$el.on("clickCell.adp",this._onClickCell.bind(this)),this.$datepicker.on("mouseenter",".apuidatepicker--cell",this._onMouseEnterCell.bind(this)),this.$datepicker.on("mouseleave",".apuidatepicker--cell",this._onMouseLeaveCell.bind(this)),this.$datepicker.data("--date-picker--",this),this.inited=!0},_onInnerClearIconClick:function(e){this.inFocus=!0;var t=this.selectedDates;this.nav.d.clear(),this.configs.afterClear&&this.configs.afterClear(t,this)},_onInnerClearIconMouseUp:function(e){setTimeout(function(){this.inFocus=!1},50)},_createShortCuts:function(){this.minDate=this.configs.minDate||new Date(-86399999136e5),this.maxDate=this.configs.maxDate||new Date(86399999136e5)},_bindEvents:function(){this.$el.unbind(this.configs.showEvent+".adp").on(this.configs.showEvent+".adp",this._onShowEvent.bind(this)),this.$el.on("keydown.adp",this._onKeyDownEl.bind(this)),this.$el.on("mouseup.adp",this._onMouseUpEl.bind(this)),this.$el.on("blur.adp",this._onBlur.bind(this)),this.$el.on("keyup.adp",this._onKeyUpGeneral.bind(this)),p(e).on("resize.adp",this._onResize.bind(this)),p("body").on("mouseup.adp",this._onMouseUpBody.bind(this))},_bindKeyboardEvents:function(){this.$el.on("keydown.adp",this._onKeyDown.bind(this)),this.$el.on("keyup.adp",this._onKeyUp.bind(this)),this.$el.on("hotKey.adp",this._onHotKey.bind(this))},_bindTimepickerEvents:function(){this.$el.on("timeChange.adp",this._onTimeChange.bind(this))},isWeekend:function(e){return-1!==this.configs.weekends.indexOf(e)},_defineLocale:function(e){"string"==typeof e?(this.loc=p.fn.datepicker.language[e],this.loc||(console.warn("Can't find language \""+e+'" in Datepicker.language, will use "ru" instead'),this.loc=p.extend(!0,{},p.fn.datepicker.language.ru)),this.loc=p.extend(!0,{},p.fn.datepicker.language.ru,p.fn.datepicker.language[e])):this.loc=p.extend(!0,{},p.fn.datepicker.language.ru,e),this.configs.dateFormat&&(this.loc.dateFormat=this.configs.dateFormat),this.configs.timeFormat&&(this.loc.timeFormat=this.configs.timeFormat),""!==this.configs.firstDay&&(this.loc.firstDay=this.configs.firstDay),this.configs.timepicker&&(this.loc.dateFormat=[this.loc.dateFormat,this.loc.timeFormat].join(this.configs.dateTimeSeparator)),this.configs.onlyTimepicker&&(this.loc.dateFormat=this.loc.timeFormat);e=this._getWordBoundaryRegExp;(this.loc.timeFormat.match(e("aa"))||this.loc.timeFormat.match(e("AA")))&&(this.ampm=!0)},_buildDatepickersContainer:function(){s=!0,n.append('<div class="apuidatepicker-container" id="apuidatepicker-container"></div>'),t=p("#apuidatepicker-container")},_buildBaseHtml:function(){var e=p('<div class="apuidatepicker-inline">'),e="INPUT"==this.el.nodeName?this.configs.inline?e.insertAfter(this.$el):t:e.appendTo(this.$el);this.$datepicker=p('<div class="apuidatepicker"><i class="apuidatepicker--pointer-botam"></i><nav class="apuidatepicker--nav"></nav><div class="apuidatepicker--content"></div></div>').appendTo(e),this.$content=p(".apuidatepicker--content",this.$datepicker),this.$nav=p(".apuidatepicker--nav",this.$datepicker)},_triggerOnChange:function(){if(!this.selectedDates.length)return""===this._prevOnSelectValue?void 0:(this._prevOnSelectValue="",this.configs.onSelect("","",this));var e=this.selectedDates,t=g.getParsedDate(e[0]),i=this,t=new Date(t.year,t.month,t.date,t.hours,t.minutes),n=e.map(function(e){return i.formatDate(i.loc.dateFormat,e)}).join(this.configs.multipleDatesSeparator);(this.configs.multipleDates||this.configs.range)&&(t=e.map(function(e){e=g.getParsedDate(e);return new Date(e.year,e.month,e.date,e.hours,e.minutes)})),this._prevOnSelectValue=n,this.configs.onSelect(n,t,this)},next:function(){var e=this.parsedDate,t=this.configs;switch(this.view){case"days":this.date=new Date(e.year,e.month+1,1),t.onChangeMonth&&t.onChangeMonth(this.parsedDate.month,this.parsedDate.year);break;case"months":this.date=new Date(e.year+1,e.month,1),t.onChangeYear&&t.onChangeYear(this.parsedDate.year);break;case"years":this.date=new Date(e.year+10,0,1),t.onChangeDecade&&t.onChangeDecade(this.curDecade)}},prev:function(){var e=this.parsedDate,t=this.configs;switch(this.view){case"days":this.date=new Date(e.year,e.month-1,1),t.onChangeMonth&&t.onChangeMonth(this.parsedDate.month,this.parsedDate.year);break;case"months":this.date=new Date(e.year-1,e.month,1),t.onChangeYear&&t.onChangeYear(this.parsedDate.year);break;case"years":this.date=new Date(e.year-10,0,1),t.onChangeDecade&&t.onChangeDecade(this.curDecade)}},formatDate:function(e,t){t=t||this.date;var i=e,n=this._getWordBoundaryRegExp,o=this.loc,a=g.getLeadingZeroNum,s=g.getDecade(t),r=g.getParsedDate(t),c=r.fullHours,l=r.hours,e=e.match(n("aa"))||e.match(n("AA")),u=p.fn.datepicker.language[this.configs.language].AM,d=this._replacer;switch(this.configs.timepicker&&this.timepicker&&e&&(c=a((a=this.timepicker._getValidHoursFromDate(t,e)).hours),l=a.hours,u=a.dayPeriod),!0){case/@/.test(i):i=i.replace(/@/,t.getTime());case/aa/.test(i):i=d(i,n("aa"),u);case/AA/.test(i):i=d(i,n("AA"),u.toUpperCase());case/dd/.test(i):i=d(i,n("dd"),r.fullDate);case/d/.test(i):i=d(i,n("d"),r.date);case/DD/.test(i):i=d(i,n("DD"),o.days[r.day]);case/D/.test(i):i=d(i,n("D"),o.daysShort[r.day]);case/mm/.test(i):i=d(i,n("mm"),r.fullMonth);case/m/.test(i):i=d(i,n("m"),r.month+1);case/MM/.test(i):i=d(i,n("MM"),this.loc.months[r.month]);case/M/.test(i):i=d(i,n("M"),o.monthsShort[r.month]);case/ii/.test(i):i=d(i,n("ii"),r.fullMinutes);case/i/.test(i):i=d(i,n("i"),r.minutes);case/hh/.test(i):i=d(i,n("hh"),c);case/h/.test(i):i=d(i,n("h"),l);case/yyyy/.test(i):i=d(i,n("yyyy"),r.year);case/yyyy1/.test(i):i=d(i,n("yyyy1"),s[0]);case/yyyy2/.test(i):i=d(i,n("yyyy2"),s[1]);case/yy/.test(i):i=d(i,n("yy"),r.year.toString().slice(-2))}return i},_replacer:function(e,t,o){return e.replace(t,function(e,t,i,n){return t+o+n})},_getWordBoundaryRegExp:function(e){var t="\\s|\\.|-|/|\\\\|,|\\$|\\!|\\?|:|;";return new RegExp("(^|>|"+t+")("+e+")($|<|"+t+")","g")},setValue:function(e,t){t||this.clear(),this.selectDate(e,t)},setDisable:function(){this.disable=!0},setEnable:function(){this.disable=!1},updateMinDate:function(e){e=e||new Date,this.configs.minDate=e,this.minDate=e,this.update()},selectDate:function(e,t){var i=this,n=i.configs,o=i.parsedDate,a=i.selectedDates.length,s="";if(Array.isArray(e))e.forEach(function(e){i.selectDate(e)});else if(e instanceof Date){if(this.lastSelectedDate=e,this.timepicker&&this.timepicker._setTime(e),t||i._trigger("selectDate",e),this.timepicker&&(e.setHours(this.timepicker.hours),e.setMinutes(this.timepicker.minutes)),"days"==i.view&&e.getMonth()!=o.month&&n.moveToOtherMonthsOnSelect&&(s=new Date(e.getFullYear(),e.getMonth(),1)),(s="years"==i.view&&e.getFullYear()!=o.year&&n.moveToOtherYearsOnSelect?new Date(e.getFullYear(),0,1):s)&&(i.silent=!0,i.date=s,i.silent=!1,i.nav._render()),n.multipleDates&&!n.range){if(a===n.multipleDates)return;i._isSelected(e)||i.selectedDates.push(e)}else n.range?2==a?(i.selectedDates=[e],i.minRange=e,i.maxRange=""):1==a?(i.selectedDates.push(e),i.maxRange?i.minRange=e:i.maxRange=e,g.bigger(i.maxRange,i.minRange)&&(i.maxRange=i.minRange,i.minRange=e),i.selectedDates=[i.minRange,i.maxRange]):(i.selectedDates=[e],i.minRange=e):i.selectedDates=[e];i._setRawValue(),n.onSelect&&!t&&i._triggerOnChange(),n.autoClose&&!this.timepickerIsActive&&(!n.multipleDates&&!n.range||n.range&&2==i.selectedDates.length)&&i.hide(),i.views[this.currentView]._render()}},removeDate:function(i){var n=this.selectedDates,o=this;if(i instanceof Date)return n.some(function(e,t){if(g.isSame(e,i))return n.splice(t,1),o.selectedDates.length?o.lastSelectedDate=o.selectedDates[o.selectedDates.length-1]:(o.minRange="",o.maxRange="",o.lastSelectedDate=""),o.views[o.currentView]._render(),o._setRawValue(),o.configs.onSelect&&o._triggerOnChange(),!0})},today:function(){this.silent=!0,this.view=this.configs.minView,this.silent=!1,this.date=new Date,this.configs.todayButton instanceof Date&&this.selectDate(this.configs.todayButton)},clear:function(){this.selectedDates=[],this.minRange="",this.maxRange="",this.views[this.currentView]._render(),this._setRawValue(),this.configs.onSelect&&this._triggerOnChange(),this.configs.afterClear&&this.configs.afterClear(this)},clearInput:function(){this.selectedDates=[],this.minRange="",this.maxRange="",this.views[this.currentView]._render(),this._setRawValue()},update:function(e,t){var i=arguments.length,n=this.lastSelectedDate;return 2==i?this.configs[e]=t:1==i&&"object"==typeof e&&(this.configs=p.extend(!0,this.configs,e)),this._createShortCuts(),this._getDateOverRange(),this._defineLocale(this.configs.language),this.nav._addButtonsIfNeed(),this.configs.onlyTimepicker||this.nav._render(),this.views[this.currentView]._render(),this.elIsInput&&!this.configs.inline&&(this._setPositionClasses(this.configs.position),this.visible)&&this.setPosition(this.configs.position),this.configs.classes&&this.$datepicker.addClass(this.configs.classes),this.configs.onlyTimepicker&&this.$datepicker.addClass("-only-timepicker-"),this.configs.timepicker&&(n&&this.timepicker._handleDate(n),this.timepicker._updateRanges(),this.timepicker._updateCurrentTime(),n)&&(n.setHours(this.timepicker.hours),n.setMinutes(this.timepicker.minutes)),this._setRawValue(),this},_getDateOverRange:function(){var e=this.date.getTime();this.silent=!0,this.minTime>e&&(this.date=this.minDate),this.maxTime<e&&(this.date=this.maxDate),this.silent=!1},_isSelected:function(t,i){var n=!1;return this.selectedDates.some(function(e){if(g.isSame(e,t,i))return n=e,!0}),n},_setRawValue:function(){var t=this,e=t.configs,i=t.loc.dateFormat,n=e.altFieldDateFormat,o=t.selectedDates.map(function(e){return t.formatDate(i,e)});e.altField&&t.$altField.length&&(e=(e=this.selectedDates.map(function(e){return t.formatDate(n,e)})).join(this.configs.multipleDatesSeparator),this.$altField.val(e)),o=o.join(this.configs.multipleDatesSeparator),this.$el.val(o)},_isInRange:function(e,t){var i=e.getTime(),e=g.getParsedDate(e),n=g.getParsedDate(this.minDate),o=g.getParsedDate(this.maxDate),a=new Date(e.year,e.month,n.date).getTime(),s=new Date(e.year,e.month,o.date).getTime(),i={day:i>=this.minTime&&i<=this.maxTime,month:a>=this.minTime&&s<=this.maxTime,year:e.year>=n.year&&e.year<=o.year};return t?i[t]:i.day},_getDimensions:function(e){var t=e.offset();return{width:e.outerWidth(),height:e.outerHeight(),left:t.left,top:t.top}},_getDateFromCell:function(e){var t=this.parsedDate,i=e.data("year")||t.year,t=e.data("month")==o?t.month:e.data("month"),e=e.data("date")||1;return new Date(i,t,e)},down:function(e){this._changeView(e,"down")},up:function(e){this._changeView(e,"up")},_bindVisionEvents:function(e){this.$datepicker.off("transitionend.dp"),e(this,!1),this.$datepicker.one("transitionend.dp",e.bind(this,this,!0))},_changeView:function(e,t){e=e||this.focused||this.date;t="up"==t?this.viewIndex+1:this.viewIndex-1;(t=2<t?2:t)<0&&(t=0),this.silent=!0,this.date=new Date(e.getFullYear(),e.getMonth(),1),this.silent=!1,this.view=this.viewIndexes[t]},_trigger:function(e,t){this.$el.trigger(e,t)},_focusNextCell:function(e,t){t=t||this.cellType;var i=g.getParsedDate(this._getFocusedDate()),n=i.year,o=i.month,a=i.date;if(!this._isHotKeyPressed()){switch(e){case 37:"day"==t&&--a,"month"==t&&--o,"year"==t&&--n;break;case 38:"day"==t&&(a-=7),"month"==t&&(o-=3),"year"==t&&(n-=4);break;case 39:"day"==t&&(a+=1),"month"==t&&(o+=1),"year"==t&&(n+=1);break;case 40:"day"==t&&(a+=7),"month"==t&&(o+=3),"year"==t&&(n+=4)}i=new Date(n,o,a);i.getTime()<this.minTime?i=this.minDate:i.getTime()>this.maxTime&&(i=this.maxDate),this.focused=i}},_getFocusedDate:function(){var e=this.focused||this.selectedDates[this.selectedDates.length-1],t=this.parsedDate;if(!e)switch(this.view){case"days":e=new Date(t.year,t.month,(new Date).getDate());break;case"months":e=new Date(t.year,t.month,1);break;case"years":e=new Date(t.year,0,1)}return e},_getCell:function(e,t){t=t||this.cellType;var i=g.getParsedDate(e),n='.apuidatepicker--cell[data-year="'+i.year+'"]';switch(t){case"month":n='[data-month="'+i.month+'"]';break;case"day":n+='[data-month="'+i.month+'"][data-date="'+i.date+'"]'}return(e=this.views[this.currentView].$el.find(n)).length?e:p("")},handleSelectedDates:function(e,t){this.configs.range?this.configs.toggleSelected?this.removeDate(t):2!=this.selectedDates.length&&this._trigger("clickCell",t):this.configs.toggleSelected&&this.removeDate(t),this.configs.toggleSelected||(this.lastSelectedDate=e,this.configs.timepicker&&(this.timepicker._setTime(e),this.timepicker.update()))},show:function(){this.configs.onShow;this.setPosition(this.configs.position),this.$datepicker.addClass("active"),this.visible=!0,"function"==typeof this.configs&&this.configs.onShow(this)},_onShowEvent:function(e){this.visible||this.disable||(this.visible=!0,this.show())},hide:function(e){this.configs.onHide;this.$datepicker.removeClass("active").css({left:"-100000px"}),this.focused="",this.keys=[],this.inFocus=!1,this.visible=!1,e||this.$el.blur();var t=this;"function"==typeof this.configs.onHide&&(e=this.configs.onHide(this.selectedDates,this))&&(this.selectedDates=e,e=this.selectedDates.map(function(e){return t.formatDate(t.loc.dateFormat,e)}).join(this.configs.multipleDatesSeparator),this._prevOnSelectValue=e,this._setRawValue()),"function"==typeof this.configs.afterSelect&&this.configs.afterSelect(this._prevOnSelectValue,this.selectedDates)},_onBlur:function(){!this.inFocus&&this.visible&&this.hide(!0),"function"==typeof this.configs.onBlur&&this.configs.onBlur()},setPosition:function(e){e=e||this.configs.position;var t,i,n=this._getDimensions(this.$el),o=this._getDimensions(this.$datepicker),e=e.split(" "),a=this.configs.offset,s=e[0],e=e[1];switch(s){case"top":t=n.top-o.height-a;break;case"right":i=n.left+n.width+a;break;case"bottom":t=n.top+n.height+a;break;case"left":i=n.left-o.width-a}switch(e){case"top":t=n.top;break;case"right":i=n.left+n.width-o.width;break;case"bottom":t=n.top+n.height-o.height;break;case"left":i=n.left;break;case"center":/left|right/.test(s)?t=n.top+n.height/2-o.height/2:i=n.left+n.width/2-o.width/2}areaOffset=p("body")[0].getBoundingClientRect(),bodyTop=areaOffset.top,bodyLeft=areaOffset.left,bodyHeight=areaOffset.height,bodyWidth=areaOffset.width,(i=i+o.width>bodyWidth?bodyWidth-o.width:i)<0&&(i=0),t+o.height>bodyHeight&&(t=bodyHeight-o.height),this.$datepicker.css({left:i,top:t=t<0?0:t})},_setPositionClasses:function(e){var t=(e=e.split(" "))[0],e="apuidatepicker -"+t+"-"+e[1]+"- -from-"+t+"-";this.visible&&(e+=" active"),this.$datepicker.removeAttr("class").addClass(e)},_onMouseDownDatepicker:function(e){this.inFocus=!0},_onMouseUpDatepicker:function(e){this.inFocus=!1,e.originalEvent.inFocus=!0,e.originalEvent.timepickerFocus||this.$el.focus()},_onMouseUpBody:function(e){e.originalEvent.inFocus||this.visible&&!this.inFocus&&this.hide()},_onMouseUpEl:function(e){e.originalEvent.inFocus=!0,setTimeout(this._onKeyUpGeneral.bind(this),4)},_onKeyDownEl:function(e){this.configs.allowTyping||(e.stopPropagation(),e.preventDefault())},_onMouseEnterCell:function(e){var e=p(e.target).closest(".apuidatepicker--cell"),t=this._getDateFromCell(e);this.silent=!0,this.focused&&(this.focused=""),e.addClass("-focus-"),this.focused=t,this.silent=!1,this.configs.range&&1==this.selectedDates.length&&(this.minRange=this.selectedDates[0],this.maxRange="",g.less(this.minRange,this.focused)&&(this.maxRange=this.minRange,this.minRange=""),this.views[this.currentView]._update())},_onMouseLeaveCell:function(e){p(e.target).closest(".apuidatepicker--cell").removeClass("-focus-"),this.silent=!0,this.focused="",this.silent=!1},_onClickCell:function(e,t){this.timepicker&&(t.setHours(this.timepicker.hours),t.setMinutes(this.timepicker.minutes)),this.selectDate(t)},_registerKey:function(t){this.keys.some(function(e){return e==t})||this.keys.push(t)},_unRegisterKey:function(e){e=this.keys.indexOf(e);this.keys.splice(e,1)},_onKeyDown:function(e){var t=e.which;if(this._registerKey(t),37<=t&&t<=40&&(e.preventDefault(),this._focusNextCell(t)),13==t&&this.focused){if(this._getCell(this.focused).hasClass("-disabled-"))return;if(this.view!=this.configs.minView)this.down();else{e=this._isSelected(this.focused,this.cellType);if(!e)return this.timepicker&&(this.focused.setHours(this.timepicker.hours),this.focused.setMinutes(this.timepicker.minutes)),void this.selectDate(this.focused);this.handleSelectedDates(e,this.focused)}}27==t&&this.hide()},_onKeyUp:function(e){e=e.which;this._unRegisterKey(e)},_onKeyUpGeneral:function(e){this.$el.val()||this.clearInput()},_handleHotKey:function(e){var t,i=g.getParsedDate(this._getFocusedDate()),n=this.configs,o=!1,a=!1,s=!1,r=i.year,c=i.month,i=i.date;switch(e){case"ctrlRight":case"ctrlUp":c+=1,o=!0;break;case"ctrlLeft":case"ctrlDown":--c,o=!0;break;case"shiftRight":case"shiftUp":a=!0,r+=1;break;case"shiftLeft":case"shiftDown":a=!0,--r;break;case"altRight":case"altUp":s=!0,r+=10;break;case"altLeft":case"altDown":s=!0,r-=10;break;case"ctrlShiftUp":this.up()}e=g.getDaysCount(new Date(r,c)),t=new Date(r,c,i),t.getTime()<this.minTime?t=this.minDate:t.getTime()>this.maxTime&&(t=this.maxDate),this.focused=t,e=g.getParsedDate(t),o&&n.onChangeMonth&&n.onChangeMonth(e.month,e.year),a&&n.onChangeYear&&n.onChangeYear(e.year),s&&n.onChangeDecade&&n.onChangeDecade(this.curDecade)},_isHotKeyPressed:function(){var e,t,i=!1,n=this.keys.sort();for(t in c)n.length==(e=c[t]).length&&e.every(function(e,t){return e==n[t]})&&(this._trigger("hotKey",t),i=!0);return i},_onHotKey:function(e,t){this._handleHotKey(t)},_onTimeChange:function(e,t,i){var n=new Date,o=!1;this.selectedDates.length&&(o=!0,n=this.lastSelectedDate),n.setHours(t),n.setMinutes(i),o||this._getCell(n).hasClass("-disabled-")?(this._setRawValue(),this.configs.onSelect&&this._triggerOnChange()):this.selectDate(n)},_onResize:function(){this.visible&&this.setPosition()},destroy:function(){var e=this;e.$el.off(".adp").data("datepicker",""),e.selectedDates=[],e.focused="",e.views={},e.keys=[],e.minRange="",e.maxRange="",(e.configs.inline||!e.elIsInput?e.$datepicker.closest(".apuidatepicker-inline"):e.$datepicker).remove()},set focused(e){var t;!e&&this.focused&&(t=this._getCell(this.focused)).length&&t.removeClass("-focus-"),this._focused=e,this.configs.range&&1==this.selectedDates.length&&(this.minRange=this.selectedDates[0],this.maxRange="",g.less(this.minRange,this._focused))&&(this.maxRange=this.minRange,this.minRange=""),this.silent||(this.date=e)},get focused(){return this._focused},get parsedDate(){return g.getParsedDate(this.date)},set date(e){if(e instanceof Date)return this.currentDate=e,this.inited&&!this.silent&&(this.views[this.view]._render(),this.nav._render(),this.visible)&&this.elIsInput&&this.setPosition(),e},get date(){return this.currentDate},set view(e){if(this.viewIndex=this.viewIndexes.indexOf(e),!(this.viewIndex<0))return this.prevView=this.currentView,this.currentView=e,this.inited&&(this.views[e]?this.views[e]._render():this.views[e]=new p.fn.datepicker.Body(this,e,this.configs),this.views[this.prevView].hide(),this.views[e].show(),this.nav._render(),this.configs.onChangeView&&this.configs.onChangeView(e),this.elIsInput)&&this.visible&&this.setPosition(),e},get view(){return this.currentView},get cellType(){return this.view.substring(0,this.view.length-1)},get minTime(){var e=g.getParsedDate(this.minDate);return new Date(e.year,e.month,e.date).getTime()},get maxTime(){var e=g.getParsedDate(this.maxDate);return new Date(e.year,e.month,e.date).getTime()},get curDecade(){return g.getDecade(this.date)}},g.getDaysCount=function(e){return new Date(e.getFullYear(),e.getMonth()+1,0).getDate()},g.getParsedDate=function(e){return{year:e.getFullYear(),month:e.getMonth(),fullMonth:e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1,date:e.getDate(),fullDate:e.getDate()<10?"0"+e.getDate():e.getDate(),day:e.getDay(),hours:e.getHours(),fullHours:e.getHours()<10?"0"+e.getHours():e.getHours(),minutes:e.getMinutes(),fullMinutes:e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes()}},g.getDecade=function(e){e=10*Math.floor(e.getFullYear()/10);return[e,9+e]},g.template=function(e,i){return e.replace(/#\{([\w]+)\}/g,function(e,t){if(i[t]||0===i[t])return i[t]})},g.isSame=function(e,t,i){return!(!e||!t)&&(e=g.getParsedDate(e),t=g.getParsedDate(t),{day:e.date==t.date&&e.month==t.month&&e.year==t.year,month:e.month==t.month&&e.year==t.year,year:e.year==t.year}[i||"day"])},g.less=function(e,t,i){return!(!e||!t)&&t.getTime()<e.getTime()},g.bigger=function(e,t,i){return!(!e||!t)&&t.getTime()>e.getTime()},g.getLeadingZeroNum=function(e){return parseInt(e)<10?"0"+e:e},g.resetTime=function(e){if("object"==typeof e)return e=g.getParsedDate(e),new Date(e.year,e.month,e.date)},p.fn.datepicker=function(t){return this.each(function(){var e;p.data(this,a)?((e=p.data(this,a)).configs=p.extend(!0,e.configs,t),e.update()):p.data(this,a,new i(this,t))})},p.fn.datepicker.Constructor=i,p.fn.datepicker.language={ru:{days:["Воскресенье","Понедельник","Вторник","Среда","Четверг","Пятница","Суббота"],daysShort:["Вос","Пон","Вто","Сре","Чет","Пят","Суб"],daysMin:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],months:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],monthsShort:["Янв","Фев","Мар","Апр","Май","Июн","Июл","Авг","Сен","Окт","Ноя","Дек"],today:"Сегодня",clear:"Очистить",dateFormat:"dd.mm.yyyy",timeFormat:"hh:ii",firstDay:1}},p(function(){p(".apuidatepicker-here").datepicker()}),l={days:'<div class="apuidatepicker--days apuidatepicker--body"><div class="apuidatepicker--days-names"></div><div class="apuidatepicker--cells apuidatepicker--cells-days"></div></div>',months:'<div class="apuidatepicker--months apuidatepicker--body"><div class="apuidatepicker--cells apuidatepicker--cells-months"></div></div>',years:'<div class="apuidatepicker--years apuidatepicker--body"><div class="apuidatepicker--cells apuidatepicker--cells-years"></div></div>'},d=p.fn.datepicker,h=d.Constructor,d.Body=function(e,t,i){this.d=e,this.type=t,this.configs=i,this.$el=p(""),this.configs.onlyTimepicker||this.init()},d.Body.prototype={init:function(){this._buildBaseHtml(),this._render(),this._bindEvents()},_bindEvents:function(){this.$el.on("click",".apuidatepicker--cell",p.proxy(this._onClickCell,this))},_buildBaseHtml:function(){this.$el=p(l[this.type]).appendTo(this.d.$content),this.$names=p(".apuidatepicker--days-names",this.$el),this.$cells=p(".apuidatepicker--cells",this.$el)},_getDayNamesHtml:function(e,t,i,n){return i=i||"",7<(n=n!=o?n:0)?i:7==(t=t!=o?t:e)?this._getDayNamesHtml(e,0,i,++n):(i+='<div class="apuidatepicker--day-name'+(this.d.isWeekend(t)?" -weekend-":"")+'">'+this.d.loc.daysMin[t]+"</div>",this._getDayNamesHtml(e,++t,i,++n))},_getCellContents:function(e,t){var i="apuidatepicker--cell apuidatepicker--cell-"+t,n=new Date,o=this.d,a=h.resetTime(o.minRange),s=h.resetTime(o.maxRange),r=o.configs,c=h.getParsedDate(e),l={},u=c.date;switch(t){case"day":o.isWeekend(c.day)&&(i+=" -weekend-"),c.month!=this.d.parsedDate.month&&(i+=" -other-month-",r.selectOtherMonths||(i+=" -disabled-"),r.showOtherMonths||(u=""));break;case"month":u=o.loc[o.configs.monthsField][c.month];break;case"year":var d=o.curDecade,u=c.year;(c.year<d[0]||c.year>d[1])&&(i+=" -other-decade-",r.selectOtherYears||(i+=" -disabled-"),r.showOtherYears||(u=""))}return r.onRenderCell&&(u=(l=r.onRenderCell(e,t)||{}).html||u,i+=l.classes?" "+l.classes:""),r.range&&(h.isSame(a,e,t)&&(i+=" -range-from-"),h.isSame(s,e,t)&&(i+=" -range-to-"),1==o.selectedDates.length&&o.focused?((h.bigger(a,e)&&h.less(o.focused,e)||h.less(s,e)&&h.bigger(o.focused,e))&&(i+=" -in-range-"),h.less(s,e)&&h.isSame(o.focused,e)&&(i+=" -range-from-"),h.bigger(a,e)&&h.isSame(o.focused,e)&&(i+=" -range-to-")):2==o.selectedDates.length&&h.bigger(a,e)&&h.less(s,e)&&(i+=" -in-range-")),h.isSame(n,e,t)&&(i+=" -current-"),o.focused&&h.isSame(e,o.focused,t)&&(i+=" -focus-"),o._isSelected(e,t)&&(i+=" -selected-"),o._isInRange(e,t)&&!l.disabled||(i+=" -disabled-"),{html:u,classes:i}},_getDaysHtml:function(e){for(var t,i,n=h.getDaysCount(e),o=new Date(e.getFullYear(),e.getMonth(),1).getDay(),a=new Date(e.getFullYear(),e.getMonth(),n).getDay(),o=o-this.d.loc.firstDay,a=6-a+this.d.loc.firstDay,s="",r=1-(o<0?7+o:o),c=n+(6<a?a-7:a);r<=c;r++)i=e.getFullYear(),t=e.getMonth(),s+=this._getDayHtml(new Date(i,t,r));return s},_getDayHtml:function(e){var t=this._getCellContents(e,"day");return'<div class="'+t.classes+'" data-date="'+e.getDate()+'" data-month="'+e.getMonth()+'" data-year="'+e.getFullYear()+'">'+t.html+"</div>"},_getMonthsHtml:function(e){for(var t="",i=h.getParsedDate(e),n=0;n<12;)t+=this._getMonthHtml(new Date(i.year,n)),n++;return t},_getMonthHtml:function(e){var t=this._getCellContents(e,"month");return'<div class="'+t.classes+'" data-month="'+e.getMonth()+'">'+t.html+"</div>"},_getYearsHtml:function(e){h.getParsedDate(e);for(var t=h.getDecade(e),i="",n=t[0]-1;n<=t[1]+1;n++)i+=this._getYearHtml(new Date(n,0));return i},_getYearHtml:function(e){var t=this._getCellContents(e,"year");return'<div class="'+t.classes+'" data-year="'+e.getFullYear()+'">'+t.html+"</div>"},_renderTypes:{days:function(){var e=this._getDayNamesHtml(this.d.loc.firstDay),t=this._getDaysHtml(this.d.currentDate);this.$cells.html(t),this.$names.html(e)},months:function(){var e=this._getMonthsHtml(this.d.currentDate);this.$cells.html(e)},years:function(){var e=this._getYearsHtml(this.d.currentDate);this.$cells.html(e)}},_render:function(){this.configs.onlyTimepicker||this._renderTypes[this.type].bind(this)()},_update:function(){var i,n,e=p(".apuidatepicker--cell",this.$cells),o=this;e.each(function(e,t){i=p(this),n=o.d._getDateFromCell(p(this)),n=o._getCellContents(n,o.d.cellType),i.attr("class",n.classes)})},show:function(){this.configs.onlyTimepicker||(this.$el.data("date-picker--",this),this.$el.addClass("active"),this.acitve=!0)},hide:function(){this.$el.removeClass("active"),this.active=!1},_handleClick:function(e){var t=e.data("date")||1,i=e.data("month")||0,e=e.data("year")||this.d.parsedDate.year,n=this.d;n.view!=this.configs.minView?n.down(new Date(e,i,t)):(e=new Date(e,i,t),(i=this.d._isSelected(e,this.d.cellType))?n.handleSelectedDates.bind(n,i,e)():n._trigger("clickCell",e))},_onClickCell:function(e){e=p(e.target).closest(".apuidatepicker--cell");e.hasClass("-disabled-")||this._handleClick.bind(this)(e)}},d=p.fn.datepicker,u=d.Constructor,d.Navigation=function(e,t){this.d=e,this.configs=t,this.$buttonsContainer="",this.init()},d.Navigation.prototype={init:function(){this._buildBaseHtml(),this._bindEvents()},_bindEvents:function(){this.d.$nav.on("click",".apuidatepicker--nav-action",p.proxy(this._onClickNavButton,this)),this.d.$nav.on("click",".apuidatepicker--nav-title",p.proxy(this._onClickNavTitle,this)),this.d.$datepicker.on("click",".apuidatepicker--button",p.proxy(this._onClickNavButton,this))},_buildBaseHtml:function(){this.configs.onlyTimepicker||this._render(),this._addButtonsIfNeed()},_addButtonsIfNeed:function(){this.configs.todayButton&&this._addButton("today"),this.configs.clearButton&&this._addButton("clear")},_render:function(){var e=this._getTitle(this.d.currentDate),e=u.template('<div class="apuidatepicker--nav-action" data-action="prev">#{prevHtml}</div><div class="apuidatepicker--nav-title">#{title}</div><div class="apuidatepicker--nav-action" data-action="next">#{nextHtml}</div>',p.extend({title:e},this.configs));this.d.$nav.html(e),"years"==this.d.view&&p(".apuidatepicker--nav-title",this.d.$nav).addClass("-disabled-"),this.setNavStatus()},_getTitle:function(e){return this.d.formatDate(this.configs.navTitles[this.d.view],e)},_addButton:function(e){this.$buttonsContainer.length||this._addButtonsContainer();var t={action:e,label:this.d.loc[e]},t=u.template('<span class="apuidatepicker--button" data-action="#{action}">#{label}</span>',t);p("[data-action="+e+"]",this.$buttonsContainer).length||this.$buttonsContainer.append(t)},_addButtonsContainer:function(){this.d.$datepicker.append('<div class="apuidatepicker--buttons"></div>'),this.$buttonsContainer=p(".apuidatepicker--buttons",this.d.$datepicker)},setNavStatus:function(){if((this.configs.minDate||this.configs.maxDate)&&this.configs.disableNavWhenOutOfRange){var e=this.d.parsedDate,t=e.month,i=e.year,n=e.date;switch(this.d.view){case"days":this.d._isInRange(new Date(i,t-1,1),"month")||this._disableNav("prev"),this.d._isInRange(new Date(i,t+1,1),"month")||this._disableNav("next");break;case"months":this.d._isInRange(new Date(i-1,t,n),"year")||this._disableNav("prev"),this.d._isInRange(new Date(i+1,t,n),"year")||this._disableNav("next");break;case"years":var o=u.getDecade(this.d.date);this.d._isInRange(new Date(o[0]-1,0,1),"year")||this._disableNav("prev"),this.d._isInRange(new Date(o[1]+1,0,1),"year")||this._disableNav("next")}}},_disableNav:function(e){p('[data-action="'+e+'"]',this.d.$nav).addClass("-disabled-")},_activateNav:function(e){p('[data-action="'+e+'"]',this.d.$nav).removeClass("-disabled-")},_onClickNavButton:function(e){e=p(e.target).closest("[data-action]").data("action");this.d[e]()},_onClickNavTitle:function(e){if(!p(e.target).hasClass("-disabled-"))return"days"==this.d.view?this.d.view="months":void(this.d.view="years")}},d=p.fn.datepicker,m=d.Constructor,d.Timepicker=function(e,t){this.d=e,this.configs=t,this.init()},d.Timepicker.prototype={init:function(){var e="input";this._setTime(this.d.date),this._buildHTML(),navigator.userAgent.match(/trident/gi)&&(e="change"),this.d.$el.on("selectDate",this._onSelectDate.bind(this)),this.$ranges.on(e,this._onChangeRange.bind(this)),this.$ranges.on("mouseup",this._onMouseUpRange.bind(this)),this.$ranges.on("mousemove focus ",this._onMouseEnterRange.bind(this)),this.$ranges.on("mouseout blur",this._onMouseOutRange.bind(this))},_setTime:function(e){var t=m.getParsedDate(e);this._handleDate(e),this.hours=t.hours<this.minHours?this.minHours:t.hours,this.minutes=t.minutes<this.minMinutes?this.minMinutes:t.minutes},_setMinTimeFromDate:function(e){this.minHours=e.getHours(),this.minMinutes=e.getMinutes(),this.d.lastSelectedDate&&this.d.lastSelectedDate.getHours()>e.getHours()&&(this.minMinutes=this.configs.minMinutes)},_setMaxTimeFromDate:function(e){this.maxHours=e.getHours(),this.maxMinutes=e.getMinutes(),this.d.lastSelectedDate&&this.d.lastSelectedDate.getHours()<e.getHours()&&(this.maxMinutes=this.configs.maxMinutes)},_setDefaultMinMaxTime:function(){var e=this.configs;this.minHours=e.minHours<0||23<e.minHours?0:e.minHours,this.minMinutes=e.minMinutes<0||59<e.minMinutes?0:e.minMinutes,this.maxHours=e.maxHours<0||23<e.maxHours?23:e.maxHours,this.maxMinutes=e.maxMinutes<0||59<e.maxMinutes?59:e.maxMinutes},_validateHoursMinutes:function(e){this.hours<this.minHours?this.hours=this.minHours:this.hours>this.maxHours&&(this.hours=this.maxHours),this.minutes<this.minMinutes?this.minutes=this.minMinutes:this.minutes>this.maxMinutes&&(this.minutes=this.maxMinutes)},_buildHTML:function(){var e=m.getLeadingZeroNum,e={hourMin:this.minHours,hourMax:e(this.maxHours),hourStep:this.configs.hoursStep,hourValue:this.hours,hourVisible:e(this.displayHours),minMin:this.minMinutes,minMax:e(this.maxMinutes),minStep:this.configs.minutesStep,minValue:e(this.minutes)},e=m.template('<div class="apuidatepicker--time"><div class="apuidatepicker--time-current">   <span class="apuidatepicker--time-current-hours">#{hourVisible}</span>   <span class="apuidatepicker--time-current-colon">:</span>   <span class="apuidatepicker--time-current-minutes">#{minValue}</span></div><div class="apuidatepicker--time-sliders">   <div class="apuidatepicker--time-row">      <input type="range" name="hours" value="#{hourValue}" min="#{hourMin}" max="#{hourMax}" step="#{hourStep}"/>   </div>   <div class="apuidatepicker--time-row">      <input type="range" name="minutes" value="#{minValue}" min="#{minMin}" max="#{minMax}" step="#{minStep}"/>   </div></div></div>',e);this.$timepicker=p(e).appendTo(this.d.$datepicker),this.$ranges=p('[type="range"]',this.$timepicker),this.$hours=p('[name="hours"]',this.$timepicker),this.$minutes=p('[name="minutes"]',this.$timepicker),this.$hoursText=p(".apuidatepicker--time-current-hours",this.$timepicker),this.$minutesText=p(".apuidatepicker--time-current-minutes",this.$timepicker),this.d.ampm&&(this.$ampm=p('<span class="apuidatepicker--time-current-ampm">').appendTo(p(".apuidatepicker--time-current",this.$timepicker)).html(this.dayPeriod),this.$timepicker.addClass("-am-pm-"))},_updateCurrentTime:function(){var e=m.getLeadingZeroNum(this.displayHours),t=m.getLeadingZeroNum(this.minutes);this.$hoursText.html(e),this.$minutesText.html(t),this.d.ampm&&this.$ampm.html(this.dayPeriod)},_updateRanges:function(){this.$hours.attr({min:this.minHours,max:this.maxHours}).val(this.hours),this.$minutes.attr({min:this.minMinutes,max:this.maxMinutes}).val(this.minutes)},_handleDate:function(e){this._setDefaultMinMaxTime(),e&&(m.isSame(e,this.d.configs.minDate)?this._setMinTimeFromDate(this.d.configs.minDate):m.isSame(e,this.d.configs.maxDate)&&this._setMaxTimeFromDate(this.d.configs.maxDate)),this._validateHoursMinutes(e)},update:function(){this._updateRanges(),this._updateCurrentTime()},_getValidHoursFromDate:function(e,t){var i=e,e=(e instanceof Date&&(i=m.getParsedDate(e).hours),t||this.d.ampm),n=p.fn.datepicker.language[this.configs.language].AM;if(e)switch(!0){case 0==i:i=12;break;case 12==i:n=p.fn.datepicker.language[this.configs.language].PM;break;case 11<i:i-=12,n=p.fn.datepicker.language[this.configs.language].PM}return{hours:i,dayPeriod:n}},set hours(e){this._hours=e;e=this._getValidHoursFromDate(e);this.displayHours=e.hours,this.dayPeriod=e.dayPeriod},get hours(){return this._hours},_onChangeRange:function(e){var e=p(e.target),t=e.attr("name");this.d.timepickerIsActive=!0,this[t]=e.val(),this._updateCurrentTime(),this.d._trigger("timeChange",[this.hours,this.minutes]),this._handleDate(this.d.lastSelectedDate),this.update()},_onSelectDate:function(e,t){this._handleDate(t),this.update()},_onMouseEnterRange:function(e){e=p(e.target).attr("name");p(".apuidatepicker--time-current-"+e,this.$timepicker).addClass("-focus-")},_onMouseOutRange:function(e){e=p(e.target).attr("name");this.d.inFocus||p(".apuidatepicker--time-current-"+e,this.$timepicker).removeClass("-focus-")},_onMouseUpRange:function(e){this.d.timepickerIsActive=!1}}}(window,jQuery),function(e){e.fn.datepicker.language.vi={days:["Chủ nhật","Thứ 2","Thứ 3","Thứ 4","Thứ 5","Thứ 6","Thứ 7"],daysShort:["CN","T2","T3","T4","T5","T6","T7"],daysMin:["CN","T2","T3","T4","T5","T6","T7"],months:["Tháng 1","Tháng 2","Tháng 3","Tháng 4","Tháng 5","Tháng 6","Tháng 7","Tháng 8","Tháng 9","Tháng 10","Tháng 11","Tháng 12"],monthsShort:["Thg 1","Thg 2","Thg 3","Thg 4","Thg 5","Thg 6","Thg 7","Thg 8","Thg 9","Thg 10","Thg 11","Thg 12"],today:"Hôm nay",clear:"Xóa",dateFormat:"dd/mm/yyyy",timeFormat:"hh:ii aa",firstDay:1,AM:"SA",PM:"CH"},e.fn.datepicker.language.en={days:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),daysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),daysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),today:"Today",clear:"Clear",dateFormat:"yyyy/mm/dd",timeFormat:"hh:ii aa",firstDay:1,AM:"AM",PM:"PM"}}(jQuery),APCore.Widgets.define("APDateField",function(){var l=this;this.selectedDate={},this.format="d/m/Y",this.default={clearButton:!0,timepicker:!1,onSelect:null,afterClear:null,allowTyping:!0},this.initDom=function(){l.createDom(),l.initAction()},this.createDom=function(){l.jObject=$(["<div class='apui-datefield-container'>","<input type='text' class='apui-datefield-input apui-input'/>","<i class='apui-datefield-trigger'></i>","</div>"].join("")),l.input=l.jObject.find("input").first();var e={};(e=$.extend(e,l.opts)).range=!1,e.onSelect=function(e,t,i){t=l._cloneDate(t);l.selectedDate.Date=t,l.selectedDate.FormattedDate=e,"function"==typeof l.opts.onSelect&&l.opts.onSelect(t,e)},e.onBlur=function(){var e;l.opts.allowTyping&&(e=l.input.val().trim())&&e!=l.selectedDate.FormattedDate&&(e=l.parseDate(),l.setValue(e))},l.input.datepicker(e),l.picker=l.input[0].picker},this._cloneDate=function(e){return e?e.clone():null},this.initAction=function(){l.jObject.on("click",".apui-datefield-trigger",function(e){l.input.focus()}),l.opts.allowTyping&&l._keyPress(l.input,function(e,t,i){13==e&&l.input.blur()})},this.getRawValue=function(){return l.input.val().trim()},this.getValue=function(){return l.selectedDate.Date},this.setValue=function(e,t){l.picker.setValue(l._cloneDate(e),t),l.selectedDate.Date=e,l.selectedDate.FormattedDate=l.getRawValue()},this.parseDate=function(e,t){e=e||l.getRawValue(),t=t||(l.opts.timepicker?"dd/mm/yyyy hh:ii:ss":"dd/mm/yyyy");var e=(e=e.replace(/\s\s+/g," ")).replace(/[^a-zA-Z0-9]/g,"-"),t=t.toLowerCase().replace(/[^a-zA-Z0-9]/g,"-").split("-"),e=e.split("-"),i=t.indexOf("mm"),n=t.indexOf("dd"),o=t.indexOf("yyyy"),a=t.indexOf("hh"),s=t.indexOf("ii"),t=t.indexOf("ss"),r=new Date,o=-1<o?e[o]:r.getFullYear(),i=-1<i?e[i]-1:r.getMonth()-1,n=-1<n?e[n]:r.getDate(),a=-1<a?e[a]:r.getHours(),s=-1<s?e[s]:r.getMinutes(),e=-1<t?e[t]:r.getSeconds();let c=new Date(o,i,n,a,s,e);return c="Invalid Date"==c?null:c},this.keys=[],this._keyPress=function(e,a){e.keypress(function(e){t=a;var t,i,n,o=i=(e=e).which;l.keys.some(function(e){return e==o})||l.keys.push(o),n=$(e.target),"function"==typeof t&&t(i,n,e)})},this._onKeyUp=function(e){var t,e=e.which;t=e,t=l.keys.indexOf(e),l.keys.splice(t,1)}}),APCore.Widgets.define("APDialog",function(){var a=this;this.default={renderTo:$("body")},this.initDom=function(){a.renderTo=a.opts.renderTo,a.createDom(),a.initAction()},this.createDom=function(){a.jObject=$('<div  style="display:none" tabindex="0"></div>'),a.jObject.addClass("apui-dialog-mask"),a.popup=$('<div class="apui-dialog-body apui-drag-moving animated fadeIn" style="min-width:200px;"></div>'),a.header=$('<div class="apui-dialog-header"> <div class="apui-dialog-title apui-ellipsis"></div><i class="apui-icon apui-icon-16 apui-icon-close"></i></div>'),a.popup.append(a.header),a.content=$('<div class="apui-dialog-content" style="margin-top:16px"></div>'),a.popup.append(a.content),a.footer=$('<div class="apui-dialog-footer"></div>'),a.popup.append(a.footer),a.jObject.append(a.popup),a.renderTo.append(a.jObject)},this.renderButton=function(e){if(a.footer.html(""),a.footer.append('<div class="apui-flex-1 apui-drag-moving">'),e&&0<e.length){function t(e){var t=$(e.target),i=t.data("config");_stopEvent(e),i&&"function"==typeof i.clickFn&&i.clickFn(t)}for(var i=0;i<e.length;i++){var n=e[i],o=$('<div class="apui-dialog-btn"></div>').text(n.Text).addClass(n.cls.split(",").join(" ")).attr("name",n.name);o.data("config",n),o.on("click",t.bind(a)),a.footer.append(o)}}},this.showInfo=function(t){a.renderButton([{Text:t.closeText||"Close",cls:"apui-dialog-btn-primary",clickFn:function(e){a.hide(),"function"==typeof t.buttonClick&&t.buttonClick(e)}}]),a.setTitle(t.title),a.content.html(t.content),a.show(t)},this.confirm=function(t){a.renderButton([{Text:t.cancelText||"Cancel",cls:"apui-dialog-btn-cancel "+t.cancelClass,clickFn:function(e){a.hide(),"function"==typeof t.cancelClick&&t.cancelClick(e)}},{Text:t.okText||"OK",cls:"apui-dialog-btn-ok "+t.okClass,clickFn:function(e){"function"==typeof t.okClick&&t.okClick(e),a.hide()}}]),a.setTitle(t.title),a.content.html(t.content),a.show(t)},this.confirmDelete=function(t){a.renderButton([{Text:t.cancelText||"Cancel",cls:"apui-dialog-btn-cancel "+t.cancelClass,clickFn:function(e){a.hide(),"function"==typeof t.cancelClick&&t.cancelClick(e)}},{Text:t.deleteText||"Delete",cls:"apui-dialog-btn-delete "+t.deleteClass,clickFn:function(e){"function"==typeof t.deleteClick&&t.deleteClick(e),a.hide()}}]),a.setTitle(t.title),a.content.html(t.content),a.show(t)},this.comfirm=this.confirm,this.comfirmDelete=this.confirmDelete,this.initAction=function(){a.jObject.find(".apui-icon-close").first().unbind("click").on("click",function(e){_stopEvent(e),"function"==typeof a.opts.onClose&&a.opts.onClose(),"function"==typeof a.config.onClose&&a.config.onClose(),a.hide()}),a.popup.enableDrag(a.popup[0],a.onMoving)},this.onMoving=function(){APCore.Widgets.hideAllPopups(a.popup)},this.show=function(e){var t;(a.config=e).width&&"number"==typeof e.width?(t=parseInt(e.width)+"px",a.popup.css("width",t)):a.popup.css("width","400px"),e.height&&"number"==typeof e.height?a.popup.css("height",e.height+"px"):e.height&&"string"==typeof e.height&&a.popup.css("height","180px"),a.jObject.show();let i=0,n=0;a.popup.css("position","absolute"),i=e.position&&e.position.top?e.position.top:120<(i=window.innerHeight/2-a.popup.height()/2)?120:i,n=e.position&&e.position.left?e.position.left:window.innerWidth/2-a.popup.width()/2,a.popup.css({top:i+"px",left:n+"px"}),a.jObject.focus(),a.jObject.keydown(function(e){27==e.which&&(_stopEvent(e),a.hide())})},this.hide=function(){a.isShow=!1,a.jObject.slideUp(0,function(){"function"==typeof a.callOnHide&&a.callOnHide(),a.afterHide()})},this.afterHide=function(){"function"==typeof a.opts.onClose&&a.opts.onClose(),APCore.Widgets.hideAllPopups()},this.setTitle=function(e){a.header.find(".apui-dialog-title").first().html(e),a.header.find(".apui-dialog-title").first().html(e)}}),APCore.Widgets.define("DragContainer",function(){var s=this;this.element=null,this.wrap=null,this.content=null,this.container=null,this.renderPosition="last",this.parentContainer=[],this.drakeChild="",this.drakeParent="",this.notDraggable="not-draggable",this.fn={dragChild:function(e,t){},dragendChild:function(e,t){},dropChild:function(e,t,i,n){},dragParent:function(e,t){},dragendParent:function(e){},dropParent:function(e,t,i,n){},childClick:function(e){}},this.queryClass={wrap:"",content:"",container:""},this.parentConfig={handleClass:"",revertOnSpill:!0,direction:"",allowDrag:!0,movingClass:"is-moving",disableClass:"",class:""},this.childConfig={handleClass:"",revertOnSpill:!0,direction:"",allowDrag:!0,movingClass:"is-moving",class:""},this.constructor=function(e){"string"==typeof e?s.element=document.querySelector(e):"object"==typeof e&&(s.element=e),s.render(),s.initDrag()},this.clean=function(){$(s.element).find("."+s.queryClass.wrap).remove(),s.wrap=document.createElement("div"),s.wrap.classList.add(s.queryClass.wrap),"first"===s.renderPosition?s.element.insertBefore(s.wrap,s.element.firstChild):s.element.appendChild(s.wrap),s.content=document.createElement("div"),s.content.classList.add(s.queryClass.content),s.wrap.appendChild(s.content),s.container=document.createElement("div"),s.container.classList.add(s.queryClass.container),s.content.appendChild(s.container)},this.render=function(){s.clean()},this.initDrag=function(){s.drakeParent=dragula([s.container],{moves:function(e,t,i,n){var o,a;return!!s.parentConfig.allowDrag&&(o=s.parentConfig.handleClass.split(","),a=!1,o.forEach(function(e){($(i).parents("."+e).first()||i.classList.contains(e.trim()))&&(a=!0)}),a)},accepts:function(e,t,i,n){return t.classList.contains(s.queryClass.container)},revertOnSpill:s.parentConfig.revertOnSpill,direction:s.parentConfig.direction}).on("drag",function(e,t){e.classList.add(s.parentConfig.movingClass),s.fn.dragParent(e,t),"function"==typeof e.dragfn&&e.dragfn(e,t)}).on("dragend",function(e){e.classList.remove(s.parentConfig.movingClass),s.fn.dragendParent(e),s.__updateParentOrder(),"function"==typeof e.dragendfn&&e.dragendfn(e)}).on("drop",function(e,t,i,n){e.classList.remove(s.parentConfig.movingClass),s.fn.dropParent(e,t,i,n),"function"==typeof e.dropfn&&e.dropfn(e,t,i,n)}),s.drakeChild=dragula(s.parentContainer,{moves:function(e,t,i,n){var o=!1;return!!s.childConfig.allowDrag&&(s.childConfig.handleClass?(s.childConfig.handleClass.split(",").forEach(function(e){(0<$(i).parents("."+e).first().length||i.classList.contains(e.trim()))&&(o=!0)}),o):!!s.childConfig.allowDrag)},revertOnSpill:s.childConfig.revertOnSpill,direction:s.childConfig.direction||null}).on("cancel",function(e,t,i){s._enableAllParent()}).on("drag",function(e,t){var i=e.getAttribute("class");""!==i&&-1<i.indexOf(s.notDraggable)?s.drakeChild.cancel(!0):(e.classList.add(s.childConfig.movingClass),s.fn.dragChild(e,t),null!==e&&"function"==typeof e.dragfn&&e.dragfn(e,t))}).on("dragend",function(e,t){s.fn.dragendChild(e,t),null!==e&&"function"==typeof e.dragendfn&&e.dragendfn(e,t)}).on("drop",function(e,t,i,n){s._enableAllParent(),null!==e&&(s.fn.dropChild(e,t,i,n),e.classList.remove(s.childConfig.movingClass),"function"==typeof e.dropfn)&&e.dropfn(e,t,i,n)})},this._enableAllParent=function(){var e=document.querySelectorAll("."+s.parentConfig.class);if(0<e.length&&void 0!==e)for(var t=0;t<e.length;t++)e[t].classList.remove(s.parentConfig.disableClass)},this.__updateParentOrder=function(){for(var e=0;e<s.container.childNodes.length;e++)s.container.childNodes[e].dataset.order=e}}),function(u){"use strict";u.fn.APDropDownMenu=function(e){var l=this;function o(e){_stopEvent(e);e=u(e.target);e.hasClass("apui-result-item")||(e=e.parents(".apui-result-item").first()),l.setValue(e.data("data")[l.options.valueField]),e.addClass("selected"),l.selectedRecord=e.data("data"),"function"==typeof l.options.onItemClick&&l.options.onItemClick(e,l.selectedRecord,l),l.hideMenu()}return this.menuItem={},this.default={data:[],getItem:null,fullWidth:!1,onItemClick:null,position:"right",valueField:"Value",displayField:"Display",displayTmpl:"<div class='selected-value'>{0}</div>",type:"combobox",triggerIcon:"icon-triangle",area:u("body"),dropdowTitle:null,maxHeight:null,inner:!1,hideItem:[]},this.disable=function(){l.disableEdit=!0},this.enable=function(){l.disableEdit=!1},this.options=u.extend(l.default,e),this.data=this.options.data,this.displayTmpl=this.options.displayTmpl,this.menu=u('<div class="apui-dropdown-menu apui-popup custom-scroll" style="display:none"></div>'),this.menu.addClass(l.options.class),"combobox"===l.options.type&&(l.displayTmpl+='<i class="apui-icon apui-icon-16 icon-trigger '+l.options.triggerIcon+'"></i>',l.html(l.displayTmpl.format(""))),l.addClass("apui-trigger-container"),this.init=function(){l.unbind("click").on("click",function(e){var t,i,n,o,a,s,r,c;_stopEvent(e),APCore.Widgets.hideAllPopups(),l.disableEdit||l.hasClass("disable")||l.attr("readonly")||((l.options.inner?(l.parent().find(".apui-dropdown-menu").remove(),l.parent()):(u("body").find(".apui-dropdown-menu").remove(),u("body"))).append(l.menu),l.renderMenu(l.data),parseInt(l.css("margin-top")),"right"!==(e=l.options.position)&&l.position().left,t="250px",l.options.fullWidth?t=l.coords().width+"px":l.options.width&&(t=l.options.width),l.options.maxHeight&&l.menu.css("max-height",l.options.maxHeight).css("overflow-y","auto").addClass("custom-scroll"),l.menu.css("width",t).css("position","fixed"),i=(t=l[0].getBoundingClientRect()).height,n=t.width,o=l.menu.outerHeight(),a=parseInt(l.options.width)||250,s=(c=l.options.area[0].getBoundingClientRect()).top,c.left,r=c.height,c=c.width,"left"===e?c>a+t.left?l.menu.css("left",t.left):l.menu.css("left",c-a):l.menu.css("left",t.left+n-a),r+s>t.top+i+o?l.menu.css("top",t.top+i+4):0<t.top-o-2?l.menu.css("top",t.top-o-2):l.menu.css("top",0).css("height",t.top+"px"),l.showMenu())})},this.hideMenu=function(){l.menu.fadeOut(10),l.removeClass("open")},this.setValue=function(t,e){var i;"combobox"===l.options.type?0<(i=l.data.filter(function(e){return e[l.options.valueField]===t})).length?(l.setRawValue(i[0][l.options.displayField]),l.selectedRecord=i[0]):(l.setRawValue(""),l.selectedRecord=null):0<(i=l.data.filter(function(e){return e[l.options.valueField]===t})).length?l.selectedRecord=i[0]:l.selectedRecord=null,e||"function"!=typeof l.options.afterSetValue||l.options.afterSetValue(l.selectedRecord,l)},this.getValue=function(){return l.selectedRecord?l.selectedRecord[l.options.valueField]:null},this.getValueItem=function(){return l.selectedRecord},this.setRawValue=function(e){"INPUT"==l[0].tagName?l.val(e):l.html(l.displayTmpl.format(e))},this.showMenu=function(){var e;l.menu.isVisible()?(l.menu.hide(),l.removeClass("open")):(l.addClass("open"),_isValue(l.selectedRecord)?(e=l.selectedRecord[l.options.valueField],(e=l.menuItem[e])&&e.addClass("selected")):l.menu.find(".apui-result-item.selected").removeClass("selected"),l.menu[0].customHide=l.hideMenu,l.menu.fadeIn(100))},this.getItem=function(e){return l.options.getItem&&"function"==typeof l.options.getItem?l.options.getItem(e,l):u("<div class='apui-result-item'>{0}</div>".format(e[l.options.displayField]))},this.renderMenu=function(e){if(l.data=e,l.menu.html(""),l.options.dropdowTitle&&l.menu.append('<div  class="apui-dropdow-title">'+l.options.dropdowTitle+"</div>"),l.menuItem={},e&&0<e.length)for(var t,i,n=0;n<e.length;n++)l.options.hideItem.contains(e[n].Value)||(t=e[n],(i=l.getItem(t,l)).data("data",t),i.data("value",t[l.options.valueField]),l.menuItem[t[l.options.valueField]]=i,t.IsTitle?i.addClass("apui-dropdown-item-title"):i.unbind("click").on("click",o),l.menu.append(i));l.hideMenu()},this.init(),l}}(jQuery),APCore.Widgets.define("FileSelector",function(){var o=this;this.default={renderTo:null,afterSelect:null,accept:".doc, .xls, .ppt, .docx, .xlsx, .pptx, .odt, .ods, .odp, .pdf, .xmind, .mmap, .zip, .7z, .rar, .png, .jpg, .jpeg, .gif, .html, .htm, .dwg, .dwf, .edb, .e2k, .rtf",multiple:!0,triggerName:"click"},this.initDom=function(){o.input=$('<input type="file" style="display:none"/>'),o.input.attr("accept",o.opts.accept).attr("multiple",o.opts.multiple),$("body").append(o.input),o.initAction()},this.initAction=function(){o.opts.renderTo.unbind(o.opts.triggerName).on(o.opts.triggerName,function(e){_stopEvent(e),o.input.click()}),o.input.change(o.onChange.bind(o))},this.onChange=function(e){for(var t=[],i=o.input[0].files,n=0;n<i.length;n++)t.push(i[n]);"function"==typeof o.opts.afterSelect&&o.opts.afterSelect(t),o.input.val("")}}),$.fn.APFileSelector=function(e){var t=$(this);(e=e||{}).renderTo=t,new APCore.Widgets.FileSelector(e)},APCore.Widgets.define("APGridCell",function(){var a=this;this.events={},this.default={},this.columDefault={isMultiLine:!1,flex:null,minWidth:null,width:null,paddingRight:null,paddingLeft:null,textAlign:null,css:null,dataType:"string",onCellClick:null},this.constructor=function(e,t,i,n,o){a.updateOption(e),a.grid=o,a.column=a.extendConfig(a.columDefault,t);e="<div class='apui-grid-cell' data-index='{0}' col-order='{1}'></div>".format(t.dataIndex,n);a.jObject=$(e),a.record=i,a.jObject.data("APGridCell",a),a.opts.rowCss?(a.opts.rowCss.height&&a.jObject.css("height",a.opts.rowCss.height),a.opts.rowCss["min-height"]&&a.jObject.css("min-height",a.opts.rowCss["min-height"])):a.jObject.css("height",a.opts.rowHeight||"40px"),t.isMultiLine?(a.jObject.css("white-space","pre-wrap"),a.jObject.removeClass("apui-ellipsis")):a.jObject.addClass("apui-ellipsis"),a.el=a.jObject[0],a.renderData(i),t.flex?(a.jObject.css("flex",t.flex),a.jObject.css("min-width",t.minWidth||"100px")):t.width?a.jObject.css("width",t.width):a.jObject.css("width","100px"),t.paddingRight&&a.jObject.css("padding-right",t.paddingRight),t.paddingLeft&&a.jObject.css("padding-left",t.paddingLeft),t.textAlign&&a.jObject.css("text-align",t.textAlign),t.css&&a.jObject.css(t.css),"function"==typeof t.onCellClick&&(a.jObject.css("cursor","pointer"),a.jObject.on("click",function(e){t.onCellClick(a)}))},this.renderData=function(t){var e,i="",n=a.column;if("function"==typeof n.customCell)"string"==typeof(i=n.customCell(t,t.row,n))?(e=_isValue(i)?i:"--",i=i.encodeHTML(),o=n.tmpl||"{0}",a.jObject.attr("title",i),i=o.format(e),a.jObject.css("line-height",a.opts.rowHeight||"40px")):(i.removeXSS&&i.removeXSS(),i.text&&a.jObject.attr("title",i.text()));else{var o=n.tmpl||"{0}";let e=t[n.dataIndex];e=_isValue(e)?"datetime"==n.dataType?APCore.Fn.Date.formatDate(t[n.dataIndex],!0,"DD/MM/YYYY HH:mm:ss"):"date"==n.dataType?APCore.Fn.Date.formatDate(t[n.dataIndex]):"currency"==n.dataType?(t[n.dataIndex]+"").formatCurrency():(e=""+t[n.dataIndex]).encodeHTML():"--",i=o.format(e),a.jObject.attr("title",e),a.jObject.css("line-height",a.opts.rowHeight||"40px")}"string"==typeof i&&(i=i.secure()),a.jObject.html(i)}}),APCore.Widgets.define("APGridRow",function(){var o=this;this.default={stt:!1,checkbox:!1,rightMenu:!1,rightMenuIcon:"",floatMenu:!1,rowHeight:"40px"},this.constructor=function(e,t,i,n){o.updateOption(e),o.opts.checkbox=o.opts.checkbox||o.opts.checkBox,o.grid=n,o.columns=t,o.jObject=$("<div class='apui-grid-row' style='display: flex'></div>"),o.opts.rowCss?o.jObject.css(o.opts.rowCss):o.jObject.css("height",o.opts.rowHeight||"40px"),o.jObject.data("APGridRow",o),o.jObject.data("record",i),o.render(i),o.jObject.on("mouseenter.apgr",function(e){o.grid.fireEvent("row_mouseenter",o.data,o,$(e.currentTarget),e)}),o.jObject.on("mouseleave.apgr",function(e){o.grid.fireEvent("row_mouseleave",o.data,o,$(e.currentTarget),e)}),o.jObject.on("click.apgr",function(e){o.grid.fireEvent("row_click",o.data,o,$(e.currentTarget),e)}.bind(o)),o.jObject.on("dblclick.apgr",function(e){o.grid.fireEvent("row_dbclick",o.data,o,$(e.currentTarget),e)})},this.render=function(e){var t,i;((o.data=e).row=o).jObject.html(""),o.opts.checkbox&&(t=$("<label class='apui-checkbox'><input type='checkbox'/><span class='checkmark'></span></label>"),i=$("<div class='apui-grid-cell apui-check-box-cell'></div>"),o.checkBox=t.find("input").first(),i.append(t),o.jObject.append(i),o.checkBox.unbind("click.apgr").on("click.apgr",function(){o.checked=o.checkBox[0].checked,o.data.checked=o.checked,o.grid.fireEvent("checkchange",o,o.grid)})),o.bindingData(e),o.opts.menu&&(o.menu=$("<i class='apui-cell-menu icon icon-24 {0}'></i>".format(o.opts.menuIconClass||"icon-more")),(t=$("<div class='apui-grid-cell apui-grid-cell-menu'></div>")).css("width",o.opts.menu.rowHeight||"40px"),t.append(o.menu),"left"==o.opts.menu.position?o.jObject.prepend(t):o.jObject.append(t),i=o.opts.menu.width||"40px",t.css("width",i),o.menu.APDropDownMenu({position:o.opts.menu.position||"right",type:"dropdown",area:o.grid.contentBody,width:o.opts.menu.menuWidth,data:o.opts.menu.menuItems,onItemClick:function(e,t){o.opts.menu.menuItemClick(e,t,o.data,o.grid)}}))},this.bindingData=function(e){o.data=e,o.cells=[];for(var t=0;t<o.columns.length;t++){var i=o.columns[t],i=new APCore.Widgets.APGridCell(o.opts,i,o.data,t,o.grid);(i.row=o).jObject.append(i.jObject)}o.opts.checkbox&&o.setChecked(!!o.data.checked)},this.setChecked=function(e){o.opts.checkbox&&(o.checkBox[0].checked=e,o.checked=e,o.data.checked=e)},this.updateRecord=function(e){},this.destroy=function(){delete o.jObject}}),APCore.Widgets.define("APGridContainer",function(){var r=this;const i={vi:{TotalCountTempl:"Tổng số: <b>{0}</b> bản ghi",NumberRecordsPerPage:"bản ghi trên trang",PreviousPage:"Trang trước",NextPage:"Trang sau",ToPage:"đến",NoData:"Không có dữ liệu"},en:{TotalCountTempl:"Total: <b>{0}</b> records",NumberRecordsPerPage:"records/page",PreviousPage:"Previous page",NextPage:"Next page",ToPage:"to",NoData:"No data"}},s={Clear:"",Equals:"=",Contains:"contains",StartsWith:"startswith",EndsWith:"endswith",NotContain:"notcontains",True:"=",False:"=",GreaterThanOrEqual:">=",GreaterThan:">",LessThanOrEqual:"<=",LessThan:"<",Space:"sp",NotSpace:"nsp",NotEquals:"<>",IsNullOrEmpty:"isnullorempty",IsNull:"isnull",NotNull:"notnull",OnlyDay:"d",OnlyMonth:"m",MonthDay:"md",OnlyYear:"y"},c={Guid:"Guid",String:"String",Boolean:"Boolean",Number:"Number",Int:"Int",Date:"Date",DateTime:"DateTime",DateTimeFullSecond:"DateTimeFullSecond",Time:"Time",MonthYear:"MonthYear"};function n(){var e=r.calcHeaderWidth();r.content.css("min-width",e)}function o(){var e=r.content.outerWidth()-r.contentBody.outerWidth();requestAnimationFrame(function(){r.header.attr("style","padding-right:"+e+"px !important")})}function a(){var e=r.opts.dataUrl;return e="function"==typeof r.opts.customDataUrl?r.opts.customDataUrl(e,r)||e:e}function t(){var e=r.jObject.find(".nav-dropdown").first().val();r.pageSize=parseInt(e),r.numberPages=r.totalCountNumber%r.pageSize==0?r.totalCountNumber/r.pageSize:parseInt(r.totalCountNumber/r.pageSize+1)}function l(){r.jTotalCount&&(r.opts.remote&&!r.opts.filterLocal||(r.totalCountNumber=r.dataSource.length),isNaN(r.totalCountNumber)&&(r.totalCountNumber=0),r.jTotalCount.html(r.totalCountTempl.format(r.totalCountNumber)))}function u(){r.opts.remote&&!r.opts.filterLocal||(r.totalCountNumber=r.dataSource.length),t();var e=r.jObject.find(".nav-dropdown").first().val(),e=parseInt(e),e=(r.firstRecordIndex=(r.currentPage-1)*e+1,0==r.totalCountNumber&&(r.firstRecordIndex=0),r.lastRecordIndex=r.firstRecordIndex+e-1,r.lastRecordIndex>r.totalCountNumber&&(r.lastRecordIndex=r.totalCountNumber),r.jObject.find(".nav-first-record").text(r.firstRecordIndex),r.jObject.find(".nav-last-record").text(r.lastRecordIndex),r.jObject.find(".apui-grid-nav-btn").removeClass("disable"),Math.ceil(r.totalCountNumber/e));1==r.currentPage&&r.jObject.find(".apui-grid-nav-btn.previous-page").addClass("disable"),r.currentPage==e&&r.jObject.find(".apui-grid-nav-btn.next-page").addClass("disable"),l()}function d(e,t){r.fireEvent("datachanged",e,t,r),0===r.rows.length?r.checkAllBox&&(r.setCheckAll(!1),r.checkAllBox.hide()):r.checkAllBox&&r.checkAllBox.show()}function p(){0===r.rows.length&&(r.setCheckAll(!1),r.checkAll)&&r.checkAll.hide(),l()}this.rows=[],this.options={},this.columns=[],this.dataSource=[],this.processData=null,this.totalCountNumber=null,this.curListPage=0,this.currentPage=1,this.lastRecordIndex=0,this.firstRecordIndex=0,this.prevenLoading=!1,this.default={renderTo:"",rowHeight:"40px",rowCss:null,css:null,maxHeight:null,padding:null,noDataText:null,flex:!0,dataUrl:"",customDataUrl:null,method:"GET",remote:!0,autoLoadData:!0,filterColumn:!1,filterLocal:!1,disableSort:!1,listDataKey:"PageData",totalCountKey:"TotalCount",pageSizeOptions:[5,10,30,50],pageSize:30,navigatePage:!0,showFooter:!1,showTotal:!0,beforeLoad:null,language:"en",menu:null,onError:null},this.columnDefault={dataIndex:"",columnTitle:"",width:"",tmplHeader:"",filterHeader:null,customCell:null,flex:null,minWidth:null,sortField:"",textAlign:null,paddingRight:null,paddingLeft:null,disableSort:!1,tmp:"",isMultiLine:!1,onCellClick:null},this.constructor=function(e,t){r.updateOption(e),r.columns=[],t.forEach(function(e){e=APCore.Fn.extendConfig(r.columnDefault,e);r.columns.push(e)}),r.language=r.opts.language,r.gridResource=i[r.language],r.gridResource||(r.gridResource=i.en),r.jObject=$(["<div class='apui-grid-container' style='width:100%; height:100%'>","<div class='apui-grid-container-body'></div>","</div>"].join("")),r.jObject.data("grid",r);e=r.opts.noDataText||r.gridResource.NoData;r.jGridEmpty=$("<div class='grid-empty'><div class='graphic icon-no-data'></div><p>{0}</div></div>".format(e)),r.jObject.append(r.jGridEmpty),r.opts.padding&&r.jObject.css("padding",r.opts.padding),r.opts.flex&&r.jObject.addClass("grid-flex"),r.opts.renderTo.append(r.jObject),r.jContainerBody=r.jObject.find(".apui-grid-container-body").first(),r.header=$("<div class='apui-grid-header-container'></div>"),r.jContainerBody.append(r.header),r.opts.filterColumn&&(r.filterHeader=$("<div class='apui-grid-filter-header-container'></div>"),r.jContainerBody.append(r.filterHeader)),r.content=$("<div class='apui-grid-content-container custom-scroll'></div>"),r.opts.css&&r.content.css(r.opts.css),r.contentBody=$("<div class='apui-grid-content-body'></div>"),r.content.append(r.contentBody),r.jContainerBody.append(r.content),r.footer=$("<div class='apui-grid-footer'></div>"),r.totalCountNumber=0,r.opts.showTotal&&(r.totalCountTempl=r.opts.totalCountTempl||r.gridResource.TotalCountTempl,r.jTotalCount=$(["<div class='apui-grid-total-count'>",r.totalCountTempl,"</div>"].join("")),r.footer.append(r.jTotalCount)),r.footer.append("<div class='apui-flex-1'></div>"),r.opts.showFooter?(r.jObject.append(r.footer),r.opts.navigatePage&&(t=$(['<div class="wrap_nav">','<select class="nav-dropdown">',"</select>",'<div class="previous-page apui-grid-nav-btn nav-direct-btn-active icon icon-24 icon-prev-page" title="',r.gridResource.PreviousPage,'"></div>','<div class="current-page " ><span class="nav-first-record nav-record-info">1</span> ',r.gridResource.ToPage,' <span class="nav-last-record nav-record-info"></span></div>','<div class="next-page apui-grid-nav-btn nav-direct-btn-active icon icon-24 icon-next-page" title="',r.gridResource.NextPage,'"></div>',"</div>"].join("")),r.footer.append(t),r.jPageSizeSelect=t.find(".nav-dropdown").first(),r.opts.pageSizeOptions.forEach(function(e){r.jPageSizeSelect.append(['<option value="',e,'">',e," ",r.gridResource.NumberRecordsPerPage,"</option>"].join(""))}),r.jPageSizeSelect.on("change",r.onPageSizeChange),r.jObject.find(".apui-grid-nav-btn").on("click",r.onPageNextBack),r.pageSize=r.opts.pageSize||30,r.jPageSizeSelect.val(r.pageSize))):r.jContainerBody.css({height:"100%"}),$(window).resize(function(e){o(),n()}),r.updateLayout(),r.opts.autoLoadData&&r.load()},this.updateLayout=function(){r.header.html(""),r.contentBody.html(""),r._renderHeader(),r.loadData(r.dataSource)},this._renderHeader=function(){r.filterControls=[];var e,t=r.columns;r.opts.checkbox&&(r.checkAllBox=$("<label class='apui-checkbox'><input type='checkbox'/><span class='checkmark'></span></label>"),(e=$("<div class='apui-col-header apui-check-box-header'></div>")).append(r.checkAllBox),r.header.append(e),r.checkAll=r.checkAllBox.find("input").first(),r.checkAll[0].checked=!1,r.checkAll.unbind("change").on("change",function(e){r.setCheckAll(r.checkAll[0].checked),r.fireEvent("checkall",r.selectAll,r)})),r.opts.menu&&"left"==r.opts.menu.position&&(e=r.opts.menu.width||"40px",r.header.append("<div class='apui-col-header apui-col-header-menu' style='min-width:"+e+"'></div>"),r.opts.filterColumn)&&r.filterHeader.append("<div class='apui-col-filter-header apui-col-filter-header-menu' style='min-width:"+e+"'></div>"),r.headerColumns={};for(let e=0;e<t.length;e++){var i=t[e],n=i.tmplHeader||"{0}",n="<div class='apui-col-header apui-ellipsis' data-index='{0}' col-order='{1}'>{2}</div>".format(i.dataIndex,e,n.format(i.columnTitle||"")),n=$(n);i.dataIndex&&(r.headerColumns[i.dataIndex]=n),1==i.flex||"1"==i.flex?(n.css("flex",1),i.minWidth&&n.css("min-width",i.minWidth)):i.width?(n.css("width",i.width),n.css("min-width",i.width)):(n.css("width","100px"),n.css("min-width","100px")),i.textAlign&&n.css("text-align",i.textAlign),i.paddingRight&&n.css("padding-right",i.paddingRight),i.paddingLeft&&n.css("padding-left",i.paddingLeft),i.css&&n.css(i.css),r.header.append(n),_isTrue(i.disableSort)||(_isValue(i.sortField)?n.attr("sort-field",i.sortField):_isValue(i.dataIndex)&&!i.dataIndex.contains("_Custom_")&&n.attr("sort-field",i.dataIndex))}if(r.opts.filterColumn)for(let e=0;e<t.length;e++){var o=t[e],a="<div class='apui-col-header' data-index='{0}' col-order='{1}'></div>".format(o.dataIndex,e),a=$(a),s=(1==o.flex||"1"==o.flex?(a.css("flex",1),o.minWidth&&a.css("min-width",o.minWidth)):o.width?(a.css("width",o.width),a.css("min-width",o.width)):(a.css("width","100px"),a.css("min-width","100px")),o.textAlign&&a.css("text-align",o.textAlign),o.paddingRight&&a.css("padding-right",o.paddingRight),o.paddingLeft&&a.css("padding-left",o.paddingLeft),o.css&&a.css(o.css),r.getFilterHeader(o));s&&("right"==o.filterHeader.position&&a.append("<div class='apui-flex-1'></div>"),a.append(s.jObject)),r.filterHeader.append(a)}r.opts.menu&&"left"!=r.opts.menu.position&&(e=r.opts.menu.width||"40px",r.header.append("<div class='apui-col-header apui-col-header-menu' style='min-width:"+e+"'></div>"),r.opts.filterColumn)&&r.filterHeader.append("<div class='apui-col-filter-header apui-col-filter-header-menu' style='min-width:"+e+"'></div>")},this.getFilterHeader=function(e){var t=null;if(e.filterHeader){"function"==typeof e.filterHeader.operator&&(e.filterHeader.operator=e.filterHeader.operator(e.filterHeader));var i=e.filterHeader.items;switch("function"==typeof i&&(e.filterHeader.items=e.filterHeader.items(e.filterHeader)),e.filterHeader.type){case"search":t=r.getFilterSearch(e.filterHeader);break;case"currency":t=r.getFilterCurrency(e.filterHeader);break;case"combobox":t=r.getFilterCombobox(e.filterHeader);break;case"enumcombobox":t=r.getFilterEnumCombobox(e.filterHeader)}}return t&&r.filterControls.push(t),t},this.getColumnFilterParam=function(){let t=[];return r.filterControls.forEach(function(e){(param=e.getFilterParam())&&t.push(param)}),t},this._renderGrid=function(){!r.opts.navigatePage||r.opts.remote&&!r.opts.filterLocal?r.processData=r.dataSource:r.processData=r.getPageDataClient(),r._renderRows(),_isTrue(r.opts.disableSort)||r.header.unbind("click").on("click",".apui-col-header",function(e){var e=$(e.currentTarget),t=e.attr("sort-field"),i=r;_isValue(t)&&(r.jObject.find("[sort-type]").removeAttr("sort-type"),i.fireEvent("beforesort",t,r)||(i.sortField?i.sortField!=t?(i.sortDirection="DESC",i.sortField=t):"DESC"==i.sortDirection?i.sortDirection="ASC":"ASC"==i.sortDirection?(delete i.sortDirection,delete i.sortField):i.sortDirection="DESC":(i.sortField=t,i.sortDirection="DESC"),"DESC"==i.sortDirection?(e.attr("sort-type","desc"),r.doSort()):"ASC"==i.sortDirection?(e.attr("sort-type","asc"),r.doSort()):r.doSort(!0)))}),u(),o(),n(),setTimeout(function(){n()},100),r.fireEvent("layoutdone",r)},this._renderRows=function(){r.rows=[],r.contentBody.html(""),r.processData||(r.processData=[]);var e=r.contentBody;if(0<r.processData.length){r.jGridEmpty.hide();for(var t=0;t<r.processData.length;t++){var i=r.processData[t],i=new APCore.Widgets.APGridRow(r.opts,r.columns,i,r);r.rows.push(i),e.append(i.jObject)}}else r.contentBody.html(""),r.jGridEmpty.show()},this.calcHeaderWidth=function(){let i=0;return r.header.find(".apui-col-header").each(function(e,t){i+=$(t).outerWidth()}),i=(i=i<r.header.outerWidth()?r.header.outerWidth():i)<r.jObject.outerWidth()?r.jObject.outerWidth():i},this.updateColumnTitle=function(e,t){e=r.headerColumns[e];e&&e.html(t)},this.doSort=function(e){e||r.opts.remote&&!r.opts.filterLocal?r.load():(r.sortLocal(),r.loadData(r.dataSource))},this.sortLocal=function(){var e;_isValue(r.sortField)&&(e=r.sortField+" "+r.sortDirection,r.dataSource.sortObject(e))},this.load=function(t,e){var i,n,o;r.contentBody.html(""),r.dataSource=[],r.isLoading=!0,e&&(r.currentPage=1,r.totalCountNumber=0,u()),r.opts.remote?(r.filterParams={},e=[],"function"==typeof r.opts.beforeLoad&&(e=r.opts.beforeLoad(r)),i=r.filterParams||{},r.opts.navigatePage&&!r.opts.filterLocal&&(o=r.getPagingParam(),i=$.extend(i,o)),r.opts.filterColumn&&(o=r.getColumnFilterParam(),Array.isArray(e)&&o.addRange(e),e=[],_isValue(i.Filter)&&"string"==typeof i.Filter&&(e=APCore.Fn.deserialize(i.Filter),Array.isArray(e)||(e=[])),e.addRange(o),0<e.length?i.Filter=APCore.Fn.serialize(e):i.Filter=""),r.sortField&&((o=[]).push({Selector:r.sortField,Desc:"DESC"==r.sortDirection}),i.Sort=APCore.Fn.serialize(o)),n=!0,e=function(e){n=!1,setTimeout(function(){r.isLoading=!1},200),e&&e.Success&&(r.fireEvent("afterResponse",e.Data,r,null,"remote"),""===r.opts.listDataKey?r.dataSource=e.Data:r.dataSource=e.Data[r.opts.listDataKey],""!==r.opts.totalCountKey&&(r.totalCountNumber=e.Data[r.opts.totalCountKey]),Array.isArray(r.dataSource)&&r.opts.filterLocal&&(r.totalCountNumber=r.dataSource.length),r._renderGrid()),"function"==typeof t&&t(e,r.dataSource),r.jObject.removeMask(),r.fireEvent("afterload",r.dataSource,r,null,"remote")},o=r.opts.onError,"GET"==r.opts.method?APCore.Fn.getService(a(),i,e,o):APCore.Fn.postService(a(),i,e,o),setTimeout(function(){n&&(r.jObject.showMask(""),r.jGridEmpty.hide())},100)):delete r.dataSource},this.loadData=function(e){Array.isArray(e)&&(r.dataSource=e),r.currentPage=1,r.totalCountNumber=e.length,Array.isArray(r.dataSource)||(r.dataSource=[]),r.sortLocal(),r._renderGrid()},this.getPageDataClient=function(){for(var e=r.pageSize*(r.currentPage-1),t=r.pageSize+e,i=(t>r.dataSource.lenght-1&&(t=r.dataSource.lenght-1),[]),n=e;n<t;n++)r.dataSource[n]&&i.push(r.dataSource[n]);return i},this.deleteRecord=function(t){var e=r.rows.filter(function(e){return e.data!=t||(e.jObject.slideUp(300,function(){e.jObject.remove(),e.destroy()}),!1)}),e=(r.rows=e,r.dataSource.filter(function(e){return e!==t}));r.dataSource=e,d("delete",t),p()},this.onPageNextBack=function(e){e=$(e.currentTarget);if(e.hasClass("previous-page")){if(!(1<r.currentPage))return;--r.currentPage}else if(e.hasClass("next-page")){if(!(r.currentPage<r.numberPages))return;r.currentPage+=1}!r.opts.remote||r.opts.filterLocal?r._renderGrid():r.load()},this.getPagingParam=function(){return{PageSize:r.pageSize||30,PageIndex:r.currentPage}},this.deleteRecord=function(t){var e=r.rows.filter(function(e){return e.data!=t||(e.jObject.slideUp(300,function(){e.jObject.remove(),e.destroy()}),!1)}),e=(r.rows=e,r.dataSource.filter(function(e){return e!==t})),e=(r.dataSource=e,r.processData.filter(function(e){return e!==t}));r.processData=e,d("delete",t),p()},this.onPageSizeChange=function(){t(),r.currentPage>r.numberPages&&(r.currentPage=r.numberPages),r.opts.remote?r.load():r._renderGrid()},this.setCheckAll=function(t){r.checkAll&&(r.checkAll[0].checked=t,r.selectAll=t,r.rows.forEach(function(e){e.setChecked(t)}))},this.customScroll=function(e){r.prevenLoading||(r.prevenLoading=!0,console.log("not support load when scroll"))},this.getSelectedRows=function(){return r.rows.filter(function(e){return e.checked})},this.getSelectedRecords=function(){return r.dataSource.filter(function(e){return e.checked})},this.getData=function(){return r.dataSource},this.onEvent=function(e,t){r.events||(r.events={}),delete r.events[e],r.events[e]=t},this.unbindEvent=function(e){return r.events||(r.events={}),delete r.events[e],r},this.fireEvent=function(e,t,i,n,o){r.events&&"function"==typeof r.events[e]&&setTimeout(r.events[e](t,i,n,o),0)},this.getFilterSearch=function(n){var e=$("<div style='width: 100%'></div>"),i=$("<input type='text' class='apui-grid-filter-control apui-grid-filter-search icon-search-gray'/>");return n.placeholder&&i.attr("placeholder",n.placeholder),e.append(i),i.keydown(function(e){var t=e.which,i=$(e.target);13==t&&("function"==typeof n.onEnter&&n.onEnter(i,t,e),r.load()),27==t&&"function"==typeof n.onESC&&n.onESC(i,t,e)}),{config:n,jObject:e,input:i,getValue:function(){return i.val().trim()},setValue:function(e){i.val(e)},getFilterParam:function(){var e=i.val().trim();let t=null;return t=0<e.length?{Value:e,DataIndex:n.field,DataType:c.String,Operator:s.Contains}:t}}},this.getFilterCurrency=function(i){var e={},n=null,t=$("<div style='display: inline-flex;'></div>"),o={decimalSeperator:",",thousandSeperator:".",minValue:0,textAlign:"right",placeholder:i.placeholder,class:"apui-grid-filter-control",maxValue:1e18,afterSetValue:function(e){r.onDataChange(r.fieldName,e)},onEnter:function(e,t){r.load()}},a=new APCore.Widgets.CurrencyInput(o);return a.filterControl=e,i.operator&&(o={data:i.operator,maxHeight:"400px",required:!0,search:!1,displayTmpl:"{#Value#}",class:"apui-grid-filter-op",height:"32px !important",menuCss:{width:"200px"},afterSetValue:function(e,t){t.filterControl.getValue()&&r.load()}},(n=new APCore.Widgets.Combobox(o)).setValue(i.operator[0].Value,!0),n.filterControl=e,t.append(n.jObject),n.jObject.css({width:"40px","min-width":"40px","margin-top":"4px"}),a.jObject.addClass("apui-flex-1"),a.input.css("width","100%").addClass("apui-grid-filter-op-value")),t.append(a.jObject),$.extend(e,{config:i,jObject:t,input:a,op:n,getValue:function(){return a.getValue()},setValue:function(e){a.setValue(e)},getFilterParam:function(){var e=a.getValue();let t=null;return t=0<e.length?{Value:e,DataIndex:i.field,DataType:c.Number,Operator:n?n.getValue():s.Equals}:t}})},this.getFilterCombobox=function(i){var e=$("<div style='width: 100%'></div>"),t=(i.items.insert(0,{Display:i.clearText||"- All -",Value:""}),i.emptyText&&i.items.insert(1,{Display:i.emptyText,Value:"<null>"}),{valueField:i.valueField,displayField:i.displayField,data:i.items,maxHeight:i.maxHeight||"400px",required:!1,class:"apui-grid-filter-control",emptyText:i.placeholder,height:"32px !important",afterSetValue:function(e,t){r.load()}}),n=new APCore.Widgets.Combobox(t);return e.append(n.jObject),{config:i,jObject:e,input:n,getValue:function(){return n.getValue()},setValue:function(e){n.setValue(e)},getFilterParam:function(){var e=n.getValue();let t=null;return t=_isValue(e)?"<null>"==e?{Value:"",DataIndex:i.field,DataType:c.String,Operator:s.IsNullOrEmpty}:{Value:e,DataIndex:i.field,DataType:c.String,Operator:s.Equals}:t}}},this.getFilterEnumCombobox=function(i){var e=$("<div style='width: 100%'></div>"),t=(i.items.insert(0,{Display:i.clearText||"- All -",Value:""}),i.emptyText&&i.items.insert(1,{Display:i.emptyText,Value:"<null>"}),{valueField:i.valueField,displayField:i.displayField,data:i.items,maxHeight:i.maxHeight||"400px",required:!1,class:"apui-grid-filter-control",emptyText:i.placeholder,height:"32px !important",afterSetValue:function(e,t){r.load()}}),n=new APCore.Widgets.Combobox(t);return e.append(n.jObject),{config:i,jObject:e,input:n,getValue:function(){return n.getValue()},setValue:function(e){n.setValue(e)},getFilterParam:function(){let e=n.getValue(),t=null;return t=_isValue(e)?"<null>"==e?{Value:"",DataIndex:i.field,DataType:c.Number,Operator:s.IsNullOrEmpty}:(e=parseInt(e),{Value:e=isNaN(e)?0:e,DataIndex:i.field,DataType:c.Number,Operator:s.Equals}):t}}}}),APCore.Widgets.define("JsonEditor",function(){var o=this;function i(){o.importBox||n();var e=o.get();e&&o.importContent.html(c(e)),o.importBox.show(),o.container.hide()}function n(){o.importBox=$(["<div class='apui-json-import-box'><div class='apui-json-import-popup'>","<div class='apui-json-import-content' contenteditable='true' data-placeholder='Enter your json code here'></div>","<pre class='apui-json-import-footer'><div class='apui-flex-1'><span class='message' style='display:none'>Định dạng JSON không đúng</span></div><div class='apui-json-import-button cancel'>Hủy bỏ</div><div class='apui-json-import-button ok'>Đồng ý</div></pre>","</div></div>"].join("")),o.jObject.append(o.importBox),o.importBox.hide(),o.importContent=o.importBox.find(".apui-json-import-content").first(),o.importContent.keydown(function(e){27==e.which&&(_stopEvent(e),a())}),o.importBox.on("click",".apui-json-import-button",function(e){e=$(e.currentTarget);if(e.is(".cancel"))a();else if(e.is(".ok"))try{var t=JSON.parse(o.importContent.text());o.load(t),a()}catch(e){o.importBox.find(".message").show()}})}function a(){o.importContent.html(""),o.importBox.find(".message").hide(),o.importBox.hide(),s()}function s(){var e=o.get();e&&0<Object.keys(e).length?(o.container.show(),o.emptyJson.hide()):(o.container.hide(),o.emptyJson.show())}function r(e){return e instanceof Object&&0<Object.keys(e).length}function c(e){var t="";if("string"==typeof e)(e=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")).isUrl()?t+='<span class="apui-json-value apui-json-value-url" contenteditable="true">"'+e+'"</span>':t+='<span class="apui-json-value apui-json-value-string" contenteditable="true">"'+e+'"</span>';else if("number"==typeof e)t+='<span class="apui-json-value apui-json-value-number" contenteditable="true">'+e+"</span>";else if("boolean"==typeof e)t+='<span class="apui-json-value apui-json-value-boolean" contenteditable="true">'+e+"</span>";else if(null===e)t+='<span class="apui-json-value apui-json-value-null" contenteditable="true">null</span>';else if(e instanceof Array)if(0<e.length){t+='<span>[</span><ol class="json-array">';for(var i=0;i<e.length;++i)t+="<li>",r(e[i])&&(t+='<a href class="apui-json-toggle"></a>'),t+=c(e[i]),i<e.length-1&&(t+="<span class='apui-json-comma'>,</span>"),t+="</li>";t+="</ol><span>]</span>"}else t+="<span>[</span><span>]</span>";else if("object"==typeof e){var n,o=Object.keys(e).length;if(0<o){for(var a in t+='{<ul class="json-dict">',e)e.hasOwnProperty(a)&&(t+='<li class="apui-json-property-item">',n='<span class="apui-json-string">"<span class="apui-json-property" contenteditable="true">'+a+'</span>"</span>',r(e[a])?t+='<a href class="apui-json-toggle"></a>'+n:t+=n,t+=": "+c(e[a]),0<--o&&(t+="<span class='apui-json-comma'>,</span>"),t+="</li>");t+="</ul>}"}else t+="{}"}return t}this.default={container:null,data:{},editable:!0,resource:{NoData:"No data",ImportData:"Import data"},defaultCollapsed:!1,darkMode:!0},this.initDom=function(){!1!==o.opts.editable&&(o.opts.editable=!0),o.jObject=$(o.opts.container),o.jObject.addClass("apui-json-editor-wrap"),o.toolbar=$("<div class='apui-json-toolbar'><div class='apui-json-load'  action='import'>"+o.opts.resource.ImportData+"</div></div>"),o.container=$("<div class='apui-json-editor-container'></div>"),o.emptyJson=$("<div class='apui-json-editor-empty'><div class='pui-json-editor-empty-title'>"+o.opts.resource.NoData+"</div><div class='apui-json-empty-btn' action='import'>"+o.opts.resource.ImportData+"</div></div>"),o.jObject.append(o.toolbar).append(o.container).append(o.emptyJson);let e="dark";o.opts.darkMode||(e="light"),o.container.addClass(e),o.container.hide(),o.emptyJson.show(),n(),o.initAction();var t=o.opts.data||{};o.load(t)},this.encodeJSON=function(e){if("string"==typeof e)return n={'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t"},e.replace(/["\\\b\f\n\r\t]/g,function(e){return n[e]});if("object"==typeof e)for(var t in e)e[t]=o.encodeJSON(e[t]);else if(Array.isArray(e))for(var i=0;i<e.length;i++)e[i]=o.encodeJSON(e[i]);var n;return e},this.get=function(){try{return o.container.find(".collapsed").click(),o.container.find("ul").each(function(e,t){$(t).find("li").last().find(".apui-json-comma").remove()}),APCore.Fn.deserialize(o.container.text())}catch(e){return null}},this.load=function(e){var t;o.container.html(""),a(),("{}"==e||0==Object.keys(e).length?i:(t=c(e=o.encodeJSON(e)),r(e)&&(t='<a href class="apui-json-toggle"></a>'+t),o.container.html(t).show(),1==o.opts.defaultCollapsed&&o.container.find("a.apui-json-toggle").click(),o.container.find('[contenteditable="true"]').each(function(e,t){!function o(e){$(e).keydown(function(i){var e=i.which;let n=$(i.currentTarget);if(13==e)if(_stopEvent(i),n.hasClass("apui-json-value")){let e=n.parents("li").first(),t=(0==e.find(".apui-json-comma").length&&e.append($("<span class='apui-json-comma'>,</span>")),$(["<li>",'<span class="apui-json-string">"','<span contenteditable="true" class="apui-json-property">Key</span>','"</span>',":",'<span class="apui-json-value" contenteditable="true" data-placeholder="value"></span>',"</li>"].join("")));0<e.next().length?(t.insertAfter(e),t.append($("<span class='apui-json-comma'>,</span>"))):t.insertAfter(e),t.find('[contenteditable="true"]').each(function(e,t){o($(t))}),t.find('.apui-json-property[contenteditable="true"]').focus()}else{let e=n.parents("li").first().find(".apui-json-value").first();e.focus()}else if(27==e){_stopEvent(i);let e=n.parents("li").first().find(".apui-json-value").first(),t=e.html();_isValue(t)&&"null"!=t||n.parents("li").first().remove()}else{let e=n.html();"null"==e&&n.html("")}});$(e).unbind("blur").on("blur",function(e){let i=$(e.currentTarget);if(i.hasClass("apui-json-value")){let t=i.html();if(_isValue(t)&&"null"!=t)try{"string"==typeof(t=JSON.parse(t))?(t=(t=t.replaceAll('"',"")).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),t='"{0}"'.format(t),i.addClass("apui-json-value-string").html(t)):"number"==typeof t?i.addClass("apui-json-value-number").html(t):t instanceof Array||null==t&&i.addClass("apui-json-value-null").html("null")}catch(e){"null"==t?i.addClass("apui-json-value-null").html("null"):(t=(t=(t+="").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")).replaceAll('"',""),t='"{0}"'.format(t),i.addClass("apui-json-value-string").html(t))}else i.addClass("apui-json-value-null").html("null")}else if(i.hasClass("apui-json-property")){let e=i.parents("li").first().find(".apui-json-value").first(),t=(_isValue(e.html())||e.addClass("apui-json-value-null").html("null"),i.html());_isValue(t)||i.html("Key")}})}($(t))}),s))()},this.initAction=function(){o.container.off("click"),o.container.on("click","a.apui-json-toggle",function(e){var t,e=$(e.currentTarget).toggleClass("collapsed").siblings("ul.json-dict, ol.json-array");return e.toggle(),e.is(":visible")?e.siblings(".apui-json-count-item").remove():(t=e.children("li").length,e.after('<a href class="apui-json-count-item">'+(t+(1<t?" items":" item"))+"</a>")),!1}),o.container.on("click","a.apui-json-count-item",function(e){return $(e.currentTarget).siblings("a.apui-json-toggle").click(),!1}),o.jObject.on("click","[action='import']",function(e){_stopEvent(e),i()})}}),APCore.Widgets.define("APLoadingBox",function(){var i=this;this.default={renderTo:$("body")},this.initDom=function(){i.renderTo=i.opts.renderTo,i.createDom()},this.createDom=function(){i.jObject=$('<div class="apui-loading-box-mask"  style="display:none"></div>'),i.popup=$(['<div class="apui-loading-box-body animated fadeIn" style="min-width:200px;">',"<div class='apui-loading-box-title'></div>","<div class='apui-loading-box-name'></div>","<div class='apui-loading-box-icon apui-waiting-more'></div>","</div>"].join("")),i.jObject.append(i.popup),i.jLoading=i.popup.find(".apui-loading-box-icon").first(),i.renderTo.append(i.jObject)},this.show=function(e){var t;i.jLoading.html("").addClass("apui-waiting-more"),e.width&&"number"==typeof e.width?(t=parseInt(e.width)+"px",i.popup.css("width",t)):i.popup.css("width","450px"),e.height&&"number"==typeof e.height?i.popup.css("height",e.height+"px"):e.height&&"string"==typeof e.height&&i.popup.css("height","300px"),i.jObject.show(),i.popup.css("position","absolute"),e.position&&e.position.top?i.popup.css("top",e.position.top):(t=window.innerHeight/2-i.popup.height()/2,i.popup.css("top",t=200<t?t/2:t)),e.position&&e.position.left?i.popup.css("left",e.position.left):i.popup.css("left",window.innerWidth/2-i.popup.width()/2),i.setTitle(e.title||""),i.setName(e.name||"")},this.hide=function(){i.isShow=!1,i.jObject.fadeOut(30)},this.setTitle=function(e){i.jObject.find(".apui-loading-box-title").first().text(e)},this.setName=function(e){i.jObject.find(".apui-loading-box-name").first().text(e)}}),$.fn.showMask=function(e,t,i){e=e||"",t=t||"rgba(255,255,255,.3)",i=i||"#212121",$(this).find(".apui-loading-mask").remove(),$(this).append("<div class='apui-loading-mask'  style='display:none; background-color:"+t+"'><p class='amis-loading'>"+e+"</p></div>"),i&&$(this).find(".apui-loading-mask p").css("color",i),$(this).find(".apui-loading-mask").show()},$.fn.showLoadingScreen=function(){$(this).find(".loading-amis-screen").remove();var e=$(`<div class='loading-amis-screen' style='display:none'><svg class="amis-spinner" width="65px" height="65px" viewBox="0 0 66 66" xmlns="http://www.w3.org/2000/svg">
                                <circle class="amis-path" fill="none" stroke-width="6" stroke-linecap="round" cx="33" cy="33" r="30"></circle>
                            </svg></div>`);$(this).append(e),e.show()},$.fn.removeLoadingScreen=function(){$(this).find(".loading-amis-screen").remove()},$.fn.removeMask=function(){$(this).find(".apui-loading-mask").fadeOut(0,null,function(){$(this).remove()})},$.fn.showTopProgressBar=function(e){$(this).find(".apui-horizontal-loader").remove(),$(this).append("<div class='apui-horizontal-loader' style='background:"+e+"'></div>")},$.fn.removeTopProgressBar=function(){var e=$(this).find(".apui-horizontal-loader");e.addClass("fast"),e.css("width","100%"),setTimeout(function(){e.fadeOut(300)},1e3)},APCore.Widgets.define("APLockedGridCell",function(){var s=this;this.events={},this.options={},this.constructor=function(e,t,i,n,o){s.updateOption(e),s.grid=o;var e="<div class='apui-fixed-grid-cell apui-ellipsis' data-index='{0}' col-order='{1}'></div>".format(t.dataIndex,n);s.jObject=$(e),s.record=i,s.jObject.data("APLockedGridCell",s),s.el=s.jObject[0];let a="";t.dataIndex.contains("_Custom_")||!_isValue(t.dataIndex)?"function"==typeof t.customCell&&("string"==typeof(a=t.customCell(i,i.row))?(o=_isValue(a)?a:"--",n=t.tmpl||"{0}",s.jObject.attr("title",a),a=n.format(o),s.jObject.css("line-height",s.opts.rowHeight||"40px")):a.text&&s.jObject.attr("title",a.text())):(e=t.tmpl||"{0}",n=_isValue(i[t.dataIndex])?i[t.dataIndex]:"--",a=e.format(n),s.jObject.attr("title",n),s.jObject.css("line-height",s.opts.rowHeight||"40px")),s.jObject.css("height",s.opts.rowHeight||"40px"),s.jObject.append(a),1===t.flex?(s.jObject.css("flex",1),s.jObject.css("min-width",t.minWidth||"100px")):t.width?s.jObject.css("width",t.width):s.jObject.css("width","100px"),t.paddingRight&&s.jObject.css("padding-right",t.paddingRight),t.paddingLeft&&s.jObject.css("padding-left",t.paddingLeft),"function"==typeof t.onCellClick&&(s.jObject.css("cursor","pointer"),s.jObject.on("click",function(e){t.onCellClick(s)})),t.textAlign&&s.jObject.css("text-align",t.textAlign)}}),APCore.Widgets.define("APLockedGridRow",function(){var r=this;this.default={stt:!1,checkBox:!1,rightMenu:!1,rightMenuIcon:"",rowHeight:"40px"},this.constructor=function(e,t,i,n){var o;r.updateOption(e),r.grid=n,r.jObject=$("<div class='apui-fixed-grid-row' style='display: flex'></div>"),r.jObject.css("height",r.opts.rowHeight||"40px"),r.jObject.data("APLockedGridRow",r),e.itemKey&&r.jObject.attr("rid",i[e.itemKey]),((r.data=i).row=r).opts.checkbox&&(e=$("<label class='apui-checkbox'><input type='checkbox'/><span class='checkmark'></span></label>"),o=$("<div class='apui-fixed-grid-cell apui-check-box-cell'></div>"),r.checkBox=e.find("input").first(),o.append(e),r.jObject.append(o),r.checkBox[0].checked=!!i.checked,r.checkBox.unbind("click").on("click",function(){r.checked=r.checkBox[0].checked,n.fireEvent("checkchange",r,n)}));for(var a=0;a<t.length;a++){var s=t[a],s=new APCore.Widgets.APLockedGridCell(r.opts,s,i,a,r.grid);(s.row=r).jObject.append(s.jObject)}r.opts.rightMenu&&(r.menu=$("<i class='apui-cell-menu icon icon-24 {0}'></i>".format(r.opts.menuIconClass||"icon-more")),(e=$("<div class='apui-fixed-grid-cell apui-fixed-grid-cell-menu'></div>")).css("width",r.opts.menu.rowHeight||"40px"),e.append(r.menu),r.jObject.append(e),r.menu.MISADropDownMenu({position:"right",type:"dropdown",area:r.grid.contentBody,width:r.opts.menu.menuWidth,data:r.opts.menu.menuItems,onItemClick:function(e,t){r.opts.menu.menuItemClick(e,t,r.data,r.grid)}})),r.jObject.on("mouseenter",function(e){var t=r.jObject.index();r.grid.fixedGrid?r.grid.fixedGrid.contentBody.children().eq(t).addClass("hover"):r.grid.gridParent&&r.grid.gridParent.contentBody.children().eq(t).addClass("hover"),r.grid.fireEvent("row_mouseenter",r.data,r,$(e.currentTarget),e)}),r.jObject.on("mouseleave",function(e){var t=r.jObject.index();r.grid.fixedGrid?r.grid.fixedGrid.contentBody.children().eq(t).removeClass("hover"):r.grid.gridParent&&r.grid.gridParent.contentBody.children().eq(t).removeClass("hover"),r.grid.fireEvent("row_mouseleave",r.data,r,$(e.currentTarget),e)}),r.jObject.on("click",function(e){r.grid.fireEvent("row_click",r.data,r,$(e.currentTarget),e)}),r.jObject.on("dblclick",function(e){r.grid.fireEvent("row_dbclick",r.data,r,$(e.currentTarget),e)})},this.destroy=function(){delete r.jObject}}),APCore.Widgets.define("APLockedGridContainer",function(){var s=this;const n={vi:{TotalCountTempl:"Tổng số: <b>{0}</b> bản ghi",NumberRecordsPerPage:"bản ghi trên trang",PreviousPage:"Trang trước",NextPage:"Trang sau",ToPage:"đến",NoData:"Không có dữ liệu"},en:{TotalCountTempl:"Total: <b>{0}</b> records",NumberRecordsPerPage:"records/page",PreviousPage:"Previous page",NextPage:"Next page",ToPage:"to",NoData:"No data"}};function o(){s.opts.isFixed||s.opts.isScrollGrid||(s.opts.navigatePage&&!s.opts.remote?r(s.getPageDataClient()):r(s.dataSource)),s.renderRows(),s.opts.disableSort||s.header.unbind("click").on("click",".apui-col-header",function(e){var e=$(e.currentTarget),t=e.attr("sort-field"),i=s.gridParent||s;_isValue(t)&&(s.jObject.find("[sort-type]").removeAttr("sort-type"),s.gridParent&&s.gridParent.jObject.find("[sort-type]").removeAttr("sort-type"),s.fixedGrid&&s.fixedGrid.jObject.find("[sort-type]").removeAttr("sort-type"),i.fireEvent("beforesort",t,s)||(i.sortField?i.sortField!=t?(i.sortDirection="DESC",i.sortField=t):"DESC"==i.sortDirection?i.sortDirection="ASC":"ASC"==i.sortDirection?(delete i.sortDirection,delete i.sortField):i.sortDirection="DESC":(i.sortField=t,i.sortDirection="DESC"),"DESC"==i.sortDirection?e.attr("sort-type","desc"):"ASC"==i.sortDirection&&e.attr("sort-type","asc"),i.load()))}),s.opts.remote||(s.totalCountNumber=s.dataSource.length),c();var e=s.jPageSizeSelect.val();e=parseInt(e),s.firstRecordIndex=(s.currentPage-1)*e+1,0!=s.totalCountNumber&&!isNaN(s.firstRecordIndex)||(s.firstRecordIndex=0),s.lastRecordIndex=s.firstRecordIndex+e-1,s.lastRecordIndex>s.totalCountNumber&&(s.lastRecordIndex=s.totalCountNumber),isNaN(s.lastRecordIndex)&&(s.lastRecordIndex=0),s.navFirstRecord.text(s.firstRecordIndex),s.navLastRecord.text(s.lastRecordIndex),i(),a(),s.fireEvent("layoutdone",s)}function a(){var e=s.content.outerWidth()-s.contentBody.outerWidth();s.header.attr("style","padding-right:"+e+"px !important")}function r(e){s.processData=e,s.scrollGrid&&(s.scrollGrid.processData=s.processData),s.fixedGrid&&(s.scrollGrid.processData=s.processData)}function c(){var e=s.jPageSizeSelect.val();s.pageSize=parseInt(e),s.numberPages=s.totalCountNumber%s.pageSize==0?s.totalCountNumber/s.pageSize:parseInt(s.totalCountNumber/s.pageSize+1)}function i(){s.jTotalCount&&(s.opts.remote||(s.totalCountNumber=s.dataSource.length),s.jTotalCount.html(s.totalCountTempl.format(s.totalCountNumber)))}this.rows=[],this.columns=[],this.dataSource=[],this.processData=null,this.totalCountNumber=null,this.curListPage=0,this.currentPage=1,this.lastRecordIndex=0,this.firstRecordIndex=0,this.prevenLoading=!1,this.default={renderTo:"",rowHeight:"40px",remote:!0,autoLoadData:!0,navigatePage:!0,showTotal:!0,flex:!0,method:"GET",showFooter:!0,listDataKey:"PageData",totalCountKey:"TotalCount",pageSize:30,beforeLoad:null,language:"en",pageSizeOptions:[5,10,30,50]},this.constructor=function(e,t){s.updateOption(e),s.columns=t;var i=[];s.fixedCol=s.columns.filter(function(e){return 1==e.fixed?!(e.fixed=!1):(i.push(e),!1)}),s.columns=i,s.language=s.opts.language,s.gridResource=n[s.language],s.gridResource||(s.gridResource=n.en),s.jObject=$("<div class='apui-fixed-grid-container  custom-scroll-x' style='width:100%; height:calc(100% - 40px)'></div>"),s.opts.isFixed?s.jObject.addClass("fixed"):s.opts.isScrollGrid?s.jObject.addClass("scroll"):(s.jObjectWrap=$("<div class='apui-fixed-grid-container-wrap' style='width:100%; height:100%'></div>"),s.jObjectWrapFlex=$("<div class='apui-fixed-grid-container-wrap-flex' style='width:100%; height:100%'></div>"),s.jObjectWrap.append(s.jObjectWrapFlex),s.opts.renderTo.append(s.jObjectWrap),s.opts.renderTo=s.jObjectWrapFlex),s.fixedCol&&0<s.fixedCol.length&&(s.isParent=!0,s.fixedCol.last().paddingRight="16px",s.fixedCol.first().paddingLeft="16px",s.columns.first().paddingLeft="16px",s.fixedGrid=new APCore.Widgets.APLockedGridContainer({renderTo:s.opts.renderTo,showFooter:!1,editable:s.opts.editable,checkbox:s.opts.checkbox,isFixed:!0},s.fixedCol),(s.fixedGrid.gridParent=s).hideCheckbox=!0,s.opts.padding="0",s.jObject.addClass("parent")),s.jObject.data("grid",s),s.opts.padding&&s.jObject.css("padding",s.opts.padding),s.opts.renderTo&&s.renderTo(s.opts.renderTo),s.scrollContent=$("<div class='misa-grid-wrapper'></div>"),s.jObject.append(s.scrollContent),s.header=$("<div class='apui-fixed-grid-header-container'></div>"),s.scrollContent.append(s.header),s.content=$("<div class='apui-fixed-grid-content-container custom-scroll'></div>"),s.scrollContent.append(s.content),s.options.editable&&s.jObject.addClass("editable "),s.contentBody=$("<div class='apui-fixed-grid-content-body'></div>"),s.content.append(s.contentBody),s.jObject.append(s.content),s.fixedGrid||s.opts.isFixed||s.opts.isScrollGrid||s.jObject.css("overflow-x","hidden"),s.fixedGrid&&(s.content.scrollEvent(function(e){var t;s.curScroll&&"content"!=s.curScroll||(s.curScroll="content",t=s.content.scrollTop(),s.scrollGrid.content.scrollTop(t),s.fixedGrid.content.scrollTop(t))},function(){var e;s.curScroll&&"content"!=s.curScroll||(e=s.content.scrollTop(),s.scrollGrid.content.scrollTop(e),s.fixedGrid.content.scrollTop(e),delete s.curScroll)}),s.fixedGrid.content.scrollEvent(function(e){var t;s.curScroll&&"fixed"!=s.curScroll||(s.curScroll="fixed",t=s.fixedGrid.content.scrollTop(),s.scrollGrid.content.scrollTop(t),s.content.scrollTop(t))},function(){var e;s.curScroll&&"fixed"!=s.curScroll||(delete s.curScroll,e=s.fixedGrid.content.scrollTop(),s.scrollGrid.content.scrollTop(e),s.content.scrollTop(e))}),s.scrollGrid.content.scrollEvent(function(e){var t;s.curScroll&&"scroll"!=s.curScroll||(s.curScroll="scroll",t=s.scrollGrid.content.scrollTop(),s.fixedGrid.content.scrollTop(t),s.content.scrollTop(t))},function(){var e;s.curScroll&&"scroll"!=s.curScroll||(delete s.curScroll,e=s.scrollGrid.content.scrollTop(),s.fixedGrid.content.scrollTop(e),s.content.scrollTop(e))})),s.footer=$("<div class='apui-fixed-grid-footer'></div>"),s.totalCountNumber=0,s.opts.showTotal&&(s.totalCountTempl=s.opts.totalCountTempl||s.gridResource.TotalCountTempl,s.jTotalCount=$(["<div class='apui-fixed-grid-total-count'>",s.totalCountTempl,"</div>"].join("")),s.footer.append(s.jTotalCount),s.footer.append("<div class='apui-flex-1'></div>")),s.opts.showFooter&&(s.jObjectWrap.append(s.footer),s.jObject.addClass("has-footer")),s.naviPanel=$(['<div class="wrap_nav">','<select class="nav-dropdown">',"</select>",'<div class="previous-page apui-grid-nav-btn nav-direct-btn-active icon icon-24 icon-prev-page" title="',s.gridResource.PreviousPage,'"></div>','<div class="current-page " ><span class="nav-first-record nav-record-info">1</span> ',s.gridResource.ToPage,' <span class="nav-last-record nav-record-info"></span></div>','<div class="next-page apui-grid-nav-btn nav-direct-btn-active icon icon-24 icon-next-page" title="',s.gridResource.NextPage,'"></div>',"</div>"].join("")),s.navLastRecord=s.naviPanel.find(".nav-last-record").first(),s.navFirstRecord=s.naviPanel.find(".nav-first-record").first(),s.footer.append(s.naviPanel),s.jPageSizeSelect=s.naviPanel.find(".nav-dropdown").first(),s.opts.pageSizeOptions.forEach(function(e){s.jPageSizeSelect.append(['<option value="',e,'">',e," ",s.gridResource.NumberRecordsPerPage,"</option>"].join(""))}),s.jPageSizeSelect.on("change",function(){c(),s.currentPage>s.numberPages&&(s.currentPage=s.numberPages);s.opts.remote?s.load():o()}.bind(s)),s.naviPanel.on("click",".apui-grid-nav-btn",function(e){e=$(e.currentTarget);if(e.hasClass("previous-page")){if(!(1<s.currentPage))return;--s.currentPage}else if(e.hasClass("next-page")){if(!(s.currentPage<s.numberPages))return;s.currentPage+=1}s.opts.remote?s.load():o()}.bind(s)),s.pageSize=s.opts.pageSize||30,s.jPageSizeSelect.val(s.pageSize),s.opts.navigatePage||s.naviPanel.hide(),$(window).resize(function(e){a()}),s.updateLayout(),s.opts.autoLoadData&&s.load()},this.updateLayout=function(){s.header.html(""),s.contentBody.html("");var e,t=s.columns;s.opts.checkbox&&(s.checkAllBox=$("<label class='apui-checkbox'><input type='checkbox'/><span class='checkmark'></span></label>"),(e=$("<div class='apui-col-header apui-check-box-header'></div>")).append(s.checkAllBox),s.header.append(e),s.checkAll=s.checkAllBox.find("input").first(),s.checkAll[0].checked=!1,s.checkAll.unbind("change").on("change",function(e){s.setCheckAll(s.checkAll[0].checked),s.fireEvent("checkall",s.selectAll,s)}),s.hideCheckbox)&&e.css("display","none");for(var i=0,n=0;n<t.length;n++){var o=t[n],a=o.tmplHeader||"{0}",a="<div class='apui-col-header apui-ellipsis' data-index='{0}' col-order='{1}'>{2}</div>".format(o.dataIndex,n,a.format(o.columnTitle||"")),a=$(a);a.attr("title",o.columnTitle||""),o.disableSort||(_isValue(o.sortField)?a.attr("sort-field",o.sortField):_isValue(o.dataIndex)&&!o.dataIndex.contains("_Custom_")&&a.attr("sort-field",o.dataIndex)),s.fixedGrid&&a.css("min-width",o.width),1===o.flex?(a.css("flex",1),o.minWidth&&(a.css("min-width",o.minWidth),i+=parseInt(o.minWidth))):o.width?(a.css("width",o.width),i+=parseInt(o.width)):(a.css("width","100px"),i+=100),o.textAlign&&a.css("text-align",o.textAlign),o.paddingRight&&a.css("padding-right",o.paddingRight),o.paddingLeft&&a.css("padding-left",o.paddingLeft),s.header.append(a)}s.opts.rightMenu&&s.header.append("<div class='apui-col-header apui-col-header-menu'></div>"),s.options.checkbox&&!s.hideCheckbox&&(i+=48),s.header.minWidth=i,s.loadData(s.dataSource)},this.renderTo=function(e){var t;s.fixedGrid?(e.css("display","flex"),t=s.fixedGrid.header.minWidth-15,s.jObject.css("width","calc(100% - "+t+"px"),s.jObject.css("overflow-x","auto"),s.jObject.css("border-left","1px solid #e0e0e0"),e.append(s.jObject),s.scrollGrid=new APCore.Widgets.APLockedGridContainer({renderTo:s.opts.renderTo,showFooter:!1,editable:!1,checkbox:!1,isScrollGrid:!0},[{columnTitle:" ",dataIndex:"_Custom_",width:"16px"}])):e.append(s.jObject),s.opts.isFixed?s.jObject.css("width","auto"):s.opts.isScrollGrid&&s.jObject.css("width","16px").css("max-width","16px").css("min-width","10px"),e[0].grid=s},this.renderRows=function(){s.rows=[],s.contentBody.html(""),s.processData||(s.processData=[]),s.gridParent&&(s.processData=s.gridParent.processData);var e=s.contentBody;if(0<s.processData.length)for(var t=0;t<s.processData.length;t++){var i=s.processData[t],i=new APCore.Widgets.APLockedGridRow(s.opts,s.columns,i,s);s.rows.push(i),e.append(i.jObject)}(s.fixedGrid||s.opts.isFixed)&&(s.contentBody.css("min-width",s.header.minWidth+"px"),s.content.css("min-width",s.header.minWidth+"px"),s.header.css("min-width",s.header.minWidth+"px")),s.isParent&&(s.fixedGrid.dataSource=s.dataSource,s.fixedGrid.renderRows(),s.scrollGrid.dataSource=s.dataSource,s.scrollGrid.renderRows())},this.load=function(t){var e,i,n;s.contentBody.html(""),s.dataSource=[],r([]),s.fixedGrid&&(s.fixedGrid.contentBody.html(""),s.fixedGrid.dataSource=[]),s.scrollGrid&&(s.scrollGrid.contentBody.html(""),s.scrollGrid.dataSource=[]),s.isLoading=!0,s.opts.remote?("function"==typeof s.opts.beforeLoad&&s.opts.beforeLoad(s),e=s.filterParams||{},s.opts.navigatePage&&(n=s.getPagingParam(),e=$.extend(e,n)),s.sortField&&((n=[]).push({selector:s.sortField,desc:"DESC"==s.sortDirection}),e.Sort=APCore.Fn.serialize(n)),i=!0,n=function(e){i=!1,setTimeout(function(){s.isLoading=!1},200),e&&e.Success&&(""===s.opts.listDataKey?s.dataSource=e.Data:s.dataSource=e.Data[s.opts.listDataKey],""!==s.opts.totalCountKey&&(s.totalCountNumber=e.Data[s.opts.totalCountKey]),s.fixedGrid&&(s.fixedGrid.dataSource=s.dataSource,s.scrollGrid.dataSource=s.dataSource),o()),"function"==typeof t&&t(e,s.dataSource),(s.jObjectWrap||s.contentBody).find(".apui-fixed-grid-loading-mask").fadeOut(0,null,function(){$(this).remove()}),s.fireEvent("afterload",s.dataSource,s)},"GET"==s.opts.method?APCore.Fn.getService(s.opts.dataUrl,e,n):APCore.Fn.postService(s.opts.dataUrl,e,n),setTimeout(function(){var e,t;i&&(e="",t="rgba(255,255,255,.3)",(s.jObjectWrap?(s.jObjectWrap.find(".apui-fixed-grid-loading-mask").remove(),s.jObjectWrap.append("<div class='apui-fixed-grid-loading-mask' style='display:none'><p>"+e+"</p></div>"),s.jObjectWrap):(s.contentBody.find(".apui-fixed-grid-loading-mask").remove(),s.contentBody.append("<div class='apui-fixed-grid-loading-mask' style='display:none'><p>"+e+"</p></div>"),s.contentBody)).find(".apui-fixed-grid-loading-mask").css("background-color",t).show())},100)):delete s.dataSource},this.loadData=function(e){Array.isArray(e)&&(s.dataSource=e),Array.isArray(s.dataSource)&&o()},this.getPageDataClient=function(){var e=s.pageSize*(s.currentPage-1),t=s.pageSize+e;return s.dataSource.slice(e,t)},this.getPagingParam=function(){return{PageSize:s.pageSize||30,PageIndex:s.currentPage}},this.deleteRecord=function(t){var e=s.rows.filter(function(e){return e.data!=t||(e.jObject.slideUp(300,function(){e.jObject.remove(),e.destroy()}),!1)}),e=(s.rows=e,s.dataSource.filter(function(e){return e!==t}));s.dataSource=e,r(s.processData.filter(function(e){return e!==t})),e="delete",s.fireEvent("datachanged",e,t,s),0===s.rows.length?s.checkAllBox&&(s.setCheckAll(!1),s.checkAllBox.hide()):s.checkAllBox&&s.checkAllBox.show(),0===s.rows.length&&(s.setCheckAll(!1),s.checkAll)&&s.checkAll.hide(),i()},this.setCheckAll=function(t){s.checkAll&&(s.checkAll[0].checked=t,s.selectAll=t,s.rows.forEach(function(e){e.checkBox[0].checked=t,e.checked=t}))},this.onEvent=function(e,t){s.events||(s.events={}),delete s.events[e],s.events[e]=t},this.unbindEvent=function(e){return s.events||(s.events={}),delete s.events[e],s},this.fireEvent=function(e,t,i,n,o){s.events&&"function"==typeof s.events[e]&&setTimeout(s.events[e](t,i,n,o),0)},this.getSelectedRows=function(){return s.rows.filter(function(e){return e.checked})},this.getSelectedRecords=function(){return s.rows.filter(function(e){return e.checked}).map(function(e){return e.data})},this.getData=function(){return s.dataSource}}),APCore.Widgets.define("MultiSelect",function(){var c=this;this.default={area:$("body"),position:"right",data:null,menuWidth:"400px",menuMinHeight:"0px",onChange:null},this.curPage=0,this.pageLimit=10,this.constructor=function(e,t){c.updateOption(t),c.input=e,c.data=c.opts.data;t=c.input.parent();t.find(".apui-multi-select-box").remove(),t.addClass("apui-live-search-wrap"),c.input.addClass("input-search-box"),c.input.attr("readonly","readonly"),c.initMenu(),c.initAction()},this.setConfig=function(e,t){c.opts[e]=t},this.setRawValue=function(e){var t,i=e;_isFn(c.opts.getRawValue)&&(t=c.selectField.getSelectedData(),i=c.opts.getRawValue(t)),_isValue(i)||(i=e),c.input.val(i)},this.initAction=function(){c.input.unbind("click").on("click",function(e){_stopEvent(e),c.input.hasClass("disable")||c.showMenu()})},this.setValue=function(e,t){e?(t=e.split(t=t||",").map(function(e){return e.trim()}),c.selectField.setValue(t),c.setRawValue(e)):(c.selectField.setValue(null),c.setRawValue("")),c.currentValues=e},this.getValue=function(){return c.input.val()},this.hideMenu=function(){c.menu.hide()},this.showMenu=function(){var e,t,i,n,o,a,s,r;APCore.Widgets.hideAllPopups(c.menu),c.menu.is(":hidden")&&(c.menu.show(),e=c.input.coords(),250<(o=e.width)?o+="px":o="250px",c.menu.css("width",o),o=c.menu.coords(),t=e.height,i=e.width,n=o.height,o=o.width,a=(r=c.opts.area[0].getBoundingClientRect()).top,r.left,s=r.height,r=r.width,"left"===c.opts.position?r>o+e.left?c.menu.css("left",e.left):c.menu.css("left",r-o):c.menu.css("left",e.left+i-o),s+a>e.top+t+n?c.menu.css("top",e.top+t+4):c.menu.css("top",e.top-n-2))},this.initMenu=function(e){c.menu=$('<div class="apui-popup apui-multi-select-box  custom-scroll animated" style="display:none"></div>');(c.opts.area||$("body")).append(c.menu),c.opts.menuMinHeight&&c.menu.css("min-height",c.opts.menuMinHeight);var t=c.opts.resultMaxHeight||"400px";c.menu.css("max-height",t),c.menu.customHide=c.hideResult,c.menu[0].customHide=c.hideResult,c.menu.css("z-index","999999"),c.menu.css("position","fixed"),c.selectField=new APCore.Widgets.APSelectBox({renderTo:c.menu,data:c.data,direction:c.opts.direction||"vertical",column:c.opts.column||1,multiSelect:!0,type:"checkbox",defaultValue:[],valueField:c.opts.valueField||"Value",displayField:c.opts.displayField||"Display",onCheckChange:function(){var e=c.selectField.getValueArray();c.setRawValue(e.join("; ")),_isFn(c.opts.onChange)&&c.opts.onChange(e)}.bind(c)})},this.clearData=function(){c.input.val(""),c.selectField.setValue()}}),function(){"use strict";jQuery.fn.APMultiSelect=function(e){this.multiSelect=new APCore.Widgets.MultiSelect(this,e),this[0].multiSelect=this.multiSelect}}(),APCore.Widgets.define("APNotice",function(){var s=this;this.default={renderTo:$("body"),onClick:null,afterHide:null,onClose:null,showIcon:!0,cls:""},this.position={top:0,top_left:1,top_right:2,bottom:3,bottom_left:4,bottom_right:5},this.type={Success:0,Error:1,Loading:2,Info:3,Warning:4},this.icon={Success:"apui-icon-notice-completed",Error:"apui-icon-notice-error",Loading:"apui-icon-notice-loading",Info:"apui-icon-notice-info",Warning:"apui-icon-notice-warning"},this.initDom=function(){s.createDom()},this.createDom=function(){s.opts.renderTo.find(".apui-notice-container").remove(),s.jObject=$(['<div class="apui-notice-container" style="display: none">','<div class="apui-notice-content">','<div class="apui-notice-left"></div>','<div class="apui-notice-icon"></div>','<div class="apui-notice-des"></div>','<div class="apui-notice-right"><i class="apui-icon apui-icon-16 apui-icon-close"></i></div>',"</div><div>"].join("")),s.jLeft=s.jObject.find(".apui-notice-left").first(),s.jIcon=s.jObject.find(".apui-notice-icon").first(),s.jDes=s.jObject.find(".apui-notice-des").first(),s.content=s.jObject.find(".apui-notice-content").first(),s.btnClose=s.jObject.find(".apui-icon-close").first(),s.opts.showIcon||s.jIcon.hide(),s.jObject.addClass(s.opts.cls),s.opts.renderTo.append(s.jObject),s.initAction()},this.initAction=function(){s.jObject.unbind("click").on("click",function(e){"function"==typeof s.opts.onClick&&s.opts.onClick(e)}),s.btnClose.unbind("click").on("click",s.close.bind(s))},this.update=function(e,t){s.jDes.html(t);var i="",n="rgba(13, 206, 236, 1)",o="rgba(13, 206, 236, 0.1)";switch(e){case s.type.Success:i=s.icon.Success,n="rgba(76, 217, 100, 1)",o="rgba(76, 217, 100, 0.1)";break;case s.type.Error:i=s.icon.Error,n="rgba(255, 85, 0, 1)",o="rgba(255, 85, 0, .1)";break;case s.type.Warning:i=s.icon.Warning,n="rgba(253, 154, 0, 1)",o="rgba(253, 154, 0, .1)";break;case s.type.Loading:i=s.icon.Loading,n="rgba(13, 206, 236, 1)",o="rgba(13, 206, 236, .1)";break;default:s.type.Info;i=s.icon.Info,n="rgba(33, 150, 243, 1)",o="rgba(33, 150, 243, .1)"}s.jLeft.css("background",n),s.content.css("background-color",o),s.opts.showIcon&&s.jIcon.html('<i class="apui-icon apui-icon-16 {0}"></i>'.format(i))},this.showSuccess=function(e,t){s.show(s.type.Success,e,s.position.top,t)},this.showError=function(e,t){s.show(s.type.Error,e,s.position.top,t)},this.showWarning=function(e,t){s.show(s.type.Warning,e,s.position.top,t)},this.showInfo=function(e,t){s.show(s.type.Info,e,s.position.top,t)},this.showLoading=function(e,t){s.show(s.type.Loading,e,s.position.top,t)},this.show=function(e,t,i,n){s.createDom();var o="top",a="";switch(i=_isValue(i)?i:s.position.top){case s.position.top_left:o="top",a="left";break;case s.position.top_right:o="top",a="right";break;case s.position.bottom:o="bottom",a="";break;case s.position.bottom_left:o="bottom",a="left";break;case s.position.bottom_right:o="bottom",a="right"}s.p1=o,s.p2=a,_isValue(e)&&_isValue(t)&&s.update(e,t),s.jObject.show(),s.jObject.css(s.p1,"24px"),_isValue(s.p2)?(s.jObject.css(s.p2,"24px"),s.jObject.removeClass("notice-center")):s.jObject.addClass("notice-center"),s.currentTimeout&&clearTimeout(s.currentTimeout),n&&(s.currentTimeout=setTimeout(s.hide,1e3*("number"==typeof n?n:3)))},this.hide=function(){s.jObject.remove(),"function"==typeof s.opts.afterHide&&s.opts.afterHide()},this.close=function(){"function"==typeof s.opts.onClose&&s.opts.onClose(),s.hide()}}),APCore.Widgets.define("APOptionsBox",function(){var r=this;function t(e){(_isValue(e)?(r.jObject.find("input[op='"+e+"']").attr("readonly",!0).attr("disabled",!0).addClass("disable"),r.jObject.find(".checkmark[op='"+e+"']")):(r.jObject.find("input").attr("readonly",!0).attr("disabled",!0).addClass("disable"),r.jObject.find(".checkmark"))).addClass("disable")}function i(e){(_isValue(e)?(r.jObject.find("input[op='"+e+"']").attr("readonly",!1).attr("disabled",!1).removeClass("disable"),r.jObject.find(".checkmark[op='"+e+"']")):(r.jObject.find("input").attr("readonly",!1).attr("disabled",!1).removeClass("disable"),r.jObject.find(".checkmark"))).removeClass("disable")}this.items=[],this.configs={renderTo:null,direction:"horizontal",data:[],defaultData:null,type:"checkbox",onCheckChange:null},this.initDom=function(){r.createDom(),r.initAction()},this.createDom=function(){r.jObject=$("<div class='apui-select-box apui-select-type'></div>");var e=r.opts.direction,t="",i="0";if("horizontal"===e?(t="horizontal",i=r.opts.margin||"24px"):t="vertical",r.jObject.addClass(t),0<r.opts.data.length){for(var n=r.opts.data,t=r.opts.defaultValue,o=0;o<n.length;o++){var a=n[o],s=null;(s=$(["<div class='apui-select-box-item'><label class='apui-checkbox'><input type='checkbox' /><span class='checkmark'></span><span class='caption apui-ellipsis'>",a.Display,"</span></label></div>"].join(""))).Name=a.Name,s.jCheck=s.find("input").first(),s.checked=s.jCheck[0].checked,s.find("input").attr("op",a.Name),s.find(".checkmark").attr("op",a.Name),r.items.push(s),r.jObject.append(s),e===r.HORIZONTAL&&o<n.length-1&&r.jObject.append("<div style='width: {0}'></div>".format(i))}r.setValue(t)}r.opts.renderTo.append(r.jObject)},this.disable=function(e){Array.isArray(e)?0<e.length&&e.forEach(function(e){t(e)}):_isValue(e)&&"string"==typeof e?t(e):t()},this.enable=function(e){Array.isArray(e)?0<e.length&&e.forEach(function(e){i(e)}):_isValue(e)&&"string"==typeof e?i(e):i()},this.getValue=function(){var t={};return r.items.forEach(function(e){t[e.Name]=!!e.checked}),t},this.hide=function(){r.jObject.hide()},this.show=function(){r.jObject.show()},this.setValue=function(t){t&&0<Object.keys(t).length?r.items.forEach(function(e){t[e.Name]?r.setChecked(e,!0):r.setChecked(e,!1)}):r.items.forEach(function(e){r.setChecked(e,!1)})},this.setChecked=function(e,t){e.checked=t,e.jCheck[0].checked=t},this.initAction=function(){0<r.items.length&&r.items.forEach(function(i){i.unbind("change").on("change",function(e){var t;(t=i).checked=t.jCheck[0].checked,"function"==typeof r.opts.onCheckChange&&r.opts.onCheckChange(t,t.checked,t.Name,r)})})}}),APCore.Widgets.define("APPagination",function(){var n=this;function e(e){e?n.jNext.addClass("disable"):n.jNext.removeClass("disable")}function t(e){e?n.jBack.addClass("disable"):n.jBack.removeClass("disable")}this.limit=10,this.default={renderTo:$("body"),onActivePage:null,default:1,totalTemplate:"Tổng số: <b>{0}</b>"},this.constructor=function(e){n.opts=$.extend(n.default,e),n.limit=n.opts.limit||10,n.total=0,n.numberPages=1,n.currentPage=n.opts.default||1,n.createDom(),n.initAction()},this.createDom=function(){n.jObject=$(`<div class='apui-page-nav apui-p-n'>
                <div objName='jTotal' class='apui-page-nav-total apui-flex-1'></div>
                <div objName='jNavContainer' class='apui-page-right'>
                    <div  objName='jBack' class='apui-page-prev icon  icon-prev-page'></div>
                    <div objName='jItems' class='apui-page-items amis-flex'></div>
                    <div objName='jNext' class='apui-page-next icon  icon-next-page'></div> 
                </div>
            </div>`),n.getObjects(n.jObject),n.opts.renderTo.append(n.jObject)},this.update=function(e,t,i){n.total=e,n.numberPages=Math.ceil(e/n.limit),e=e,_isValue(e)?n.jTotal.html(n.opts.totalTemplate.format(e)):n.jTotal.html(""),n.currentPage=t||n.currentPage,n.renderItems(n.numberPages)},this.renderItems=function(e){if(n.numberPages=e||n.numberPages,n.jItems.html(""),(!n.numberPage||n.numberPage<1)&&(n.numberPage=1),n.currentPage=n.currentPage||1,n.numberPages<10)for(var t=1;t<=n.numberPages;t++){var i=n._createItem(t);n.jItems.append(i)}else n.jItems.html(["<div class='apui-page-item' index='1'>1</div>","<div class='apui-page-item-more first'>...</div>","<div class='apui-page-item' pos='1'></div>","<div class='apui-page-item' pos='2'></div>","<div class='apui-page-item' pos='3'></div>","<div class='apui-page-item' pos='4'></div>","<div class='apui-page-item-more last'>...</div>","<div class='apui-page-item' index='",n.numberPages,"'>",n.numberPages,"</div>"].join("")),n.posArr=n.jItems.find("[pos]").toArray();n.activePage(n.currentPage,!0)},this.updateItemsByPage=function(){if(5<n.currentPage&&n.currentPage==n.numberPages){n.jItems.find(".first").show();for(let e=1;e<=4;e++)$(n.posArr[4-e]).text(n.currentPage-e).attr("index",n.currentPage-e)}else if(5<n.currentPage&&n.currentPage<n.numberPages){n.jItems.find(".first").show();for(let e=1;e<=4;e++)$(n.posArr[4-e]).text(n.currentPage-e+1).attr("index",n.currentPage-e+1)}else if(n.currentPage<=5){n.jItems.find(".first").hide();for(let e=1;e<=4;e++)$(n.posArr[e-1]).text(e+1).attr("index",e+1)}n.currentPage<n.numberPages-1?n.jItems.find(".last").show():n.jItems.find(".last").hide()},this._createItem=function(e){var t=$("<div class='apui-page-item'>"+e+"</div>");return t.attr("index",e),t},this.refreshNextBack=function(){1==n.numberPages?(e(!0),t(!0)):1==n.currentPage?(e(!1),t(!0)):(n.currentPage==n.numberPages?e(!0):e(!1),t(!1))},this.activePage=function(e,t){(e=parseInt(e))<1?e=1:e>n.numberPages&&(e=n.currentPage),n.currentPage=e,10<=n.numberPages&&n.updateItemsByPage();e=n.jItems.find(".apui-page-item[index='"+n.currentPage+"']").first();n.jItems.find(".apui-page-item.active").removeClass("active"),e.addClass("active"),n.refreshNextBack(),t||"function"!=typeof n.opts.onPageActive||n.opts.onPageActive(n.currentPage,n)},this.initAction=function(){n.jObject.unbind("click").on("click",".apui-page-item",function(e){_stopEvent(e);e=$(e.currentTarget).attr("index");n.activePage(e)}.bind(n)),n.jObject.on("click",".apui-page-next",function(e){n.activePage(n.currentPage+1)}.bind(n)),n.jObject.on("click",".apui-page-prev",function(e){n.activePage(n.currentPage-1)}.bind(n))}}),APCore.Widgets.define("PopupClass",function(){var s=this;this.default={renderTo:$("body"),buttons:[{cls:"apui-btn-default apui-popup-cancel-btn",text:"Cancel",name:"cancel"},{cls:"apui-popup-btn apui-btn-primary apui-popup-save-btn",text:"Save",name:"save"}]},this.initDom=function(){s.renderTo=s.opts.renderTo,s.createDom(),s.initAction()},this.getTemplate=function(){return"<div></div>"},this.createDom=function(){s.jObject=$(`<div class="apui-popup-mask"  style="display:none" tabindex="0">
                <div objName='popup' class="apui-popup-body apui-drag-moving animated fadeIn" style="min-width:200px;">
                    <i objName='closeBtn' class="apui-icon apui-icon-16 apui-icon-close"></i>
                    <div class="apui-popup-header">
                        <div objName='popupTitle' class="apui-popup-title"></div>
                    </div>
                </div>
            </div>`),s.getObjects(s.jObject),s.opts.width?(e=parseInt(config.width)+"px",s.popup.css("width",e)):s.popup.css("width","400px"),config.height&&"number"==typeof config.height?s.popup.css("height",config.height+"px"):config.height&&"string"==typeof config.height&&s.popup.css("height","180px"),s.popup.css("position","absolute"),s.content=$(s.getTemplate()),s.content.addClass("apui-popup-content"),s.popup.append(s.content);var e,t=s.opts.buttons;if(t&&0<t.length){s.footer=$('<div class="apui-popup-footer"><div class="apui-flex-1 apui-drag-moving"></div>');function i(e){e=$(e.currentTarget);"function"==typeof s[e.attr("name")+"ClickFn"]&&s[e.attr("name")+"ClickFn"](e),"function"==typeof e.clickFn&&e.clickFn(e)}for(var n=0;n<t.length;n++){var o=t[n],a=$("<div></div>").text(o.text).addClass(o.cls.split(",").join(" ")).attr("name",o.name);a.data("btn",o),a.on("click",i.bind(s)),s.footer.append(a)}s.popup.append(s.footer)}s.opts.title&&s.setTitle(s.opts.title),s.renderTo.append(s.jObject)},this.initAction=function(){s.closeBtn.unbind("click").on("click",function(e){e.stopPropagation(),e.preventDefault(),s.hide()}),s.popup.enableDrag(s.popup[0],function(){APCore.Widgets.hideAllPopups(s.popup)}.bind(s)),s.jObject.keydown(function(e){27==e.which&&(_stopEvent(e),s.hide())})},this.hide=function(){s.isShow=!1,APCore.Widgets.hideAllPopups(),s.jObject.slideOut(30,function(){"function"==typeof s.opts.afterHide&&s.opts.afterHide(),s.afterHide()})},this.show=function(){s.jObject.fadeIn(30,function(){s.isShow=!0,s.opts.position&&s.opts.position.top?s.popup.css("top",s.opts.position.top):s.popup.css("top",window.innerHeight/2-s.popup.height()/2),s.opts.position&&s.opts.position.left?s.popup.css("left",s.opts.position.left):s.popup.css("left",window.innerWidth/2-s.popup.width()/2),s.jObject.focus()})},this.afterHide=function(){},this.setTitle=function(e){s.popupTitle.html(e)}}),APCore.Widgets.define("PreviewBox",function(){var s=this;function t(e){s.jFileName.text(e.FileName);var t,i,n,o,a=[];switch(e.UploadBy&&a.push("Tải lên bởi: "+e.UploadBy),e.UploadDate&&a.push("Ngày tải lên: "+APCore.Fn.Date.formatDate(e.UploadDate)),e.FileSize&&a.push("Dung lượng: "+APCore.Fn.getFileSizeUnit(e.FileSize)),s.jFileInfo.text(a.join("   |   ")),e.FileType){case"pdf":n=e,(o=$("<iframe class='apui-preview-area apui-preview-pdf'></iframe>")).attr("src",n.URL),s.jContent.html(o);break;case"office":n=e,o=$("<iframe class='apui-preview-area apui-preview-office'></iframe>"),n="https://view.officeapps.live.com/op/embed.aspx?src="+encodeURIComponent(n.URL),o.attr("src",n),s.jContent.html(o);break;case"image":t=e,(i=$("<div class='apui-preview-area'><img class='apui-preview-image'/></div>")).find("img").attr("src",t.URL),s.jContent.addClass("apui-preview-bg-img"),s.jContent.html(i);break;default:t=$("<div class='apui-preview-area apui-preview-default'>Không thể mở bản xem trước</div>"),s.jContent.html(t)}}this.default={renderTo:$("body")},this.initDom=function(){s.renderTo=s.opts.renderTo,s.createDom(),s.initAction()},this.getTemplate=function(){return"<div></div>"},this.createDom=function(){s.jObject=$(`<div class="apui-preview-mask"  style="display:none" tabindex="0">
                <div objName='popup' class="apui-preview-body">
                    <div class="apui-preview-header">
                        <div class="apui-preview-title apui-flex-1">
                            <div objName='jFileName' class="apui-preview-filename"></div>
                            <div objName='jFileInfo' class="apui-preview-fileinfo"></div>
                        </div>
                        <div objName='jActions' class="apui-preview-action">
                            <div objName='jDownload' class='apui-preview-download'>Download</div>
                            <i objName='closeBtn' class="apui-icon apui-icon-16 apui-icon-close-white icon-preview-close"></i>
                        </div>
                    </div>
                    <div objName="jContent" class="apui-preview-content"></div>
                </div>
            </div>`),s.getObjects(s.jObject),s.renderTo.append(s.jObject)},this.initAction=function(){s.closeBtn.unbind("click").on("click",function(e){_stopEvent(e),s.hide()}),s.jDownload.unbind("click").on("click",function(e){var i,t;_stopEvent(e),s.stopDownload||(_isFn(s.fileConfig.Download)?s.fileConfig.Download(s.fileConfig):(e=s.fileConfig.Download,i=s.fileConfig.FileName,(t=new XMLHttpRequest).open("GET",e,!0),t.responseType="blob",t.onload=function(){var e=(window.URL||window.webkitURL).createObjectURL(this.response),t=document.createElement("a");t.href=e,t.download=i,document.body.appendChild(t),t.click(),document.body.removeChild(t),s.stopDownload=!1},t.send(),s.stopDownload=!0))}),s.jObject.keydown(function(e){27==e.which&&(_stopEvent(e),s.hide())})},this.show=function(e){e.Download||(e.Download=e.URL),s.fileConfig=e,t(e),s.jObject.fadeIn(30,function(){s.isShow=!0,s.jObject.focus()})},this.hide=function(){s.isShow=!1,s.jObject.fadeOut(100)}}),APCore.Widgets.define("SearchInput",function(){var n=this;function i(e){_isFn(n.opts.afterChange)&&n.opts.afterChange(n.getValue(),n)}this.default={renderTo:$("body"),onFocus:null,onEnter:"",onBlur:"",onKeyPress:"",name:"",placeholder:"Tìm kiếm",cls:"",value:"",disable:!1},this.initDom=function(e){n.createDom(),n.initAction()},this.createDom=function(){n.jObject=$(["<div class='apui-search-input'>","<input type='text' autocomplete='off'>","</div>"].join("")),n.input=n.jObject.find("input").first(),n.opts.cls&&n.jObject.addClass(n.opts.cls),n.opts.css&&n.jObject.css(n.opts.css),n.opts.renderTo&&n.opts.renderTo.append(n.jObject),n.opts.placeholder&&n.input.attr("placeholder",n.opts.placeholder)},this.getValue=function(e){return e?n.input.val().trim():n.input.val()},this.focus=function(){n.input.focus()},this.blur=function(){n.input.blur()},this.setPlaceholder=function(e){n.input.attr("placeholder",e)},this.setValue=function(e,t){n.input.val(e),t&&i()},this.initAction=function(){n.input.change(i.bind(n)),n.keyEvent(n.input,{onKeyPress:function(e,t,i){_isFn(n.opts.onKeyPress)&&n.opts.onKeyPress(n.getValue(),n)}.bind(n),onEnter:function(e,t,i){_isFn(n.opts.onEnter)&&n.opts.onEnter(n.getValue(),n)}.bind(n)}),n.input.on("blur",function(e){_isFn(n.opts.onBlur)&&n.opts.onBlur(n.getValue(),n)}.bind(n))}}),$.fn.APCheckbox=function(e){var t=$(this);(e=e||{}).renderTo=t,new APCore.Widgets.APCheckbox(e)},APCore.Widgets.define("APSelectBox",function(){var l=this;this.items=[],this.default={renderTo:null,data:[],defaultValue:null,type:"radio",multiSelect:!1,valueField:"Value",displayField:"Display",groupName:"ap-group",direction:"vertical",onCheckChange:null},this.initDom=function(){l.createDom(),l.initAction()},this.initAction=function(){0<l.items.length&&l.items.forEach(function(i){i.unbind("change").on("change",function(e){var t=i;t.checked=t.jCheck[0].checked,!l.opts.multiSelect&&t.checked&&l.items.forEach(function(e){e.Value!==t.Value&&l.setChecked(e,!1)}),"function"==typeof l.opts.onCheckChange&&l.opts.onCheckChange(t,t.checked,t.Value,l)})})},this.createDom=function(){l.jObject=$("<div class='apui-select-box apui-select-type'></div>");var e=l.opts.direction,t="",i="0",n=0;if("table"===e?(t="table",a=l.opts.column||1,(n=Math.round(100/a))>Math.round(100/a)&&(n-=1),l.jObject.css({display:"flex","flex-wrap":"wrap",width:"100%"})):"horizontal"===e?(t="horizontal",i=l.opts.margin||"24px"):t="vertical",l.jObject.addClass(t),0<l.opts.data.length){for(var o=l.opts.data.map(function(e){var t={Value:e[l.opts.valueField||"Value"],Display:e[l.opts.displayField||"Display"],Data:e};return _isValue(e.Fixed)&&(t.Fixed=!!e.Fixed),t}),a=l.opts.defaultValue||"0",s=0;s<o.length;s++){var r=o[s],c=null;(c="radio"===l.opts.type?$(['<div class="apui-select-box-item"><label class="apui-radio"><input type="radio"  name="',l.opts.groupName,'"><span class="checkmark"></span><span class="caption apui-ellipsis"></span></label></div>'].join("")):$(["<div class='apui-select-box-item'><label class='apui-checkbox'><input type='checkbox' /><span class='checkmark'></span><span class='caption apui-ellipsis'></span></label></div>"].join(""))).find(".caption").text(r.Display),0<n&&c.css("width",n+"%"),c.attr("title",r.Display),c.Value=r.Value,c.jCheck=c.find("input").first(),c.checked=c.jCheck[0].checked,c.data("Data",r.Data),_isValue(r.Fixed)&&(c.addClass("fixed"),l.setChecked(c,!!r.Fixed),c.jCheck.attr("readonly","readonly").addClass("disable").attr("disabled","disabled"),c.isFixed=!0),l.items.push(c),l.jObject.append(c),e===l.HORIZONTAL&&s<o.length-1&&l.jObject.append("<div style='width: {0}'></div>".format(i))}l.setValue(a)}l.opts.renderTo.append(l.jObject)},this.getValue=function(e){var t;return e=_isValue(e)?e:",",0<l.items.length?(t=[],l.items.forEach(function(e){e.checked&&t.push(e.Value)}),l.opts.multiSelect?t.join(e):1==t.length?t[0]:null):null},this.getValueArray=function(){var t;return 0<l.items.length?(t=[],l.items.forEach(function(e){e.checked&&t.push(e.Value)}),t):[]},this.getData=function(){var t={};return l.items.forEach(function(e){t[e.Value]=!!e.checked}),t},this.getSelectedData=function(){var t;return 0<l.items.length?(t=[],l.items.forEach(function(e){e.checked&&t.push(e.data("Data"))}),l.opts.multiSelect?t:0<t.length?t[0]:null):null},this.getSelectedItems=function(){var t;return 0<l.items.length?(t=[],l.items.forEach(function(e){e.checked&&t.push(e)}),l.opts.multiSelect?t:0<t.length?t[0]:null):null},this.setValue=function(e){var i=[];Array.isArray(e)?i=e:"string"==typeof e?i=e.split(","):i.push(e),Array.isArray(i)&&0<i.length?l.opts.multiSelect?l.opts.multiSelect&&l.items.forEach(function(t){0<i.filter(function(e){return e===t.Value}).length?l.setChecked(t,!0):l.setChecked(t,!1)}):l.items.forEach(function(e){e.Value==i[0]?l.setChecked(e,!0):l.setChecked(e,!1)}):l.items.forEach(function(e){l.setChecked(e,!1)})},this.setChecked=function(e,t){e.isFixed||(e.checked=t,e.jCheck[0].checked=t)}}),APCore.Widgets.define("SlidePage",function(){var n=this;function e(e){n.disableSlide||e.target.classList.contains("slide")&&(e.originalEvent.touches&&(e=e.originalEvent.touches[0]),0==n.sliding)&&(n.renderTo.removeClass("is-moving"),n.sliding=1,n.startClientX=e.clientX-n.renderTo.offset().left)}function t(e){e.preventDefault();var t,i=(e=e.originalEvent.touches?e.originalEvent.touches[0]:e).clientX-n.renderTo.offset().left-n.startClientX;1==n.sliding&&0!=i&&(n.sliding=2,n.startPixelOffset=n.pixelOffset,n.renderTo.addClass("is-moving")),2==n.sliding&&(n.renderTo.addClass("is-moving"),e.clientX>n.renderTo.offset().left+n.renderTo.width()||e.clientX<n.renderTo.offset().left?n.pixelOffset=0:(t=1,(0==n.currentSlide&&e.clientX-n.renderTo.offset().left>n.startClientX||n.currentSlide==n.numberSlide-1&&e.clientX-n.renderTo.offset().left<n.startClientX)&&(t=3),n.pixelOffset=n.startPixelOffset+i/t),n.container.css("transform","translateX("+n.pixelOffset+"px").removeClass("apui-slider-animate"))}function i(e){2!=n.sliding&&1!=n.sliding||(n.sliding=0,setTimeout(function(){n.renderTo.removeClass("is-moving")},1e3),n.currentSlide=n.pixelOffset<n.startPixelOffset?n.currentSlide+1:n.currentSlide-1,n.currentSlide=Math.min(Math.max(n.currentSlide,0),n.numberSlide-1),n.pixelOffset=n.currentSlide*-n.renderTo.width(),$("#temp").remove(),$('<style id="temp">.apui-slides.apui-slider-animate{transform:translateX('+n.pixelOffset+"px)}</style>").appendTo("head"),n.container.addClass("apui-slider-animate").css("transform",""),o(),"function"==typeof n.opts.onActivePage&&n.opts.onActivePage(n.slides[n.currentSlide],n.currentSlide),Math.abs(e.clientX-n.startClientX)<4&&"function"==typeof n.opts.afterClick&&n.opts.afterClick())}function o(){var e;n.container.find(".slide.active").removeClass("active"),n.slides[n.currentSlide]&&n.slides[n.currentSlide].addClass("active"),n.numberSlide<2?n.navPanel.hide():n.navPanel.show(),n.navPanel.find(".nav-item").removeClass("active"),n.navPanel.find(".nav-item[page-num='"+n.currentSlide+"']").addClass("active"),n.opts.showNextBack&&(e=n.renderTo.find(".apui-slide-prev"),0<n.currentSlide?e.show():e.hide(),e=n.renderTo.find(".apui-slide-next"),n.currentSlide<n.numberSlide-1?e.show():e.hide())}this.sliding=0,this.startClientX=0,this.startPixelOffset=0,this.pixelOffset=0,this.currentSlide=0,this.default={renderTo:$("body"),numberSlide:1,slideStyle:"background-color: #e0e6e8",showNav:!0,showNextBack:!1,disableWheel:!1,height:"520px",afterClick:null,wrap:$(document),onActivePage:null},this.initDom=function(){n.renderTo=$(n.opts.renderTo),n.renderTo.addClass("apui-slider-container custom-scroll"),n.numberSlide=n.opts.numberSlide,n.wrap=n.opts.wrap,n.touchSelector=".slide",n.createDom(),n.initAction()},this.createDom=function(){n.slides=[],n.slideELs=[],n.container=$("<div class='apui-slides apui-slider-animate'></div>"),n.opts.height&&n.container.css("height",n.opts.height),n.containerEl=n.container[0],n.renderTo.append(n.container),n.opts.showNav&&(n.container.addClass("show-nav"),n.renderTo.append("<div class='apui-slide-nav'><div class='apui-flex-1'></div><div class='nav-pages'></div><div class='apui-flex-1'></div></div>"),n.navPanel=n.renderTo.find(".nav-pages").first()),n.renderSlide(n.numberSlide),n.opts.showNextBack&&n.renderTo.append("<div class='apui-slide-prev'></div><div class='apui-slide-next'></div>")},this.initAction=function(){n.container.on("mousedown touchstart",n.touchSelector,e),n.container.on("mouseup touchend",n.touchSelector,i),n.container.on("mousemove touchmove",n.touchSelector,t),n.container.on("mouseleave",i),$(window).on("resize.adp",function(){n.activePage(n.currentSlide)}),n.opts.showNextBack&&(n.renderTo.find(".apui-slide-prev").unbind("click").on("click",function(e){0<n.currentSlide&&(n.currentSlide=n.currentSlide-1,n.activePage(n.currentSlide))}),n.renderTo.find(".apui-slide-next").unbind("click").on("click",function(e){n.currentSlide<n.numberSlide-1&&(n.currentSlide=n.currentSlide+1,n.activePage(n.currentSlide))})),n.opts.disableWheel||n.container[0].addEventListener("wheel",function(e){var t;n.disableSlide||(_stopEvent(e),0==n.sliding&&!n.stopWheel&&(15<=Math.abs(e.deltaX)||15<=Math.abs(e.deltaY))&&(n.stopWheel=!0,t=e.deltaX,e=e.deltaY,135<=(e=(Math.atan2(e,t)*(180/Math.PI)+360)%360)&&e<=315?0<n.currentSlide&&(n.currentSlide=n.currentSlide-1):n.currentSlide<n.numberSlide-1&&(n.currentSlide=n.currentSlide+1),n.activePage(n.currentSlide)))})},this.renderSlide=function(e){n.slides.length=0,n.slideELs.length=0,n.container.html(""),n.numberSlide=e,n.sliding=0,n.startClientX=0,n.startPixelOffset=0,n.pixelOffset=0,n.currentSlide=0,n.container.css("transform","translateX("+n.pixelOffset+"px").removeClass("apui-slider-animate"),n.navPanel&&n.navPanel.html("");for(var t=0;t<e;t++){var i=$("<div class='slide' style:'"+n.opts.slideStyle+"'></div>");i.attr("page",t),n.container.append(i),n.slides.push(i),n.slideELs.push(i[0]),n.navPanel&&((i=$("<div class='nav-item'></div>")).attr("page-num",t),n.navPanel.append(i))}o(),n.navPanel&&n.navPanel.unbind("click").on("click",".nav-item",function(e){var t=$(this).attr("page-num");n.activePage(t)})},this.setDisableSlide=function(){n.disableSlide=!0},this.setEnableSlide=function(){n.disableSlide=!1},this.activePage=function(e){n.renderTo.addClass("is-moving"),n.currentSlide=parseInt(e),n.pixelOffset=n.currentSlide*-n.renderTo.width(),$("#temp").remove(),$('<style id="temp">.apui-slides.apui-slider-animate{transform:translateX('+n.pixelOffset+"px)}</style>").appendTo("head"),n.container.addClass("apui-slider-animate").css("transform",""),n.sliding=0,o(),setTimeout(function(){n.stopWheel=!1,n.renderTo.removeClass("is-moving")},500),"function"==typeof n.opts.onActivePage&&n.opts.onActivePage(n.slides[n.currentSlide],n.currentSlide)}}),APCore.Widgets.define("TabPanel",function(){var i=this;this.default={renderTo:$("body"),name:"",cls:"",disable:!1},this.initDom=function(e){i.createDom(),i.initAction()},this.getPanel=function(e){return i.panels[e]},this.createDom=function(){i.jObject=$("<div class='apui-tabpanel-container'></div>"),i.jHeader=$("<div class='apui-tabpanel-header'></div>"),i.jBody=$("  <div class='apui-tabpanel-body  custom-scroll apui-flex-1'></div>"),i.jObject.append(i.jHeader).append(i.jBody),i.opts.cls&&i.jObject.addClass(i.opts.cls),i.opts.css&&i.jObject.css(i.opts.css),i.opts.renderTo&&i.opts.renderTo.append(i.jObject)},this.renderTabs=function(e){i.panels={},i.jHeader.html(""),i.jBody.html(""),e.forEach(function(e){i.createPanel(e)})},this.createPanel=function(e){var t=$("<div class='apui-tabpanel-header-item' tabname='"+e.name+"'>"+e.text+"</div>"),t=(i.jHeader.append(t),$("<div class='apui-tabpanel-item' panelname='"+e.name+"'>"));t.html(e.html),i.jBody.append(t),i.panels[e.name]=t},this.initAction=function(){i.jObject.on("click.apuipanel",".apui-tabpanel-header-item",function(e){e=$(e.currentTarget).attr("tabname").trim();i.activePanel(e)})},this.activeHeaderItem=function(e){let t=null;i.jObject.find(".apui-tabpanel-header-item.active").removeClass("active"),tabName="object"==typeof e?(t=e).attr("tabname"):(t=i.jObject.find(".apui-tabpanel-header-item[tabname='"+e+"']").first(),e),i.currentTab=t,i.currentTabName=tabName,i.currentTab.addClass("active")},this.activePanel=function(e){var t=i.beforeActiveTab(e);_isTrue(t)||(i.activeHeaderItem(e),i.jObject.find(".apui-tabpanel-item").hide().removeClass("active"),i.panels[e].addClass("active").show(),i.afterActivePanel(e))},this.beforeActiveTab=function(e){return!!_isFn(i.opts.beforeActive)&&i.opts.beforeActive(e,i.currentTab,i)},this.afterActivePanel=function(e){_isFn(i.opts.afterActive)&&i.opts.afterActive(e,i.currentTab,i)}}),APCore.Widgets.define("TextEditor",function(){var A=this;function D(e){var t=APCore.Fn.DOM.fixedOffset($(A.editor.getElement())),i=$(A.editor.openPopup()),n=i.outerWidth(),o=t.left+e.left+parseInt(e.width/2)-parseInt(n/2),t=t.top+e.top+e.height,e=$(window).width(),e=(e-1<o+n&&(o=e-n-1),S()?0:$(window).scrollLeft());i.css({left:(o=o<e+1?e+1:o)+"px",top:t+"px",overflow:"visible"})}function a(e){return e?A.editor.getSelectedHTML()?A.editor.insertLink(e):(e='<a href="'+e.replace(/"/,"&quot;")+'">'+e+"</a>",A.editor.insertHTML(e)):A.editor}function s(e,t){var t='<img id="apuitexteditor-insert-image" src="" alt=""'+(t?' title="'+t.replace(/"/,"&quot;")+'"':"")+" />",i=(A.editor.insertHTML(t).closePopup().collapseSelection(),$("#apuitexteditor-insert-image").removeAttr("id")),n=A.opts.maxImageSize||null;i.attr("src",e),n&&i.css({maxWidth:n[0]+"px",maxHeight:n[1]+"px"}).load(function(){i.css({maxWidth:"",maxHeight:""});var e=i.width(),t=i.height();(e>n[0]||t>n[1])&&(e/t>n[0]/n[1]?(t=parseInt(t/e*n[0]),e=n[0]):(e=parseInt(e/t*n[1]),t=n[1]),i.attr("width",e).attr("height",t))})}function M(t){var e=l(A._btnSubmit),i=A.resource.PlaceholderUrl||null,n=t?t.attr("href"):"",o=$('<input type="text" class="apuitexteditor-input" value="'+n+'"'+(i?' placeholder="'+i+'"':"")+" />"),n=(o.keypress(function(e){if(10==e.which||13==e.which)if(t)t.attr("href",o.val()),A.editor.closePopup().collapseSelection();else try{a(o.val()).closePopup().collapseSelection()}catch(e){A.editor.closePopup()}}),e.click(function(e){return(t?(t.attr("href",o.val()),A.editor):a(o.val())).closePopup().collapseSelection(),_stopEvent(e),!1})),i=$('<div class="apuitexteditor-toolbar-form" unselectable="on"></div>');return i.append(o).append(n),i}function i(t){for(var e=$("<table/>").attr("cellpadding","0").attr("cellspacing","0").attr("unselectable","on"),i=1;i<15;++i){for(var n,o=$("<tr/>"),a=0;a<25;++a)n=24==a?"#"+(n=((n=Math.floor(255/13*(14-i)).toString(16)).length<2?"0":"")+n)+n+n:APCore.Fn.DOM.HSVtoRGB(a/24,i<=8?i/8:1,8<i?(16-i)/8:1),$("<td/>").addClass("apuitexteditor-toolbar-color").attr("title",n).attr("unselectable","on").css({backgroundColor:n}).click(function(){var e=this.title;return(t?A.editor.forecolor(e):A.editor.highlight(e)).closePopup().collapseSelection(),!1}).appendTo(o);e.append(o)}return e}function c(e,a){var t=A.opts.autoHide;switch(e){case"insertimage":return a?function(e){var t,i,n,o;a((t=$("<div/>").addClass("apuitexteditor-toolbar-form").attr("unselectable","on"),i=null,window.File&&window.FileReader&&window.FileList?i=$('<input type="file" />').attr("draggable","true").css({position:"absolute",left:0,top:0,width:"100%",height:"100%",opacity:0,cursor:"pointer"}).change(function(e){for(var t=e.target.files,i=0;i<t.length;++i)r(t[i],s.bind(A))}).on("dragover",function(e){return e.originalEvent.dataTransfer.dropEffect="copy",e.stopPropagation(),e.preventDefault(),!1}).on("drop",function(e){for(var t=e.originalEvent.dataTransfer.files,i=0;i<t.length;++i)r(t[i],s.bind(A));return e.stopPropagation(),e.preventDefault(),!1}):onImageUpload&&(n=$('<input type="file" />').css({position:"absolute",left:0,top:0,width:"100%",height:"100%",opacity:0,cursor:"pointer"}).change(function(e){onImageUpload.call(this,s.bind(A))}),i=$("<form/>").append(n)),i&&$("<div/>").addClass("apuitexteditor-browse").html(A.resource.DropFileClick).append(i).appendTo(t),n=l(A._btnSubmit),i=A.resource.PlaceholderUrl||null,o=$('<input type="text" value=""'+(i?' placeholder="'+i+'"':"")+" />").addClass("apuitexteditor-input").keypress(function(e){10!=e.which&&13!=e.which||s(o.val())}),i=n.click(function(e){return s(o.val()),_stopEvent(e),!1}),t.append($("<div/>").append(o).append(i)),t),e)}:null;case"insertlink":return a?function(e){a(M(),e)}:null;case"bold":return function(){A.editor.bold(),A.editor.closePopup().collapseSelection(),t&&A.editor.closePopup().collapseSelection()};case"italic":return function(){A.editor.italic()};case"underline":return function(){A.editor.underline()};case"strikethrough":return function(){A.editor.strikethrough()};case"forecolor":return a?function(e){a(i(!0),e)}:null;case"highlight":return a?function(e){a(i(!1),e)}:null;case"alignleft":return function(){A.editor.align("left")};case"aligncenter":return function(){A.editor.align("center")};case"alignright":return function(){A.editor.align("right")};case"alignjustify":return function(){A.editor.align("justify")};case"subscript":return function(){A.editor.subscript()};case"superscript":return function(){A.editor.superscript()};case"indent":return function(){A.editor.indent()};case"outdent":return function(){A.editor.indent(!0)};case"orderedList":return function(){A.editor.insertList(!0)};case"unorderedList":return function(){A.editor.insertList()};case"removeformat":return function(){A.editor.removeFormat().closePopup().collapseSelection()}}return null}function r(t,i){var e;t.type.match("image.*")&&((e=new FileReader).onload=function(e){e=e.target.result;"function"==typeof i&&i(e,t.name)},e.readAsDataURL(t))}function S(){var i=!1;return $(A.editor.getElement()).parents().each(function(e,t){if("fixed"==$(t).css("position"))return!(i=!0)}),i}function l(e){return $("<a/>").addClass("apuitexteditor-toolbar-icon").attr("href","#").attr("title",e.title).attr("unselectable","on").append(e.image)}function w(o,a,s,r){var e=A.opts.buttons;$.each(e,function(t,i){var e,n;!i||!1===a&&"showstatic"in i&&!i.showstatic||!0===a&&"showselection"in i&&!i.showselection||((n="click"in i?function(e){i.click($(e))}:"popup"in i?function(e){var t=s();!1!==i.popup(t,$(e),t)&&r(t,e)}:c(t,function(e,t){var i=s();i.append(e),r(i,t),i.find("input[type=text]:first").focus()}))?e=l(i).click(function(e){return n(e.currentTarget),c(t)&&A.editor.getElement().focus(),_stopEvent(e),!1}):i.html&&(e=$(i.html)),e&&o.append(e))})}function u(e,t){if("html"==e){if(void 0===t)return A.editor.getHTML();A.editor.setHTML(t)}else{if("selected-html"==e)return A.editor.getSelectedHTML();"close-popup"==e?A.editor.closePopup().collapseSelection():"forecolor"==e?A.editor.forecolor(t):"highlight"==e?A.editor.highlight(t):"format"==e?A.editor.format(t):"fontname"==e?A.editor.fontName(t):"fontsize"==e?A.editor.fontSize(t):"insertlink"==e?a(t):"insertimage"==e?A.editor.insertImage(t):"inserthtml"==e?A.editor.insertHTML(t):data.commands[e]&&data.commands[e](t)}}this.resource={SubmitTitle:"Submit",DropFileClick:"Drop image or click",PlaceholderUrl:"www.example.com"},this.buttonConfigs={},this._btnSubmit={title:this.resource.SubmitTitle,image:""},this.default={renderTo:null,css:null,disable:!1,classes:"",position:"selection",buttons:null,resource:{},mode:"full",buttonConfig:{},maxImageSize:[600,600]},this.initDom=function(){A.buttonConfigs=Object.assign({},APCore.Widgets.TextEditor.ButtonConfig),Object.assign(A.buttonConfigs,A.opts.buttonConfig),A.resource=$.extend(A.resource,A.opts.resource),A.opts.buttons||(A.opts.buttons=function(){var e=A.opts.position;let s=A.buttonConfigs;return{insertimage:!!s.insertimage&&{title:"Insert image",image:"",showselection:!1},insertlink:{title:"Insert link",image:""},fontname:!("bottom"==e||!s.fontname)&&{title:"Font",image:"",popup:function(e,t,i){var n=s.fontnamelist,o=(null==n&&(n={"Times New Roman":"Times New Roman",Arial:"Arial","Open San":"Open San",Tahoma:"Tahoma",Cambria:"Cambria","Arial Narrow":"Arial Narrow",Roboto:"Roboto"}),$("<div/>").addClass("apuitexteditor-toolbar-list font-name").attr("unselectable","on"));$.each(n,function(e,t){e=$("<a/>").attr("href","#").css("font-family",t).html(e).click(function(e){return u("fontname",t),u("close-popup"),e.stopPropagation(),e.preventDefault(),!1});o.append(e)}),e.append(o)}},fontsize:!("bottom"==e||!s.fontsize)&&{title:"Size",image:"",popup:function(e,t,i){if(null==(n=s.fontsizelist))for(var n={},o=10;o<=100;o++)n[o]=o;var a=$("<div/>").addClass("apuitexteditor-toolbar-list font-size").attr("unselectable","on");$.each(n,function(e,t){e=$("<a/>").attr("href","#").css("font-size","14px").html(e).click(function(e){return u("fontsize",t),u("close-popup"),e.stopPropagation(),e.preventDefault(),!1});a.append(e)}),e.append(a)}},bold:!!s.bold&&{title:"Bold (Ctrl+B)",image:"",hotkey:"b"},italic:!!s.italic&&{title:"Italic (Ctrl+I)",image:"",hotkey:"i"},underline:!!s.underline&&{title:"Underline (Ctrl+U)",image:"",hotkey:"u"},strikethrough:!!s.strikethrough&&{title:"Strikethrough (Ctrl+S)",image:"",hotkey:"s"},forecolor:!!s.forecolor&&{title:"Text color",image:""},highlight:!!s.highlight&&{title:"Background color",image:""},alignleft:!(!s.alignleft||"top-selection"!=e)&&{title:"Left",image:"",showselection:!1},aligncenter:!(!s.aligncenter||"top-selection"!=e)&&{title:"Center",image:"",showselection:!1},alignright:!(!s.alignright||"top-selection"!=e)&&{title:"Right",image:"",showselection:!1},alignjustify:!(!s.alignjustify||"top-selection"!=e)&&{title:"Justify",image:"",showselection:!1},indent:!(!s.indent||"top-selection"!=e)&&{title:"Indent",image:"",showselection:!1},outdent:!(!s.outdent||"top-selection"!=e)&&{title:"Outdent",image:"",showselection:!1},removeformat:!!s.removeformat&&{title:"Remove format",image:""}}}()),A._disable=!!A.opts.disable,A.toolbarPosition=!A.opts.position||"top"!=A.opts.position&&"top-selection"!=A.opts.position&&"bottom"!=A.opts.position&&"bottom-selection"!=A.opts.position&&"selection"!=A.opts.position?"top-selection":A.opts.position,A.createDom()},this.createDom=function(){A.jObject=$("<textarea></textarea"),A.container=A.opts.renderTo,A.container.append(A.jObject).addClass("apuitexteditor-container");var e=A.opts.placeholder||A.jObject.attr("placeholder"),t=(e?(t=$("<div/>").addClass("apuitexteditor-wrapper").click(function(){A.focus()}),A.jObject.wrap(t),A.wrapper=A.jObject.parent(".apuitexteditor-wrapper"),A.jPlaceholder=$("<div/>").addClass("apuitexteditor-placeholder").html(e).hide(),A.wrapper.prepend(A.jPlaceholder)):A.wrapper=A.container,A.hotkeys={},A.editor=function(){let i=null,m=null,n=A.jObject.get(0),o="selection"==A.opts.position,e="TEXTAREA"==n.nodeName||"INPUT"==n.nodeName;if(e){let e="contentEditable"in document.body;var t;if(!(e=e&&(t=navigator.userAgent.match(/(?:iPad|iPhone|Android).* AppleWebKit\/([^ ]+)/))&&parseInt(t[1])<534?!1:e)){let t=n,i=function(e){return e.replace(/<br[ \/]*>\n?/gi,"<br>\n")};t.value=i(t.value);function a(){return this}function s(){return null}return{legacy:!0,getElement:function(){return t},getHTML:function(){return t.value},setHTML:function(e){return t.value=i(e),this},getSelectedHTML:s,collapseSelection:a,openPopup:s,closePopup:a,removeFormat:a,bold:a,italic:a,underline:a,strikethrough:a,forecolor:a,highlight:a,fontName:a,fontSize:a,subscript:a,superscript:a,align:a,format:a,indent:a,insertLink:a,insertImage:a,insertHTML:a,insertList:a}}}m=e?((i=n).style.display="none",function(e){var t=document.createElement("DIV");return t.innerHTML=e.value,e.parentNode.insertBefore(t,e.nextSibling),t}(i)):n;m.setAttribute("contentEditable","true"),$(m).customPaste(function(e){return"function"==typeof A.opts.customPaste?A.opts.customPaste(e):e});let r=document.all&&!document.addEventListener?document:window,c=null;if(e){let t=m.innerHTML;c=function(){var e=m.innerHTML;e!=t&&(i.value=e,t=e,APCore.Fn.DOM.fireEvent(i,"change",!1))}}let l=!1;function u(){let e=!0,t=m;for(;t;)if(t=APCore.Fn.DOM.nextNode(t,m))if(t.nodeType==APCore.Fn.DOM.Node_ELEMENT_NODE){if("IMG"==t.nodeName){e=!1;break}}else if(t.nodeType==APCore.Fn.DOM.Node_TEXT_NODE){var i=t.nodeValue;if(i&&-1!=i.search(/[^\s]/)){e=!1;break}}var n;l!=e&&(n=e,A.jPlaceholder&&(n?A.jPlaceholder.show():A.jPlaceholder.hide()),l=e)}function d(e){(e=(e=e||window.event).target||e.srcElement).nodeType==APCore.Fn.DOM.Node_TEXT_NODE&&(e=e.parentNode),APCore.Fn.DOM.isOrContainsNode(A.nodePopup,e)||h()}u();var p=null,g=null,h=(g=APCore.Fn.debounce(function(e,t,i){var n=APCore.Fn.DOM.getSelectionCollapsed(m),o=APCore.Fn.DOM.getSelectedNodes(m),a=null===e||null===t?null:{left:e,top:t,width:0,height:0},e=APCore.Fn.DOM.getSelectionRect();if(a=e?e:a){if(m.getBoundingClientRect){t=m.getBoundingClientRect();a.left-=parseInt(t.left),a.top-=parseInt(t.top)}else{for(var s=m,r=0,c=0,l=!1;r+=s.offsetLeft?parseInt(s.offsetLeft):0,c+=s.offsetTop?parseInt(s.offsetTop):0,"fixed"==s.style.position&&(l=!0),s=s.offsetParent;);a.left-=r-(l?0:window.pageXOffset),a.top-=c-(l?0:window.pageYOffset)}a.left<0&&(a.left=0),a.top<0&&(a.top=0),a.width>m.offsetWidth&&(a.width=m.offsetWidth),a.height>m.offsetHeight&&(a.height=m.offsetHeight)}else if(o.length)for(var u=0;u<o.length;++u){var d=o[u];if(d.nodeType==APCore.Fn.DOM.Node_ELEMENT_NODE){a={left:d.offsetLeft,top:d.offsetTop,width:d.offsetWidth,height:d.offsetHeight};break}}var e=n,p=a,t=o,n=i,i=!0,g=null,h=APCore.Fn.DOM.getSelectionHtml(A.editor);if(1!=t.length||0==$(t[0]).parents("a").length||null!=h&&0!=h.length?n?i=!0:("selection"!=A.toolbarPosition&&"top-selection"!=A.toolbarPosition&&"bottom-selection"!=A.toolbarPosition||void 0===p||e||1==t.length&&"IMG"==t[0].nodeName)&&(i=!1):(h=$(t[0]).parents("a:first"),g=M(h)),i){let e=$(A.editor.openPopup());(e=e.hasClass("apuitexteditor-popup")&&!e.hasClass("apuitexteditor-arrowtop")?$(A.editor.closePopup().openPopup()):e).hasClass("apuitexteditor-popup")||(e.addClass("apuitexteditor-popup apuitexteditor-arrowtop").css("position",S()?"fixed":"absolute"),g?e.empty().append(g):w(e,!0,function(){return e.empty()},function(e){D(p)})),D(p)}else A.editor.closePopup()},1),function(){A.nodePopup&&(A.nodePopup.parentNode.removeChild(A.nodePopup),A.nodePopup=null,APCore.Fn.DOM.removeEvent(r,"mousedown",d))});A.container.unbind("mousedown").on("mousedown",function(e){A._disable&&_stopEvent(e)}),APCore.Fn.DOM.addEvent(m,"focus",function(){i&&APCore.Fn.DOM.fireEvent(i,"focus",!1)}),APCore.Fn.DOM.addEvent(m,"blur",function(){c&&c(),i&&APCore.Fn.DOM.fireEvent(i,"blur",!1),"function"==typeof A.opts.afterBlur&&A.opts.afterBlur(A)});let f=null;{let t=c?APCore.Fn.debounce(c,50,!0):null;function b(e){u(),t&&t(),"function"==typeof A.opts.changeHandler&&A.opts.changeHandler(A)}f=APCore.Fn.debounce(b,1),APCore.Fn.DOM.addEvent(m,"input",f),APCore.Fn.DOM.addEvent(m,"DOMNodeInserted",f),APCore.Fn.DOM.addEvent(m,"DOMNodeRemoved",f),APCore.Fn.DOM.addEvent(m,"DOMSubtreeModified",f),APCore.Fn.DOM.addEvent(m,"DOMCharacterDataModified",f),APCore.Fn.DOM.addEvent(m,"propertychange",f),APCore.Fn.DOM.addEvent(m,"textInput",f),APCore.Fn.DOM.addEvent(m,"paste",f),APCore.Fn.DOM.addEvent(m,"cut",f),APCore.Fn.DOM.addEvent(m,"drop",f)}function y(e,t){let i=0;(e=e||window.event).keyCode?i=e.keyCode:e.which&&(i=e.which);var n=e.charCode;if(1==t&&!1===function(e,t,i,n,o,a){var s=A.opts.onKeyEnter;if(s&&(10==e||13==e)&&!i&&!n&&!o&&!a)return s.call(A.editor.getElement());if(t&&!i&&!n&&o&&!a){e=t.toLowerCase();if(A.hotkeys[e])return A.hotkeys[e](),!1}}(i,n?String(String):String.fromCharCode(i),e.shiftKey||!1,e.altKey||!1,e.ctrlKey||!1,e.metaKey||!1))return e.preventDefault&&e.preventDefault(),e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,!1;if(2!=t&&3!=t||(p=null,g&&g(null,null,!1)),2==t&&f)switch(i){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:break;default:f()}"function"==typeof A.opts.keyHandler&&A.opts.keyHandler(A,t,i,e)}function I(e,t){var i=null,n=null;(e=e||window.event).clientX&&e.clientY?(i=e.clientX,n=e.clientY):e.pageX&&e.pageY&&(i=e.pageX-window.pageXOffset,n=e.pageY-window.pageYOffset),(e.which&&3==e.which||e.button&&2==e.button)&&(t=!0),APCore.Fn.DOM.removeEvent(r,"mouseup",I),p=null,!o&&t||g&&g(i,n,t)}APCore.Fn.DOM.addEvent(m,"keydown",function(e){return y(e,1)}),APCore.Fn.DOM.addEvent(m,"keypress",function(e){return y(e,2)}),APCore.Fn.DOM.addEvent(m,"keyup",function(e){return y(e,3)});APCore.Fn.DOM.addEvent(m,"mousedown",function(e){APCore.Fn.DOM.removeEvent(r,"mouseup",I),APCore.Fn.DOM.addEvent(r,"mouseup",I)}),APCore.Fn.DOM.addEvent(m,"mouseup",function(e){I(e),f&&f()}),APCore.Fn.DOM.addEvent(m,"dblclick",function(e){I(e)}),APCore.Fn.DOM.addEvent(m,"selectionchange",function(e){I(e)}),o&&APCore.Fn.DOM.addEvent(m,"contextmenu",function(e){return I(e,!0),e.preventDefault&&e.preventDefault(),e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,!1});function v(e,t,i){if(!1!==i&&(APCore.Fn.DOM.restoreSelection(m,p),!APCore.Fn.DOM.clipSelectionTo(m))){if(!i)return;APCore.Fn.DOM.setSelectionTo(m)}if(window.getSelection)try{return document.queryCommandSupported&&!document.queryCommandSupported(e)?!1:document.execCommand(e,!1,t)}catch(e){}else if(document.selection){i=document.selection;if("None"!=i.type){i=i.createRange();try{return i.queryCommandEnabled(e)?i.execCommand(e,!1,t):!1}catch(e){}}}}function C(e){u(),c&&c(),p=e?(APCore.Fn.DOM.collapseSelectionEnd(),null):p&&APCore.Fn.DOM.saveSelection(m),A&&A.opts&&"function"==typeof A.opts.afterUpdate&&A.opts.afterUpdate(A,A.getValue())}return{getElement:function(){return m},getHTML:function(){return m.innerHTML},setHTML:function(e){return m.innerHTML=e,C(!0),this},getSelectedHTML:function(){return APCore.Fn.DOM.restoreSelection(m,p),APCore.Fn.DOM.clipSelectionTo(m)?APCore.Fn.DOM.getSelectionHtml(m):null},collapseSelection:function(){return APCore.Fn.DOM.collapseSelectionEnd(),p=null,this},openPopup:function(){return p=p||APCore.Fn.DOM.saveSelection(m),A.nodePopup||(APCore.Fn.DOM.addEvent(r,"mousedown",d),A.nodePopup=document.createElement("DIV"),document.body.appendChild(A.nodePopup)),A.nodePopup},closePopup:function(){return h(),this},removeFormat:function(){return v("removeFormat"),v("unlink",!0),C(),this},bold:function(){return v("bold"),C(),this},italic:function(){return v("italic"),C(),this},underline:function(){return v("underline"),C(),this},strikethrough:function(){return v("strikeThrough"),C(),this},forecolor:function(e){return v("foreColor",e),C(),this},highlight:function(e){return v("hiliteColor",e)||v("backColor",e),C(),this},fontName:function(e){return v("fontName",e),C(),this},fontSize:function(e){var t,e="<span style='font-size:"+e+"px;'>"+APCore.Fn.DOM.getSelectionHtml(m)+"</span>";if(window.getSelection){var i=window.getSelection();if(i.getRangeAt&&i.rangeCount){(t=window.getSelection().getRangeAt(0)).deleteContents();for(var n,o=document.createElement("div"),a=(o.innerHTML=e,document.createDocumentFragment());n=o.firstChild;)a.appendChild(n);t.insertNode(a)}}else document.selection&&document.selection.createRange&&((t=document.selection.createRange()).collapse(!1),t.pasteHTML(e));return C(!0),this},subscript:function(){return v("subscript"),C(),this},superscript:function(){return v("superscript"),C(),this},align:function(e){return"left"==e?v("justifyLeft"):"center"==e?v("justifyCenter"):"right"==e?v("justifyRight"):"justify"==e&&v("justifyFull"),C(),this},format:function(e){return v("formatBlock",e),C(),this},indent:function(e){return v(e?"outdent":"indent"),C(),this},insertLink:function(e){return v("createLink",e),C(!0),this},insertImage:function(e){return v("insertImage",e,!0),C(!0),this},insertHTML:function(e){return v("insertHTML",e,!0)||(APCore.Fn.DOM.restoreSelection(m,p),APCore.Fn.DOM.clipSelectionTo(m)||APCore.Fn.DOM.setSelectionTo(m),APCore.Fn.DOM.pasteHtmlAtCaret(m,e)),C(!0),this},insertList:function(e){return v(e?"insertOrderedList":"insertUnorderedList"),C(),this}}}(),A.jObject.data("apuitexteditor",A),A.container.data("apuitexteditor",A),A.opts.classes||"apuitexteditor-editor"),i=(A.editor.legacy?((i=$(A.editor.getElement())).addClass(t),i.is(":visible")&&i.width(A.container.width()-(i.outerWidth()-i.width()))):$(A.editor.getElement()).addClass(t),function(e){var n={};return $.each(e,function(e,t){var i;t&&t.hotkey&&(i=c(e))&&(A.hotkeys[t.hotkey.toLowerCase()]=i,n[e]=i)}),n}());{var a,e;"selection"!=A.toolbarPosition&&(a="top"==A.toolbarPosition||"top-selection"==A.toolbarPosition,e=a?"apuitexteditor-toolbar-top":"apuitexteditor-toolbar-bottom",A.fixedToolbar=$("<div/>").addClass("apuitexteditor-toolbar").addClass(e),w(A.fixedToolbar,!1,function(){var e=$(A.editor.openPopup());return(e=e.hasClass("apuitexteditor-popup")&&e.hasClass("apuitexteditor-arrowtop")?$(A.editor.closePopup().openPopup()):e).hasClass("apuitexteditor-popup")||e.addClass("apuitexteditor-popup").css("position",S()?"fixed":"absolute"),e},function(e,t){var t=$(t),i=e.outerWidth(),n=APCore.Fn.DOM.fixedOffset(t),o=n.left+parseInt(t.width()/2)-parseInt(i/2),n=n.top,t=(a?n+=t.outerHeight():n-=e.height(),$(window).width()),t=(t-1<o+i&&(o=t-i-1),S()?0:$(window).scrollLeft());e.css({left:(o=o<t+1?t+1:o)+"px",top:n+"px",overflow:"visible"})}),a?A.container.prepend(A.fixedToolbar):A.container.append(A.fixedToolbar))}A.jObject.data("apuitexteditor",{apuitexteditor:A.editor,commands:i}),A._disable?A.disable():A.enable(),A.opts.css&&A.jObject.css(A.opts.css)},this.focus=function(){A.editor.getElement().focus()},this.getValue=function(){return A.editor.getHTML()},this.setValue=function(e){A.editor.setHTML(e)},this.disable=function(){A._disable=!0,A.container.addClass("disable")},this.enable=function(){A._disable=null,A.container.removeClass("disable")}}),APCore.Widgets.TextEditor.ButtonConfig={insertimage:!1,insertlink:!0,fontname:!1,fontsize:!1,bold:!0,italic:!0,underline:!0,strikethrough:!0,forecolor:!0,highlight:!0,alignleft:!1,aligncenter:!1,alignright:!1,alignjustify:!1,indent:!1,outdent:!1,removeformat:!0,fontsizelist:{Huge:29,Larger:26,Large:23,Normal:20,Small:17,Smaller:14,Tiny:11},fontnamelist:{"Times New Roman":"Times New Roman",Arial:"Arial","Open San":"Open San",Tahoma:"Tahoma",Cambria:"Cambria","Arial Narrow":"Arial Narrow",Roboto:"Roboto"}},APCore.Widgets.define("Tooltip",function(){var o=this;this.default={trigger:null,css:{width:"240px","min-height":"19px","font-size":"13px"},text:"",exclude:"apui-tooltip-exclude",position:"top",delay:10},this.initDom=function(){o.timeDelay=o.opts.delay||10,o.createDom()},this.createDom=function(){o.trigger=o.opts.trigger,o.trigger.addClass("apui-tooltip-trigger"),o.jObject=$("<div class='apui-tooltip-body'></div>"),o.trigger.append(o.jObject),o.jObject.append(o.opts.text),o.jObject.addClass(o.opts.position),o.opts.css&&o.jObject.css(o.opts.css),o.trigger.on("mouseenter touchenter",function(e){_stopEvent(e),e.target.classList.contains("apui-tooltip-trigger")&&(o.mouseLeave=!1,o.showTimeout=setTimeout(function(){o.trigger[0].classList.contains(o.opts.exclude)||o.jObject.isVisible()||o.mouseLeave||o.show()},o.timeDelay))}),o.trigger.on("click.tooltip",function(e){o.showTimeout&&clearTimeout(o.showTimeout),o.jObject.isVisible()&&o.hide()}),o.trigger.on("mouseleave touchleave",function(e){_stopEvent(e),o.mouseLeave=!0,o.jObject.isVisible()&&o.hide()})},this.show=function(){var e=o.jObject.outerHeight(),t=o.jObject.outerWidth(),i=o.trigger.outerHeight(),n=o.trigger.outerWidth();"top"==o.opts.position?o.jObject.css({bottom:i+4,left:-t/2+n/2}):"bottom"==o.opts.position?o.jObject.css({top:i+4,left:-t/2+n/2}):"right"==o.opts.position?o.jObject.css({top:-e/2+i/2,left:n+8}):"left"==o.opts.position&&o.jObject.css({top:-e/2+i/2,left:-t-8}),o.jObject.fadeIn(100,function(){})},this.hide=function(){o.jObject.fadeOut(500)}}),APCore.Widgets.define("TrackingItem",function(){var o=this;this.default={id:"",title:"",callback:null,autoClose:!0,timeOut:5e3,afterClose:null,waitingLimit:null},this.initDom=function(){o.autoClose=_isTrue(o.opts.autoClose),o.timeOut="number"==typeof o.opts.timeOut?o.opts.timeOut:5e3,o.autoClose||(o.timeOut=10),o.callback=o.opts.callback,o.id=o.opts.id,o.createDom()},this.createDom=function(){o.jObject=$('<div class="apui-trackingitem" ><div class="apui-trackingitem-icon icon-loading-blue"></div><div class="apui-trackingitem-title apui-flex-1 apui-ellipsis"></div><div class="apui-trackingitem-btn-close apui-icon-close-24"></div></div>'),o.jTitle=o.jObject.find(".apui-trackingitem-title"),o.jObject.attr("id",o.id),o.jCloseBtn=o.jObject.find(".apui-trackingitem-btn-close"),o.jCloseBtn.attr("title","Close"),o.updateTitle(o.opts.title),0<o.opts.waitingLimit&&(o.waitingTimeOut=setTimeout(function(){"function"==typeof o.callback&&o.callback(o.id,504,"Timeout",0,!0)},o.opts.waitingLimit)),o.initAction()},this.initAction=function(){o.jCloseBtn.on("click",function(){o.remove(!0),"function"==typeof o.callback&&o.callback()})},this.updateTitle=function(e){o.jTitle.html(((e=e||"")+"").secure()),o.jTitle.attr("title",o.jTitle.text())},this.update=function(e,t,i,n){o.waitingTimeOut&&clearTimeout(o.waitingTimeOut),t&&o.updateTitle(t),_isTrue(n)?o.finish(n):100==i&&o.finish(),"function"==typeof o.callback&&o.callback(o.id,e,t,i,n)},this.finish=function(e){o.waitingTimeOut&&clearTimeout(o.waitingTimeOut),e?o.jObject.attr("success",!1):o.jObject.attr("success",!0),o.isFinish=!0,o.autoClose&&o.remove()},this.remove=function(e){o.waitingTimeOut&&clearTimeout(o.waitingTimeOut);var t=o.timeOut;e&&(t=0),setTimeout(function(){o.jObject.fadeOut(200,function(){o.jObject.remove(),"function"==typeof o.opts.afterClose&&o.opts.afterClose(o.id)})},t)}}),APCore.Widgets.define("TrackingBox",function(){var s=this;function r(e){s.items.delete(e),c()}function c(){var i,e;0==s.items.size&&(s.jContainer.html(""),s.hide()),i=0,s.items.forEach((e,t)=>{e.isFinish||i++}),e=s.resouces.MinLabel.format(i),s.jHeaderTitle.html(e).attr("title",e)}this.items=null,this.resouces={MinLabel:"<b>{0}</b> tiến trình đang xử lý"},this.default={renderTo:$("body"),position:"bottom-right",width:null},this.initDom=function(){s.renderTo=s.opts.renderTo,s.opts.resouces&&Object.assign(s.resouces,s.opts.resouces),s.createDom(),s.initAction(),s.items=new Map},this.createDom=function(){var e;s.jObject=$('<div  style="display:none" class="apui-trackingbox custom-scroll" ></div>'),s.opts.width&&("number"==typeof(e=s.opts.width)&&(e+="px"),s.jObject.css("width",e)),s.jHeader=$('<div class="apui-trackingbox-header"><div class="apui-trackingbox-header-title apui-flex-1 apui-ellipsis"></div><div class="apui-trackingbox-minbtn"></div></div>'),s.jHeaderTitle=s.jHeader.find(".apui-trackingbox-header-title"),s.jMinButton=s.jHeader.find(".apui-trackingbox-minbtn"),s.jContainer=$('<div class="apui-trackingbox-container"></div>'),s.jObject.append(s.jHeader).append(s.jContainer),s.opts.customColor&&s.jHeader.css(" background-color",s.opts.customColor),s.renderTo.append(s.jObject)},this.add=function(e,t,i,n){r(e);var o=!n||_isTrue(n.autoClose),a=n?n.timeOut:5e3,t=new APCore.Widgets.TrackingItem({id:e,title:t,callback:i,waitingLimit:n?n.waitingLimit:null,autoClose:o,timeOut:a,afterClose:function(e){r(e)}});s.items.set(e,t),s.jContainer.prepend(t.jObject),c(),s.show()},this.update=function(e,t,i,n,o){e=s.items.get(e);e&&e.update(t,i,n,o)},this.initAction=function(){s.jMinButton.on("click",function(){s.jObject.toggleClass("mode-min")}.bind(s))},this.show=function(){s.jObject.fadeIn(200)},this.hide=function(){s.jObject.fadeOut(200)}}),APCore.Widgets.renderButton=function(o,e,a){e.find("apui-button").each(function(e,t){t=$(t);var i=APCore.Widgets._convertAttrToConfig(o,t[0],a),n=APCore.Widgets._getControlEvent(o,t),i=$.extend(i,n),n=t.find("css"),n=(n&&0<n.length&&(i.css=APCore.Widgets._convertAttrToConfig(o,n[0],a)),t.attr("name")||"button");i.cls=t.attr("class"),i.class="",o[n]=new APCore.Widgets.Button(i),t.replaceWith(o[n].jObject)})},APCore.Widgets.renderCombobox=function(a,e,s){e.find("apui-combobox").each(function(e,t){t=$(t);let i=APCore.Widgets._convertAttrToConfig(a,t[0],s);var n=t.find("item-template");if(n&&0<n.length){let t=APCore.Widgets._convertAttrToConfig(a,n[0],s);i.getItem=function(e){e=t.template.formatData(e);return $("<div class='{1}'>{0}</div>".format(e,t.class))}}var n=t.find("css"),n=(n&&0<n.length&&(opts.css=APCore.Widgets._convertAttrToConfig(a,n[0],s)),APCore.Widgets._getControlEvent(a,t)),n=(i=$.extend(i,n),$("<div></div>")),o=t.attr("name")||"combobox",t=(n.addClass(t.attr("class")),n.attr("objName",i.objName),i.class="",i.renderTo=n,t.replaceWith(n),new APCore.Widgets.Combobox(i));a[o]=t})},APCore.Widgets.renderDataFields=function(r,e,c){e.find("apui-datafields").each(function(e,t){t=$(t);var i=$("<div></div>"),n=(i.addClass(t.attr("class")),i.attr("style",t.attr("style")),t.find("row"));let s={};n.each(function(e,t){var t=$(t),i=$("<div></div>");i.addClass(t.attr("class")),i.attr("style",t.attr("style")),t.find("field").each(function(e,t){var t=$(t),i=APCore.Widgets._convertAttrToConfig(r,t[0],c),n=APCore.Widgets._getControlEvent(r,t[0]),i=$.extend(i,n),n=t.find("error");let o={};n.each(function(e,t){t=APCore.Widgets._convertAttrToConfig(r,t,c);o[t.name]=t.message});var n=t.find("tooltip").first(),n=(1==n.length&&(n=APCore.Widgets._convertAttrToConfig(r,n[0],c),i.info={text:n.text,position:n.position}),i.errorMessage=o,$("<div></div>")),a=(n.addClass(t.attr("class")),n.attr("style",t.attr("style")),t.attr("name"));n.attr("data-field",a),i.fieldName=a,s[a]=i,t.replaceWith(n)}),t.find("space").each(function(e,t){$(t).replaceWith("<div class='field-space'></div>")}),i.html(t.html()),t.replaceWith(i)});n=t.attr("name")||"datafields",i.html(t.html()),t.replaceWith(i),t=new APCore.Widgets.DataModule({fields:s,container:i});r[n]=t})},APCore.Widgets.renderDateRange=function(o,e,a){e.find("apui-daterange").each(function(e,t){t=$(t);var i=APCore.Widgets._convertAttrToConfig(o,t[0],a),n=APCore.Widgets._getControlEvent(o,t),i=$.extend(i,n),n=t.find("css"),n=(n&&0<n.length&&(i.css=APCore.Widgets._convertAttrToConfig(o,n[0],a)),t.attr("name")||"daterange");i.cls=t.attr("class"),i.class="",o[n]=new APCore.Widgets.APDateRange(i),t.replaceWith(o[n].jObject)})},APCore.Widgets.renderGrid=function(d,e,p){e.find("apui-grid").each(function(e,t){t=$(t);let i=APCore.Widgets._convertAttrToConfig(d,t[0],p);var n,o,a=t.find("css"),a=(a&&0<a.length&&(i.css=APCore.Widgets._convertAttrToConfig(d,a[0],p)),t.find("row-css")),a=(a&&0<a.length&&(i.rowCss=APCore.Widgets._convertAttrToConfig(d,a[0],p)),$(t).find("footer")),s=(a[0]&&0<a.length?(i.showFooter=!0,n=[],0<(s=a.find("pagesize>item")).length&&(o=0,s.each(function(e,t){var i=parseInt($(t).text());n.push(i),0==o&&$(t).attr("default")&&(o=i)}),0==o&&(o=n.first()),i.pageSize=o,i.pageSizeOptions=n),i=$.extend(i,APCore.Widgets._convertAttrToConfig(d,a[0],p))):i.showFooter=!1,$("<div></div>")),a=t.attr("name")||"grid";s.addClass(t.attr("class")),s.attr("objName",i.objName);let r=[];var c=t.find("columns").first(),c=APCore.Widgets._convertAttrToConfig(d,c[0],p),c=(Array.isArray(c.custom)?r=c.custom:t.find("column").each(function(e,t){var i=APCore.Widgets._convertAttrToConfig(d,t,p),n=$(t).find("css").first(),n=(n&&(i.css=APCore.Widgets._convertAttrToConfig(d,n[0],p)),$(t).find("filter").first());n&&(i.filterHeader=APCore.Widgets._convertAttrToConfig(d,n[0],p)),r.push(i)}),t.find("menu").first());1==c.length&&(c=APCore.Widgets._convertAttrToConfig(d,c[0],p),i.menu=c);let l=APCore.Widgets._getControlEvent(d,t),u=(i.renderTo=s,t.replaceWith(s),new APCore.Widgets.APGridContainer(i,r));Object.keys(l).forEach(function(e){u.onEvent(e,l[e].bind(d))}),d[a]=u})},APCore.Widgets.renderSearchInput=function(o,e,a){e.find("apui-searchinput").each(function(e,t){t=$(t);var i=APCore.Widgets._convertAttrToConfig(o,t[0],a),n=APCore.Widgets._getControlEvent(o,t),i=$.extend(i,n),n=t.find("css"),n=(n&&0<n.length&&(i.css=APCore.Widgets._convertAttrToConfig(o,n[0],a)),t.attr("name")||"searchinput");i.cls=t.attr("class"),i.class="",o[n]=new APCore.Widgets.SearchInput(i),t.replaceWith(o[n].jObject)})},APCore.Widgets.renderTabPanel=function(s,e,r){e.find("apui-tabpanel").each(function(e,t){t=$(t);var i=APCore.Widgets._convertAttrToConfig(s,t[0],r),n=APCore.Widgets._getControlEvent(s,t),i=$.extend(i,n),n=t.find("css"),n=(n&&0<n.length&&(i.css=APCore.Widgets._convertAttrToConfig(s,n[0],r)),t.attr("name")||"tabpanel"),o=(i.cls=t.attr("class"),i.class="",t.find("panel"));let a=[];o.each(function(e,t){var t=$(t),i=APCore.Widgets._convertAttrToConfig(s,t[0],r);i.html=t.html(),i.cls=t.attr("class"),a.push(i)}),s[n]=new APCore.Widgets.TabPanel(i),t.replaceWith(s[n].jObject),s[n].renderTabs(a)})},AMISPlatformUITemplate.HeaderNotify='<div class="apui-headernotify" style="display:none" apui-template><div class="apui-headernotify-left"><div class="apui-headernotify-message" objname="jMessage"></div><div class="apui-headernotify-openstore" objname="jOpenStore"></div></div><div class="apui-headernotify-cancel" objname="jCancel" res-key="HeaderNotify_Cancel"></div></div>',AMISPlatformUITemplate.NotFound='<div class="apui-errorpage-container 404-page"><div class="apui-errorpage-graphic"><div class="apui-errorpage-img-graphic apui-errorpage-404"></div></div><div class="apui-errorpage-title">{replace_title}</div><div class="apui-errorpage-description">{replace_description}</div><a class="apui-errorpage-btn" href="{replace_home_page_url}">{replace_home}</a></div>',AMISPlatformUITemplate.NotPermission='<div class="apui-errorpage-container 404-page"><div class="apui-errorpage-graphic"><div class="apui-errorpage-img-graphic apui-errorpage-403"></div></div><div class="apui-errorpage-title">{replace_title}</div><div class="apui-errorpage-description">{replace_description}</div><a class="apui-errorpage-btn" href="{replace_home_page_url}">{replace_home}</a><div style="margin:16px;color:#bababa;text-align:center">{replace_or}</div><a class="apui-errorpage-relogin" href="/logout">{replace_relogin}</a></div>',AMISPlatformUITemplate.NPSBox2='<div class="apui-npsbox2" style="display:none" apui-template><div class="apui-npsbox2-content"><div class="apui-npsbox2-header apui-img-nps-header"><i class="apui-icon apui-popup-close icon-close-24" title-key="NPSBox2_Close" action="cancel"></i></div><div objname="jContentBox" class="apui-npsbox2-survey"><div class="apui-npsbox2-score"><div class="apui-npsbox2-label" objname="jScoreTitle"></div><div class="apui-npsbox2-score-box"><div class="apui-npsbox2-score-block low-score"><div class="apui-npsbox2-score-des"><i class="apui-npsbox2-score-des-line"></i><div class="apui-npsbox2-score-des-text"><i class="apui-npsbox2-score-des-icon apui-icon-sad"></i> <span class="apui-npsbox2-score-des-text" res-key="NPSBox2_LowScoreText"></span></div></div><div class="apui-npsbox2-score-item">0</div><div class="apui-npsbox2-score-item">1</div><div class="apui-npsbox2-score-item">2</div><div class="apui-npsbox2-score-item">3</div><div class="apui-npsbox2-score-item">4</div><div class="apui-npsbox2-score-item">5</div><div class="apui-npsbox2-score-item">6</div></div><div class="apui-npsbox2-score-block mid-score"><div class="apui-npsbox2-score-des"><i class="apui-npsbox2-score-des-line"></i><div class="apui-npsbox2-score-des-text"><i class="apui-npsbox2-score-des-icon apui-icon-boredom"></i> <span class="apui-npsbox2-score-des-text" res-key="NPSBox2_MidScoreText"></span></div></div><div class="apui-npsbox2-score-item">7</div><div class="apui-npsbox2-score-item">8</div></div><div class="apui-npsbox2-score-block hight-score"><div class="apui-npsbox2-score-des"><i class="apui-npsbox2-score-des-line"></i><div class="apui-npsbox2-score-des-text"><i class="apui-npsbox2-score-des-icon apui-icon-happy"></i> <span class="apui-npsbox2-score-des-text" res-key="NPSBox2_HightScoreText"></span></div></div><div class="apui-npsbox2-score-item">9</div><div class="apui-npsbox2-score-item">10</div></div></div></div><div class="apui-npsbox2-reason" objname="jReason" statetype="feedback"><div class="apui-npsbox2-small-title"><span res-key="NPSBox2_OptionTitle"></span><span style="color:red">*</span></div><div class="apui-npsbox2-types" objname="jTypes"></div></div><div class="apui-npsbox2-input" statetype="feedback"><div class="apui-npsbox2-small-title apui-npsbox2-comment-title" style="display:none"><span res-key="NPSBox2_CommentTitle"></span><span style="color:red"> *</span></div><textarea class="apui-npsbox2-comment" objname="jComment"></textarea></div><div class="apui-npsbox2-input" style="display:none" statetype="feedback"><div class="apui-npsbox2-small-title"><span objname="jPhoneTitle"></span><span objname="jPhoneRequire" style="color:red"> *</span></div><input class="apui-npsbox2-phonenumber" objname="jPhoneNumber" placeholder-key="NPSBox2_PhonePlaceholder"></div><div class="apui-npsbox2-footer"><div class="apui-flex-1"></div><div objname="jBackButton" class="apui-npsbox2-button nps-close" res-key="NPSBox2_ShowLate" action="cancel"></div><div objname="jSendButton" class="apui-npsbox2-button nps-send nps-disabled" action="send" res-key="NPSBox2_Send"></div></div></div></div></div>',AMISPlatformUITemplate.Security2FABox='<div class="apui-popup-2fabox" style="display:none" apui-template><div objname="jContent" class="apui-popup-2fabox-content"><i class="apui-icon apui-popup-close apui-2fabox-close icon-close-24"></i><iframe class="apui-popup-2fabox-body custom-scroll" objname="jIframe"></iframe></div></div>',AMISPlatformUITemplate.StartupSettingBox='<div class="apui-popup-setting" style="display:none" apui-template><div class="apui-popup-setting-content"><div class="apui-popup-title" res-key="SettingPopup_Title"></div><i class="apui-icon apui-popup-close icon-close-24"></i><div class="apui-popup-body"><div class="apui-popup-heading" res-key="SettingPopup_Heading"></div><label class="apui-popup-selector"><input type="radio" name="startup" startup="1"><span class="checkmark"></span> <span res-key="SettingPopup_LabelListApp"></span></label> <label class="apui-popup-selector"><input type="radio" name="startup" startup="0"><span class="checkmark"></span> <span res-key="SettingPopup_LastestApp"></span></label> <label class="apui-popup-selector"><input type="radio" name="startup" startup="2"><span class="checkmark"></span><span res-key="SettingPopup_SelectApp"></span></label><div class="apui-startup-app"><div class="apui-popup-search-app"></div><div class="selected-app-logo"></div></div></div><div class="apui-popup-footer"><div class="apui-flex-1"></div><div class="apui-popup-btn btn-cancel" res-key="SettingPopup_ButtonCancel"></div><div class="apui-popup-btn btn-ok" res-key="SettingPopup_ButtonOK"></div></div></div></div>',AMISPlatformUITemplate.TenantBox='<div class="apui-popup-tenants" style="display:none" apui-template><div class="apui-popup-tenants-content"><div class="apui-popup-title" res-key="TenantsPopup_Title"></div><i class="apui-icon apui-popup-close icon-close-24"></i><div class="apui-popup-body"><div class="apui-popup-current-tenant"><div class="apui-current-tenant-title" res-key="TenantsPopup_CurrentTenantTile"></div><div class="apui-current-tenant-name"></div></div><div class="apui-list-tenant-title" res-key="TenantsPopup_OtherTenantTile"></div><div class="apui-popup-list-tenants custom-scroll"></div></div><div class="apui-popup-footer"><div class="apui-flex-1"></div><div class="apui-popup-btn btn-cancel" res-key="SettingPopup_ButtonCancel"></div><div class="apui-popup-btn btn-ok" res-key="SettingPopup_ButtonOK"></div></div><div class="apui-popup-tenants-loading" style="display:none" objname="jLoadingMark"><div class="apui-popup-tenants-loading-title" res-key="TenantPopup_TitleLoading"></div><div class="apui-popup-tenants-loading-name"></div><div class="apui-popup-tenants-loading-icon apui-waiting-more"></div></div></div></div>';const PLATFORM_DEFAULT_LANGUAGE="vi",APLANGUAGE={VI:"vi",EN:"en",DE:"de"},MWS_CLIENT_CONFIG_CACHE_KEY="mwsclient_config",MISAID2FAEventName={Close:"Close",Enable2FA:"Enable2FA",Logout:"Logout"},APLANGUAGECONFIG={vi:{Value:APLANGUAGE.VI,Display:"Việt Nam"},en:{Value:APLANGUAGE.EN,Display:"English"},de:{Value:APLANGUAGE.DE,Display:"Deutsch (German)"}},APStoreOrderType={Extend:1,BuyMore:2,ChangePackage:3},APSTORAGE_KEY={Account:"Login_Account",AppLanguage:"app_language",FullName:"FullName",UserID:"UserID",TenantID:"TenantID",TenantCode:"TenantCode",UserName:"UserName",Applications:"Applications",TransactionName:"TransactionName",Launcher_Apps:"launcher_apps",Launcher_AppsCode:"launcher_appcode",LauncherConfig:"launcher_config",LauncherLoadTime:"launcher_loadtime",LauncherNotification:"launcher_noti",AppsOpenTime:"launcher_apps_opentime",OpenLogLoadTime:"launcher_recenttime",LauncherID:"launcher_id",SurveyLog:"nps_log",SSO_Href:"sso_href"},APLOGIN_TYPE={SSO:"sso",Basic:"basic"},APSESSION_KEY={CurrentTenantCode:"current_tenantcode",CurrentUserName:"current_username"},APCOOKIE_KEY={AppLanguage:"x-culture",CustomLanguage:"x-culture-custom",LauncherVersion:"x-launcher-version",LoginType:"x-login-from"},APStartupMode={LastApplication:0,Launcher:1,FixedApplication:2},APLoginCode={ErrorMISAID:1,TenantNotFound:2,TenantNotAllowed:3,TokenInvalid:4,UserWithNoAllowedApplication:5,UserNotFound:6,UsingOTP:8,IsMultiTenants:9,NeedInputCaptcha:10,CaptchaInvalid:11,LoginForRegister:12,BlockedBySecurityPolicy:13,UserIsDeleted:14,MemberIsNotUser:15,UserInactive:16,EmployeeNotWorking:17,SecurityRequire2FA:18,UserWaitForActivation:19,LoginTenantWithDomain:20,OTPNotVerified:111,MISAID_InvalidClient:100,MISAID_WrongUserNamePassword:102,MISAID_AccountIsLocked:103,MISAID_EmailNotActive:104,MISAID_MobileNotActive:106,MISAID_InvalidScope:110,MISAID_OTPWasSent:122,TooManyFailedAttempts:145,Error:99},APNotificationSocketEvent={NotificationDataChanged:"DataChanged",OnNotificationDataChanged:"OnDataChanged",NotificationJoinRoom:"JoinRoom",OnTokenInvalid:"OnTokenInvalid",OnNotificationJoinRoomSuccess:"OnJoinRoomSuccess"},APNPSParam={MinDays:90,CancelNumber:3,CancelDays:15,ShowRangeDays:10},APNPSConstant={saveEventID:"SurveyButtonCompletedClick",cancelEventID:"SurveyButtonCloseClick",onMessageName:"onmessage"};APCore.Config=window.AMISPlatformConfig,APCore.API={logout:APCore.Config.API.AuthenAPI+"/api/Account/logout",logoutKeepTransaction:APCore.Config.API.AuthenAPI+"/api/Account/logoutkeeptransaction",logoutWithoutRedirect:APCore.Config.API.AuthenAPI+"/api/Account/logoutwithoutredirect",loginByToken:APCore.Config.API.AuthenAPI+"/api/Account/loginbytoken",continueLogin:APCore.Config.API.AuthenAPI+"/api/Account/reloginbytoken",loginWithTenantAPI:APCore.Config.API.AuthenAPI+"/api/Account/loginwithtenant",getTenantsAPI:APCore.Config.API.AuthenAPI+"/api/Account/tenantsv2",accountInfo:APCore.Config.API.ManagementAPI+"/api/System/info?path=%2F",accountSecurity:APCore.Config.API.ManagementAPI+"/api/System/info?path=%2Fsecurity",accountChangePassword:APCore.Config.API.ManagementAPI+"/api/System/info?path=%2Fsecurity%2Fchange-password",accountLoyalty:APCore.Config.API.ManagementAPI+"/api/System/info?path=%2Floyalty%2Fshare%3FappCode%3D",getCurrentUser:APCore.Config.API.PlatformAPI+"/api/user/bysession",getCurrentUserDetail:APCore.Config.API.PlatformAPI+"/api/user/currentuserdetail",setUserOption:APCore.Config.API.PlatformAPI+"/api/UserOption/SetUserOption",getUserOptionByKey:APCore.Config.API.PlatformAPI+"/api/UserOption/GetUserOptionByKey",getUserOptions:APCore.Config.API.PlatformAPI+"/api/UserOption/GetUserOptions",loadAdminContact:APCore.Config.API.PlatformAPI+"/api/user/getalladmin",startupData:APCore.Config.API.MiscAPI+"/api/monitor/personal/{0}",logAppsOpenTime:APCore.Config.API.MiscAPI+"/api/monitor/{0}",getLogAppsOpenTime:APCore.Config.API.MiscAPI+"/api/monitor/getlogappsopentime",cacheCancelHeaderNotify:APCore.Config.API.MiscAPI+"/api/personal/headernotify/cancel",getSubAppsAPI:APCore.Config.API.MiscAPI+"/api/launcher",setLauncherStartupApi:APCore.Config.API.MiscAPI+"/api/launcher/startup",setLauncherSortAPI:APCore.Config.API.MiscAPI+"/api/launcher/sort",customLauncherApps:APCore.Config.API.MiscAPI+"/api/launcher/custom",setLauncherBackgroundApi:APCore.Config.API.MiscAPI+"/api/launcher/bg",updateFavoriteAppApi:APCore.Config.API.MiscAPI+"/api/launcher/favorite",getPhoneNumber:APCore.Config.API.MiscAPI+"/api/survey/phonenumber",getSurveyInfo:APCore.Config.API.MiscAPI+"/api/survey",resetSurvey:APCore.Config.API.MiscAPI+"/api/survey/reset",cancelSurvey:APCore.Config.API.MiscAPI+"/api/survey/cancel",submitSurvey:APCore.Config.API.MiscAPI+"/api/survey/submitsurvey",agreementHistory:APCore.Config.API.MiscAPI+"/api/personal/historypage",getMarketURL:APCore.Config.API.MarketPlaceAPI+"/api/store/storeurl",getAllNotificationNumbers:APCore.Config.API.NotificationAPI+"/api/notification/getnewnumbers",getMwSToken:APCore.Config.API.NotificationAPI+"/api/push/mws",getAVAConfig:APCore.Config.API.ChatbotAPI+"/api/ava/config",connectAVA:APCore.Config.API.ChatbotAPI+"/api/ava/connect",getAVAReport:APCore.Config.API.ChatbotAPI+"/api/ava/report"},APCore.Fn.logLocal=function(e){!_isLocalhost()&&"TestLocal"!=AMISPlatformConfig.Environment&&"TestOnline"!=AMISPlatformConfig.Environment&&"Development"!=AMISPlatformConfig.Environment||console.log(e)},APCore.Fn.getCurrentUser=function(e,t){APCore.Fn.get(APCore.API.getCurrentUser,null,e,t)},APCore.Fn.getCurrentUserDetail=function(i,e,t){t=t?APCore.API.getCurrentUserDetail+"?mode=full":APCore.API.getCurrentUserDetail;APCore.Fn.get(t,null,function(e){var t;e&&e.Success&&(t=e.Data,localStorage.setItem(APSTORAGE_KEY.FullName,t.FullName),localStorage.setItem(APSTORAGE_KEY.UserName,t.UserName),localStorage.setItem(APSTORAGE_KEY.UserID,t.UserID),_isValue(t.Applications)&&localStorage.setItem(APSTORAGE_KEY.Applications,t.Applications),(_isLocalhost()||_isValue(t.MISAAccount))&&(t=t.MISAAccount||t.Email,localStorage.setItem(APSTORAGE_KEY.Account,t)),APCore.Fn.setCurrentUser(e.Data,_isTrue(e.Data.IsAdmin)),window.APUI)&&window.APUI.Fn.init(e.Data,_isTrue(e.Data.IsAdmin)),"function"==typeof i&&i(e)},e)},APCore.Fn.getAppOpenTime=function(i,e){if(e){e=localStorage.getItem(APSTORAGE_KEY.OpenLogLoadTime);if(_isValue(e))try{var t=new Date(e);15<=APCore.Fn.Date.diffByUnit(new Date,t,"minutes")&&delete localStorage[APSTORAGE_KEY.AppsOpenTime]}catch(e){delete localStorage[APSTORAGE_KEY.AppsOpenTime],console.log(e)}else delete localStorage[APSTORAGE_KEY.AppsOpenTime]}else delete localStorage[APSTORAGE_KEY.AppsOpenTime];let n=localStorage.getItem(APSTORAGE_KEY.AppsOpenTime);_isValue(n)?("string"==typeof(n=APCore.Fn.deserialize(n))&&(n=APCore.Fn.deserialize(n)),"function"==typeof i&&i(n)):(e=APCore.API.getLogAppsOpenTime,APCore.Fn.get(e,null,function(e){let t=null;e&&e.Success&&(t=APCore.Fn.deserialize(e.Data),localStorage.setItem(APSTORAGE_KEY.AppsOpenTime,APCore.Fn.serialize(t)),localStorage.setItem(APSTORAGE_KEY.OpenLogLoadTime,(new Date).toISOString())),_isValue(t)||(t={}),"function"==typeof i&&i(t)}))},APCore.Fn.logAppsOpenTime=function(){var e=APCore.Fn.getInitData().ApplicationCode,e=APCore.API.logAppsOpenTime.format(e);APCore.Fn.post(e,null,function(e){e&&e.Success&&e.Data&&e.Data.RecentApps&&(localStorage.setItem(APSTORAGE_KEY.AppsOpenTime,APCore.Fn.serialize(e.Data.RecentApps)),localStorage.setItem(APSTORAGE_KEY.OpenLogLoadTime,(new Date).toISOString()))})},APCore.Fn.getStartupData=function(t){var e=APCore.Fn.getInitData().ApplicationCode,e=APCore.API.startupData.format(e)+"?apcorever="+encodeURIComponent(window.AMISPlatformConfig.BuildVersion);APCore.Fn.post(e,null,function(e){e.Data&&(APCore.MonitorData=e.Data),_isFn(t)&&t(e.Data)})},APCore.Fn.clearStorageData=function(){Object.keys(localStorage).forEach(function(e){e!==APSTORAGE_KEY.AppLanguage&&e!=APSTORAGE_KEY.Account&&delete localStorage[e]}),Object.keys(sessionStorage).forEach(function(e){delete sessionStorage[e]})},APCore.Fn.saveUserStorage=function(e){APCore.Fn.clearStorageData(),localStorage.setItem(APSTORAGE_KEY.FullName,e.User.FullName),localStorage.setItem(APSTORAGE_KEY.UserName,e.User.UserName),localStorage.setItem(APSTORAGE_KEY.UserID,e.User.UserID),localStorage.setItem(APSTORAGE_KEY.TenantID,e.User.TenantID),localStorage.setItem(APSTORAGE_KEY.TenantCode,e.User.TenantCode);var t=localStorage.getItem(APSESSION_KEY.Account);_isValue(t)&&"undefined"!=t||(t=e.User.MISAIDAccount||e.User.MISAIDEmail||e.User.Email||e.User.UserName,localStorage.setItem(APSESSION_KEY.Account,t)),_isValue(e.User.Applications)&&localStorage.setItem(APSTORAGE_KEY.Applications,e.User.Applications),_isValue(e.User.TransactionName)?localStorage.setItem(APSTORAGE_KEY.TransactionName,e.User.TransactionName):localStorage.setItem(APSTORAGE_KEY.TransactionName,e.User.TenantCode),sessionStorage.setItem(APSESSION_KEY.CurrentTeantCode,e.User.TenantCode),sessionStorage.setItem(APSESSION_KEY.CurrentUserName,e.User.TenantCode+"_"+e.User.UserName)},APCore.Fn.updateAccessPermission=function(e){var t=localStorage.getItem(APSTORAGE_KEY.Applications),t=_isValue(t)?t.split(";"):[];t.contains(e)||t.push(e),localStorage.setItem(APSTORAGE_KEY.Applications,t.join(";"))},APCore.Fn.checkAccessPermission=function(e,t){if(_isLocalhost())return!0;let i=localStorage.getItem(APSTORAGE_KEY.Applications);if(!_isValue(i))return!0;if(!_isValue(e)){if(!_isValue(APCore.Fn.getInitData().ApplicationCode))return!1;e=APCore.Fn.getInitData().ApplicationCode}return!_isValue(e)||(e=e.toLowerCase(),!!(i=i.toLowerCase()).split(";").contains(e))||(t||APCore.Fn.show403(),!1)},APCore.Fn.showBlocked=function(){location.href="/blocked"},APCore.Fn.show403=function(e,t){e=e||"body",t=t||"/home";let i=_getAppLanguage(),n=(i=i||"vi",APErrorPageResource[i]);var o=(n=n||APErrorPageResource.vi||{}).NotPermission_Title,a=n.NotPermission_Des,s=n.NotPermission_Relogin,r=n.NotPermission_Home,c=n.NotPermission_OrText;let l=AMISPlatformUITemplate.NotPermission;l=(l=(l=(l=(l=(l=l.replaceAll("{replace_home_page_url}",t)).replaceAll("{replace_home}",r)).replaceAll("{replace_or}",c)).replaceAll("{replace_description}",a)).replaceAll("{replace_title}",o)).replaceAll("{replace_relogin}",s),$(e).css("background-color","#fff"),$(e).html(l)},APCore.Fn.show404=function(e,t){e=e||"body",t=t||"/home";let i=_getAppLanguage(),n=(i=i||"vi",APErrorPageResource[i]);var o=(n=n||APErrorPageResource.vi||{}).NotFound_Title,a=n.NotFound_Des,s=n.NotFound_Home;let r=AMISPlatformUITemplate.NotFound;r=(r=(r=(r=r.replaceAll("{replace_description}",a)).replaceAll("{replace_title}",o)).replaceAll("{replace_home}",s)).replaceAll("{replace_home_page_url}",t),$(e).css("background-color","#fff"),$(e).html(r)},APCore.Fn.checkIsLoginSSO=function(){return APCore.Fn.getCookies(APCOOKIE_KEY.LoginType)==APLOGIN_TYPE.SSO},APCore.Fn.logoutAMIS=function(i,e,t,n){APCore.Fn.clearStorageData();let o=APCore.Fn.checkIsLoginSSO();o&&(e=!1),"function"==typeof t&&(n=t);let a,s;a=e?(s=1==t?APCore.API.logoutKeepTransaction:APCore.API.logoutWithoutRedirect,n):(s=APCore.API.logout,function(e){var t;o?(i&&(i=btoa(i),localStorage.setItem(APSTORAGE_KEY.SSO_Href,i)),t={postLogoutRedirectUri:AMISPlatformConfig.LogoutPage,clientId:AMISPlatformConfig.MISAIDClientID},APCore.Fn.openUrl(AMISPlatformConfig.URL.misaidLogoutUrl,t,!0)):i?(i=btoa(i),location.href="/login?href="+i):location.href="/login"}),APCore.Fn.get(s,null,a)},APCore.Fn.getAppLanguage=function(e,t){if(!t){t=APCore.Fn.getCookies(APCOOKIE_KEY.CustomLanguage);if(t){var i=APCore.Fn.getInitData();if(i&&Array.isArray(i.SupportLanguage)&&i.SupportLanguage.contains(t))return t}}i=APCore.Fn.getCookies(APCOOKIE_KEY.AppLanguage)||window.__appLanguage||localStorage.getItem(APSTORAGE_KEY.AppLanguage);return null!=i&&""!=i||(i=e||PLATFORM_DEFAULT_LANGUAGE),localStorage.setItem(APSTORAGE_KEY.AppLanguage,i),i},APCore.Fn.getCustomLanguage=function(){return APCore.Fn.getCookies(APCOOKIE_KEY.CustomLanguage)},APCore.Fn.setAppLanguage=function(e,t){null!=e&&""!=e||(e=t||PLATFORM_DEFAULT_LANGUAGE);t=new Date((new Date).addYears(1)).toUTCString();return e!=APLANGUAGE.VI&&e!=APLANGUAGE.EN?(APCore.Fn.setCookies(APCOOKIE_KEY.CustomLanguage,e,"/",t),APCore.Fn.setCookies(APCOOKIE_KEY.AppLanguage,PLATFORM_DEFAULT_LANGUAGE,"/",t),localStorage.setItem(APSTORAGE_KEY.AppLanguage,PLATFORM_DEFAULT_LANGUAGE)):(APCore.Fn.setCookies(APCOOKIE_KEY.AppLanguage,e,"/",t),localStorage.setItem(APSTORAGE_KEY.AppLanguage,e),APCore.Fn.setCookies(APCOOKIE_KEY.CustomLanguage,e,"/",t)),e},window._getAppLanguage=APCore.Fn.getAppLanguage,APCore.Fn.getLauncherVersion=function(){let e=APCore.Fn.getCookies(APCOOKIE_KEY.LauncherVersion);return e=_isValue(e)?e:(new Date).toLocaleDateString()},window._getLauncherVersion=APCore.Fn.getLauncherVersion,APCore.Fn.getInitData=function(){return window.__appInfo=window.__appInfo||{},window.__appInfo},APCore.Fn.setInitData=function(e){window.__appInfo||(window.__appInfo={}),window.__appInfo=$.extend(window.__appInfo,e)},APCore.Fn.setCurrentUser=function(e,t){window.__appInfo||(window.__appInfo={}),window.__appInfo.User?$.extend(window.__appInfo.User,e):window.__appInfo.User=e,window.__appInfo.IsAdmin=_isTrue(t)||e.IsAdmin,APCore.Fn.logUserInfo(window.__appInfo.User)},APCore.Fn.getUserData=function(){return APCore.Fn.getInitData().User},APCore.Fn.isAdmin=function(){var e=APCore.Fn.getInitData();return _issTrue(e.IsAdmin)},APCore.Fn.checkSurvey=function(){console.log("use APUI.Fn.checkSurvey")},APCore.Fn.previewOffice=function(e,t){return t?(window.open("https://view.officeapps.live.com/op/view.aspx?src={0}".format(encodeURIComponent(e)),"_blank"),""):"https://view.officeapps.live.com/op/embed.aspx?src="+encodeURIComponent(e)},APCore.Fn.sendEvent=function(e,t){e=new CustomEvent(e,{detail:t});window.dispatchEvent(e)},APCore.Fn.checkSessionChanged=function(){var e=APCore.Fn.getInitData();APUI.Cache.CurrentUser_Data=e.User,window.addEventListener("storage",e=>{var t,i;APCore.IsLogoutCalling||(t=!1,e.key!=APSTORAGE_KEY.TenantID||_isValue(e.newValue)&&(null==APUI.Cache.CurrentUser_Data||localStorage.getItem(APSTORAGE_KEY.TenantID)==APUI.Cache.CurrentUser_Data.TenantID)||(t=!0),e.key!=APSTORAGE_KEY.UserID||_isValue(e.newValue)&&(null==APUI.Cache.CurrentUser_Data||localStorage.getItem(APSTORAGE_KEY.UserID)==APUI.Cache.CurrentUser_Data.UserID)||(t=!0),APUI.Cache.CurrentUser_Data&&t&&(APCore.IsLogoutCalling=!0,i=function(){APUI.Fn.showNotificationPopup("Phiên làm việc đã kết thúc hoặc bị thay đổi từ một cửa sổ khác!",{},function(){location.href=location.href})},APCore.Fn.get(APCore.API.getCurrentUser,null,function(e){e&&e.Success&&e.Data?e.Data.UserID==APUI.Cache.CurrentUser_Data.UserID&&e.Data.TenantID==APUI.Cache.CurrentUser_Data.TenantID||i():e&&!e.Success&&401==e.SubCode&&i()},!0,function(e){401==e&&i()})))})},window._logoutAMIS=APCore.Fn.logoutAMIS,APCore.Fn.logTrace=function(e){APCore.INFO+="\nLOG_"+(new Date).toISOString()+": "+e},APCore.Fn.logUserInfo=function(t){let i=[];i.push("\n\n=============== USER ================"),t&&Object.keys(t).forEach(function(e){i.push(e+": "+t[e])}),APCore.INFO+=i.join("\n")},APCore.Fn.trace=function(){console.log(APCore.INFO)},APCore.Fn._getAvatarURL=function(e){var t=APCore.Fn.getInitData(),t=t?t.User:{TenantID:localStorage.getItem(APSTORAGE_KEY.TenantID),TenantCode:localStorage.getItem(APSTORAGE_KEY.TenantCode)};return AMISPlatformConfig.CDN+"/APIS/PlatformAPI/api/Avatar/"+t.TenantID+"/"+t.TenantCode+".jpg?avatarID="+e},APCore.Fn._getImageURL=function(e,t,i){var n=APCore.Fn.getInitData();return e+"/api/Image?storageType="+t+"&fileName="+i+"&tenantCode="+(n&&n.User?n.User.TenantCode:"")},APCore.Fn.getAvatarURL=function(e,t,i,n){e=APCore.Fn._getAvatarURL(e);return 0<t&&(e+="&width="+t),0<i&&(e+="&height="+i),n&&(e+="&isScale=false"),e+=(-1<e.indexOf("?")?"&":"?")+"v="+AMISPlatformConfig.AvatarVersion},APCore.Fn.getCurrentUserAvatar=function(e,t){return t=t||localStorage.getItem(APSTORAGE_KEY.UserID),e=e||64,"<div class='apui-user-avatar'><img src='"+APCore.Fn.getAvatarURL(t,e,e)+"'></div>"},APCore.Fn.getCurrentUserAvatarURL=function(e,t){return t=t||localStorage.getItem(APSTORAGE_KEY.UserID),e=e||64,APCore.Fn.getAvatarURL(t,e,e)},APCore.Fn.getUserAvatar=function(e,t){return t=t||64,"<img src='"+APCore.Fn.getAvatarURL(e,t,t)+"'>"},APCore.Fn.getImage=function(e,t,i,n){return"<img src='"+APCore.Fn.getImageURL(e,t,i,n)+"'>"},APCore.Fn.getFullImageURL=function(e,t,i){return i=i||AMISPlatformConfig.API.PlatformAPI,APCore.Fn._getImageURL(i,e,t)},APCore.Fn.getImageURL=function(e,t,i,n){n=n||AMISPlatformConfig.API.PlatformAPI;n=APCore.Fn._getImageURL(n,e,t);return i&&(0<i.width&&(n+="&width="+i.width),0<i.height&&(n+="&height="+i.height),i.crop&&(n+="&isScale=true"),i.temp)&&(n+="&temp=true"),n},APCore.Fn.getLicenseMessage=function(e){var t,i,n=null;return e&&(t=e.Type,i=APCore.Fn.getAppLanguage(),null!=(n=(AMISPlatformLicenseTemplate[i]||AMISPlatformLicenseTemplate.vi).firstOrDefault(function(e){return e.Type==t}))&&(n.Body=n.Body.formatData(e.RawData)),n=$.extend(e,n)),n},APCore.Fn.openAgreementHistory=function(e){e=e||1,_openNewTab(APCore.API.agreementHistory,{type:e,appCode:APCore.Fn.getInitData().ApplicationCode})},APCore.Fn.openMISAStore=function(e,t,n){var o=APCore.Fn.getInitData(),a=null,s=!1;if(o.ApplicationCode){let i={appCode:o.ApplicationCode,isTrial:_isTrue(n)};i.isTrial=n,"function"==typeof e?a=e:"number"==typeof e?i.type=e:"boolean"==typeof e&&(s=e),"boolean"==typeof t&&(s=t);APCore.Fn.get(APCore.API.getMarketURL,i,function(t){if(t&&t.Success&&t.Data){try{let e="";switch(i.type){case APStoreOrderType.Extend:e=n?"nâng cấp từ dùng thử":"gia hạn";break;case APStoreOrderType.BuyMore:e="mua thêm";break;case APStoreOrderType.ChangePackage:e="đổi gói";break;default:e="mở báo giá"}APCore.Fn.logTrace("User open misastore ("+e+")"),APCore.Fn.logTrace("User open misastore url="+t.Data)}catch(e){}(s?_openNewTab:_openUrl)(t.Data)}else"function"==typeof a&&a()},null,a)}else console.log("DEV: Chưa cấu hình ApplicationCode")},APCore.Fn.openLicensePage=function(){var e={appCode:APCore.Fn.getInitData().ApplicationCode};_openNewTab("/market/Subscribers",e)},APCore.Fn.get=function(e,t,n,i,o){function a(e,t,i){403==t&&e&&403==e.SubCode&&APCore.Fn.show403(),"function"==typeof n&&n(e,t,i)}let s,r,c=!1;c="function"==typeof i?(o=i,!1):!!i,jQuery.ajax({url:e,async:!0,type:"GET",cache:!0,traditional:!1,dataType:"json",contentType:"application/json",data:null!=t?t:""}).done(function(e){s=arguments,r=e}).always((a,function(e,t){"error"==t?"function"==typeof o?o(e.status,e.responseJSON):(c||401==e.status&&APCore.Fn.logoutAMIS(location.href),a(e.responseJSON,e.status||t,s)):(c||401==e.status&&APCore.Fn.logoutAMIS(location.href),a(r,e.status||t,s))}))},APCore.Fn.post=function(e,t,n,i,o){function a(e,t,i){403==t&&e&&403==e.SubCode&&APCore.Fn.show403(),"function"==typeof n&&n(e,t,i)}let s,r,c=!1;c="function"==typeof i?(o=i,!1):!!i;i={url:e,async:!0,type:"POST",traditional:!1,dataType:"json",contentType:"application/json",data:null!=t?JSON.stringify(t):""};jQuery.ajax(i).done(function(e){s=arguments,r=e}).always((a,function(e,t){"error"==t?"function"==typeof o?o(e.status,e.responseJSON):c?a(e.responseJSON,e.status||t,s):401==e.status&&APCore.Fn.logoutAMIS(location.href):(c||401==e.status&&APCore.Fn.logoutAMIS(location.href),a(r,e.status||t,s))}))},APCore.Fn.upload=function(e,t,i){var n,o,a=new FormData,s=0;Array.isArray(t)?t.forEach(function(e){s++,a.append("uploadedFiles"+s,e)}):a.append("uploadedFiles",t),$.ajax({url:e,type:"POST",xhr:function(){return $.ajaxSettings.xhr()},data:a,cache:!1,contentType:!1,processData:!1}).done(function(e){o=arguments,n=e}).always(i&&function(e,t){"function"==typeof i&&i.apply(n,o||[e.responseText,t,e],t)})},APCore.Fn.downloadFromStorage=function(i,e,t,n,o){n=_isValue(n)?n:t;e=i+"Download/{0}/{1}?temp={2}&savedName={3}".format(e,t,o,n);APCore.Fn.get(e,null,function(e){var t;e&&e.Success?(e=i+"/api/download/{0}".format(e.Data),(t=$("<a/>")).attr("href",e),t.attr("download","download"),$("body").append(t),t[0].click(),t.remove()):console.log("download error")})},APCore.Fn.downloadFile=APCore.Fn.downloadFromStorage,APCore.Fn.onSocketDataChange=function(t,e,i){var n;i=i||APCore.Fn.getInitData().ApplicationCode,_isFn(e)&&((n=APCore.SocketFunctionPool.firstOrDefault(function(e){return e.id==t&&e.app==i}))?n.fn=e:APCore.SocketFunctionPool.push({id:t,fn:e,app:i}))},APCore.Fn.getWebsocketToken=function(t,i){var n=null,o=APCore.Fn.getInitData();const a=MWS_CLIENT_CONFIG_CACHE_KEY+o.User.UserID;function s(){localStorage.removeItem(a),n=null}if(i)s();else{let e=localStorage.getItem(a);if(e&&"string"==typeof e)if(e=e.fromBase64(),(n=APCore.Fn.deserialize(e)).BrokerUrl&&n.Token&&n.ExpiredDate){let e=!1;o=new Date(n.ExpiredDate),i=APCore.Fn.Date.diffByUnit(new Date,o,"minutes");(e=0<=i?!0:e)&&s()}else s()}n?t(n):APCore.Fn.get(APCore.API.getMwSToken,null,function(e){e.Success&&e.Data&&e.Data.Token&&(e.Data.ExpiredDate=(new Date).addSeconds(e.Data.TokenExpiredSecond),localStorage.setItem(a,APCore.Fn.serialize(e.Data).toBase64()),t(e.Data))})},APCore.Fn.initSocket=function(){APCore.INFO+="\n\n===========CONNECT MWS============";try{window.mws_reconnectbytokencount=0,window.MWSClient?APCore.Fn.getWebsocketToken(function(i){i&&(MWSClient.init({socketURL:i.BrokerUrl,token:i.Token,onConnect:function(){window.mws_isConnected=!0,window.mws_reconnectbytokencount=0,APCore.Fn.logLocal("mws connected"),APCore.Fn.logTrace("mws connected success")},onConnectError:function(e){window.mws_isConnected=!1,console.log("misa websocket connect error"),APCore.Fn.logTrace("mws connected error")},onTokenInvalid:function(e){if(window.mws_isConnected=!1,window.mws_reconnectbytokencount<3){window.mws_reconnectbytokencount++;let t=i.BrokerUrl+"";APCore.Fn.getWebsocketToken(function(e){e.BrokerUrl!=t?APCore.Fn.initSocket():(MWSClient.reconnect(e.Token),APCore.Fn.logTrace("mws reconnected"))},!0)}},onDisconnect:function(e){window.mws_isConnected=!1,APCore.Fn.logLocal("mws disconnected: "+e),APCore.Fn.logTrace("mws disconnected")}}),MWSClient.on(APNotificationSocketEvent.NotificationDataChanged,function(e){let t=APCore.Fn.deserialize(e);e=APCore.Fn.getInitData().User;!t||t.UserID&&t.UserID!=e.UserID||APCore.SocketFunctionPool.forEach(function(e){"function"==typeof e.fn&&e.app==t.ApplicationCode&&e.fn(t)})}))}):(APCore.Fn.logTrace("MWSClient not found"),console.log("MWSClient not found"))}catch(e){APCore.Fn.logTrace("connect mws exception"),console.log(e)}},function(e){e.VERSION_LOG={},e.Fn={},e.Cache={},e.Notice=new APCore.Widgets.APNotice,e.Dialog=new APCore.Widgets.APDialog,e.ModuleBase=APCore.Class.extend(function(){var t=this;this.name="",this.notice=APUI.Notice,this.default={renderTo:$("body")},this.constructor=function(e){t.opts=$.extend(t.default,e),t.language=_getAppLanguage(),t.resource=APCoreResource[t.language],t.resource||(t.resource=APCoreResource[PLATFORM_DEFAULT_LANGUAGE]),t.renderTo=t.opts.renderTo,t.loadTemplate(),t.createDom(),t.initAction()},this.createDom=function(){},this.loadTemplate=function(){var e=document.createElement("div");e.innerHTML=AMISPlatformUITemplate[t.name],t.jObject=$(e.querySelector("[apui-template]")),t.jObject.bindResource(t.resource),t.jObject.getObjects(t)}});e=[];e.push("\n\n=============== APCOREJS ============="),e.push("Environment: "+AMISPlatformConfig.Environment),e.push("FileVersion: "+AMISPlatformConfig.ReleaseVersion),e.push("BuildVersion: "+AMISPlatformConfig.BuildVersion),e.push("\n\n=============== APP ============="),window.__appInfo?(e.push("ApplicationCode: "+window.__appInfo.ApplicationCode),e.push("ApplicationName: "+window.__appInfo.ApplicationName)):e.push("window.__appInfo not config;"),APCore.INFO+=e.join("\n"),APCore.Fn.logTrace("StartURL: "+location.href)}(window.APUI={}),function(){var t,i=APCore.Fn.getCookies(APCOOKIE_KEY.AppLanguage);_isValue(i)||(i=localStorage.getItem(APSTORAGE_KEY.AppLanguage),_isValue(i)||(i=PLATFORM_DEFAULT_LANGUAGE),APCore.Fn.setAppLanguage(i),localStorage.setItem(APSTORAGE_KEY.AppLanguage,i));try{let e="";e="vi"==i?"%cĐây là một tính năng của trình duyệt dành cho các nhà phát triển. Nếu ai đó bảo bạn sao chép-dán nội dung nào đó vào đây để bật một tính năng hoặc 'hack' tài khoản của người khác, thì đó là hành vi lừa đảo và sẽ khiến họ có thể truy cập vào tài khoản của bạn.":"%cWarning: This is a browser feature intended for developers. If someone told you to copy and paste something here to enable a feature or 'hack' someone's account, it is a scam and will give them access to your account.";(t=/./).toString=function(){console.log("%cMISA Warning!!","font-size: 24px; font-weight: bold; color: #FFFFFF;background: #FFFFFF;text-shadow: 2px 2px 0 #CE0000, 2px -2px 0 #CE0000, -2px 2px 0 #CE0000, -2px -2px 0 #CE0000, 2px 0px 0 #CE0000, 0px 2px 0 #CE0000, -2px 0px 0 #CE0000, 0px -2px 0 #CE0000;color: #FFFFFF;background: #FFFFFF;"),console.log(e,"color: black; font-size: 20px; font-weight: bold; padding: 10px;")},console.log(t)}catch(e){console.log(e)}}(),APUI.AccountMenu=APCore.Class.extend(function(){var a=this;this.default={trigger:"#AMIS_Account",logoutFn:null,onDataSourceClick:null,onLanguageChange:null,dataSource:null},this.constructor=function(e){a.opts=$.extend(a.default,e),a.createDom()},this.createDom=function(){a.currentLanguage=_getAppLanguage(),a.appData=APCore.Fn.getInitData();var e=localStorage.getItem(APSTORAGE_KEY.Account),e=_isValue(e)&&"undefined"!=e?e:a.appData.User.MISAAccount,t={code:APLANGUAGECONFIG.vi.Value,display:APLANGUAGECONFIG.vi.Display,icon:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMiIgaGVpZ2h0PSIxNi41IiB2aWV3Qm94PSIwIDAgMjIgMTYuNSI+DQogIDxnIGlkPSJfNDhweF92aWV0bmFtIiBkYXRhLW5hbWU9IjQ4cHhfdmlldG5hbSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMCAtNikiPg0KICAgIDxnIGlkPSJHcm91cF8xNDI1MSIgZGF0YS1uYW1lPSJHcm91cCAxNDI1MSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMCA2KSI+DQogICAgICA8cGF0aCBpZD0iUGF0aF8yMjc3NSIgZGF0YS1uYW1lPSJQYXRoIDIyNzc1IiBkPSJNMjIsMjEuNTgzYS45MTcuOTE3LDAsMCwxLS45MTcuOTE3SC45MTdBLjkxNy45MTcsMCwwLDEsMCwyMS41ODNWNi45MTdBLjkxNy45MTcsMCwwLDEsLjkxNyw2SDIxLjA4M0EuOTE3LjkxNywwLDAsMSwyMiw2LjkxN1oiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDAgLTYpIiBmaWxsPSIjZDgyODI3Ii8+DQogICAgICA8cGF0aCBpZD0iUGF0aF8yMjc3NiIgZGF0YS1uYW1lPSJQYXRoIDIyNzc2IiBkPSJNMjMuMywxOC4xMzlIMjAuNmwtMS4xMzItMi40NTUtMS4xMzMsMi40NTVoLTIuN0wxNy42MSwyMC4xOGwtLjcyOSwyLjk1OCwyLjU4OS0xLjQ3MSwyLjU4OSwxLjQ3MS0uNzI5LTIuOTU4WiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTguNDcxIC0xMS4yNDUpIiBmaWxsPSIjZmZmZDM4Ii8+DQogICAgPC9nPg0KICA8L2c+DQo8L3N2Zz4NCg=="},i={code:APLANGUAGECONFIG.en.Value,display:APLANGUAGECONFIG.en.Display,icon:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMiIgaGVpZ2h0PSIxNi41IiB2aWV3Qm94PSIwIDAgMjIgMTYuNSI+DQogIDxnIGlkPSJfNDhweF91ayIgZGF0YS1uYW1lPSI0OHB4X3VrIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwIC02KSI+DQogICAgPGcgaWQ9Ikdyb3VwXzE2NjgzIiBkYXRhLW5hbWU9Ikdyb3VwIDE2NjgzIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwIDYpIj4NCiAgICAgIDxwYXRoIGlkPSJQYXRoXzIyNzc5IiBkYXRhLW5hbWU9IlBhdGggMjI3NzkiIGQ9Ik0yMS4wODMsNkguOTE3QS45MTcuOTE3LDAsMCwwLDAsNi45MTdWMjEuNTgzYS45MTcuOTE3LDAsMCwwLC45MTcuOTE3SDIxLjA4M0EuOTE3LjkxNywwLDAsMCwyMiwyMS41ODNWNi45MTdBLjkxNy45MTcsMCwwLDAsMjEuMDgzLDZaIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwIC02KSIgZmlsbD0iIzAwMjc4MSIvPg0KICAgICAgPHBhdGggaWQ9IlBhdGhfMjI3ODAiIGRhdGEtbmFtZT0iUGF0aCAyMjc4MCIgZD0iTTIyLDYuOTE3QS45MTcuOTE3LDAsMCwwLDIxLjA4Myw2SDE4LjcxOGwtNS44ODUsNC41MjdWNkg5LjE2N3Y0LjUyN0wzLjI4Miw2SC45MTdBLjkxNy45MTcsMCwwLDAsMCw2LjkxN1Y4LjFsNS42MSw0LjMxNUgwdjMuNjY3SDUuNjFMMCwyMC40djEuMTg1YS45MTcuOTE3LDAsMCwwLC45MTcuOTE3SDMuMjgybDUuODg1LTQuNTI3VjIyLjVoMy42NjdWMTcuOTczTDE4LjcxOCwyMi41aDIuMzY1QS45MTcuOTE3LDAsMCwwLDIyLDIxLjU4M1YyMC40bC01LjYxLTQuMzE1SDIyVjEyLjQxN0gxNi4zOUwyMiw4LjFaIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwIC02KSIgZmlsbD0iI2U2ZTZlNiIvPg0KICAgICAgPHBhdGggaWQ9IlBhdGhfMjI3ODEiIGRhdGEtbmFtZT0iUGF0aCAyMjc4MSIgZD0iTTIyLDEzLjMzM0gxMS45MTdWNkgxMC4wODN2Ny4zMzNIMHYxLjgzM0gxMC4wODNWMjIuNWgxLjgzM1YxNS4xNjdIMjJaIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwIC02KSIgZmlsbD0iI2QxMGQyNCIvPg0KICAgICAgPHBhdGggaWQ9IlBhdGhfMjI3ODIiIGRhdGEtbmFtZT0iUGF0aCAyMjc4MiIgZD0iTTM3LjM1OSw2LjMwNywyOS4yLDEyLjU4M2gxLjVsNy4xMTMtNS40NzJWNy4wODNBLjkuOSwwLDAsMCwzNy4zNTksNi4zMDdaIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTUuODE3IC02LjE2NikiIGZpbGw9IiNkMTBkMjQiLz4NCiAgICAgIDxwYXRoIGlkPSJQYXRoXzIyNzgzIiBkYXRhLW5hbWU9IlBhdGggMjI3ODMiIGQ9Ik0zMC43LDI4SDI5LjJsOC4xNTksNi4yNzZhLjkuOSwwLDAsMCwuNDU4LS43NzZ2LS4wMjhaIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTUuODE3IC0xNy45MTcpIiBmaWxsPSIjZDEwZDI0Ii8+DQogICAgICA8cGF0aCBpZD0iUGF0aF8yMjc4NCIgZGF0YS1uYW1lPSJQYXRoIDIyNzg0IiBkPSJNNy4xMTMsMjgsMCwzMy40NzJWMzMuNWEuOS45LDAsMCwwLC40NTguNzc2TDguNjE3LDI4aC0xLjVaIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwIC0xNy45MTcpIiBmaWxsPSIjZDEwZDI0Ii8+DQogICAgICA8cGF0aCBpZD0iUGF0aF8yMjc4NSIgZGF0YS1uYW1lPSJQYXRoIDIyNzg1IiBkPSJNNy4xMTMsMTIuNTgzaDEuNUwuNDU4LDYuMzA3QS45LjksMCwwLDAsMCw3LjA4M3YuMDI4WiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMCAtNi4xNjYpIiBmaWxsPSIjZDEwZDI0Ii8+DQogICAgPC9nPg0KICA8L2c+DQo8L3N2Zz4NCg=="},n={code:APLANGUAGECONFIG.de.Value,display:APLANGUAGECONFIG.de.Display,icon:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAxOS4wLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iTGF5ZXJfMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiDQoJIHZpZXdCb3g9IjAgMCA1MTIgNTEyIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1MTIgNTEyOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+DQo8cGF0aCBzdHlsZT0iZmlsbDojNDY0NjU1OyIgZD0iTTQ3My42NTUsODguMjc2SDM4LjM0NUMxNy4xNjcsODguMjc2LDAsMTA1LjQ0MywwLDEyNi42MjF2NzMuNDcxaDUxMnYtNzMuNDcxDQoJQzUxMiwxMDUuNDQzLDQ5NC44MzMsODguMjc2LDQ3My42NTUsODguMjc2eiIvPg0KPHBhdGggc3R5bGU9ImZpbGw6I0ZGRTE1QTsiIGQ9Ik0wLDM4NS4zNzljMCwyMS4xNzcsMTcuMTY3LDM4LjM0NSwzOC4zNDUsMzguMzQ1aDQzNS4zMWMyMS4xNzcsMCwzOC4zNDUtMTcuMTY3LDM4LjM0NS0zOC4zNDUNCgl2LTczLjQ3MUgwVjM4NS4zNzl6Ii8+DQo8cmVjdCB5PSIyMDAuMDkiIHN0eWxlPSJmaWxsOiNGRjRCNTU7IiB3aWR0aD0iNTEyIiBoZWlnaHQ9IjExMS44MSIvPg0KDQo8L3N2Zz4NCg=="},o=[t,i],t=(Array.isArray(a.appData.SupportLanguage)&&a.appData.SupportLanguage.forEach(function(e){"de"==e&&o.push(n)}),$(a.opts.trigger).html(""),{isNotExports:!0,boxSelector:a.opts.trigger,user:{FullName:a.appData.User.FullName,Account:e,Avatar:APUI.Fn.getAvatarURL(a.appData.User.UserID,64,64)},tenant:{Name:a.appData.User.TenantName,ID:a.appData.User.TenantID},dataSource:a.opts.dataSource,languages:{multi:!0,current:a.currentLanguage,default:PLATFORM_DEFAULT_LANGUAGE,list:o},events:{onLanguageChange:function(e){e!=APCore.Fn.getAppLanguage()&&(APCore.Fn.setAppLanguage(e),"function"==typeof a.opts.onLanguageChange?a.opts.onLanguageChange(e):location.reload())},onTenantSelect:function(e,t){a.showPopupTenants()},onDataSourceSelect:function(e,t){_isFn(a.opts.onDataSourceClick)&&a.opts.onDataSourceClick(e,t)},onItemClick:function(e,t,i){e&&APUI.Fn.showAccountInfo(e)},onLogoutClick:function(e){e.stopPropagation(),e.preventDefault(),"function"==typeof a.opts.logoutFn?a.opts.logoutFn():a.logoutFunction()}}});APUI._misaid_menus=APUI._misaid_menus||[],a.misaidmenu=MISAIDAccount.init(t),APUI._misaid_menus.push(a.misaidmenu)},this.showWarning=function(e){a.misaidmenu.showWarning(e)},this.initTenantBox=function(){a.tenantBox=new APUI.TenantBox({afterLoadData:a.afterLoadTenant.bind(a)})},this.afterLoadTenant=function(t,e){e=e.firstOrDefault(function(e){return(e.TenantCode||"").toLowerCase()==t.toLowerCase()});APCore.Fn.setInitData({CurrentTenant:e})},this.showPopupTenants=function(){a.tenantBox||a.initTenantBox(),a.tenantBox.show()},this.logoutFunction=function(){APUI.Fn.logoutAMIS()}}),APUI.AMISAppDock=APCore.Class.extend(function(){var r=this;function a(){APUI.Fn.getLauncherApps(function(e){var i=e.filter(function(e){return!e.IsHidden});let t=APCore.Fn.getInitData().ApplicationCode;i.forEach(function(e){e.ApplicationCode==t?e.DockSort=1e4:e.DockSort=9999}),r.logApps||(r.logApps={});var n=[];Object.keys(r.logApps).forEach(function(e){t!=e&&n.push({AppCode:e,Date:new Date(r.logApps[e])})});for(var n=n.sortObject("Date DESC"),o=0;o<n.length;o++){var a=function(t){return i.firstOrDefault(e=>e.ApplicationCode==t)}(n[o].AppCode);a&&(a.DockSort=o)}var e=i.filter(function(e){return e.IsFavorite}),s=(s=i.filter(function(e){return!e.IsFavorite})).sortObject("DockSort ASC");e.addRange(s),r.data=e,s=r.data,r.jListApp.html(""),s&&0<s.length&&(s.forEach(function(e){e=function(e){var t=e.ApplicationCode.trim(),i=e.URL||"",n={},o=APUI.Fn.getAppNameByCulture(e);n.jObject=$("<a class='apui-appdock-subapp' menu-id='"+e.ApplicationID+"'><div class='misa-subapp-notifi-count' style='display:none'></div><i class='apui-appdock-favorite'  title='"+r.resource.Launcher_Category_Favorite+"'></i></a>"),n.jObject.attr("href",i),0!=i.toLowerCase().indexOf("http")&&0!=i.toLowerCase().indexOf("/apis")||n.jObject.attr("target","_blank");l(n.jObject,e.IsFavorite),n.jObject.attr("code",t),n.jObject.append(['<div class="subapp-logo"></div><div class="subapp-name apui-ellipsis" title="',o,'">',o,'</div><div class="subapp-des apui-ellipsis" > ',"","</div >"].join(""));i="<img src='"+e.FullLogoURL+"'/>";return n.jObject.find(".subapp-logo").first().append(i),n}(e);r.jListApp.append(e.jObject)}),c())})}function c(){APUI.Fn.getAllNotificationNumbers(function(e){var n;n=e,r.jListApp.find(".apui-appdock-subapp").each(function(e,t){var i=(t=$(t)).attr("code");if(n[i]&&0<n[i]){let e=n[i];99<e&&(e="99+"),t.find(".misa-subapp-notifi-count").text(e).show()}else t.find(".misa-subapp-notifi-count").hide()})})}function l(e,t){t?(e.addClass("favorite"),e.find(".apui-launcher-favorite").attr("title",r.resource.Launcher_RemoveFavorite)):(e.removeClass("favorite"),e.find(".apui-launcher-favorite").attr("title",r.resource.Launcher_Favorite))}function i(){r.jMore.show();let e=$("body").outerWidth();var t=$("body").outerHeight(),i=((t>window.screen.height||0==t)&&window.screen.height,(e>window.screen.width||0==e)&&(e=window.screen.width),parseInt((e-100)/120)),t=r.jListApp.find(".apui-appdock-subapp");i>=t.length?t.each(function(e,t){(t=$(t)).show()}):t.each(function(e,t){t=$(t),e<i?t.show():t.hide()})}return this.default={trigger:"#AMIS_AppDock",fromLauncher:!0},this.constructor=function(e){r.lang=_getAppLanguage(),r.resource=APCoreResource[r.lang],r.resource||(r.resource=APCoreResource[PLATFORM_DEFAULT_LANGUAGE]),r.opts=$.extend(r.default,e),r.jObject=$("<div class='apui-appdock-container apui-popup' style='display:none' tabindex='0'></div>"),$("body").append(r.jObject),r.opts.fromLauncher||("string"==typeof(e=r.opts.trigger)?$(document).on("click",r.opts.trigger,function(e){e.stopPropagation(),e.preventDefault(),r.show()}):"object"==typeof e&&e.unbind("click").on("click",function(e){e.stopPropagation(),e.preventDefault(),r.show()}))},this.isHidden=function(){return r.jObject.is(":hidden")},this.renderDom=function(){r.jListApp=$("<div class='apui-appdock-list apui-flex-1'></div>"),r.jMore=$("<div class='apui-appdock-more apui-launcher-trigger'><i class='apui-appdock-more-icon icon-dock-more'></i><div class='apui-dock-more-text'>"+r.resource.AMISAppDock_ViewMore+"</div></div>"),r.jObject.append(r.jMore).append(r.jListApp),r.opts.darkMode&&r.jObject.addClass("dark"),c()},this.initAction=function(){r.jObject.unbind("click.lcsa").on("click.lcsa",".apui-appdock-subapp",function(e){var t,n,o,i=$(this);if($(e.target).is(".apui-appdock-favorite"))return _stopEvent(e),e=!i.hasClass("favorite"),t=i.attr("code"),n=t,l(i,o=e),APUI.Fn.getLauncherApps(function(e,t){var i;e&&((i=e.firstOrDefault(function(e){return e.ApplicationCode==n}))&&(i.IsFavorite=o),APUI.Fn.cacheLauncherApps(e),a())}),APCore.Fn.post(APCore.API.updateFavoriteAppApi+"?appCode="+n+"&isFavorite="+!!o,null),!1}),r.jObject[0].customHide=r.hide.bind(r),r.jObject.keydown(function(e){27==e.which&&r.hide()}.bind(r)),$(window).on("resize.apdock",i.bind(r))},this.hide=function(){r.jObject.slideUp(120,function(){})},this.show=function(){if(r.isRendered||(r.renderDom(),r.initAction(),APCore.Fn.getAppOpenTime(function(e){r.logApps=e,a()},!0),r.isRendered=!0),r.jObject.is(":hidden")){c(),i();let e=$("body").css("overflow");$("body").css("overflow","hidden");{var t=$(r.opts.trigger).coords();let e=t.top+t.height;e<48&&(e=48),r.jObject.css("top",e)}r.jObject.slideDown(300,function(){setTimeout(function(){r.jObject.focus()},0),$("body").css("overflow",e)})}else r.hide()},this.reset=function(){a()},r}),APUI.HeaderNotify=APUI.ModuleBase.extend(function(){var o=this;function a(e){var t=s();localStorage.setItem(t,e.toISOString())}function s(){return"apcore_"+o.appCode+"_headernotify_cancel"}function r(e){let t=!0;if(e){APCore.Fn.logTrace("user close license header time="+new Date(e).toISOString());try{var i=new Date(e);APCore.Fn.Date.diffByUnit(new Date,i,"hours")<24&&(t=!1)}catch(e){console.log(e)}}APUI.Cache.IsTestHeaderNotify?(APCore.Fn.logTrace("show test license header"),o.show()):t?o.show():o.hide()}this.name="HeaderNotify",this.default={renderTo:$("#AMIS_HeaderNotify")},this.data={leftDays:null,isTrial:!1,leftDaysLimit:30,applicationName:""},this.createDom=function(){o.appCode=APCore.Fn.getInitData().ApplicationCode},this.loadData=function(e){if(o.data=e,o.leftDays=o.data.leftDays,_isValue(o.leftDays))if(o.leftDays<1)o.hide();else{let e=!1,t=o.data.applicationName||APCore.Fn.getInitData().ApplicationName,i="",n="";o.data.isTrial?(i=o.resource.HeaderNotify_TrialMessage,n=o.resource.HeaderNotify_Upgrade,e=!0):o.leftDays<o.data.leftDaysLimit&&(i=o.resource.HeaderNotify_Message,n=o.resource.HeaderNotify_Renewal,e=!0);e?(o.jMessage.html(i.format(t,o.leftDays)),o.jOpenStore.text(n),function(){var e=s(),e=localStorage.getItem(e);_isValue(e)?r(e):APCore.Fn.get(APCore.API.cacheCancelHeaderNotify+"?appCode="+o.appCode,null,function(e){e&&e.Success&&(r(cancelTime=e.Data),cancelTime)&&a(new Date(cancelTime))})}()):o.hide()}else o.hide()},this.hide=function(){o.jObject.fadeOut(100,function(){_isFn(o.data.afterHide)&&o.data.afterHide()})},this.show=function(){o.render||o.jObject.appendTo(o.opts.renderTo),o.jObject.fadeIn(100,function(){_isFn(o.data.afterShow)&&o.data.afterShow()})},this.initAction=function(){o.jObject.unbind("click"),o.jCancel.on("click",function(e){o.hide(),a(new Date),APCore.Fn.post(APCore.API.cacheCancelHeaderNotify+"?appCode="+o.appCode)}),o.jOpenStore.on("click",function(e){var t;t=APStoreOrderType.Extend,APCore.Fn.openMISAStore(t,!0,o.data.isTrial)})}}),APUI.SlidePageDrag=APCore.Widgets.SlidePage.extend(function(){var c=this;this.drakeChild="",this.drakeParent="",this.notDraggable="not-draggable",this.fn={dragChild:function(e,t){"function"==typeof c.opts.onItemDrag&&c.opts.onItemDrag()},dragendChild:function(e,t){},dropChild:function(e,t,i,n){c.onAppsDrop(e,t,i,n)},dragParent:function(e,t){},dragendParent:function(e){},dropParent:function(e,t,i,n){},childClick:function(e){}},this.initAction=function(){c.callParent.initAction()},this.moveItemToNextSlide=function(t,i){i.prepend(t);t=c.opts.maxItemsPerPage||10;if(i.children().length>t){var t=parseInt(i.attr("page"));let e=0;t!=(e=t<c.pageNumber-1?t+1:e)&&(t=c.slides[e],i=i.children().last(),c.moveItemToNextSlide(i,t))}},this.onAppsDrop=function(e,t,i,n){if(t!=i){var i=c.opts.maxItemsPerPage||10;if(t.childNodes.length>i){let e=parseInt(t.dataset.page);(e=e||0)<c.numberSlide-1&&(i=e+1,i=c.slides[i],t=t.childNodes[t.childNodes.length-1],c.moveItemToNextSlide(t,i))}}if("function"==typeof c.opts.afterItemDrop){for(var o=[],a=0;a<c.slides.length;a++)for(var s=c.slides[a].children(),r=0;r<s.length;r++)o.push(s[r]);c.opts.afterItemDrop(o)}},this.disableItemDrag=function(){c.childConfig.allowDrag=!1},this.enableItemDrag=function(){c.childConfig.allowDrag=!0},this.parentConfig={handleClass:"",revertOnSpill:!0,direction:"",allowDrag:!1,movingClass:"is-moving",disableClass:"disabled-slide",class:"slide"},this.childConfig={handleClass:"misa-subapp",revertOnSpill:!0,direction:"horizontal",allowDrag:!0,movingClass:"is-moving",disableClass:"disabled-subapp",class:"misa-subapp"},this.constructor=function(e){c.callParent.constructor(e),c.initDrag()},this.createDom=function(){c.callParent.createDom()},this.initDrag=function(){c.drakeParent=dragula([c.containerEl],{moves:function(e,t,i,n){var o,a;return!!c.parentConfig.allowDrag&&(o=c.parentConfig.handleClass.split(","),a=!1,o.forEach(function(e){($(i).parents("."+e).first()||i.classList.contains(e.trim()))&&(a=!0)}),a)},accepts:function(e,t,i,n){return t.classList.contains(c.queryClass.container)},revertOnSpill:c.parentConfig.revertOnSpill,direction:c.parentConfig.direction}).on("drag",function(e,t){e.classList.add(c.parentConfig.movingClass),c.fn.dragParent(e,t),"function"==typeof e.dragfn&&e.dragfn(e,t)}).on("dragend",function(e){e.classList.remove(c.parentConfig.movingClass),c.fn.dragendParent(e),c.__updateParentOrder(),"function"==typeof e.dragendfn&&e.dragendfn(e)}).on("drop",function(e,t,i,n){e.classList.remove(c.parentConfig.movingClass),c.fn.dropParent(e,t,i,n),"function"==typeof e.dropfn&&e.dropfn(e,t,i,n)}),c.drakeChild=dragula(c.slideELs,{moves:function(e,t,i,n){var o=!1;return!(!c.childConfig.allowDrag||$(document).width()<851)&&(c.childConfig.handleClass?(c.childConfig.handleClass.split(",").forEach(function(e){(0<$(i).parents("."+e).first().length||i.classList.contains(e.trim()))&&(o=!0)}),o):!!c.childConfig.allowDrag)},revertOnSpill:c.childConfig.revertOnSpill,direction:c.childConfig.direction||null}).on("cancel",function(e,t,i){c._enableAllParent()}).on("drag",function(e,t){var i=e.getAttribute("class");""!==i&&-1<i.indexOf(c.notDraggable)?c.drakeChild.cancel(!0):(e.classList.add(c.childConfig.movingClass),c.fn.dragChild(e,t),null!==e&&"function"==typeof e.dragfn&&e.dragfn(e,t))}).on("dragend",function(e,t){c.fn.dragendChild(e,t),null!==e&&"function"==typeof e.dragendfn&&e.dragendfn(e,t)}).on("drop",function(e,t,i,n){c._enableAllParent(),null!==e&&(c.fn.dropChild(e,t,i,n),e.classList.remove(c.childConfig.movingClass),"function"==typeof e.dropfn)&&e.dropfn(e,t,i,n)})},this._enableAllParent=function(){var e=document.querySelectorAll("."+c.parentConfig.class);if(0<e.length&&void 0!==e)for(var t=0;t<e.length;t++)e[t].classList.remove(c.parentConfig.disableClass)},this.__updateParentOrder=function(){for(var e=0;e<c.containerEl.childNodes.length;e++)c.containerEl.childNodes[e].dataset.order=e}}),APUI.AMISLauncher=APCore.Class.extend(function(){var l=this;function t(){$(document).unbind("click.amislauncher").on("click.amislauncher",".apui-launcher-trigger",function(e){_stopEvent(e),i(),l.showLauncher()})}function i(){l.isRendered||(l.renderDom(),l.initAction(),l.loadData(),l.isRendered=!0)}function n(){l.menu=new APUI.AccountMenu({trigger:"#AMIS_Account_Launcher"})}function u(){l.editMode=!1,a("all"),l.slidePage.disableItemDrag(),l.launcher.removeClass("edit-mode")}function a(e){l.jSearch.val("");var t,i,o,n="lastapps"==(e=_isValue(e)?e:"all")&&"lastapps"==l.currentFilter;switch(l.currentFilter=e,l.jTopContainer.find(".apui-launcher-category-item.active").removeClass("active"),l.jTopContainer.find("[filter='"+e+"']").addClass("active"),e){case"all":l.render(l.data.filter(function(e){return!e.IsHidden}));break;case"lastapps":o=[],APCore.Fn.getAppOpenTime(function(t){var i=[];Object.keys(t).forEach(function(e){i.push({AppCode:e,Date:new Date(t[e])})}),l.data.forEach(function(e){e.OpenOrder=null});for(var i=i.sortObject("Date DESC"),e=0;e<i.length;e++){var n=function(t){return l.data.firstOrDefault(function(e){return!e.IsHidden&&e.ApplicationCode==t})}(i[e].AppCode);n&&o.push(n)}l.render(o)},!n);break;case"favorite":s();break;default:t=e,i=l.data.filter(function(e){return!e.IsHidden&&e.ApplicationCategoryID+""==t+""}),l.render(i)}}function s(){var e=l.data.filter(function(e){return e.IsFavorite&&!e.IsHidden});l.render(e)}function r(e,t){t?(e.addClass("favorite"),e.find(".apui-launcher-favorite").attr("title",l.resource.Launcher_RemoveFavorite)):(e.removeClass("favorite"),e.find(".apui-launcher-favorite").attr("title",l.resource.Launcher_Favorite))}function o(){APUI.Fn.getAllNotificationNumbers(function(e){var n;n=e,l.subapps.find(".misa-subapp").each(function(e,t){var i=(t=$(t)).attr("code");if(n[i]&&0<n[i]){let e=n[i];99<e&&(e="99+"),t.find(".misa-subapp-notifi-count").text(e).show()}else t.find(".misa-subapp-notifi-count").hide()})})}function c(e){e=parseInt(e),(isNaN(e)||e<1||e>l.numberBg)&&(e=1),l.launcher.attr("bg",e);e=e;e=AMISPlatformConfig.CDNFilePath.cdnLauncherBackground+"BG_{0}.jpg?_=".format(e)+AMISPlatformConfig.BackgroundVersion;l.currentBgURL=e,$("<img style='opacity:0; display:none;' src='"+e+"' class='pre-load-image'/>").one("load",function(e){e.currentTarget.remove(),requestAnimationFrame(function(){l.launcher.css("background-image","url('"+l.currentBgURL+"')")})}.bind(l))}function d(e){APUI.Fn.cacheLauncherApps(e),l.data=e}function p(){return APUI.Fn.getCacheLauncherConfig()}function e(){l.jPageContainer.hide(),l.emptyBox||(l.emptyBox=$(["<div class='misa-launcher-empty-box'>","<div class='misa-launcher-empty-header bg-empty-launcher'></div>","<div class='misa-launcher-empty-title'>",l.resource.Empty_AdminTitle,"</div>","<div class='misa-launcher-empty-subtitle'>",l.resource.Empty_AdminSubTitle,"</div>","<div class='misa-launcher-admin-container'>","<div class='misa-launcher-admin-label'>",l.resource.Empty_AdminLabel,"</div>","<div class='misa-launcher-admin-list custom-scroll'>","<div class='misa-launcher-admin-item'><div class='apui-timeline apui-line-90' style='height:19px'></div></div>","<div class='misa-launcher-admin-item'><div class='apui-timeline apui-line-60' style='height:19px'></div></div>","</div>","</div>","</div>"].join("")),l.body.append(l.emptyBox)),l.listAdmin?g(l.listAdmin):APCore.Fn.get(APCore.API.loadAdminContact,null,function(e){e&&e.Success?g(e.Data):l.notice.showError(l.resource.Error,5)}),l.emptyBox.show()}function g(e){l.listAdmin=e;let t=l.emptyBox.find(".misa-launcher-admin-list").first();setTimeout(function(){t.html(""),e.forEach(function(e){e=$("<div class='misa-launcher-admin-item'><b file='FullName'>{#FullName#}</b> <span field='Mobile'> - {#Mobile#}</span><span field='Email'> - {#Email#}</span>".formatData(e));t.append(e)})},500)}function h(){l.appDock||(l.appDock=new APUI.AMISAppDock({darkMode:!!l.dockConfig.DarkMode,trigger:l.opts.trigger})),_isValue(l.__id)&&l.__id==localStorage.getItem(APSTORAGE_KEY.LauncherID)?m():(APUI.Fn.cacheLauncherApps(null),l.loadData(m.bind(l)))}function m(){l.appDock.isHidden()?l.appDock.show():l.appDock.hide()}function f(){l.launcher.is(":hidden")&&(l.appDock&&l.appDock.hide(),o(),l.menu||n(),a(l.currentFilter),u(),l.launcher.fadeIn(300,function(){setTimeout(function(){l.launcher.focus(),l.btnMarket.addClass("apui-wave-effect"),0==l.data.length&&e()},10)}))}function b(e){var t,i=l.launcher.find(".misa-subapp").toArray();e=l.currentSubApp?(t=i.indexOf(l.currentSubApp),e?0<=(e=t-5)&&parseInt(e/l.maxAppPerPage)==parseInt(t/l.maxAppPerPage)?e:t:0<t?t-1:i.length-1):0,l.currentSubApp=i[e],I(l.currentSubApp,e)}function y(e){var t,i=l.launcher.find(".misa-subapp").toArray(),n=null;n=l.currentSubApp?(t=i.indexOf(l.currentSubApp),e?(e=t+5,parseInt(e/l.maxAppPerPage)==parseInt(t/l.maxAppPerPage)?e:t):t<i.length-1?t+1:0):0,l.currentSubApp=i[n],I(i[n],n)}function I(e,t){e&&null!=t&&(l.launcher.find(".misa-subapp.selected").removeClass("selected"),e.classList.add("selected"),l.currentSubApp=e,e=parseInt(t/l.maxAppPerPage),l.slidePage.currentSlide!=e)&&l.slidePage.activePage(e)}return this.maxAppPerPage=15,this.numberBg=10,this.triggerName="mouseover",this.getAppsUrl=APCore.API.getSubAppsAPI,this.setLauncherSortApi=APCore.API.setLauncherSortAPI,this.customLauncherApps=APCore.API.customLauncherApps,this.setLauncherBackgroundApi=APCore.API.setLauncherBackgroundApi,this.notice=APUI.Notice,this.StartupMode=APStartupMode,this.default={getAppUrl:"",trigger:"#AMIS_Launcher",userName:"",logoutFn:null,showBack:!0,afterRequest:null,autoLoad:!0},this.constructor=function(e){l.lang=_getAppLanguage(),l.resource=APCoreResource[l.lang],l.resource||(l.resource=APCoreResource[PLATFORM_DEFAULT_LANGUAGE]),l.opts=$.extend(l.default,e),l.dockConfig=l.opts.dockConfig,l.dockConfig||(l.dockConfig={Disable:!1}),l.dockConfig.Enable=!l.dockConfig.Disable,l.addTriggerEvent(),l.opts.isHome&&i()},this.addTriggerEvent=function(){var e=l.opts.trigger;"string"==typeof e?($(document).unbind("click.altrigger").on("click.altrigger",l.opts.trigger,function(e){_stopEvent(e),i(),l.dockConfig.Enable?h():l.showLauncher()}),".apui-launcher-trigger"!=e&&t()):"object"==typeof e&&(e.unbind("click.altrigger").on("click.altrigger",function(e){_stopEvent(e),i(),l.dockConfig.Enable?h():l.showLauncher()}),e.hasClass("apui-launcher-trigger")||t())},this.renderDom=function(){$("body").find(".misa-launcher").remove(),l.launcher=$(["<div class='misa-launcher' style='background-image: linear-gradient(180deg, #4f5566, #ccc); display:none' tabindex='0' >","<div class='misa-launcher-content'>","<div class='misa-launcher-topbar'>","<div class='misa-launcher-logo-wrap'>","<div class='apui-launcher-close'></div>","<div class='apui-logo-amis' title=''></div>","</div>","<div class='apui-flex-1'></div>","<input type='text' class='apui-launcher-search-field' placeholder='"+l.resource.Search_Placeholder+"' autocomplete='off'>","<a href='/market/' target='_blank' class='apui-launcher-market-btn apui-icon-market-mini'>"+l.resource.Launcher_Market_Button+"</a>","<div class='apui-launcher-setting-btn apui-icon-setting-white'></div>","<div class='avatar' id='AMIS_Account_Launcher'></div>","</div>","<div class='misa-launcher-body'>","<div class='misa-launcher-page-container'>","<div class='apui-top-field'>","<div class='apui-launcher-categories'></div>","<div class='apui-launcher-buttons'>","<div class='apui-flex-1'></div>","<div class='apui-launcher-button' type='btn-cancel'>",l.resource.ButtonCancel,"</div>","<div class='apui-launcher-button' type='btn-save'>",l.resource.ButtonSave,"</div>","<div class='apui-flex-1'></div>","</div>","</div>","<div class='misa-launcher-subapps'></div>","</div>","</div>","</div>","<div class='misa-launcher-bg-setting' style='width:0'>","<i class='apui-icon icon-close'></i>","<div class='bg-setting-title'>",l.resource.BackgroundSetting_Title,"</div>","<div class='bg-setting-images custom-scroll'></div>","</div>","<div class='misa-launcher-footer'></div>","<p style='font-weight: 500; opacity:0; position:fixed; top: -10000px'>amis<span class='font-weight: bold'>misa</span></p>","</div>"].join("")),e=p().Background;c(_isValue(e)?e:1),l.btnMarket=l.launcher.find(".apui-launcher-market-btn").first();var e="Copyright © 1994 - {0} MISA JSC | Website: <a href='https://amis.misa.vn/tin-tuc' target='_blank'>https://amis.misa.vn/tin-tuc</a>".format((new Date).getFullYear());l.launcher.find(".misa-launcher-footer").html(e),$("body").append(l.launcher),l.opts.isHome?(l.launcher.find(".misa-launcher-logo-wrap").attr("type","home"),l.btnMarket.addClass("apui-wave-effect"),l.launcher.show()):(l.launcher.hide(),e=APCore.Fn.getInitData().ApplicationName,e=l.resource.Launcher_BackToApp.format(e),new APCore.Widgets.Tooltip({trigger:l.launcher.find(".misa-launcher-logo-wrap"),text:e,position:"bottom",css:{width:"auto","min-height":"19px","font-size":"13px","text-align":"center",padding:"0 16px","line-height":"24px",opacity:".8"},delay:100})),l.content=l.launcher.find(".misa-launcher-content").first(),l.top=l.content.find(".misa-launcher-topbar").first(),l.body=l.content.find(".misa-launcher-body").first(),l.jPageContainer=l.body.find(".misa-launcher-page-container").first(),l.jAccount=l.top.find(".avatar").first(),l.jSearch=l.top.find(".apui-launcher-search-field").first(),l.jSetting=l.top.find(".apui-launcher-setting-btn").first(),l.jTopContainer=l.jPageContainer.find(".apui-launcher-categories").first(),l.subapps=l.jPageContainer.find(".misa-launcher-subapps").first(),l.slidePage=new APUI.SlidePageDrag({renderTo:l.subapps,maxItemsPerPage:l.maxAppPerPage,numberSlide:1,height:null,slideStyle:"",showNextBack:!0,afterItemDrop:function(e){}.bind(l),onItemDrag:function(){APCore.Widgets.hideAllPopups()}.bind(l),afterClick:function(){l.hideLauncher()}}),l.slidePage.disableItemDrag(),l.jSetting.APDropDownMenu({width:"264px",type:" ",getItem:function(e,t){return $("<div class='apui-result-item apui-launcher-setting-item {1}'>{0}</div>".format(e.Display,e.Icon))},data:[{Value:"1",Display:l.resource.Menu_Setting,Icon:"apui-icon-setting-gray"},{Value:"2",Display:l.resource.Menu_BackgroundSetting,Icon:"apui-icon-image-gray"},{Value:"3",Display:l.resource.Menu_AppsSetting,Icon:"apui-icon-apps-gray"}],onItemClick:function(e,t,i){switch(t.Value){case"1":APUI.Fn.showStartupSetting();break;case"2":if(!l.renderBgSetting){l.renderBgSetting=!0,l.bgSetting=l.launcher.find(".misa-launcher-bg-setting").first();var n=l.bgSetting.find(".bg-setting-images");n.html("");for(var o=0;o<l.numberBg;o++){var a=$("<div class='bg-setting-item'></div>");a.attr("bg",o+1),a.attr("style","background-image:url('"+function(e){return AMISPlatformConfig.CDNFilePath.cdnLauncherBackground+"Thumb/BG_{0}.jpg?_=".format(e)+AMISPlatformConfig.BackgroundVersion}(o+1)+"')"),n.append(a)}var s=l.launcher.attr("bg");l.bgSetting.find(".bg-setting-item.selected").removeClass("selected"),l.bgSetting.find(".bg-setting-item[bg='"+s+"']").addClass("selected"),l.bgSetting.on("click",".icon-close",function(e){l.launcher.removeClass("bg-setting")}),l.bgSetting.on("click",".bg-setting-item",function(e){var t=$(this),i=t.attr("bg"),t=(c(i),l.bgSetting.find(".bg-setting-item.selected").removeClass("selected"),t.addClass("selected"),t=i,(n=p()).Background=t,n),n=(APUI.Fn.cacheLauncherConfig(t),i);n=i||1,APCore.Fn.post(l.setLauncherBackgroundApi+"/"+n)})}l.launcher.addClass("bg-setting");break;case"3":l.setCustomMode()}}}),setTimeout(function(){l.launcher.focus()},500),document.body.clientWidth<=851&&l.slidePage.setDisableSlide(),l.opts.isHome&&(o(),n())},this.setCustomMode=function(){l.editMode=!0,l.render(l.data),l.slidePage.enableItemDrag(),l.launcher.addClass("edit-mode")},this.initAction=function(){l.launcher.unbind("click.lcsa").on("click.lcsa",".misa-subapp",function(e){var t,i=$(this);if($(e.target).is(".apui-launcher-favorite"))return _stopEvent(e),e=!i.hasClass("favorite"),t=i.attr("code"),r(i=i,e=e),(i=l.data.firstOrDefault(function(e){return e.ApplicationCode==t}))&&(i.IsFavorite=e),d(l.data),"favorite"!=l.currentFilter||e||s(),APCore.Fn.post(APCore.API.updateFavoriteAppApi+"?appCode="+t+"&isFavorite="+!!e,null),!1}),l.launcher.unbind("click.lcbtn").on("click.lcbtn",".apui-launcher-button",function(e){var t=$(e.currentTarget).attr("type");if(_stopEvent(e),"btn-save"==t){for(var i=l.launcher.find(".misa-subapp"),n=[],o=[],a=[],s=0;s<i.length;s++){var r=$(i[s]),c=r.attr("code"),r=_isTrue(r.attr("notshow")),c=(r&&o.push(c),n.push(c),function(t){return l.data.firstOrDefault(function(e){return e.ApplicationCode.equals(t,!0)})}(c));c&&(c.IsHidden=r,a.push(c))}d(a);e={Sort:btoa(n.join(";")),Hidden:btoa(o.join(";"))};APCore.Fn.post(l.customLauncherApps,e)}u()}),l.launcher.unbind("click.cate").on("click.cate",".apui-launcher-category-item",function(e){var t=$(this);_stopEvent(e),a(t.attr("filter"))}),l.launcher.unbind("click.lc").on("click.lc",function(e){e=$(e.target);(e.hasClass("close-form")||e.hasClass("misa-launcher-subapps")||e.hasClass("misa-launcher-page-container")||e.hasClass("misa-launcher-body"))&&!l.subapps.hasClass("is-moving")&&l.hideLauncher(),APCore.Widgets.hideAllPopups(e)}),l.opts.isHome||l.launcher.find(".misa-launcher-logo-wrap").on("click",function(e){_stopEvent(e),l.hideLauncher()}),l.launcher.keydown(function(e){var t=e.which,i=$(e.target);if(27==t)_stopEvent(e),l.hideLauncher();else if(13==t){var n,o;_stopEvent(e),i.is(l.jSearch)?(n=l.jSearch.val().trim().toLowerCase())?(o=l.data.filter(function(e){var t,i;return!e.IsHidden&&(t=APUI.Fn.getAppNameByCulture(e),i=APUI.Fn.getAppDescriptionByCulture(e),e.ApplicationCode.like(n)||t.like(n)||i&&i.like(n))}),l.render(o,!0),l.jTopContainer.find(".apui-launcher-category-item.active").removeClass("active")):a("all"):i.is(l.launcher)&&0<(o=l.launcher.find(".misa-subapp.selected").first()).length&&function(e,t){e=e||"/";t||0==e.toLowerCase().indexOf("http")||0==e.toLowerCase().indexOf("/apis")?window.open(e,"_blank"):location.href=e}(o.attr("href"))}else if(!i.is(l.jSearch)&&37<=t&&t<=40)switch(_stopEvent(e),t){case 37:b();break;case 38:b(!0);break;case 39:y();break;case 40:y(!0)}}.bind(l)),$(document).on("resize.lc",function(){document.body.clientWidth<=851?l.slidePage.setDisableSlide():l.slidePage.setEnableSlide()});var i=l.launcher.find(".apui-slide-prev"),n=l.launcher.find(".apui-slide-next");$("body").unbind("mousemove.lc touchmove.lc").on("mousemove.lc touchmove.lc",".misa-subapp",function(e){var t;!$("body").hasClass("gu-unselectable")||l.subapps.hasClass("is-moving")||l.stopNextSlideByDrag||(l.stopNextSlideByDrag=!0,t=$(this).offset(),l.subAppOffet||(l.subAppOffet=t),l.subAppOffet.left>t.left?$(this).offset().left<i.offset().left&&0<l.slidePage.currentSlide&&!l.stopchangeslide&&(l.stopchangeslide=!0,l.slidePage.currentSlide=l.slidePage.currentSlide-1,l.slidePage.activePage(l.slidePage.currentSlide),t=l.subAppOffet=null,setTimeout(function(){l.stopchangeslide=!1},200)):l.subAppOffet.left<t.left&&t.left>n.offset().left&&l.slidePage.currentSlide<l.slidePage.numberSlide-1&&!l.stopchangeslide&&(l.stopchangeslide=!0,l.slidePage.currentSlide=l.slidePage.currentSlide+1,l.slidePage.activePage(l.slidePage.currentSlide),t=l.subAppOffet=null,setTimeout(function(){l.stopchangeslide=!1},200)),l.subAppOffet=t,setTimeout(function(){l.stopNextSlideByDrag=!1},200))})},this.loadData=function(a){APUI.Fn.getLauncherApps(function(e,t){var i,n,o;l.__id=localStorage.getItem(APSTORAGE_KEY.LauncherID),e?(l.data=e.filter(function(e){return!e.ApplicationCode.equals("Apps",!0)}),c(APUI.Fn.getCacheLauncherConfig().Background),i={},n=[],l.data.forEach(function(t){var e="";t.CategoryName&&!t.IsHidden&&(e="string"==typeof t.CategoryName?t.CategoryName:t.CategoryName[_getAppLanguage()]||t.CategoryName[PLATFORM_DEFAULT_LANGUAGE]),_isValue(e)||(e=t.CategoryNameDefault),i[t.ApplicationCategoryID]||(i[t.ApplicationCategoryID]=t.CategoryName),_isValue(e)&&!n.firstOrDefault(function(e){return e.Value==t.ApplicationCategoryID})&&n.push({Value:t.ApplicationCategoryID,Display:e,SortOrder:t.CategorySortOrder})}),e=n,l.jTopContainer.html(""),o=[{Value:"lastapps",Title:l.resource.Launcher_Category_Recent,Icon:"apui-icon-history-white"},{Value:"favorite",Title:l.resource.Launcher_Category_Favorite,Icon:"apui-icon-favorite-white"},{Value:"all",Title:l.resource.Launcher_Category_All,Display:l.resource.Launcher_Category_All,Icon:""}],e=e.sortObject("SortOrder ASC"),Array.isArray(e)&&o.addRange(e),o.forEach(function(e){var t=$("<div class='apui-launcher-category-item apui-ellipsis'></div>");t.text(e.Display),t.attr("filter",e.Value),e.Icon&&t.addClass("apui-launcher-cate-icon "+e.Icon),"all"==e.Value&&t.addClass("active"),new APCore.Widgets.Tooltip({trigger:t,text:e.Title||e.Display,css:{width:"auto","min-height":"19px","font-size":"13px","text-align":"center",padding:"0 16px","line-height":"24px",opacity:".8"},position:"top",delay:500}),l.jTopContainer.append(t)}),l.render(l.data.filter(function(e){return!e.IsHidden})),"function"==typeof a&&a(!0)):(l.data=[],"function"==typeof a&&a(!1))},!1)},this.render=function(e){if(e&&0<e.length){l.jPageContainer.show();var t=Math.ceil(e.length/l.maxAppPerPage);l.slidePage.renderSlide(t);for(var i=0;i<l.slidePage.slides.length;i++){var n=l.slidePage.slides[i];l.renderSlide(n,i,e)}o()}else l.slidePage.renderSlide(1)},this.renderSlide=function(e,t,i){e.html("");for(var n=i.length<(t+1)*l.maxAppPerPage?i.length:(t+1)*l.maxAppPerPage,o=t*l.maxAppPerPage;o<n;o++){var a=l.renderSubApp(i[o]);e.append(a.jObject)}},this.onCheckBoxChange=function(e,t){t.subapp.jObject.attr("notshow",_isTrue(e)?"false":"true")},this.renderSubApp=function(e){var t=e.ApplicationCode.trim(),i=e.URL||"",n={},o=APUI.Fn.getAppNameByCulture(e),a=(n.jObject=$("<a class='misa-subapp' menu-id='"+e.ApplicationID+"'><div class='misa-subapp-background'></div><div class='misa-subapp-notifi-count' style='display:none'></div><i class='apui-launcher-favorite' title='"+l.resource.Launcher_Category_Favorite+"'></i><div class='apui-subapp-visible'></div></a>"),l.editMode?(n.jObject.attr("href","javascript:void(0)"),a=n.jObject.find(".apui-subapp-visible").first(),n.checkHidden=new APCore.Widgets.APCheckbox({renderTo:a,label:"",afterChange:l.onCheckBoxChange.bind(l)}),n.checkHidden.setChecked(!e.IsHidden),(n.checkHidden.subapp=n).jObject.attr("notshow",_isTrue(e.IsHidden)?"true":"false"),new APCore.Widgets.Tooltip({trigger:a,text:"Ẩn/hiện",css:{width:"auto","min-height":"19px","font-size":"13px","text-align":"center",padding:"0 16px","line-height":"24px",opacity:"1"},position:"top",delay:500})):(n.jObject.attr("href",i),0!=i.toLowerCase().indexOf("http")&&0!=i.toLowerCase().indexOf("/apis")||n.jObject.attr("target","_blank"),r(n.jObject,e.IsFavorite)),n.appCode=e.ApplicationCode,n.jObject.attr("code",t),n.jObject.append(['<div class="subapp-logo"></div><div class="subapp-name apui-ellipsis" title="',o,'">',o,'</div><div class="subapp-des apui-ellipsis" > ',"","</div >"].join("")),"<img src='"+e.FullLogoURL+"'/>");return n.jObject.find(".subapp-logo").first().append(a),n},this.hideLauncher=function(){l.opts.isHome||l.launcher.fadeOut(250,function(){}),l.btnMarket.removeClass("apui-wave-effect")},this.reset=function(){l.appDock&&l.appDock.reset(),l.loadData()},this.showLauncher=function(){l.isRendered||i(),_isValue(l.__id)&&l.__id==localStorage.getItem(APSTORAGE_KEY.LauncherID)?f():(APUI.Fn.cacheLauncherApps(null),l.loadData(f.bind(l)))},l}),APUI.NPSBox2=APUI.ModuleBase.extend(function(){var o=this;function t(){o.isDisable=!0,o.jSendButton.addClass("nps-disabled")}function i(){o.isDisable=!1,o.jSendButton.removeClass("nps-disabled")}function n(){var e;_isValue(o.phoneNumber)||(o.phoneNumber=""),o.jPhoneNumber.val(o.phoneNumber),o.opts.requireNumberPhone&&!_isValue(o.phoneNumber)?_isValue(o.score)&&(o.jPhoneNumber.parent().show(),o.score>o.minScore?(o.jPhoneRequire.hide(),e=APCore.Fn.getInitData(),o.jPhoneTitle.text(o.resource.NPSBox2_PhoneTitle.format(e.ApplicationName))):(o.jPhoneRequire.show(),o.jPhoneTitle.text(o.resource.NPSBox2_PhoneTitleLowScore))):o.jPhoneNumber.parent().hide()}this.name="NPSBox2",this.minScore=6,this.SatisficPoint={Question:"",Answer:""},this.LowPointReason={Question:"Loại lý do?",Answer:""},this.FeedBackData={Question:"Ý kiến đóng góp thêm (nếu có)?",Answer:""},this.default={renderTo:$("body"),afterSave:null,requireComment:!1,requireNumberPhone:!1},this.createDom=function(){var e=APCore.Fn.getInitData(),e=(o.appCode=e.ApplicationCode,o.appName=e.ApplicationName,o.resource.NPSBox2_ScoreTitle.format(o.appName));o.jScoreTitle.html(e),o.SatisficPoint.Question=o.jScoreTitle.text()},this.render=function(){o.renderTo.append(o.jObject),o.jTypes.html("");[{Display:"Sản phẩm không đáp ứng yêu cầu",Value:"1"},{Display:"Thao tác sử dụng không thuận tiện",Value:"5"},{Display:"Sản phẩm hay bị lỗi",Value:"2"},{Display:"Bảo mật phần mềm kém",Value:"7"},{Display:"Tốc độ xử lý chậm",Value:"6"},{Display:"Dịch vụ tư vấn, hỗ trợ khách hàng kém",Value:"3"},{Display:"Giá cả đắt",Value:"4"},{Display:"Lý do khác",Value:"0"}].forEach(function(e){var t=$("<div class='apui-npsbox2-type-item'></div>");t.attr("value",e.Value),t.text(e.Display),o.jTypes.append(t)}),o.rendered=!0,o.validate()},this.setForce=function(){o.jObject.find("[action='cancel']").hide()},this.initAction=function(){o.jObject.on("click",".apui-npsbox2-type-item",function(e){_stopEvent(e);e=$(e.target);o.jObject.find(".apui-npsbox2-type-item.nps-selected").removeClass("nps-selected"),e.addClass("nps-selected"),o.validate()}),o.jObject.on("click","[action='send']",function(e){_stopEvent(e),o.jSendButton.hasClass("nps-disabled")||o.isLoading||o.send()}),o.jObject.on("click","[action='close']",function(e){_stopEvent(e),o.hide(),o.cancel()}),o.jObject.on("click","[action='cancel']",function(e){_stopEvent(e),o.hide(),o.cancel()}),o.jObject.on("click",".apui-npsbox2-score-item",function(e){_stopEvent(e);var e=$(e.target),t=e.text();o.jObject.find(".apui-npsbox2-score-item").removeClass("nps-selected").addClass("nps-unselected"),e.removeClass("nps-unselected").addClass("nps-selected"),e=parseInt(t),t="",t=e>o.minScore?"happy":"nothappy",o.jObject.attr("state",t),o.SatisficPoint.Answer=e,(o.score=e)<=o.minScore&&o.opts.requireComment?(o.jObject.find(".apui-npsbox2-comment-title").show(),o.jComment.attr("placeholder",o.resource.NPSBox2_ContentPlaceholder_Require)):(o.jObject.find(".apui-npsbox2-comment-title").hide(),o.jComment.attr("placeholder",o.resource.NPSBox2_ContentPlaceholder)),n(),o.validate()}),o.jComment.on("keyup",function(e){o.validate()}),o.jComment.on("blur",function(e){o.validate()}),o.jPhoneNumber.on("keyup",function(e){o.validate()}),o.jPhoneNumber.on("blur",function(e){o.validate()})},this.validate=function(){var e=o.jObject.find(".apui-npsbox2-score-item.nps-selected").eq(0);if(e&&0<e.length)if(parseInt(e.text())<=o.minScore)if(o.opts.requireComment&&0==o.jComment.val().trim().length)t();else{if(o.opts.requireNumberPhone)if(!(o.phoneNumber||o.jPhoneNumber.val().trim()))return void t();(0<o.jObject.find(".apui-npsbox2-type-item.nps-selected").length?i:t)()}else i();else t()},this.send=function(){o.FeedBackData.Answer=o.jComment.val();var i,e=o.SatisficPoint.Answer>o.minScore?[o.SatisficPoint,o.FeedBackData]:(state="nothappy",i=[],o.jObject.find(".apui-npsbox2-type-item.nps-selected").each(function(e,t){i.push($(t).attr("value"))}),0==i.length&&i.push("0"),o.LowPointReason.Answer=i.join(", "),[o.SatisficPoint,o.FeedBackData,o.LowPointReason]),t=o.phoneNumber||o.jPhoneNumber.val().trim(),e=(o.isLoading=!0,APCore.Fn.serialize(e)),t={AppCode:o.appCode,SurveyID:o.surveyID,PhoneNumber:t,Result:e},n=(o.hide(),{data:{eventId:APNPSConstant.saveEventID}});_isFn(o.callback)&&o.callback(n),"test"==o.surveyID?(APCore.Fn.logTrace("user submit nps with SurveyID: "+o.surveyID),APCore.Fn.logTrace("user submit nps with Result: "+e)):APCore.Fn.post(APCore.API.submitSurvey,t,function(){o.isLoading=!1})},this.afterCancel=function(){var e=APCore.Fn.getInitData();APCore.Fn.post(APCore.API.cancelSurvey+"/"+e.ApplicationCode+"?surveyID="+o.surveyID,null)},this.cancel=function(){var e={data:{eventId:APNPSConstant.cancelEventID}};_isFn(o.callback)&&o.callback(e)},this.hide=function(){o.jObject.fadeOut(100)},this.show=function(e,t,i){o.surveyID=e,o.phoneNumber=t,o.callback=i,o.rendered||o.render(),n(),o.isLoading=!1,o.jObject.attr("state","score"),o.jObject.fadeIn(100)}}),APUI.Security2FABox=APUI.ModuleBase.extend(function(){var o=this;this.name="Security2FABox",this.default={renderTo:$("body")},this.createDom=function(){o.jObject.appendTo(o.opts.renderTo)},this.hide=function(e){o.jObject.fadeOut(100),_isFn(o.afterHide)&&o.afterHide(e)},this.show=function(e,t,i){o.data=e;let n=o.data.URL;_isValue(n)||(n=AMISPlatformConfig.URL.misaid2FAURL),o.jIframe.attr("src",n),o.jObject.fadeIn(100),o.afterLogin=t,o.afterHide=i},this.onMessage=function(e){try{var t,i=new URL(o.data.URL),n=new URL(e.origin);i.host.equals(n.host,!0)&&(t=e?e.data:"",_isValue(t)&&"object"==typeof t&&"misaid-post-resize"==t.action&&t.size?o.jContent.css({width:t.size.width,height:t.size.height}):t==MISAID2FAEventName.Logout?(o.hide(t),_logoutAMIS()):t==MISAID2FAEventName.Close?o.hide(t):t==MISAID2FAEventName.Enable2FA&&(o.hide(t),APCore.Fn.post(APCore.API.continueLogin,{Token:o.data.ContinueToken},function(e){_isFn(o.afterLogin)&&o.afterLogin(e)})))}catch(e){console.log(e),o.hide()}},this.initAction=function(){o.jObject.find(".apui-2fabox-close").on("click",function(e){o.hide("Close")}),window.removeEventListener("message",o.onMessage.bind(o)),window.addEventListener("message",o.onMessage.bind(o))}}),APUI.StartupSettingBox=APUI.ModuleBase.extend(function(){var o=this;function t(){return APUI.Fn.getCacheLauncherConfig()}this.name="StartupSettingBox",this.StartupMode=APStartupMode,this.default={},this.constructor=function(e){o.opts=$.extend(o.default,e),o.lang=_getAppLanguage(),o.resource=APCoreResource[o.lang],o.resource||(o.resource=APCoreResource[PLATFORM_DEFAULT_LANGUAGE])},this.bindingConfigSetting=function(e){var t=o.StartupMode.LastApplication;e&&(t=e.StartupMode),o.jObject.find("input[startup='"+t+"']").trigger("click")},this.init=function(e){o.loadTemplate(),$("body").append(o.jObject),o.data=e,o.data.forEach(function(e){e.CurrentApplicationName=APUI.Fn.getAppNameByCulture(e)});e={renderTo:o.jObject.find(".apui-popup-search-app").first(),search:!0,data:o.data,placeholder:o.resource.SettingPopup_SearchAppPlaceholder,displayField:"CurrentApplicationName",valueField:"ApplicationCode",width:"100%",getItem:function(e){var t=$("<div class='apui-combobox-item result-item app-search-item'></div>"),i=$("<div class='app-image'></div>"),n="<img src='"+e.FullLogoURL+"'/>";return i.append(n),t.append(i),t.append(["<span class='name'>",e.CurrentApplicationName,"</span>"].join("")),t},afterSetValue:function(e,t){e="<img src='"+e.FullLogoURL+"'/>";o.jObject.find(".selected-app-logo").html("").append(e)}},o.cbAppSearch=new APCore.Widgets.Combobox(e),o.jObject.on("click",".apui-popup-close",function(e){o.hide()}),o.jObject.on("click",".btn-cancel",function(e){o.hide()}),o.jObject.on("click",".btn-ok",function(e){var t=o.jObject.find("input[startup]"),i="",t=(t.each(function(e,t){t.checked&&(i=$(t).attr("startup"))}),parseInt(i)),n="";(t=isNaN(t)?o.StartupMode.Launcher:t)==o.StartupMode.FixedApplication&&(n=(t=o.cbAppSearch.getSelectedRecord())?t.ApplicationCode+";"+t.URL:(o.cbAppSearch.selectFirst(),(t=o.cbAppSearch.getSelectedRecord()).ApplicationCode+";"+t.URL)),APUI.Fn.updateLauncherStartup(i,n),o.hide()}),o.jObject.find("input[startup]").on("change",function(e){var e=$(e.target);e[0].checked&&(e.attr("startup")==o.StartupMode.FixedApplication?(o.jObject.find(".apui-startup-app").show(),(e=(e=t()).FixedApp?e.FixedApp.split(";")[0]:"")?o.cbAppSearch.setValue(e):o.cbAppSearch.selectFirst()):o.jObject.find(".apui-startup-app").hide())}),e=o.StartupMode.LastApplication;o.jObject.find("input[startup='"+e+"']").trigger("click")},this.show=function(){APUI.Fn.getLauncherApps(function(e){o.jObject?o.cbAppSearch.loadData(e,!0):o.init(e);e=t();o.bindingConfigSetting(e),o.jObject.fadeIn(80)})},this.hide=function(){o.jObject.fadeOut(80)}}),APUI.SystemPopup=APCore.Class.extend(function(){var o=this;function a(e){var t=$('<div class="apui-system-btn"></div>'),i=(t.attr("type",e),"");switch(e){case"REFRESHTOKEN":i=o.resource.SystemNotificationPopup.KeepWorking,t.on("click",function(){o.reloginToken?APUI.Fn.reloginToken(o.reloginToken,function(){o.hide()}):o.hide()}.bind(o));break;case"CLOSE":i=o.resource.SystemNotificationPopup.Button,t.on("click",o.hide.bind(o));break;case"LOGIN":i=o.resource.SystemNotificationPopup.ReLogin,t.on("click",function(){_logoutAMIS()}.bind(o));break;default:i=o.resource.SystemNotificationPopup.Button,t.on("click",o.hide.bind(o))}return t.text(i),t}this.getTenantsUrl="",this.isLoadTenants=!1,this.default={renderTo:$("body")},this.constructor=function(e){o.opts=$.extend(o.default,e),o.language=_getAppLanguage(),o.createDom(),o.initAction()},this.createDom=function(){o.resource=APCoreResource[o.language],o.resource||(o.resource=APCoreResource[PLATFORM_DEFAULT_LANGUAGE]),o.jObject=$(`<div class="apui-system-mask" style="display:none">
                <div class="apui-system-body"> 
                    <div class="icon-system-info"></div>
                    <p class="apui-system-des"></p>
                    <div class="apui-system-btns"></div>
                </div>
            </div>`),o.jObject.appendTo(o.opts.renderTo),o.jBtns=o.jObject.find(".apui-system-btns"),o.initAction()},this.hide=function(){o.jObject.fadeOut(100),o.jObject.find(".apui-system-des").html(""),o.jBtns.html(""),o.reloginToken="",o.btns=[],"function"==typeof o.onClose&&o.onClose()},this.show=function(e,t,i,n){o.jObject.find(".apui-system-des").html(e),o.jBtns.html(""),Array.isArray(t)?t.forEach(function(e){e=a(e);o.jBtns.append(e)}):(e=a("CLOSE"),o.jBtns.append(e)),o.onClose=n,o.reloginToken=i,o.jObject.fadeIn(100)},this.initAction=function(){o.jObject.on("click",".apui-system-btn",function(e){_stopEvent(e),o.hide()})}}),APUI.TenantBox=APUI.ModuleBase.extend(function(){var r=this;function c(s){r.jObject.addClass("loading"),APCore.Fn.get(APCore.API.getTenantsAPI,null,function(e){if(r.jObject.removeClass("loading"),e&&e.Success){e=e.Data;r.isLoadTenants=!0;let t=e.CurrentTenant||"";"function"==typeof r.opts.afterLoadData&&r.opts.afterLoadData(t,e.ListTenant);var i=e.ListTenant.firstOrDefault(function(e){return(e.TenantCode||"").toLowerCase()==t.toLowerCase()}),n=e.ListTenant.filter(function(e){return(e.TenantCode||"").toLowerCase()!=t.toLowerCase()});i=i,r.jObject.find(".apui-popup-current-tenant").first().find(".apui-current-tenant-name").text(i.TenantName),r.listTenants=Array.isArray(e.ListTenant)?e.ListTenant:[],1<r.listTenants.length?(i=n,n=e.MISAID,o=e.AccessToken.Token,(a=r.jObject.find(".apui-popup-list-tenants").first()).html(""),r.jObject.data("Token",o),r.jObject.data("MISAID",n),r.tenantSelectField=new APCore.Widgets.APSelectBox({renderTo:a,data:i,valueField:"TenantID",displayField:"TenantName",type:"radio",multiSelect:!1,groupName:"",direction:"vertical"})):r.jObject.find(".apui-popup-list-tenants").first().html("<div class='apui-popup-no-tenant'>"+r.resource.TenantsPopup_NoMoreTenant+"</div>"),"function"==typeof s&&s(e.AccessToken.Token)}var o,a})}function l(e){APCore.Fn.saveUserStorage(e);let t="/";var i=APCore.Fn.getInitData();i&&_isValue(i.ApplicationCode)&&-1<e.User.Applications.toLowerCase().indexOf(i.ApplicationCode.toLowerCase())&&(t=i.ApplicationURL),location.href=t}this.name="TenantBox",this.getTenantsUrl="",this.isLoadTenants=!1,this.default={renderTo:$("body"),afterLoadData:null},this.createDom=function(){r.jObject.appendTo(r.opts.renderTo),c()},this.hide=function(){r.jObject.fadeOut(100)},this.show=function(){r.hideLoading(),r.tenantSelectField&&r.tenantSelectField.setValue(null),r.jObject.fadeIn(100)},this.hideLoading=function(){r.jLoadingMark.hide(),r.jLoadingMark.find(".apui-popup-tenants-loading-name").text("")},this.initAction=function(){r.jObject.unbind("click"),r.jObject.on("click",".apui-popup-close",function(e){_stopEvent(e),r.hide()}),r.jObject.on("click",".btn-cancel",function(e){_stopEvent(e),r.hide()}),r.jObject.on("click",".btn-ok",function(e){var t;_stopEvent(e),r.tenantSelectField&&(e=r.tenantSelectField.getSelectedItems())?(e=e.data("Data"),t=e.TenantName,r.jLoadingMark.show(),r.jLoadingMark.find(".apui-popup-tenants-loading-name").text(t),function t(i,o,a,s,e){let n={TenantID:i,Token:e,IsSwitch:!0};_isValue(a)&&(n.Domain=a+"");APCore.Fn.post(APCore.API.loginWithTenantAPI,n,function(e){if(e.Success)l(e.Data);else{var n=e.SubCode;if(n==APLoginCode.LoginTenantWithDomain)location.href=e.Data;else if(n==APLoginCode.TokenInvalid)c(function(e){t(i,o,a,s,e)});else if(n==APLoginCode.SecurityRequire2FA)r.hide(),APUI.Fn.show2FAPopup(e.Data,function(e){e&&e.Success&&e.Data?l(e.Data):r.hideLoading()},function(e){e==MISAID2FAEventName.Close&&r.hideLoading(),r.show()});else{let t=APLoginMessage[_getAppLanguage()],i=(t=t||APLoginMessage[PLATFORM_DEFAULT_LANGUAGE],r.resource.Error);if(n==APLoginCode.BlockedBySecurityPolicy)i=t.BlockedBySecurityPolicy+" <b>{0}</b>".format(s.encodeHTML());else{let e=Object.keys(APLoginCode).firstOrDefault(function(e){return APLoginCode[e]==n});_isValue(e)&&(i=t[e])}setTimeout(function(){r.hideLoading(),r.notice.showError(i,6)},1e3)}}})}(e.TenantID,e.TenantCode,e.Domain,e.TenantName,r.jObject.data("Token"))):r.hide()})}}),APUI.UserControlPanel=APCore.Class.extend(function(){var n=this;function i(e){n.jObject.find("[type='"+e+"']").hide()}function o(e,t){new APCore.Widgets.Tooltip({trigger:n.jObject.find("[type='{0}']".format(e)),text:t,position:"bottom",exclude:"apui-headerbar-more-active",css:{width:"auto","min-height":"19px","font-size":"13px","text-align":"center",padding:"0 16px","line-height":"24px",opacity:"1","white-space":"nowrap"},delay:800})}this.default={renderTo:"#AMIS_UserControlPanel",mode:"dark",config:{CustomMenu:[],NotificationBox:{},HelpMenu:{items:"default"},MoreMenu:{items:"default",mobile:"default"},KnowledgeMenu:{blogID:5},MenuAccount:{}}},this.constructor=function(e){n.opts=$.extend(n.default,e),n.opts.config||(n.opts.config=n.default.default),n.currentLanguage=_getAppLanguage(),n.resource=APCoreResource[n.currentLanguage],n.resource||(n.resource=APCoreResource[PLATFORM_DEFAULT_LANGUAGE]),n.createDom()},this.initAction=function(){},this.createDom=function(){var e=APCore.Fn.getInitData(),t=(n.jObject=$(n.opts.renderTo),n.jObject.addClass("apui-user-controlpanel"),n.opts.config.CustomMenu);Array.isArray(t)&&0<t.length&&t.forEach(function(t){var e=document.createElement("div"),i=(e.id=t.id,["apui-user-controlpanel-item"]);"SettingMenu"==t.name&&("light"==n.opts.mode?i.push("apui-icon-setting-white"):i.push("apui-icon-setting-gray")),t.class&&i.push(t.class),e.setAttribute("class",i.join(" ")),e.setAttribute("type",t.name),n.jObject.append(e),o(t.name,t.tooltip),t.config&&Array.isArray(t.config.items)&&0<t.config.items.length&&(t.config.language=n.currentLanguage,t.config.boxSelector="#"+t.id,window.MISAMenu.init(t.config)),"function"==typeof t.onClick&&(e.onclick=function(e){t.onClick(t,e.target,e)})}),n.jObject.append("<div class='apui-user-controlpanel-item' type='NotificationBox' id='AMIS_Notification'></div>"),o("NotificationBox",n.resource.UserControlPanel.Tooltip_NotificationBox),n.jObject.append("<div class='apui-user-controlpanel-item' type='HelpMenu' id='MISA_ButtonHelp'></div>"),o("HelpMenu",n.resource.UserControlPanel.Tooltip_HelpMenu),n.jObject.append("<div class='apui-user-controlpanel-item' type='MoreMenu' id='MISA_MoreMenu'></div>"),o("MoreMenu",n.resource.UserControlPanel.Tooltip_MoreMenu),n.jObject.append("<div class='apui-user-controlpanel-item' type='KnowledgeMenu' id='MISA_Knowledge'></div>"),o("KnowledgeMenu",n.resource.UserControlPanel.Tooltip_KnowledgeMenu),n.jObject.append("<div class='apui-user-controlpanel-item' style='margin-left:4px' type='MenuAccount' id='User_Menu_Account'></div>"),APUI.NotificationBox&&n.opts.config.NotificationBox?(n.opts.config.NotificationBox.theme="light"==n.opts.mode?"light":"dark",n.NotificationBox=new APUI.NotificationBox(n.opts.config.NotificationBox)):i("NotificationBox"),window.MISAHelpMenu&&n.opts.config.HelpMenu?(n.opts.config.HelpMenu.language=n.currentLanguage,n.opts.config.HelpMenu.mode="light"==n.opts.mode?"light":"dark",window.MISAHelpMenu.init(n.opts.config.HelpMenu)):i("HelpMenu"),window.MISAMoreMenu&&n.opts.config.MoreMenu?(n.opts.config.MoreMenu.mode="light"==n.opts.mode?"light":"dark",n.opts.config.MoreMenu.language=n.currentLanguage,n.opts.config.MoreMenu._onItemClick=n.opts.config.MoreMenu.onItemClick,"default"==n.opts.config.MoreMenu.mobile&&(n.opts.config.MoreMenu.mobile={app_name:"MISAAMIS",qr_url:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKsAAACrCAYAAAAZ6GwZAAAABHNCSVQICAgIfAhkiAAACvNJREFUeF7tneGC2zgIBm/f/6HbpnEvycaSNQIUJzv397AsYPgEctp+/frz33/+ZwTeIAJfwvoGWXKLfyMgrILwNhEQ1rdJlRsVVhl4mwgI69ukyo02Yf36+jpldDIuL6K+nWEPreSQvUXjUAnInh/COhFxAkRr+SpQyN6q9jAR0qdHhHULSTRJBAhhnUNXWIX1gZxo0c5hOPaUsArrz4E14/gbq6ur1V7lkz1kKMduhScMn8SPaMwuzxM/qva250crR2FlXemEsBJEb7Yo+Y2iW5lntN/WbwOiqjYX6senontQWW/xVFkziOysIaw8wEipVFYeYHK9Q44olVVlzaPxYCWVlYdaZd1i1lK1qIKRdYltK9VEnQkupLhIzKp8zgCbxCfaN6PPrRlB23OOrEtshTWvDSDFReKOCibjNiDqCAGQ2JKgEYXI6LFJzKp8RqAU3S2jPQhrBqbXNWwD+rG0Ddjik6FUUWyFVVgfIkCGI3TEgDvH1YVR9b6M+JACV1nhR4WLeThooH8jxUV64Yx+XFhJqU1ciZHkZySDgE1uOkiYVNZtJviUAWsv+cLaL4mM+JCiI4Vf9qsrUvlEfcjAIqzXCKw+eYS1M+GvTgZRA1KIJMlEDFbHh/hBYvnRykpUmNgSxSawkj2Q45rAQ9YlBUOGP7SHT+lZo8nPUCRh9Z516J5VWImmbtN10d2yypp4zUXAtg3og01KxJ51YhgT1h+srKS6iC2Bqsr2zMpKemTiB+nfST6je0j5PWt0w63nqwAk65IAE3jIHsgkTkAjk/jKHF/eVXZ1tdIR8tvODFthrcruRCuScXVV5U5UfYS1nxmVNZFcYeWTuG3AwbVRIp8PSwmrsN4DgQasKijJuhlH+xmKILqH5hCy+KKf5I7Yhgcs8rIqW2G9RTZ8yQ5+RF6Vz9a6wrpFJqpqZygYlfUOc3K3t7LqzgDKGfYgrML6VHdnVWFhXSmRL3wXAZBsc/VpFO1ZiW9nsP2R/w6WsJ4BPb4HYU28Q1ZZOYDkCWEVVsLLS22FVVhfCiB5ubAKK+HlpbYI1oxf6ZDh5qy25KtLyzbqG93DyvdlcLLnn7AeKCsZmqK/eCIfG4T1QOQzKiZa4SShVbYUlF2V2PkuT/ZL9xCNO3lfBicq6xaBlYmzDbhFgJw8wiqsDwxUKflyZSXqM3rMXeyi1XUWpRr1uQqIy/tJP03G+KrPuGS/4Z8IEtCqqktYbxEgyRfWTgSE9RoclXWuuFTWTs9Kpt2zqLvKOjGEjPZv9qx5KmPPekedA1b/GB8tUNuAvAJN+YIVbd6rjtUMUIhvxHb1xJ0xHBP/9myjPgtrNAOTz0cTRwqctl9n7YWFdRK26GPCeo0guTUS1ih1k88Lq7A+oGPPeguHPesWi2ggos+3xI2sS3rAjCIgylrp3+itBjlAyuLzZ+Ffoxsh/UVG8qOBBK41Q0Cu8MhgIqx96tAXLAIKgYIkn+xh9KpktDD/2ZH9Cus1airrRk8UCGE9jgCJMREJsq7KepynJwuVlQdNZVVZn6gh7RdBjijgaZWVOJxhewZViwJBhlJie4kvgSrqx+qBOdwGZABI1hDW2oGF5EJYD6IlrMJ6jwj63JpRiWQNYRVWYd35DkL7xdGiI+sSW3vWuwwQVdtL3OrmP/o+CsqozxnXOK3CiA5NxOdT2LY+twpr/wgW1nZ8ysAW1mvQSYAzJmNyEqisW46EVVi/FwP5kc1SW2EVVmEF/3pddFDImIxtA27ILlVL8s93Zvyeda+nIgBW9W/vti7phS+2q2O8Ms/hz60k+asDSdRg9I60BQSJQ8ZwVKX6JA6VfowWAfqCRZIkrH0UMuKTsUYU2Ko9qKwTmVmp2LYBB32zPStXQHLCVB6fVapGarpqD0hZMxIy6nSGw2SNvX1l+Ev2EP1CmHEDQpW8Ip+ja/71l9yzkoWJbTTJdDIW1n52ooVL8kk4EdYtWtEE0YJRWQmmV1thFdYnaqKFq7IeQBUNUDRBKmt/kuc6+vyEyqqy/ixljd5FtlSRqB1RVtIvkj3sqQfxjfiQMcm/295SlFVY24fcuwHRuhI7QyEJ68YZgYr0X2TdMwAhrAfZJQltLUUSbRtwjSKJO4lvVYuisqqsQwPWx8BKBos924yfwFWtS1SYtAdkv2RdAlV0eGypM8knsq363JoRNLIGST5ZV1j7pUKG67CtsPaTIazC+hABchSQIzFjXWEVVmHdYaCqh8yYzsktDBEJZGsbYBtATqvvtuE+tOpPt0ac+vdsVD3I3SBRA+Jb1IfeHScZFKO3MFU+RwfY5i1DS1mJI8Q2mmhh5T0kyU9GyyCsWxSFVVgzim9oDZX1GqYM9bENGEJu3khYhfWenpTbgHkc+XRN3mUbYBtAeHmyrVLL6GRMnCLHMlk3Gptey0DWJv6RdUkrQtbdvRLLuA0gmyDOCWu/ZSBxF9aNJhI0YSW6LKwP/a3Kygceglu0kG0DbtFGf4tgK0nRhKw8olo+kD0I69yQRzhBPWt0YZJQUgQZUEV9iz5/8TdjjZU9fVWRp1xdVQWTQFz187yob9HnhfXuaM/4IUtGQgiYoyqhsvajSvIWzU+vnx5dW2U9iBRJKPkJHLnpiO6BtE6j4MzYRcVDWIV1hrupZ4R1C5s9K79WI4o9Ree3h04Ba4YjK9cgSVoa4IR/D4z4doqpnQxNxDbjo8BKKDN6NWHlGUO9JQGQ2ArraxJXNYyprDyfy58gR6XKytOjsvKYNZ8Q1n4wz1Cg5Bqw7HNrInOHS5GgEzU4fPGAASmYgeX+N6n6wTmJD7ElvpF1U/4WQbK5qK2w3iJIiiOsamAQIjkW1s497eV/EeAzAk/WqBq8hDWahYnnCWikaie28vQIUTryPtuAa7RsAwg1B7bCyoNJBEVYeXxTbiTIa1XWCWUlRzBJRss2+tuADKWL9nokDhn7bb0vmjuyt7Lian3BioJCkiSsm3KA3xHQ+AorjRi0jxYMUQOiSKTPIi5n7Jf4UbU3lXWLLFGIjOTbBnDVF1ZhJUL4ZEuKfO9FpPBPDStxZC8QxDliS45EcrRH/b3si8CT8b4Q6Z2Ho36g5zMGrGgwCYDEVlirEL2ti2DbGSDR88La78lIz0rQQEkqvCUgeyan4mgrgeIgrMIaARbBprLmTKv2rHPICusWN3LPSvpmcrQTW5LuaJLJuypto36g5z+lDRjtkTISR4Y8YksGQupHtPCJHxm2u/kUVpr29rVTFAhh7ecC/eqKVAxBgKyLjo2iKTpjv9G2hcT3YhstpCqfUT5VVpp2lfU+YlVFYBvAudx9okplbAN+cBvQcp2oQRLfT8tk7IG0EuRCP7q36L4ue929hfnkNkBY+6WWcUJU3cII68T9rcp6jQAahBIGW2EV1ofaU1knpKgqaLYBtgFDwwJhVlj5Udu6Oz1D3E89YJEAEVsylZIARfsv8nzU397z0X1kxGxljlK+YJGEENuVgThDy0DgoUNPdGrPOP2If2UDFgGQ2ArrXM85GuMoPK1WhIDd2quwbpEhxycpmFFIiIrbBtwiYBtwQJiw9oc/Ep+okiNYo8qR8TxRRfI+8icFqtYlySR7IEdthuqTNoDkU1i37AhrH39SSMI60W8S9RFWYSW8DNmSY2NoQZV1KEwq61CYHo2EdSJojUdILIV1Iu4kwGR524A3bgNIorU1Aisi0LwNWPFy32EESASElURL25dGQFhfGn5fTiIgrCRa2r40Ar8Bm0NH/2/Q6BMAAAAASUVORK5CYII=",links:{ios:"https://apps.apple.com/vn/app/misa-amis/id1521979495",android:"https://play.google.com/store/apps/details?id=vn.com.misa.amis&hl=vi"}},n.opts.config.MoreMenu.resource=n.opts.config.MoreMenu.resource||{},n.opts.config.MoreMenu.resource.vi=n.opts.config.MoreMenu.resource.vi||{},n.opts.config.MoreMenu.resource.en=n.opts.config.MoreMenu.resource.en||{},n.opts.config.MoreMenu.resource.vi.mobile={MISAAMIS:{title:APCoreResource.vi.AppMISAAMIS_Title,description:APCoreResource.vi.AppMISAAMIS_Des}},n.opts.config.MoreMenu.resource.en.mobile={MISAAMIS:{title:APCoreResource.en.AppMISAAMIS_Title,description:APCoreResource.en.AppMISAAMIS_Des}}),n.opts.config.MoreMenu.onItemClick=function(e,t,i){switch(e){case"ServiceAgreement":APCore.Fn.openAgreementHistory(1);break;case"PrivacyPolicy":APCore.Fn.openAgreementHistory(2);break;case"TermsOfPurchase":APCore.Fn.openAgreementHistory(3);break;case"NPS":APUI.Fn.getSurveyInfo(function(e){APUI.Fn.showNPSBox()});break;case"ServiceInfo":t.custom?_isFn(n.opts.config.MoreMenu._onItemClick)&&n.opts.config.MoreMenu._onItemClick(e,t,i):APCore.Fn.openLicensePage();break;default:_isFn(n.opts.config.MoreMenu._onItemClick)&&n.opts.config.MoreMenu._onItemClick(e,t,i)}},window.MISAMoreMenu.init(n.opts.config.MoreMenu)):i("MoreMenu"),window.MKLMenu&&n.opts.config.KnowledgeMenu?window.MKLMenu.init({user:e.User.MISAID,blogID:n.opts.config.KnowledgeMenu.blogID,language:n.currentLanguage}):i("KnowledgeMenu"),n.opts.config.MenuAccount||(n.opts.config.MenuAccount={}),n.opts.config.MenuAccount.trigger="#User_Menu_Account",n.MenuAccount=new APUI.AccountMenu(n.opts.config.MenuAccount)},this.showNewFeature=function(){window.MISAMoreMenu&&window.MISAMoreMenu.showNewFeature()}}),APUI.Fn.showAccountInfo=function(e){let t=APCore.API.accountInfo;"security"==e?t=APCore.API.accountSecurity:"changepassword"==e?t=APCore.API.accountChangePassword:"loyalty"==e&&(e=APCore.Fn.getInitData(),t=APCore.API.accountLoyalty+encodeURIComponent("Platform-"+e.ApplicationCode));APCore.Fn.get(t,null,function(e){e&&e.Success?_openNewTab(e.Data):!e||1002!=e.SubCode&&1!=e.SubCode?console.log(e):(e={title:(e=APCoreResource[_getAppLanguage()]).AccountInfo_Title,content:e.AccountInfo_Content,cancelText:e.AccountInfo_Cancel,okText:e.AccountInfo_OK,okClick:function(){_logoutAMIS()}},APUI.Dialog.confirm(e))})},APUI.Fn.initHeaderNotify=function(e,t,i,n,o){"Misajsc"!==AMISPlatformConfig.Environment&&(i=i||30,APUI._HeaderLicenseNotify||(APUI._HeaderLicenseNotify=new APUI.HeaderNotify),APUI._HeaderLicenseNotify.loadData({leftDays:e,isTrial:t,leftDaysLimit:i,afterShow:n,afterHide:o}))},APUI.Fn.showFeedbackBox=function(){console.log("Not support from v3.4.0")},APUI.Fn.addTracking=function(e,t,i,n){return _isValue(e)||(e=_newGuid()),APUI.TrackingBox||(APUI.TrackingBox=new APCore.Widgets.TrackingBox,APCore.Fn.onSocketDataChange("tracking_box_ondatachange",function(e){var t,i=APCore.Fn.getInitData();if(i.User=i.User||{},e&&e.UserID==i.User.UserID)try{"Tracking"==e.Action&&(t=JSON.parse(e.Data))&&t.TrackingID&&APUI.Fn.updateTracking(t.TrackingID,t,t.Title,t.Percent,!t.Success)}catch(e){console.log(e)}})),APUI.TrackingBox.add(e,t,i,n),e},APUI.Fn.updateTracking=function(e,t,i,n,o){APUI.TrackingBox&&APUI.TrackingBox.update(e,t,i,n,o)},APUI.Fn.showLoadingBox=function(e){APUI.LoadingBox||(APUI.LoadingBox=new APCore.Widgets.APLoadingBox),APUI.LoadingBox.show(e)},APUI.Fn.hideLoadingBox=function(){APUI.LoadingBox&&APUI.LoadingBox.hide()},APUI.Fn.showStartupSetting=function(){APUI.StartupSetting||(APUI.StartupSetting=new APUI.StartupSettingBox),APUI.StartupSetting.show()},APUI.Fn.reloginToken=function(e,t){APCore.Fn.postService(AMISPlatformConfig.API.AuthenAPI+"/api/Account/reloginbytoken",{Token:e},function(e){e&&e.Success&&(e=e.Data,APCore.Fn.saveUserStorage(e),APUI.Fn.cacheLauncherApps(null),__appInfo&&"Launcher"==__appInfo.ApplicationCode?_launcher&&_launcher.loadData():window._amisLauncher&&window._amisLauncher.loadData()),_isFn(t)&&t()})},APUI.Fn.previewFile=function(e){APUI.PreviewBox||(APUI.PreviewBox=new APCore.Widgets.PreviewBox),APUI.PreviewBox.show({FileName:e.FileName,FileSize:e.FileSize,FileType:e.FileType,URL:e.URL,UploadBy:e.UploadBy,UploadDate:e.UploadDate,Download:e.DownloadURL})},APUI.Fn.getAvatarURL=window.APCore.Fn.getAvatarURL,APUI.Fn.getCurrentUserAvatar=window.APCore.Fn.getCurrentUserAvatar,APUI.Fn.getCurrentUserAvatarURL=window.APCore.Fn.getCurrentUserAvatarURL,APUI.Fn.getUserAvatar=window.APCore.Fn.getUserAvatar,APUI.Fn.getImage=window.APCore.Fn.getImage,APUI.Fn.getFullImageURL=window.APCore.Fn.getFullImageURL,APUI.Fn.getImageURL=window.APCore.Fn.getImageURL,APUI.Fn.logoutAMIS=window.APCore.Fn.logoutAMIS,window._showLoadingBox=APUI.Fn.showLoadingBox.bind(APUI),window._hideLoadingBox=APUI.Fn.hideLoadingBox.bind(APUI),APUI.Fn.init=function(t,i,n,o,a){var s=this;APUI._initok=!0;try{APCore.Fn.setCurrentUser(t,i);let e=APCore.Fn.getInitData();e.NoLicense=_isTrue(a),e.Version=n,o&&"string"==typeof o&&(e.ApplicationName=o),APUI.Cache.CurrentUser_Data=e.User,APCore.INFO+="\n\n=========== LOGS =========",APCore.Fn.logTrace("call apui.init"),APUI.Fn.renderMenuAccount(),window._manualLauncher||APUI.Cache.isInitLauncher||APUI.Fn.initLauncher(),APUI.Fn.checkAgreement(),APCore.Fn.getStartupData(function(t){t&&(APCore.INFO+="\n\n=========== STARTUP DATA =========",Object.keys(t).forEach(function(e){"object"==typeof t[e]?APCore.INFO+="\n"+e+"="+APCore.Fn.serialize(t[e]):APCore.INFO+="\n"+e+"="+t[e]})),e.NPS&&e.NPS.Enable?s.initNPS():APCore.Fn.logTrace("nps is not config or disable")}),e&&e.AVA&&e.AVA.Chat&&1==e.AVA.Chat.Enable&&1==e.AVA.Chat.Auto&&(APCore.Fn.logTrace("Auto init AVA"),APUI.AVA.init()),setTimeout(function(){APCore.Fn.initSocket(),s.initSystemNotification()},2e3),APCore.Fn.checkSessionChanged()}catch(e){console.log(e)}},APUI.Fn.initUserPanel=function(e){return new APUI.UserControlPanel(e)},function(n,e){e.renderMenuAccount=function(e,t){try{e=e||"#AMIS_Account",0<$(e).length&&(Array.isArray(t)||(t=[]),window._amisAccountMenu=new n.AccountMenu({trigger:e,extendItems:t})),APCore.Fn.logTrace("render menu account to "+e)}catch(e){console.log(e)}}.bind(n),e.createAccountMenu=function(e,t,i){try{_isValue(t)||(t=localStorage.getItem(APSTORAGE_KEY.FullName)),window._amisAccountMenu=new n.AccountMenu({trigger:e||"#AMIS_Account",userName:t,extendItems:i||[]})}catch(e){console.log(e)}}.bind(n)}(APUI,APUI.Fn),function(i,e){function o(e){e={Background:e.Background,FixedApp:e.FixedApp,StartupMode:e.StartupMode};localStorage.setItem(APSTORAGE_KEY.LauncherConfig,btoa(APCore.Fn.serialize(e)))}function n(){var e=localStorage.getItem(APSTORAGE_KEY.LauncherConfig);let t={};if(e)try{t=APCore.Fn.deserialize(atob(e))}catch(e){}return t}function s(e){return Array.isArray(e)&&0<e.length?(e=e.map(function(e){let i={},n=APCore.Fn.deserialize(e.ApplicationInfo);return Object.keys(n).forEach(function(e){var t=APCore.Fn.deserialize(n[e]);t&&"object"==typeof t&&(i[e]={Description:t.Description,ApplicationName:t.ApplicationName})}),e.ApplicationInfo=$.extend({},i),{ApplicationInfo:e.ApplicationInfo,FullLogoURL:e.FullLogoURL,LogoURL:e.LogoURL,URL:e.URL,ApplicationCode:e.ApplicationCode,ApplicationCategoryID:e.ApplicationCategoryID,CategoryName:e.CategoryName,CategorySortOrder:e.CategorySortOrder,IsHidden:e.IsHidden,IsFree:e.IsFree,IsFavorite:e.IsFavorite}}),localStorage.setItem(APSTORAGE_KEY.Launcher_Apps,APCore.Fn.serialize(e)),localStorage.setItem(APSTORAGE_KEY.LauncherLoadTime,(new Date).toISOString()),localStorage.setItem(APSTORAGE_KEY.LauncherID,_newGuid()),e):(r(),[])}function r(){delete localStorage[APSTORAGE_KEY.LauncherConfig],delete localStorage[APSTORAGE_KEY.Launcher_Apps],delete localStorage[APSTORAGE_KEY.LauncherLoadTime],delete localStorage[APSTORAGE_KEY.LauncherID]}function a(i,e){e=!!e;let n=[];APCore.Fn.get(APCore.API.getSubAppsAPI,{reset:e},function(e){var a,t;e&&e.Success?(r(),e=e.Data||{},n=(n=e.Applications||[]).filter(function(e){return!e.ApplicationCode.equals("Apps",!0)}),t=e.Categories,a={},(t=Array.isArray(t)?t:[]).forEach(function(i){var n=APCore.Fn.deserialize(i.ApplicationCategoryInfo)||{},o={};a[i.ApplicationCategoryID]={},_isValue(n)&&"object"==typeof n&&Object.keys(n).forEach(function(e){var t=(t=n[e])||n[PLATFORM_DEFAULT_LANGUAGE];o[e]=t.Name||i.ApplicationCategoryName,"string"!=typeof o[e]&&(o[e]=i.ApplicationCategoryName)}),a[i.ApplicationCategoryID].Name=o,a[i.ApplicationCategoryID].NameDefault=i.ApplicationCategoryName,a[i.ApplicationCategoryID].SortOrder=i.SortOrder}),Array.isArray(n)&&n.forEach(function(e){var t;e.FullLogoURL=(t=(t=e).LogoURL,_isValue(t)?(t=t.trim()).startWith("<svg")?t:t.startWith("http://")||t.startWith("https://")?t:AMISPlatformConfig.CDNFilePath.cdnLogoURL+t+"?_="+AMISPlatformConfig.LogoVersion:AMISPlatformConfig.CDNFilePath.cdnLogoURL+"default.svg"),a[e.ApplicationCategoryID]&&(e.CategoryName=a[e.ApplicationCategoryID].Name,e._id=_newGuid(),e.CategoryNameDefault=a[e.ApplicationCategoryID].NameDefault,e.CategorySortOrder=a[e.ApplicationCategoryID].SortOrder)}),o(e),t=s(n),"function"==typeof i&&i(t,e)):"function"==typeof i&&i([])})}function t(e,t,i){if(i=!!i,t)a(e,i);else{var t=localStorage.getItem(APSTORAGE_KEY.LauncherLoadTime),n=null;if(_isValue(t))try{var o=new Date(t);15<=APCore.Fn.Date.diffByUnit(new Date,o,"minutes")&&(delete localStorage[APSTORAGE_KEY.Launcher_Apps],n=null)}catch(e){console.log(e)}else n=null;t=localStorage.getItem(APSTORAGE_KEY.Launcher_Apps);if(_isValue(t))try{n=(n=t?APCore.Fn.deserialize(t):null).filter(function(e){return!e.ApplicationCode.equals("Apps",!0)})}catch(e){delete localStorage[APSTORAGE_KEY.Launcher_Apps],n=null}else n=null;n?"function"==typeof e&&e(n,n):a(e,i)}}e.cacheLauncherConfig=o.bind(i),e.getCacheLauncherConfig=n.bind(i),e.cacheLauncherApps=s.bind(i),e.initLauncher=function(e){try{var t=null;window.__appInfo&&window.__appInfo.Dock&&(t=window.__appInfo.Dock),e=e||"#AMIS_Launcher",window._amisLauncher=new i.AMISLauncher({trigger:e,dockConfig:t}),APCore.Fn.logTrace("init launcher"),i.Cache.isInitLauncher=!0}catch(e){console.log(e)}}.bind(i),e.refreshLauncher=function(e){r(),setTimeout(function(){t(function(){},!0,!0)},500)}.bind(i),e.loadLauncherData=a.bind(i),e.updateLauncherStartup=function(t,i){t=parseInt(t);var e={Mode:t=isNaN(t)?0:t,Value:i};APCore.Fn.post(APCore.API.setLauncherStartupApi,e,function(e){e&&e.Success&&(((e=n()).StartupMode=t)==APStartupMode.FixedApplication&&(e.FixedApp=i),o(e))})}.bind(i),e.getLauncherApps=t.bind(i),e.getAppNameByCulture=function(t){var e="",i=_getAppLanguage();try{"string"==typeof t.ApplicationInfo&&(t.ApplicationInfo=JSON.parse(t.ApplicationInfo));e=(_isValue(t.ApplicationInfo[i])?t.ApplicationInfo[i]:t.ApplicationInfo.vi).ApplicationName}catch(e){console.log(t.ApplicationInfo)}return e}.bind(i),e.getAppDescriptionByCulture=function(t){var e="",i=APCore.Fn.getAppLanguage();try{"string"==typeof t.ApplicationInfo&&(t.ApplicationInfo=JSON.parse(t.ApplicationInfo));e=(_isValue(t.ApplicationInfo[i])?t.ApplicationInfo[i]:t.ApplicationInfo.vi).Description}catch(e){console.log(t.ApplicationInfo)}return e}.bind(i)}(APUI,APUI.Fn),function(a,e){function t(t){var i=APCore.Fn.getInitData();if(i.User=i.User||{},t&&t.UserID==i.User.UserID)if(i&&i.SystemNotify&&"Disable"==i.SystemNotify[t.Action])APCore.Fn.logLocal("Notification for action="+t.Action+" is disabled");else{i=APCore.Fn.deserialize(t.Data);i.PermissionAction=t.Action;let e="";i.Message?e=i.Message:(e=APCoreResource[_getAppLanguage()].SystemNotificationPopup[t.Action],_isValue(e)&&(t=(t=i.AppInfo)[_getAppLanguage()]||t[PLATFORM_DEFAULT_LANGUAGE],e=e.formatData({AppName:t,RoleName:i.RoleName}))),_isValue(e)&&n(e,i)}}function n(e,t,i){a.NotificationSystemPopup||(a.NotificationSystemPopup=new a.SystemPopup);var n,o=t.Buttons;_isFn(window._beforeShowSystemNotification)&&(n=window._beforeShowSystemNotification(t))&&n.Buttons&&(o=n.Buttons),a.NotificationSystemPopup.show(e,o,t.ReLoginToken,i)}e.getAllNotificationNumbers=function(i){var e=localStorage.getItem(APSTORAGE_KEY.LauncherNotification);if(_isValue(e)){var e=APCore.Fn.deserialize(e),t=new Date(e.Time);try{if(APCore.Fn.Date.diffByUnit(new Date,t,"minute")<5)return void(_isFn(i)&&i(e.Data))}catch(e){console.log(e)}}APCore.Fn.post(APCore.API.getAllNotificationNumbers,null,function(e){var t;e&&e.Success?(t=e.Data,e={Time:(new Date).toISOString(),Data:e.Data},localStorage.setItem(APSTORAGE_KEY.LauncherNotification,APCore.Fn.serialize(e)),_isFn(i)&&i(t)):_isFn(i)&&i(null)})}.bind(a),e.initSystemNotification=function(){APCore.Fn.onSocketDataChange("system_notification_datachange",t,"AMISPlatformSystem")}.bind(a),e.showNotificationPopup=n.bind(a)}(APUI,APUI.Fn),function(h,e){function m(e){APCore.MonitorData.IsNotShowNPS=!0,APCore.Fn.logTrace(e)}function t(e){try{if(!APCore.MonitorData.IsNotShowNPS){var t=APCore.Fn.getInitData();if(APCore.MonitorData.InitNPS)if(APCore.MonitorData.DisableNPS)APCore.Fn.logTrace("Disable nps");else{if(t.User.FirstAccess){var i=new Date(t.User.FirstAccess),n=APCore.Fn.Date.diffByUnit(new Date,i,"days");if(n<t.NPS.MinDays)return void m("NPS not show: Chưa đủ ngày dùng app "+n)}else{var o=v();if(APCore.MonitorData&&APCore.MonitorData[o]){var a=new Date(APCore.MonitorData[o]),s=APCore.Fn.Date.diffByUnit(new Date,a,"days");if(s<t.NPS.MinDays)return void m("NPS not show: Chưa đủ ngày dùng app "+s)}}var r,c=I();if(APCore.MonitorData&&APCore.MonitorData[c]){let e=!0;if(e=0<t.NPS.ReSurveyMonths&&(r=new Date(APCore.MonitorData[c]),APCore.Fn.Date.diffByUnit(new Date,r,"months")>t.NPS.ReSurveyMonths)?!1:e)return void m("NPS not show: Đã hoàn thành khảo sát")}var l=C();if(APCore.MonitorData&&APCore.MonitorData[l]){var u=new Date(APCore.MonitorData[l]);if(APCore.Fn.Date.diffByUnit(new Date,u,"days")<APNPSParam.ShowRangeDays)return void m("NPS not show: Chưa đủ "+APNPSParam.ShowRangeDays+" ngày từ lần khảo sát cuối cùng")}var d=y();if(APCore.MonitorData&&APCore.MonitorData[d]){APCore.Fn.sendEvent(h.NPS_EVENT.NPS_UserCanceled,APCore.MonitorData),f();var p=new Date(APCore.MonitorData[d]);if(e)return;var g="NPS_CancelCount_"+t.ApplicationCode;if(APCore.MonitorData[g]>=t.NPS.CancelNumber){if(t.NPS.ForceSurvey)if(APCore.Fn.Date.diffByUnit(new Date,p,"days")>=t.NPS.CancelDays)return void A(!0);if(!(t.NPS.ReSurveyCancelDays&&0<t.NPS.ReSurveyCancelDays))return;if(APCore.Fn.Date.diffByUnit(new Date,p,"days")<t.NPS.ReSurveyCancelDays)return;b()}else if(APCore.Fn.Date.diffByUnit(new Date,p,"days")<t.NPS.CancelDays)return}e||A()}}}catch(e){console.log(e)}}function f(){APCore.Fn.logLocal("show NPS button");var e=APCore.Fn.getInitData();e.NPS&&e.NPS.ButtonID&&$(e.NPS.ButtonID)&&((e=$(e.NPS.ButtonID)).show(),e.unbind("click.nps").on("click.nps",function(e){h.Fn.getSurveyInfo(function(e){h.Fn.showNPSBox()})}))}function b(){var e={appCode:APCore.Fn.getInitData().ApplicationCode};APCore.Fn.getService(APCore.API.resetSurvey,e)}function y(){return"NPS_CancelTime_"+APCore.Fn.getInitData().ApplicationCode}function I(){return"NPS_FinishTime_"+APCore.Fn.getInitData().ApplicationCode}function v(){return"FirstAccess_"+APCore.Fn.getInitData().ApplicationCode}function C(){return"NPS_LastFinishTime"}function A(e){var t,i,n=h.Cache.NPS_SurveyID;n?(t=APCore.Fn.getInitData(),h.SurveyNPSBox||(h.SurveyNPSBox=new h.NPSBox2({requireComment:_isTrue(t.NPS.RequireComment),requireNumberPhone:_isTrue(t.NPS.RequireNumberPhone)})),e&&h.SurveyNPSBox.setForce(),i=function(e){h.SurveyNPSBox.show(n,e,function(e){e&&(e=e.data)&&(e.eventId==APNPSConstant.saveEventID?o():e.eventId==APNPSConstant.cancelEventID&&(h.SurveyNPSBox.hide(),h.SurveyNPSBox.afterCancel(),APCore.MonitorData[y()]=new Date,APCore.Fn.sendEvent(h.NPS_EVENT.NPS_UserCancelSurvey,APCore.MonitorData),f()))}.bind(h)),APCore.MonitorData[y()]=new Date},t.NPS.RequireNumberPhone&&!t.User.Mobile?APCore.Fn.getService(APCore.API.getPhoneNumber,null,function(e){i(e.Data)}):i(t.User.Mobile)):APCore.Fn.logTrace("can not show NPS because SurveyID is null")}function o(){var e;APCore.MonitorData[I()]=new Date,APCore.MonitorData[C()]=new Date,APCore.Fn.sendEvent(h.NPS_EVENT.NPS_UserSubmitSurvey,APCore.MonitorData),APCore.Fn.logLocal("hide NPS button"),(e=APCore.Fn.getInitData()).NPS&&e.NPS.ButtonID&&$(e.NPS.ButtonID)&&$(e.NPS.ButtonID).hide()}function i(t){var e;h.Cache.NPS_SurveyID?"function"==typeof t&&t(h.Cache.NPS_SurveyID):(e={appCode:APCore.Fn.getInitData().ApplicationCode},APCore.Fn.getService(APCore.API.getSurveyInfo,e,function(e){e&&e.Success&&e.Data&&(h.Cache.NPS_SurveyID=e.Data.ID,APCore.Fn.logTrace("get npsid: "+h.Cache.NPS_SurveyID)),"function"==typeof t&&t(h.Cache.NPS_SurveyID)}))}h.NPS_EVENT={NPS_UserSubmitSurvey:"NPS_UserSubmitSurvey",NPS_UserCancelSurvey:"NPS_UserCancelSurvey",NPS_UserCanceled:"NPS_UserCanceled"},APCore.MonitorData.IsNotShowNPS=!1,e.afterNPSSubmit=o.bind(h),e.checkSurvey=t.bind(h),e.showNPSBox=A.bind(h),e.getSurveyInfo=i.bind(h),e.initNPS=function(){try{var e=APCore.Fn.getInitData();"Misajsc"!==AMISPlatformConfig.Environment&&e&&e.ApplicationCode&&e.NPS&&e.NPS.Enable?(e.NPS.CancelNumber||(e.NPS.CancelNumber=APNPSParam.CancelNumber),e.NPS.CancelDays||(e.NPS.CancelDays=APNPSParam.CancelDays),_isValue(e.NPS.MinDays)||(e.NPS.MinDays=APNPSParam.MinDays),i(function(){APCore.MonitorData.InitNPS=!0,h.Cache.NPS_SurveyID&&t(!0)})):APCore.Fn.logTrace("init nps: survey is disabled")}catch(e){console.log(e)}}.bind(h),e.resetNPS=b.bind(h),e.getNPSMonitorKey=function(){return{LastFinishTimeKey:C(),FirstAccessKey:v(),FinishedKey:I(),CancelKey:y(),CancelCount:"NPS_CancelCount_"+APCore.Fn.getInitData().ApplicationCode}}.bind(h)}(APUI,APUI.Fn),APUI.Fn.show2FAPopup=function(e,t,i){APUI.oSecurity2FABox||(APUI.oSecurity2FABox=new APUI.Security2FABox),APUI.oSecurity2FABox.show(e,t,i)},function(e,t){const n="apcore_ava_config",o="ava_connection_info";let a,s,r={},c,l=null;function u(){r.getConnection=g,r.processFunctionCalling=p,r.buildProfileURL=i,a&&a.init(r)}function i(e){return"/newsfeed/profile?userID="+encodeURIComponent(e)}function d(t){if(c)"function"==typeof t&&t(c);else{let e=sessionStorage.getItem(n);var i;(e=e&&APCore.Fn.deserialize(e))?(c=e,"function"==typeof t&&t(c)):(i=APCore.API.getAVAConfig,APCore.Fn.get(i,{},function(e){e?(c=e,sessionStorage.setItem(n,APCore.Fn.serialize(e))):(e={},c=e),"function"==typeof t&&t(c)}))}}function p(e,t){var i=APCore.API.getAVAReport;APCore.Fn.post(i,e,function(e){_isFn(t)&&t(e)})}function g(t,i){d(function(){var e;_isFn(l)?l(t,i):(s||t||(e=localStorage.getItem(o))&&(s=APCore.Fn.deserialize(e)),(s=s&&s.tokenExpired&&new Date(s.tokenExpired)<new Date?null:s)?"function"==typeof i&&i(s):(e=APCore.API.connectAVA+"?ver="+c.version,APCore.Fn.get(e,{},function(e){s=e?(e.tokenExpiredSeconds&&(e.tokenExpired=(new Date).addSeconds(parseInt(e.tokenExpiredSeconds,10)).toISOString(),delete e.tokenExpiredSeconds),localStorage.setItem(o,APCore.Fn.serialize(e)),e):null,"function"==typeof i&&i(s)})))})}t.init=function(e){l=e,r={icon:{},user:{}},(e=APCore.Fn.getInitData())&&e.AVA&&e.AVA.Chat&&e.AVA.Chat.Enable?(e.AVA.Chat.Icon||(e.AVA.Chat.Icon={}),r.icon.selector=e.AVA.Chat.Icon.Selector||"#ava-icon",r.icon.width=e.AVA.Chat.Icon.Width,r.icon.height=e.AVA.Chat.Icon.Height,r.icon.src=e.AVA.Chat.Icon.URL,e=e.User,r.user.UserID=e.UserID,r.user.FullName=e.FullName,r.user.Gender=e.Gender,r.user.Avatar=APCore.Fn.getAvatarURL(e.UserID),d(function(e){var t,i,n;r.avaLoader=e.avaLoader,r.version=e.version,r.icon.src||(r.icon.src=e.iconURL),r.user||(r.user={}),window[e.objName]?(a=window[e.objName],u()):e.js&&(t=e.js,i=function(){a=window[e.objName],u()},(n=document.createElement("script")).onload=function(){"function"==typeof i&&i()},n.src=t,document.head.appendChild(n))})):APCore.Fn.logTrace("Disable AVA Chat")}.bind(e),t.connect=function(e){g(!1,e)}.bind(e),t.refreshConnection=function(e){g(!0,e)}.bind(e)}(APUI,APUI.AVA={}),APUI.Fn.checkAgreement=function(){console.log("need to override APUI.Fn.checkAgreement"),APCore.Fn.logTrace("check agreement: need to override APUI.Fn.checkAgreement")},APUI.Fn.showAgreementBox=function(e,t){console.error("APUI.Fn.showAgreementBox do nothing")},function(t,e){e.NPS=function(){t.Cache.NPS_SurveyID=_getGuidEmpty(),t.Fn.getSurveyInfo(function(e){t.Fn.showNPSBox(),APCore.Fn.trace()})},e.HeaderNotify=function(){t.Cache.IsTestHeaderNotify=!0,t.Fn.initHeaderNotify(10,!1,30)},e.HeaderNotifyTrial=function(){t.Cache.IsTestHeaderNotify=!0,t.Fn.initHeaderNotify(10,!0,30)},e.OpenStore=function(e){APCore.Fn.openMISAStore(e),APCore.Fn.trace()},e.Trace=APCore.Fn.trace}(APUI,APUI.Test={});